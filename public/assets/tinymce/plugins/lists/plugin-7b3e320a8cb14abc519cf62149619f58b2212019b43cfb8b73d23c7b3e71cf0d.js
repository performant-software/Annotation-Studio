!function(i){"use strict";function e(){}function u(e){return function(){return e}}function o(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!n.apply(null,e)}}function t(){return ot}function n(e){return e.isNone()}function r(e){return e()}function s(e){return e}function a(t){return function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===t}}function c(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function f(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function d(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function l(e,t,n){return f(e,function(e){n=t(n,e)}),n}function m(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return ut.some(o)}return ut.none()}function g(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!at(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);mt.apply(t,e[n])}return t}(c(e,t))}function p(e){return 0===e.length?ut.none():ut.some(e[0])}function v(e){return 0===e.length?ut.none():ut.some(e[e.length-1])}function h(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}function N(e,t){function n(e){return Number(t.replace(r,"$"+e))}var r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}return undefined}(e,t);return r?ht(n(1),n(2)):{major:0,minor:0}}function y(e,t){return function(){return t===e}}function S(e,t){return function(){return t===e}}function O(e,t){var n=String(t).toLowerCase();return m(e,function(e){return e.search(n)})}function C(e,t){return-1!==e.indexOf(t)}function b(t){return function(e){return C(e,t)}}function L(e,t){return e.dom()===t.dom()}function T(e,t,n){return e.isSome()&&t.isSome()?ut.some(n(e.getOrDie(),t.getOrDie())):ut.none()}function D(e){return ut.from(e.dom().parentNode).map(jt.fromDom)}function E(e){return c(e.dom().childNodes,jt.fromDom)}function w(e,t){var n=e.dom().childNodes;return ut.from(n[t]).map(jt.fromDom)}function k(e){return w(e,0)}function A(e){return w(e,e.dom().childNodes.length-1)}function x(t,n){D(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})}function R(e,t){e.dom().appendChild(t.dom())}function I(t,e){f(e,function(e){R(t,e)})}function _(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)}function B(e,t,n){return e.fire("ListMutation",{action:t,element:n})}function P(e,r){return function(e){for(var t=r!==undefined&&null!==r?r:Qt,n=0;n<e.length&&t!==undefined&&null!==t;++n)t=t[e[n]];return t}(e.split("."))}function M(e){return e&&"BR"===e.nodeName}function U(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",gn(e,t))}function F(e){var t,n,r,o=e.selection.getSelectedBlocks();return Zt.grep((t=e,n=o,r=Zt.map(n,function(e){return t.dom.getParent(e,"li,dd,dt",gn(t,e))||e}),Jt.unique(r)),function(e){return on(e)})}function j(e,t){return v(e.dom.getParents(t,"ol,ul",gn(e,t)))}function H(e,t){var n,r,o,i,u=e.dom,s=e.schema.getBlockElements(),a=u.createFragment();if(e.settings.forced_root_block&&(o=e.settings.forced_root_block),o&&((r=u.create(o)).tagName===e.settings.forced_root_block&&u.setAttribs(r,e.settings.forced_root_block_attrs),fn(t.firstChild,s)||a.appendChild(r)),t)for(;n=t.firstChild;){var c=n.nodeName;i||"SPAN"===c&&"bookmark"===n.getAttribute("data-mce-type")||(i=!0),fn(n,s)?(a.appendChild(n),r=null):o?(r||(r=u.create(o),a.appendChild(r)),r.appendChild(n)):a.appendChild(n)}return e.settings.forced_root_block?i||r.appendChild(u.create("br",{"data-mce-bogus":"1"})):a.appendChild(u.create("br")),a}function $(e){return e.dom().nodeName.toLowerCase()}function q(e,t){var n=e.dom();!function(e,t){for(var n=Xt(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}(t,function(e,t){!function(e,t,n){if(!(st(n)||ct(n)||dt(n)))throw i.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(n,t,e)})}function W(e){return l(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})}function V(e,t,n){if(!st(n))throw i.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);var r;(r=e).style===undefined||!ft(r.style.getPropertyValue)||e.style.setProperty(t,n)}function z(e){return t=e,n=!0,jt.fromDom(t.dom().cloneNode(n));var t,n}function K(e,t){var n,r,o,i=(n=e,r=t,q(o=jt.fromTag(r),W(n)),o);return x(e,i),I(i,E(e)),_(e),i}function X(e,t){R(e.item,t.list)}function Q(c,e,f){var t=e.slice(0,f.depth);return v(t).each(function(e){var t,n,r,o,i,u,s,a;r=e,i=c,u=f.itemAttributes,s=f.content,q(a=jt.fromTag("li",i),u),I(a,s),o=a,R(r.list,o),r.item=o,n=f,$((t=e).list)!==n.listType&&(t.list=K(t.list,n.listType)),q(t.list,n.listAttributes)}),t}function Y(e,t,n){var r,o=function(e,t,n){for(var r,o,i,u=[],s=0;s<n;s++)u.push((r=e,o=t.listType,R((i={list:jt.fromTag(o,r),item:jt.fromTag("li",r)}).list,i.item),i));return u}(e,n,n.depth-t.length);return function(e){for(var t=1;t<e.length;t++)X(e[t-1],e[t])}(o),function(e,t){for(var n=0;n<e.length-1;n++)r="list-style-type",o="none",V(e[n].item.dom(),r,o);var r,o;v(e).each(function(e){q(e.list,t.listAttributes),q(e.item,t.itemAttributes),I(e.item,t.content)})}(o,n),r=o,T(v(t),p(r),X),t.concat(o)}function G(e){return Wt(e,"OL,UL")}function J(e){return k(e).map(G).getOr(!1)}function Z(e){return 0<e.depth}function ee(e){return e.isSelected}function te(e){var t=E(e);return c(A(e).map(G).getOr(!1)?t.slice(0,-1):t,z)}function ne(t){f(t,function(r,e){(function(e,t){for(var n=e[t].depth,r=t-1;0<=r;r--){if(e[r].depth===n)return ut.some(e[r]);if(e[r].depth<n)break}return ut.none()})(t,e).each(function(e){var t,n;n=e,(t=r).listType=n.listType,t.listAttributes=yn({},n.listAttributes)})})}function re(i,u,s,a){return k(a).filter(G).fold(function(){u.each(function(e){L(e.start,a)&&s.set(!0)});var t,n,r,e=(t=a,n=i,r=s.get(),D(t).filter(hn).map(function(e){return{depth:n,isSelected:r,content:te(t),itemAttributes:W(t),listAttributes:W(e),listType:$(e)}}));u.each(function(e){L(e.end,a)&&s.set(!1)});var o=A(a).filter(G).map(function(e){return Sn(i,u,s,e)}).getOr([]);return e.toArray().concat(o)},function(e){return Sn(i,u,s,e)})}function oe(o,e){return c(e,function(e){var t,n,r=(t=e.content,n=(void 0||i.document).createDocumentFragment(),f(t,function(e){n.appendChild(e.dom())}),jt.fromDom(n));return jt.fromDom(H(o,r.dom()))})}function ie(e,t){return ne(t),(n=e.contentDocument,p(l(t,function(e,t){return t.depth>e.length?Y(n,e,t):Q(n,e,t)},[])).map(function(e){return e.list})).toArray();var n}function ue(e){var t,n,r=c(vn.getSelectedListItems(e),jt.fromDom);return T(m(r,o(J)),m((t=r,(n=lt.call(t,0)).reverse(),n),o(J)),function(e,t){return{start:e,end:t}})}function se(u,e,s){var t,n,r;f((t=e,n=ue(u),r=pt(!1),c(t,function(e){return{sourceList:e,entries:Sn(0,n,r,e)}})),function(e){var t,n;t=e.entries,n=s,f(d(t,ee),function(e){return function(e,t){switch(n){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}}(0,e)});var r,o,i=(r=u,g(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,u=e.length;i<u;i++){var s=e[i],a=t(s);a!==n&&(r.push(o),o=[]),n=a,o.push(s)}return 0!==o.length&&r.push(o),r}(e.entries,Z),function(e){return p(e).map(Z).getOr(!1)?ie(r,e):oe(r,e)}));f(i,function(e){B(u,"Indent"===s?"IndentList":"OutdentList",e.dom())}),o=e.sourceList,f(i,function(e){x(o,e)}),_(e.sourceList)})}function ae(e){Wt(e,"dt")&&K(e,"dd")}function ce(r,e,t){f(t,"Indent"===e?ae:function(e){return t=r,void(Wt(n=e,"dd")?K(n,"dt"):Wt(n,"dt")&&D(n).each(function(e){return bn(t,e.dom(),n.dom())}));var t,n})}function fe(e,t){if(en(e))return{container:e,offset:t};var n=Vt.getNode(e,t);return en(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&en(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&en(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}}function de(e,t){var n=c(vn.getSelectedListRoots(e),jt.fromDom),r=c(vn.getSelectedDlItems(e),jt.fromDom),o=!1;if(n.length||r.length){var i=e.selection.getBookmark();se(e,n,t),ce(e,t,r),e.selection.moveToBookmark(i),e.selection.setRng(Ln(e.selection.getRng())),e.nodeChanged(),o=!0}return o}function le(e){return de(e,"Indent")}function me(e){return de(e,"Outdent")}function ge(e){return de(e,"Flatten")}function pe(e){return/\btox\-/.test(e.className)}function ve(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function he(n,e){Zt.each(e,function(e,t){n.setAttribute(t,e)})}function Ne(e,t,n){var r,o,i,u,s,a,c;u=e,s=t,c=(a=n)["list-style-type"]?a["list-style-type"]:null,u.setStyle(s,"list-style-type",c),r=e,he(o=t,(i=n)["list-attributes"]),Zt.each(r.select("li",o),function(e){he(e,i["list-item-attributes"])})}function ye(e,t,n,r){var o,i;for(o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&sn(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(cn(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function Se(f,d,l){void 0===l&&(l={});var e,t=f.selection.getRng(!0),m="LI",n=vn.getClosestListRootElm(f,f.selection.getStart(!0)),g=f.dom;"false"!==g.getContentEditable(f.selection.getNode())&&("DL"===(d=d.toUpperCase())&&(m="DT"),e=En(t),Zt.each(function(n,e,r){for(var o,i=[],u=n.dom,t=ye(n,e,!0,r),s=ye(n,e,!1,r),a=[],c=t;c&&(a.push(c),c!==s);c=c.nextSibling);return Zt.each(a,function(e){if(cn(n,e))return i.push(e),void(o=null);if(u.isBlock(e)||sn(e))return sn(e)&&u.remove(e),void(o=null);var t=e.nextSibling;Tn.isBookmarkNode(e)&&(cn(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=u.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e))}),i}(f,t,n),function(e){var t,n,r,o,i,u,s,a,c;(n=e.previousSibling)&&tn(n)&&n.nodeName===d&&(u=n,s=l,a=g.getStyle(u,"list-style-type"),c=s?s["list-style-type"]:"",a===(null===c?"":c))?(t=n,e=g.rename(e,m),n.appendChild(e)):(t=g.create(d),e.parentNode.insertBefore(t,e),t.appendChild(e),e=g.rename(e,m)),r=g,o=e,i=["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],Zt.each(i,function(e){var t;return r.setStyle(o,((t={})[e]="",t))}),Ne(g,t,l),kn(f.dom,t)}),f.selection.setRng(wn(e)))}function Oe(e,t,n){return a=n,(s=t)&&a&&tn(s)&&s.nodeName===a.nodeName&&(i=t,u=n,(o=e).getStyle(i,"list-style-type",!0)===o.getStyle(u,"list-style-type",!0))&&(r=n,t.className===r.className);var r,o,i,u,s,a}function Ce(t,e,n,r,o){if(e.nodeName!==r||An(o)){var i=En(t.selection.getRng(!0));Zt.each([e].concat(n),function(e){!function(e,t,n,r){if(t.nodeName!==n){var o=e.dom.rename(t,n);Ne(e.dom,o,r),B(e,ve(n),o)}else Ne(e.dom,t,r),B(e,ve(n),t)}(t,e,r,o)}),t.selection.setRng(wn(i))}else ge(t)}function be(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),ln(e,r)&&Rn.remove(r)):Rn.setStyle(r,"listStyleType","none")),tn(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)}function Le(e,t,n,r){var o=t.startContainer,i=t.startOffset;if(en(o)&&(n?i<o.data.length:0<i))return o;var u=e.schema.getNonEmptyElements();1===o.nodeType&&(o=Vt.getNode(o,i));var s=new zt(o,r);for(n&&dn(e.dom,o)&&s.next();o=s[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(u[o.nodeName])return o;if(en(o)&&0<o.data.length)return o}}function Te(e,t){var n=t.childNodes;return 1===n.length&&!tn(n[0])&&e.isBlock(n[0])}function De(e,t,n){var r,o,i,u;if(o=Te(e,n)?n.firstChild:n,Te(i=e,u=t)&&i.remove(u.firstChild,!0),!ln(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)}function Ee(t,e,n){var r,o,i=e.parentNode;if(mn(t,e)&&mn(t,n)){tn(n.lastChild)&&(o=n.lastChild),i===n.lastChild&&sn(i.previousSibling)&&t.remove(i.previousSibling),(r=n.lastChild)&&sn(r)&&e.hasChildNodes()&&t.remove(r),ln(t,n,!0)&&t.$(n).empty(),De(t,e,n),o&&n.appendChild(o);var u=qt(jt.fromDom(n),jt.fromDom(e))?t.getParents(e,tn,n):[];t.remove(e),f(u,function(e){ln(t,e)&&e!==t.getRoot()&&t.remove(e)})}}function we(e,t,n,r){var o,i,u,s=e.dom;if(s.isEmpty(r))i=n,u=r,(o=e).dom.$(u).empty(),Ee(o.dom,i,u),o.selection.setCursorLocation(u);else{var a=En(t);Ee(s,n,r),e.selection.setRng(wn(a))}}function ke(e,t){var n=e.dom,r=e.selection,o=r.getStart(),i=vn.getClosestListRootElm(e,o),u=n.getParent(r.getStart(),"LI",i);if(u){var s=u.parentNode;if(s===e.getBody()&&ln(n,s))return!0;var a=Ln(r.getRng()),c=n.getParent(Le(e,a,t,i),"LI",i);if(c&&c!==u)return e.undoManager.transact(function(){t?we(e,a,c,u):an(u)?me(e):function(e,t,n,r){var o=En(a);Ee(e.dom,n,r);var i=wn(o);e.selection.setRng(i)}(e,0,u,c)}),!0;if(!c&&!t&&0===a.startOffset&&0===a.endOffset)return e.undoManager.transact(function(){ge(e)}),!0}return!1}function Ae(e,t){return ke(e,t)||function(o,i){var u=o.dom,e=o.selection.getStart(),s=vn.getClosestListRootElm(o,e),a=u.getParent(e,u.isBlock,s);if(a&&u.isEmpty(a)){var t=Ln(o.selection.getRng()),c=u.getParent(Le(o,t,i,s),"LI",s);if(c)return o.undoManager.transact(function(){var e,t,n,r;t=a,n=s,r=(e=u).getParent(t.parentNode,e.isBlock,n),e.remove(t),r&&e.isEmpty(r)&&e.remove(r),xn.mergeWithAdjacentLists(u,c.parentNode),o.selection.select(c,!0),o.selection.collapse(i)}),!0}return!1}(e,t)}function xe(e,t){return e.selection.isCollapsed()?Ae(e,t):(r=(n=e).selection.getStart(),o=vn.getClosestListRootElm(n,r),!!(n.dom.getParent(r,"LI,DT,DD",o)||0<vn.getSelectedListItems(n).length)&&(n.undoManager.transact(function(){n.execCommand("Delete"),In(n.dom,n.getBody())}),!0));var n,r,o}function Re(t,n){return function(){var e=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===n}}function Ie(t,i){return function(o){function e(e){var t=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,un),n=-1!==t?e.parents.slice(0,t):e.parents,r=Zt.grep(n,tn);o.setActive(0<r.length&&r[0].nodeName===i&&!pe(r[0]))}return t.on("NodeChange",e),function(){return t.off("NodeChange",e)}}}var _e,Be,Pe,Me,Ue,Fe,je,He,$e,qe,We,Ve,ze,Ke,Xe,Qe,Ye,Ge,Je,Ze,et,tt=tinymce.util.Tools.resolve("tinymce.PluginManager"),nt=u(!1),rt=u(!0),ot=(_e={fold:function(e){return e()},is:nt,isSome:nt,isNone:rt,getOr:s,getOrThunk:r,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(undefined),or:s,orThunk:r,map:t,each:e,bind:t,exists:nt,forall:rt,filter:t,equals:n,equals_:n,toArray:function(){return[]},toString:u("none()")},Object.freeze&&Object.freeze(_e),_e),it=function(n){function e(){return o}function t(e){return e(n)}var r=u(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:rt,isNone:nt,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return it(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:ot},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(nt,function(e){return t(n,e)})}};return o},ut={some:it,none:t,from:function(e){return null===e||e===undefined?ot:it(e)}},st=a("string"),at=a("array"),ct=a("boolean"),ft=a("function"),dt=a("number"),lt=Array.prototype.slice,mt=Array.prototype.push,gt=(ft(Array.from)&&Array.from,function(e,t){return h(e,t,i.Node.DOCUMENT_POSITION_CONTAINED_BY)}),pt=function(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return pt(t())}}},vt=function(){return ht(0,0)},ht=function(e,t){return{major:e,minor:t}},Nt={nu:ht,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?vt():N(e,n)},unknown:vt},yt="Edge",St="Chrome",Ot="Opera",Ct="Firefox",bt="Safari",Lt=function(e){var t=e.current;return{current:t,version:e.version,isEdge:y(yt,t),isChrome:y(St,t),isIE:y("IE",t),isOpera:y(Ot,t),isFirefox:y(Ct,t),isSafari:y(bt,t)}},Tt={unknown:function(){return Lt({current:undefined,version:Nt.unknown()})},nu:Lt,edge:u(yt),chrome:u(St),ie:u("IE"),opera:u(Ot),firefox:u(Ct),safari:u(bt)},Dt="Windows",Et="Android",wt="Solaris",kt="FreeBSD",At=function(e){var t=e.current;return{current:t,version:e.version,isWindows:S(Dt,t),isiOS:S("iOS",t),isAndroid:S(Et,t),isOSX:S("OSX",t),isLinux:S("Linux",t),isSolaris:S(wt,t),isFreeBSD:S(kt,t)}},xt={unknown:function(){return At({current:undefined,version:Nt.unknown()})},nu:At,windows:u(Dt),ios:u("iOS"),android:u(Et),linux:u("Linux"),osx:u("OSX"),solaris:u(wt),freebsd:u(kt)},Rt=function(e,n){return O(e,n).map(function(e){var t=Nt.detect(e.versionRegexes,n);return{current:e.name,version:t}})},It=function(e,n){return O(e,n).map(function(e){var t=Nt.detect(e.versionRegexes,n);return{current:e.name,version:t}})},_t=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Bt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return C(e,"edge/")&&C(e,"chrome")&&C(e,"safari")&&C(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_t],search:function(e){return C(e,"chrome")&&!C(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return C(e,"msie")||C(e,"trident")}},{name:"Opera",versionRegexes:[_t,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:b("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:b("firefox")},{name:"Safari",versionRegexes:[_t,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(C(e,"safari")||C(e,"mobile/"))&&C(e,"applewebkit")}}],Pt=[{name:"Windows",search:b("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return C(e,"iphone")||C(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:b("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:b("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:b("linux"),versionRegexes:[]},{name:"Solaris",search:b("sunos"),versionRegexes:[]},{name:"FreeBSD",search:b("freebsd"),versionRegexes:[]}],Mt={browsers:u(Bt),oses:u(Pt)},Ut=pt((Me=i.navigator.userAgent,Ue=function(e){return i.window.matchMedia(e).matches},Ge=Mt.browsers(),Je=Mt.oses(),Ze=Rt(Ge,Me).fold(Tt.unknown,Tt.nu),et=It(Je,Me).fold(xt.unknown,xt.nu),{browser:Ze,os:et,deviceType:(Fe=et,je=Ze,He=Me,$e=Ue,qe=Fe.isiOS()&&!0===/ipad/i.test(He),We=Fe.isiOS()&&!qe,Ve=Fe.isiOS()||Fe.isAndroid(),ze=Ve||$e("(pointer:coarse)"),Ke=qe||!We&&Ve&&$e("(min-device-width:768px)"),Xe=We||Ve&&!Ke,Qe=je.isSafari()&&Fe.isiOS()&&!1===/safari/i.test(He),Ye=!Xe&&!Ke&&!Qe,{isiPad:u(qe),isiPhone:u(We),isTablet:u(Ke),isPhone:u(Xe),isTouch:u(ze),isAndroid:Fe.isAndroid,isiOS:Fe.isiOS,isWebView:u(Qe),isDesktop:u(Ye)})})),Ft=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:u(e)}},jt={fromHtml:function(e,t){var n=(t||i.document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw i.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Ft(n.childNodes[0])},fromTag:function(e,t){var n=(t||i.document).createElement(e);return Ft(n)},fromText:function(e,t){var n=(t||i.document).createTextNode(e);return Ft(n)},fromDom:Ft,fromPoint:function(e,t,n){var r=e.dom();return ut.from(r.elementFromPoint(t,n)).map(Ft)}},Ht=(i.Node.ATTRIBUTE_NODE,i.Node.CDATA_SECTION_NODE,i.Node.COMMENT_NODE,i.Node.DOCUMENT_NODE,i.Node.DOCUMENT_TYPE_NODE,i.Node.DOCUMENT_FRAGMENT_NODE,i.Node.ELEMENT_NODE),$t=(i.Node.TEXT_NODE,i.Node.PROCESSING_INSTRUCTION_NODE,i.Node.ENTITY_REFERENCE_NODE,i.Node.ENTITY_NODE,i.Node.NOTATION_NODE,Ht),qt=Ut.get().browser.isIE()?function(e,t){return gt(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Wt=function(e,t){var n=e.dom();if(n.nodeType!==$t)return!1;var r=n;if(r.matches!==undefined)return r.matches(t);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(t);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Vt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),zt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Kt=tinymce.util.Tools.resolve("tinymce.util.VK"),Xt=Object.keys,Qt=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),"undefined"!=typeof i.window?i.window:Function("return this;")()),Yt=function(e,t){var n=P(e,t);if(n===undefined||null===n)throw new Error(e+" not available on this browser");return n},Gt=function(e){return(t=P("ownerDocument.defaultView",e),Yt("HTMLElement",t)).prototype.isPrototypeOf(e);var t},Jt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Zt=tinymce.util.Tools.resolve("tinymce.util.Tools"),en=function(e){return e&&3===e.nodeType},tn=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},nn=function(e){return e&&/^(OL|UL)$/.test(e.nodeName)},rn=function(e){return e&&/^(DT|DD)$/.test(e.nodeName)},on=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},un=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},sn=M,an=function(e){return e.parentNode.firstChild===e},cn=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},fn=function(e,t){return e&&e.nodeName in t},dn=function(e,t){return!!M(t)&&!(!e.isBlock(t.nextSibling)||M(t.previousSibling))},ln=function(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r},mn=function(e,t){return e.isChildOf(t,e.getRoot())},gn=function(e,t){var n=e.dom.getParents(t,"TD,TH");return 0<n.length?n[0]:e.getBody()},pn=function(t,e){var n=c(e,function(e){return j(t,e).getOr(e)});return Jt.unique(n)},vn={isList:function(e){var t=U(e);return Gt(t)},getParentList:U,getSelectedSubLists:function(e){var t,n,r,o=U(e),i=e.selection.getSelectedBlocks();return r=i,(n=o)&&1===r.length&&r[0]===n?(t=o,Zt.grep(t.querySelectorAll("ol,ul,dl"),function(e){return tn(e)})):Zt.grep(i,function(e){return tn(e)&&o!==e})},getSelectedListItems:F,getClosestListRootElm:gn,getSelectedDlItems:function(e){return d(F(e),rn)},getSelectedListRoots:function(e){var t,n,r,o=(n=j(t=e,t.selection.getStart()),r=d(t.selection.getSelectedBlocks(),nn),n.toArray().concat(r));return pn(e,o)}},hn=(Be=Ht,function(e){return e.dom().nodeType===Be}),Nn=Object.prototype.hasOwnProperty,yn=(Pe=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o=e[r];for(var i in o)Nn.call(o,i)&&(n[i]=Pe(n[i],o[i]))}return n}),Sn=function(t,n,r,e){return g(E(e),function(e){return(G(e)?Sn:re)(t+1,n,r,e)})},On=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Cn=On.DOM,bn=function(e,t,n){var r,o,i,u,s,a;for(i=Cn.select('span[data-mce-type="bookmark"]',t),s=H(e,n),(r=Cn.createRng()).setStartAfter(n),r.setEndAfter(t),u=(o=r.extractContents()).firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&e.dom.isEmpty(u)){Cn.remove(u);break}e.dom.isEmpty(o)||Cn.insertAfter(o,t),Cn.insertAfter(s,t),ln(e.dom,n.parentNode)&&(a=n.parentNode,Zt.each(i,function(e){a.parentNode.insertBefore(e,n.parentNode)}),Cn.remove(a)),Cn.remove(n),ln(e.dom,t)&&Cn.remove(t)},Ln=function(e){var t=e.cloneRange(),n=fe(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=fe(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},Tn=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Dn=On.DOM,En=function(o){function e(e){var t,n,r;n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"],1===n.nodeType&&(t=Dn.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):Dn.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i},wn=function(o){function e(e){var t,n,r;t=r=o[e?"startContainer":"endContainer"],n=o[e?"startOffset":"endOffset"],t&&(1===t.nodeType&&(n=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(t),t=t.parentNode,Dn.remove(r),!t.hasChildNodes()&&Dn.isBlock(t)&&t.appendChild(Dn.create("br"))),o[e?"startContainer":"endContainer"]=t,o[e?"startOffset":"endOffset"]=n)}e(!0),e();var t=Dn.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),Ln(t)},kn=function(e,t){var n,r;if(Oe(e,t,n=t.nextSibling)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(Oe(e,t,n=t.previousSibling)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},An=function(e){return"list-style-type"in e},xn={toggleList:function(e,t,n){var r=vn.getParentList(e),o=vn.getSelectedSubLists(e);n=n||{},r&&0<o.length?Ce(e,r,o,t,n):function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||An(r)||pe(t)){var o=En(e.selection.getRng(!0));Ne(e.dom,t,r);var i=e.dom.rename(t,n);kn(e.dom,i),e.selection.setRng(wn(o)),B(e,ve(n),i)}else ge(e);else Se(e,n,r),B(e,ve(n),t)}(e,r,t,n)},mergeWithAdjacentLists:kn},Rn=On.DOM,In=function(t,e){Zt.each(Zt.grep(t.select("ol,ul",e)),function(e){be(t,e)})},_n=function(t){t.on("keydown",function(e){e.keyCode===Kt.BACKSPACE?xe(t,!1)&&e.preventDefault():e.keyCode===Kt.DELETE&&xe(t,!0)&&e.preventDefault()})},Bn=xe,Pn=function(t){return{backspaceDelete:function(e){Bn(t,e)}}},Mn=function(n){n.on("BeforeExecCommand",function(e){var t=e.command.toLowerCase();"indent"===t?le(n):"outdent"===t&&me(n)}),n.addCommand("InsertUnorderedList",function(e,t){xn.toggleList(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){xn.toggleList(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){xn.toggleList(n,"DL",t)}),n.addCommand("RemoveList",function(){ge(n)}),n.addQueryStateHandler("InsertUnorderedList",Re(n,"UL")),n.addQueryStateHandler("InsertOrderedList",Re(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",Re(n,"DL"))},Un=function(e){return e.getParam("lists_indent_on_tab",!0)},Fn=function(e){var t;Un(e)&&(t=e).on("keydown",function(e){e.keyCode!==Kt.TAB||Kt.metaKeyPressed(e)||t.undoManager.transact(function(){(e.shiftKey?me(t):le(t))&&e.preventDefault()})}),_n(e)},jn=function(t){function e(e){return function(){return t.execCommand(e)}}var n,r,o;r="advlist",o=(n=t).settings.plugins?n.settings.plugins:"",-1===Zt.inArray(o.split(/[ ,]/),r)&&(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:e("InsertOrderedList"),onSetup:Ie(t,"OL")}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:e("InsertUnorderedList"),onSetup:Ie(t,"UL")}))};!function Hn(){tt.add("lists",function(e){return Fn(e),jn(e),Mn(e),Pn(e)})}()}(window);
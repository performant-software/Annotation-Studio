!function(s){"use strict";function i(){}function o(t){return function(){return t}}function t(t){return t}function e(){return lt}function n(t){return t.isNone()}function r(t){return t()}function a(t){return t}function u(e){return function(t){return function(t){if(null===t)return"null";var e=typeof t;return"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(t)===e}}function w(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!pt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);yt.apply(e,t[n])}return e}function c(t){s.setTimeout(function(){throw t},0)}function l(t){return Ct(At(t))}function f(a){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var i=t[r];for(var o in i)Et.call(i,o)&&(n[o]=a(n[o],i[o]))}return n}}function d(t){var e=t.imageList.map(function(t){return{name:"images",type:"selectbox",label:"Image list",items:t}}),n=t.classList.map(function(t){return{name:"classes",type:"selectbox",label:"Class",items:t}});return w([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],e.toArray(),t.hasDescription?[{name:"alt",type:"input",label:"Image description"}]:[],t.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],t.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{type:"grid",columns:2,items:w([n.toArray(),t.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]])}function m(t,e){return Math.max(parseInt(t,10),parseInt(e,10))}function p(t){return t.style.marginLeft&&t.style.marginRight&&t.style.marginLeft===t.style.marginRight?Wt(t.style.marginLeft):""}function g(t){return t.style.marginTop&&t.style.marginBottom&&t.style.marginTop===t.style.marginBottom?Wt(t.style.marginTop):""}function h(t){return t.style.borderWidth?Wt(t.style.borderWidth):""}function y(t,e){return t.hasAttribute(e)?t.getAttribute(e):""}function v(t,e){return t.style[e]?t.style[e]:""}function b(t){return null!==t.parentNode&&"FIGURE"===t.parentNode.nodeName}function T(t,e,n){t.setAttribute(e,n)}function _(t){var e,n,r,i;b(t)?(i=(r=t).parentNode,Kt.insertAfter(r,i),Kt.remove(i)):(e=t,n=Kt.create("figure",{"class":"image"}),Kt.insertAfter(n,e),n.appendChild(e),n.appendChild(Kt.create("figcaption",{contentEditable:"true"},"Caption")),n.contentEditable="false")}function U(t,e){var n=t.getAttribute("style"),r=e(null!==n?n:"");0<r.length?(t.setAttribute("style",r),t.setAttribute("data-mce-style",r)):t.removeAttribute("style")}function x(t,r){return function(t,e,n){t.style[e]?(t.style[e]=qt(n),U(t,r)):T(t,e,n)}}function A(t,e){return t.style[e]?Wt(t.style[e]):y(t,e)}function I(t,e){var n=qt(e);t.style.marginLeft=n,t.style.marginRight=n}function S(t,e){var n=qt(e);t.style.marginTop=n,t.style.marginBottom=n}function D(t,e){var n=qt(e);t.style.borderWidth=n}function O(t,e){t.style.borderStyle=e}function C(t){return"FIGURE"===t.nodeName}function P(t,e){var n=s.document.createElement("img");return T(n,"style",e.style),!p(n)&&""===e.hspace||I(n,e.hspace),!g(n)&&""===e.vspace||S(n,e.vspace),!h(n)&&""===e.border||D(n,e.border),!v(n,"borderStyle")&&""===e.borderStyle||O(n,e.borderStyle),t(n.getAttribute("style"))}function E(t,e){return{src:y(e,"src"),alt:y(e,"alt"),title:y(e,"title"),width:A(e,"width"),height:A(e,"height"),"class":y(e,"class"),style:t(y(e,"style")),caption:b(e),hspace:p(e),vspace:g(e),border:h(e),borderStyle:v(e,"borderStyle")}}function L(t,e,n,r,i){n[r]!==e[r]&&i(t,r,n[r])}function N(r,i){return function(t,e,n){r(t,n),U(t,i)}}function j(t,e){var n=t.dom.styles.parse(e),r=$t(n),i=t.dom.styles.parse(t.dom.styles.serialize(r));return t.dom.styles.serialize(i)}function R(t){var e=t.selection.getNode(),n=t.dom.getParent(e,"figure.image");return n?t.dom.select("img",n)[0]:e&&("IMG"!==e.nodeName||Zt(e))?null:e}function F(e,t){var n=e.dom,r=n.getParent(t.parentNode,function(t){return e.schema.getTextBlockElements()[t.nodeName]},e.getBody());return r?n.split(r,t):t}function k(e,t){var n=function(t,e){var n=s.document.createElement("img");if(Qt(t,Nt(e,{caption:!1}),n),T(n,"alt",e.alt),e.caption){var r=Kt.create("figure",{"class":"image"});return r.appendChild(n),r.appendChild(Kt.create("figcaption",{contentEditable:"true"},"Caption")),r.contentEditable="false",r}return n}(function(t){return j(e,t)},t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);var r=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(r,"data-mce-id",null),C(r)){var i=F(e,r);e.selection.select(i)}else e.selection.select(r)}function z(t,e){var n=R(t);n?e.src?function(e,t){var n,r=R(e);if(Qt(function(t){return j(e,t)},t,r),n=r,e.dom.setAttrib(n,"src",n.getAttribute("src")),C(r.parentNode)){var i=r.parentNode;F(e,i),e.selection.select(r.parentNode)}else e.selection.select(r),Vt(e,t,r)}(t,e):function(t,e){if(e){var n=t.dom.is(e.parentNode,"figure.image")?e.parentNode:e;t.dom.remove(n),t.focus(),t.nodeChanged(),t.dom.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}}(t,n):e.src&&k(t,e)}function M(t){return dt(t.value)?t.value:""}function H(e){return void 0===e&&(e=M),function(t){return t?ft.from(t).map(function(t){return te(t,e)}):ft.none()}}function B(a){function e(t,r,i,e){var o,n;(o=new s.XMLHttpRequest).open("POST",a.url),o.withCredentials=a.credentials,o.upload.onprogress=function(t){e(t.loaded/t.total*100)},o.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var t,e,n;o.status<200||300<=o.status?i("HTTP Error: "+o.status):(t=JSON.parse(o.responseText))&&"string"==typeof t.location?r((e=a.basePath,n=t.location,e?e.replace(/\/$/,"")+"/"+n.replace(/^\//,""):n)):i("Invalid JSON: "+o.responseText)},(n=new s.FormData).append("file",t.blob(),t.filename()),o.send(n)}return a=Yt.extend({credentials:!1,handler:e},a),{upload:function(t){return a.url||a.handler!==e?(n=t,r=a.handler,new kt(function(t,e){try{r(n,t,e,i)}catch(et){e(et.message)}})):kt.reject("Upload url missing from the settings.");var n,r}}}function G(n){var e,t,r=ne(function(t){return n.convertURL(t.value||t.url,"src")}),i=At(function(e){Jt(n,function(t){e(r(t).map(function(t){return w([[{text:"None",value:""}],t])}))})}),o=re(Bt.getClassList(n)),a=Bt.hasAdvTab(n),u=Bt.hasUploadTab(n),c=Bt.hasUploadUrl(n),l=Bt.hasUploadHandler(n),s=(t=R(e=n))?E(function(t){return j(e,t)},t):{src:"",alt:"",title:"",width:"",height:"","class":"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""},f=Bt.hasDescription(n),d=Bt.hasImageTitle(n),m=Bt.hasDimensions(n),p=Bt.hasImageCaption(n),g=Bt.getUploadUrl(n),h=Bt.getUploadBasePath(n),y=Bt.getUploadCredentials(n),v=Bt.getUploadHandler(n),b=ft.some(Bt.getPrependUrl(n)).filter(function(t){return dt(t)&&0<t.length});return i.map(function(t){return{image:s,imageList:t,classList:o,hasAdvTab:a,hasUploadTab:u,hasUploadUrl:c,hasUploadHandler:l,hasDescription:f,hasImageTitle:d,hasDimensions:m,hasImageCaption:p,url:g,basePath:h,credentials:y,handler:v,prependURL:b}})}function W(t){return{src:{value:t.src,meta:{}},images:t.src,alt:t.alt,title:t.title,dimensions:{width:t.width,height:t.height},classes:t["class"],caption:t.caption,style:t.style,vspace:t.vspace,border:t.border,hspace:t.hspace,borderstyle:t.borderStyle,fileinput:[]}}function q(t){return{src:t.src.value,alt:t.alt,title:t.title,width:t.dimensions.width,height:t.dimensions.height,"class":t.classes,style:t.style,caption:t.caption,hspace:t.hspace,vspace:t.vspace,border:t.border,borderStyle:t.borderstyle}}function $(t,e){var n,r,i=e.getData();(n=t,r=i.src.value,/^(?:[a-zA-Z]+:)?\/\//.test(r)?ft.none():n.prependURL.bind(function(t){return r.substring(0,t.length)!==t?ft.some(t+r):ft.none()})).each(function(t){e.setData({src:{value:t,meta:i.src.meta}})})}function J(t,e){var n,r,i,o=e.getData(),a=o.src.meta;if(a!==undefined){var u=Lt({},o);r=u,i=a,(n=t).hasDescription&&dt(i.alt)&&(r.alt=i.alt),n.hasImageTitle&&dt(i.title)&&(r.title=i.title),n.hasDimensions&&(dt(i.width)&&(r.dimensions.width=i.width),dt(i.height)&&(r.dimensions.height=i.height)),dt(i["class"])&&ie(n.classList,i["class"]).each(function(t){r.classes=t.value}),n.hasImageCaption&&gt(i.caption)&&(r.caption=i.caption),n.hasAdvTab&&(dt(i.vspace)&&(r.vspace=i.vspace),dt(i.border)&&(r.border=i.border),dt(i.hspace)&&(r.hspace=i.hspace),dt(i.borderstyle)&&(r.borderstyle=i.borderstyle)),e.setData(u)}}function V(t,e,n,r){var i,o,a,u,c,l,s,f,d,m,p,g;$(e,r),J(e,r),l=t,s=e,f=n,m=(d=r).getData(),p=m.src.value,(g=m.src.meta||{}).width||g.height||!s.hasDimensions||l.imageSize(p).get(function(t){t.each(function(t){f.open&&d.setData({dimensions:t})})}),i=e,o=n,u=(a=r).getData(),c=ie(i.imageList,u.src.value),o.prevImage=c,a.setData({images:c.map(function(t){return t.value}).getOr("")})}function X(t,e,n){var r,i,o,a,u=$t(t(n.style)),c=Lt({},n);return c.vspace=(a=u)["margin-top"]&&a["margin-bottom"]&&a["margin-top"]===a["margin-bottom"]?Wt(String(a["margin-top"])):"",c.hspace=(o=u)["margin-right"]&&o["margin-left"]&&o["margin-right"]===o["margin-left"]?Wt(String(o["margin-right"])):"",c.border=(i=u)["border-width"]?Wt(String(i["border-width"])):"",c.borderstyle=(r=u)["border-style"]?String(r["border-style"]):"",c.style=e(t(e(u))),c}function Z(a,u,c,l){var t,e=l.getData();l.block("Uploading image"),(t=e.fileinput,0===t.length?ft.none():ft.some(t[0])).fold(function(){l.unblock()},function(n){function r(){l.unblock(),s.URL.revokeObjectURL(i)}var i=s.URL.createObjectURL(n),o=B({url:u.url,basePath:u.basePath,credentials:u.credentials,handler:u.handler});Xt(n).then(function(t){var e=a.createBlobCache(n,i,t);o.upload(e).then(function(t){l.setData({src:{value:t,meta:{}}}),l.showTab("general"),V(a,u,c,l),r()})["catch"](function(t){r(),a.alertErr(l,t)})})})}function K(h,y,v){return function(t,e){var n,r,i,o,a,u,c,l,s,f,d,m,p,g;"src"===e.name?V(h,y,v,t):"images"===e.name?(s=h,f=y,d=v,p=(m=t).getData(),(g=ie(f.imageList,p.images)).each(function(t){""===p.alt||d.prevImage.map(function(t){return t.text===p.alt}).getOr(!1)?""===t.value?m.setData({src:t,alt:d.prevAlt}):m.setData({src:t,alt:t.text}):m.setData({src:t})}),d.prevImage=g,V(s,f,d,m)):"alt"===e.name?v.prevAlt=t.getData().alt:"style"===e.name?(a=h,c=(u=t).getData(),l=X(a.parseStyle,a.serializeStyle,c),u.setData(l)):"vspace"===e.name||"hspace"===e.name||"border"===e.name||"borderstyle"===e.name?(n=h,r=t,i=Lt(W(y.image),r.getData()),o=P(n.normalizeCss,q(i)),r.setData({style:o})):"fileinput"===e.name&&Z(h,y,v,t)}}function Q(o){return function(t){var e,n,r,i={prevImage:ie((e=t).imageList,e.image.src),prevAlt:e.image.alt,open:!0};return{title:"Insert/Edit Image",size:"normal",body:(r=t,r.hasAdvTab||r.hasUploadUrl||r.hasUploadHandler?{type:"tabpanel",tabs:w([[jt(r)],r.hasAdvTab?[oe(r)]:[],r.hasUploadTab&&(r.hasUploadUrl||r.hasUploadHandler)?[ae(r)]:[]])}:{type:"panel",items:Rt(r)}),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:W(t.image),onSubmit:o.onSubmit(t),onChange:K(o,t,i),onClose:(n=i,function(){n.open=!1})}}}function Y(e){var n,r,i,o,a,u,c,t={onSubmit:(c=e,function(n){return function(t){var e=Lt(W(n.image),t.getData());c.undoManager.transact(function(){z(c,q(e))}),c.editorUpload.uploadImagesAuto(),t.close()}}),imageSize:(u=e,function(t){return Pt(function(n){Gt(u.documentBaseURI.toAbsolute(t),function(t){var e=t.map(function(t){return{width:String(t.width),height:String(t.height)}});n(e)})})}),createBlobCache:(a=e,function(t,e,n){return a.editorUpload.blobCache.create({blob:t,blobUri:e,name:t.name?t.name.replace(/\.[^\.]+$/,""):null,base64:n.split(",")[1]})}),alertErr:(o=e,function(t,e){o.windowManager.alert(e,t.close)}),normalizeCss:(i=e,function(t){return j(i,t)}),parseStyle:(r=e,function(t){return r.dom.parseStyle(t)}),serializeStyle:(n=e,function(t,e){return n.dom.serializeStyle(t,e)})};return{open:function(){return G(e).map(Q(t)).get(function(t){e.windowManager.open(t)})}}}function tt(o){return function(t){for(var e,n=t.length,r=function(t){t.attr("contenteditable",o?"true":null)};n--;){var i=t[n];(e=i.attr("class"))&&/\bimage\b/.test(e)&&(i.attr("contenteditable",o?"false":null),Yt.each(i.getAll("figcaption"),r))}}}var et,nt,rt,it,ot,at=tinymce.util.Tools.resolve("tinymce.PluginManager"),ut=o(!1),ct=o(!0),lt=(et={fold:function(t){return t()},is:ut,isSome:ut,isNone:ct,getOr:a,getOrThunk:r,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(undefined),or:a,orThunk:r,map:e,each:i,bind:e,exists:ut,forall:ct,filter:e,equals:n,equals_:n,toArray:function(){return[]},toString:o("none()")},Object.freeze&&Object.freeze(et),et),st=function(n){function t(){return i}function e(t){return t(n)}var r=o(n),i={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:ct,isNone:ut,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:t,orThunk:t,map:function(t){return st(t(n))},each:function(t){t(n)},bind:e,exists:e,forall:e,filter:function(t){return t(n)?i:lt},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(ut,function(t){return e(n,t)})}};return i},ft={some:st,none:e,from:function(t){return null===t||t===undefined?lt:st(t)}},dt=u("string"),mt=u("object"),pt=u("array"),gt=u("boolean"),ht=u("function"),yt=(Array.prototype.slice,Array.prototype.push),vt=(ht(Array.from)&&Array.from,function(){return(vt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)}),bt={},wt={exports:bt};nt=undefined,rt=bt,it=wt,ot=undefined,function(t){"object"==typeof rt&&void 0!==it?it.exports=t():"function"==typeof nt&&nt.amd?nt([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=t()}(function(){return function s(o,a,u){function c(e,t){if(!a[e]){if(!o[e]){var n="function"==typeof ot&&ot;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[e]={exports:{}};o[e][0].call(i.exports,function(t){return c(o[e][1][t]||t)},i,i.exports,s,o,a,u)}return a[e].exports}for(var l="function"==typeof ot&&ot,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(){p&&d&&(p=!1,d.length?m=d.concat(m):g=-1,m.length&&a())}function a(){if(!p){var t=i(o);p=!0;for(var e=m.length;e;){for(d=m,m=[];++g<e;)d&&d[g].run();g=-1,e=m.length}d=null,p=!1,function n(t){if(s===clearTimeout)return clearTimeout(t);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{return s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,s,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(t){s=r}}();var d,m=[],p=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new u(t,e)),1!==m.length||p||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(){return[]},f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],2:[function(t,n){(function(e){function c(){}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],s(t,this)}function r(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(f){return void a(r.promise,f)}i(r.promise,e)}else(1===n._state?i:a)(r.promise,n._value)})):n._deferreds.push(r)}function i(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void s(function c(e,n){return function(){e.apply(n,arguments)}}(n,e),t)}t._state=1,t._value=e,u(t)}catch(r){a(t,r)}}function a(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)r(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function s(t,e){var n=!1;try{t(function(t){n||(n=!0,i(e,t))},function(t){n||(n=!0,a(e,t))})}catch(c){if(n)return;n=!0,a(e,c)}}var t,f;t=this,f=setTimeout,o.prototype["catch"]=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(c);return r(this,new l(t,e,n)),n},o.all=function(t){var u=Array.prototype.slice.call(t);return new o(function(r,i){function o(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){o(e,t)},i)}u[e]=t,0==--a&&r(u)}catch(c){i(c)}}if(0===u.length)return r([]);for(var a=u.length,t=0;t<u.length;t++)o(t,u[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(i){return new o(function(t,e){for(var n=0,r=i.length;n<r;n++)i[n].then(t,e)})},o._immediateFn="function"==typeof e?function(t){e(t)}:function(t){f(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o._setImmediateFn=function(t){o._immediateFn=t},o._setUnhandledRejectionFn=function(t){o._unhandledRejectionFn=t},void 0!==n&&n.exports?n.exports=o:t.Promise||(t.Promise=o)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(c,t,l){(function(t,e){function n(t,e){this._id=t,this._clearFn=e}var r=c("process/browser.js").nextTick,i=Function.prototype.apply,o=Array.prototype.slice,a={},u=0;l.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(t){t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},l.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},l._unrefActive=l.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},l.setImmediate="function"==typeof t?t:function(t){var e=u++,n=!(arguments.length<2)&&o.call(arguments,1);return a[e]=!0,r(function(){a[e]&&(n?t.apply(null,n):t.call(null),l.clearImmediate(e))}),e},l.clearImmediate="function"==typeof e?e:function(t){delete a[t]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e){var n=t("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:r.Promise||n}},{"promise-polyfill":2}]},{},[4])(4)});var Tt=wt.exports.boltExport,_t=function(t){var n=ft.none(),e=[],r=function(t){i()?a(t):e.push(t)},i=function(){return n.isSome()},o=function(t){!function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}(t,a)},a=function(e){n.each(function(t){s.setTimeout(function(){e(t)},0)})};return t(function(t){n=ft.some(t),o(e),e=[]}),{get:r,map:function(n){return _t(function(e){r(function(t){e(n(t))})})},isReady:i}},Ut={nu:_t,pure:function(e){return _t(function(t){t(e)})}},xt=function(n){function t(t){n().then(t,c)}return{map:function(t){return xt(function(){return n().then(t)})},bind:function(e){return xt(function(){return n().then(function(t){return e(t).toPromise()})})},anonBind:function(t){return xt(function(){return n().then(function(){return t.toPromise()})})},toLazy:function(){return Ut.nu(t)},toCached:function(){var t=null;return xt(function(){return null===t&&(t=n()),t})},toPromise:n,get:t}},At=function(t){return xt(function(){return new Tt(t)})},It=function(t){return xt(function(){return Tt.resolve(t)})},St=function(n){return{is:function(t){return n===t},isValue:ct,isError:ut,getOr:o(n),getOrThunk:o(n),getOrDie:o(n),or:function(){return St(n)},orThunk:function(){return St(n)},fold:function(t,e){return e(n)},map:function(t){return St(t(n))},mapError:function(){return St(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOption:function(){return ft.some(n)}}},Dt=function(e){return{is:ut,isValue:ut,isError:ct,getOr:t,getOrThunk:function(t){return t()},getOrDie:function(){return t=String(e),function(){throw new Error(t)}();var t},or:function(t){return t},orThunk:function(t){return t()},fold:function(t){return t(e)},map:function(){return Dt(e)},mapError:function(t){return Dt(t(e))},each:i,bind:function(){return Dt(e)},exists:ut,forall:ct,toOption:ft.none}},Ot={value:St,error:Dt,fromOption:function(t,e){return t.fold(function(){return Dt(e)},St)}},Ct=function(o){return vt(vt({},o),{toCached:function(){return Ct(o.toCached())},bindFuture:function(e){return Ct(o.bind(function(t){return t.fold(function(t){return It(Ot.error(t))},function(t){return e(t)})}))},bindResult:function(e){return Ct(o.map(function(t){return t.bind(e)}))},mapResult:function(e){return Ct(o.map(function(t){return t.map(e)}))},mapError:function(e){return Ct(o.map(function(t){return t.mapError(e)}))},foldResult:function(e,n){return o.map(function(t){return t.fold(e,n)})},withTimeout:function(t,i){return Ct(At(function(e){var n=!1,r=s.setTimeout(function(){n=!0,e(Ot.error(i()))},t);o.get(function(t){n||(s.clearTimeout(r),e(t))})}))}})},Pt=l,Et=Object.prototype.hasOwnProperty,Lt=f(function(t,e){return mt(t)&&mt(e)?Lt(t,e):e}),Nt=f(function(t,e){return e}),jt=function(t){return{title:"General",name:"general",items:d(t)}},Rt=d,Ft=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),kt=tinymce.util.Tools.resolve("tinymce.util.Promise"),zt=tinymce.util.Tools.resolve("tinymce.util.XHR"),Mt=function(t){return t.getParam("images_upload_url","","string")},Ht=function(t){return t.getParam("images_upload_handler",undefined,"function")},Bt={hasDimensions:function(t){return t.getParam("image_dimensions",!0,"boolean")},hasUploadTab:function(t){return t.getParam("image_uploadtab",!0,"boolean")},hasAdvTab:function(t){return t.getParam("image_advtab",!1,"boolean")},getPrependUrl:function(t){return t.getParam("image_prepend_url","","string")},getClassList:function(t){return t.getParam("image_class_list")},hasDescription:function(t){return t.getParam("image_description",!0,"boolean")},hasImageTitle:function(t){return t.getParam("image_title",!1,"boolean")},hasImageCaption:function(t){return t.getParam("image_caption",!1,"boolean")},getImageList:function(t){return t.getParam("image_list",!1)},hasUploadUrl:function(t){return!!Mt(t)},hasUploadHandler:function(t){return!!Ht(t)},getUploadUrl:Mt,getUploadHandler:Ht,getUploadBasePath:function(t){return t.getParam("images_upload_base_path",undefined,"string")},getUploadCredentials:function(t){return t.getParam("images_upload_credentials",!1,"boolean")}},Gt=function(t,e){function n(t){r.parentNode&&r.parentNode.removeChild(r),e(t)}var r=s.document.createElement("img");r.onload=function(){var t={width:m(r.width,r.clientWidth),height:m(r.height,r.clientHeight)};n(Ot.value(t))},r.onerror=function(){n(Ot.error("Failed to get image dimensions for: "+t))};var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left="0px",i.width=i.height="auto",s.document.body.appendChild(r),r.src=t},Wt=function(t){return t&&t.replace(/px$/,"")},qt=function(t){return 0<t.length&&/^[0-9]+$/.test(t)&&(t+="px"),t},$t=function(t){if(t.margin){var e=String(t.margin).split(" ");switch(e.length){case 1:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[0],t["margin-bottom"]=t["margin-bottom"]||e[0],t["margin-left"]=t["margin-left"]||e[0];break;case 2:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[0],t["margin-left"]=t["margin-left"]||e[1];break;case 3:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[2],t["margin-left"]=t["margin-left"]||e[1];break;case 4:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[2],t["margin-left"]=t["margin-left"]||e[3]}delete t.margin}return t},Jt=function(t,e){var n=Bt.getImageList(t);"string"==typeof n?zt.send({url:n,success:function(t){e(JSON.parse(t))}}):"function"==typeof n?n(e):e(n)},Vt=function(t,e,n){function r(){n.onload=n.onerror=null,t.selection&&(t.selection.select(n),t.nodeChanged())}n.onload=function(){e.width||e.height||!Bt.hasDimensions(t)||t.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),r()},n.onerror=r},Xt=function(r){return new kt(function(t,e){var n=new s.FileReader;n.onload=function(){t(n.result)},n.onerror=function(){e(n.error.message)},n.readAsDataURL(r)})},Zt=function(t){return"IMG"===t.nodeName&&(t.hasAttribute("data-mce-object")||t.hasAttribute("data-mce-placeholder"))},Kt=Ft.DOM,Qt=function(t,e,n){var r=E(t,n);L(n,r,e,"caption",function(t){return _(t)}),L(n,r,e,"src",T),L(n,r,e,"alt",T),L(n,r,e,"title",T),L(n,r,e,"width",x(0,t)),L(n,r,e,"height",x(0,t)),L(n,r,e,"class",T),L(n,r,e,"style",N(function(t,e){return T(t,"style",e)},t)),L(n,r,e,"hspace",N(I,t)),L(n,r,e,"vspace",N(S,t)),L(n,r,e,"border",N(D,t)),L(n,r,e,"borderStyle",N(O,t))},Yt=tinymce.util.Tools.resolve("tinymce.util.Tools"),te=function(t,i){var o=[];return Yt.each(t,function(t){var e=dt(t.text)?t.text:dt(t.title)?t.title:"";if(t.menu!==undefined){var n=te(t.menu,i);o.push({text:e,items:n})}else{var r=i(t);o.push({text:e,value:r})}}),o},ee=function(t,n){return function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return ft.none()}(t,function(t){return e=t,Object.prototype.hasOwnProperty.call(e,"items")?ee(t.items,n):t.value===n?ft.some(t):ft.none();var e})},ne=H,re=function(t){return H(M)(t)},ie=function(t,e){return t.bind(function(t){return ee(t,e)})},oe=function(){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"selectbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},ae=function(){return{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}},ue=function(t){t.addCommand("mceImage",Y(t).open)},ce=function(t){t.on("PreInit",function(){t.parser.addNodeFilter("figure",tt(!0)),t.serializer.addNodeFilter("figure",tt(!1))})},le=function(e){e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Y(e).open,onSetup:function(t){return e.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",t.setActive).unbind}}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Y(e).open}),e.ui.registry.addContextMenu("image",{update:function(t){return C(t)||"IMG"===t.nodeName&&!Zt(t)?["image"]:[]}})};!function se(){at.add("image",function(t){ce(t),le(t),ue(t)})}()}(window);
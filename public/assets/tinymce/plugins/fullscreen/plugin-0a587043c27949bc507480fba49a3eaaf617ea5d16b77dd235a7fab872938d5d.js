!function(h){"use strict";function e(){}function i(e){return function(){return e}}function n(){return se}function r(e){return e.isNone()}function t(e){return e()}function o(e){return e}function u(n){return function(e){return function(e){if(null===e)return"null";var n=typeof e;return"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(e)===n}}function s(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o];t[o]=n(i,o)}return t}function c(e,n){for(var r=0,t=e.length;r<t;r++)n(e[r],r)}function a(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];n(i,t)&&r.push(i)}return r}function f(e,n){return function(e){for(var n=[],r=0,t=e.length;r<t;++r){if(!de(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);ve.apply(n,e[r])}return n}(s(e,n))}function d(e,n){return-1!==e.indexOf(n)}function l(e){return e.style!==undefined&&me(e.style.getPropertyValue)}function m(e,n,r){!function(e,n,r){if(!(fe(r)||le(r)||he(r)))throw h.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")}(e.dom(),n,r)}function v(e,n){var r=e.dom().getAttribute(n);return null===r?undefined:r}function g(e,n){e.dom().removeAttribute(n)}function p(e,n){var r=e.dom();!function(e,n){for(var r=ge(e),t=0,o=r.length;t<o;t++){var i=r[t];n(e[i],i)}}(n,function(e,n){!function(e,n,r){if(!fe(r))throw h.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);l(e)&&e.style.setProperty(n,r)}(r,n,e)})}function w(e,n){var r,t,o=e.dom(),i=h.window.getComputedStyle(o).getPropertyValue(n),u=""!==i||(t=Oe(r=e)?r.dom().parentNode:r.dom())!==undefined&&null!==t&&t.ownerDocument.body.contains(t)?i:xe(o,n);return null===u?undefined:u}function y(e,n){function r(e){return Number(n.replace(t,"$"+e))}var t=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}return undefined}(e,n);return t?Te(r(1),r(2)):{major:0,minor:0}}function S(e,n){return function(){return n===e}}function E(e,n){return function(){return n===e}}function O(e,n){var r=String(n).toLowerCase();return function(e,n){for(var r=0,t=e.length;r<t;r++){var o=e[r];if(n(o,r))return ae.some(o)}return ae.none()}(e,function(e){return e.search(r)})}function x(n){return function(e){return d(e,n)}}function N(){return je.get()}function T(e,n){var r=e.dom();if(r.nodeType!==Be)return!1;var t=r;if(t.matches!==undefined)return t.matches(n);if(t.msMatchesSelector!==undefined)return t.msMatchesSelector(n);if(t.webkitMatchesSelector!==undefined)return t.webkitMatchesSelector(n);if(t.mozMatchesSelector!==undefined)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function b(e,n){var r,t=n===undefined?h.document:n.dom();return(r=t).nodeType!==Be&&r.nodeType!==qe||0===r.childElementCount?[]:s(t.querySelectorAll(e),we.fromDom)}function C(r){return(e=r,ae.from(e.dom().parentNode).map(we.fromDom)).map(ze).map(function(e){return a(e,function(e){return n=e,!(r.dom()===n.dom());var n})}).getOr([]);var e}function A(e,n,r,t){return{x:i(e),y:i(n),width:i(r),height:i(t),right:i(e+r),bottom:i(n+t)}}function D(e){var n,r,t,o,i=e===undefined?h.window:e,u=i.document,s=(n=we.fromDom(u),r=n!==undefined?n.dom():h.document,t=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop,Ye(t,o)),c=i.visualViewport;if(c!==undefined)return A(Math.max(c.pageLeft,s.left()),Math.max(c.pageTop,s.top()),c.width,c.height);var a=u.documentElement,f=a.clientWidth,d=a.clientHeight;return A(s.left(),s.top(),f,d)}function M(e,n,r){return a(function(e,n){for(var r=me(n)?n:ie,t=e.dom(),o=[];null!==t.parentNode&&t.parentNode!==undefined;){var i=t.parentNode,u=we.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o}(e,r),n)}function k(e,n){return r=function(e){return T(e,n)},a(C(e),r);var r}function F(r,t){return function(n){function e(e){return n.setActive(e.state)}return n.setActive(null!==t.get()),r.on("FullscreenStateChanged",e),function(){return r.off("FullscreenStateChanged",e)}}}var _,R,L,P,I,H,W,U,V,j,B,q,z,X,Y,G,$,K,J,Q,Z,ee,ne,re=function(e){function n(){return r}var r=e;return{get:n,set:function(e){r=e},clone:function(){return re(n())}}},te=tinymce.util.Tools.resolve("tinymce.PluginManager"),oe=function(e){return{isFullscreen:function(){return null!==e.get()}}},ie=i(!1),ue=i(!0),se=(_={fold:function(e){return e()},is:ie,isSome:ie,isNone:ue,getOr:o,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(undefined),or:o,orThunk:t,map:n,each:e,bind:n,exists:ie,forall:ue,filter:n,equals:r,equals_:r,toArray:function(){return[]},toString:i("none()")},Object.freeze&&Object.freeze(_),_),ce=function(r){function e(){return o}function n(e){return e(r)}var t=i(r),o={fold:function(e,n){return n(r)},is:function(e){return r===e},isSome:ue,isNone:ie,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(e){return ce(e(r))},each:function(e){e(r)},bind:n,exists:n,forall:n,filter:function(e){return e(r)?o:se},toArray:function(){return[r]},toString:function(){return"some("+r+")"},equals:function(e){return e.is(r)},equals_:function(e,n){return e.fold(ie,function(e){return n(r,e)})}};return o},ae={some:ce,none:n,from:function(e){return null===e||e===undefined?se:ce(e)}},fe=u("string"),de=u("array"),le=u("boolean"),me=u("function"),he=u("number"),ve=(Array.prototype.slice,Array.prototype.push),ge=(me(Array.from)&&Array.from,Object.keys),pe=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:i(e)}},we={fromHtml:function(e,n){var r=(n||h.document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw h.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return pe(r.childNodes[0])},fromTag:function(e,n){var r=(n||h.document).createElement(e);return pe(r)},fromText:function(e,n){var r=(n||h.document).createTextNode(e);return pe(r)},fromDom:pe,fromPoint:function(e,n,r){var t=e.dom();return ae.from(t.elementFromPoint(n,r)).map(pe)}},ye=(h.Node.ATTRIBUTE_NODE,h.Node.CDATA_SECTION_NODE,h.Node.COMMENT_NODE,h.Node.DOCUMENT_NODE),Se=(h.Node.DOCUMENT_TYPE_NODE,h.Node.DOCUMENT_FRAGMENT_NODE,h.Node.ELEMENT_NODE),Ee=h.Node.TEXT_NODE,Oe=(h.Node.PROCESSING_INSTRUCTION_NODE,h.Node.ENTITY_REFERENCE_NODE,h.Node.ENTITY_NODE,h.Node.NOTATION_NODE,"undefined"!=typeof h.window?h.window:Function("return this;")(),R=Ee,function(e){return e.dom().nodeType===R}),xe=function(e,n){return l(e)?e.style.getPropertyValue(n):""},Ne=function(){return Te(0,0)},Te=function(e,n){return{major:e,minor:n}},be={nu:Te,detect:function(e,n){var r=String(n).toLowerCase();return 0===e.length?Ne():y(e,r)},unknown:Ne},Ce="Firefox",Ae=function(e){var n=e.current;return{current:n,version:e.version,isEdge:S("Edge",n),isChrome:S("Chrome",n),isIE:S("IE",n),isOpera:S("Opera",n),isFirefox:S(Ce,n),isSafari:S("Safari",n)}},De={unknown:function(){return Ae({current:undefined,version:be.unknown()})},nu:Ae,edge:i("Edge"),chrome:i("Chrome"),ie:i("IE"),opera:i("Opera"),firefox:i(Ce),safari:i("Safari")},Me="Windows",ke="Android",Fe="Solaris",_e="FreeBSD",Re=function(e){var n=e.current;return{current:n,version:e.version,isWindows:E(Me,n),isiOS:E("iOS",n),isAndroid:E(ke,n),isOSX:E("OSX",n),isLinux:E("Linux",n),isSolaris:E(Fe,n),isFreeBSD:E(_e,n)}},Le={unknown:function(){return Re({current:undefined,version:be.unknown()})},nu:Re,windows:i(Me),ios:i("iOS"),android:i(ke),linux:i("Linux"),osx:i("OSX"),solaris:i(Fe),freebsd:i(_e)},Pe=function(e,r){return O(e,r).map(function(e){var n=be.detect(e.versionRegexes,r);return{current:e.name,version:n}})},Ie=function(e,r){return O(e,r).map(function(e){var n=be.detect(e.versionRegexes,r);return{current:e.name,version:n}})},He=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,We=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return d(e,"edge/")&&d(e,"chrome")&&d(e,"safari")&&d(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,He],search:function(e){return d(e,"chrome")&&!d(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return d(e,"msie")||d(e,"trident")}},{name:"Opera",versionRegexes:[He,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:x("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:x("firefox")},{name:"Safari",versionRegexes:[He,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(d(e,"safari")||d(e,"mobile/"))&&d(e,"applewebkit")}}],Ue=[{name:"Windows",search:x("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return d(e,"iphone")||d(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:x("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:x("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:x("linux"),versionRegexes:[]},{name:"Solaris",search:x("sunos"),versionRegexes:[]},{name:"FreeBSD",search:x("freebsd"),versionRegexes:[]}],Ve={browsers:i(We),oses:i(Ue)},je=re((H=h.navigator.userAgent,W=function(e){return h.window.matchMedia(e).matches},Q=Ve.browsers(),Z=Ve.oses(),ee=Pe(Q,H).fold(De.unknown,De.nu),ne=Ie(Z,H).fold(Le.unknown,Le.nu),{browser:ee,os:ne,deviceType:(U=ne,V=ee,j=H,B=W,q=U.isiOS()&&!0===/ipad/i.test(j),z=U.isiOS()&&!q,X=U.isiOS()||U.isAndroid(),Y=X||B("(pointer:coarse)"),G=q||!z&&X&&B("(min-device-width:768px)"),$=z||X&&!G,K=V.isSafari()&&U.isiOS()&&!1===/safari/i.test(j),J=!$&&!G&&!K,{isiPad:i(q),isiPhone:i(z),isTablet:i(G),isPhone:i($),isTouch:i(Y),isAndroid:U.isAndroid,isiOS:U.isiOS,isWebView:i(K),isDesktop:i(J)})})),Be=Se,qe=ye,ze=(N().browser.isIE(),function(e){return s(e.dom().childNodes,we.fromDom)}),Xe=(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]}("element","offset"),function(r,t){return{left:i(r),top:i(t),translate:function(e,n){return Xe(r+e,t+n)}}}),Ye=Xe,Ge=(N().browser.isSafari(),function(e,n){e.fire("FullscreenStateChanged",{state:n})}),$e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ke=tinymce.util.Tools.resolve("tinymce.Env"),Je=tinymce.util.Tools.resolve("tinymce.util.Delay"),Qe="data-ephox-mobile-fullscreen-style",Ze="position:absolute!important;",en="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",nn=Ke.os.isAndroid(),rn=function(e,n){function r(t){return function(e){var n=v(e,"style"),r=n===undefined?"no-styles":n.trim();r!==t&&(m(e,Qe,r),m(e,"style",t))}}var t,o,i=(o="*",M(e,function(e){return T(e,o)},void 0)),u=f(i,function(e){return k(e,"*:not(.tox-silver-sink)")}),s=(t=w(n,"background-color"))!==undefined&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;";c(u,r("display:none!important;")),c(i,r(Ze+en+s)),r((!0===nn?"":Ze)+en+s)(e)},tn=function(){c(b("["+Qe+"]"),function(e){var n=v(e,Qe);"no-styles"!==n?m(e,"style",n):g(e,"style"),g(e,Qe)})},on=$e.DOM,un=h.window.visualViewport,sn=un===undefined?{bind:e,unbind:e}:(I=re(ae.none()),L={clear:function(){I.set(ae.none())},set:function(e){I.set(ae.some(e))},isSet:function(){return I.get().isSome()},on:function(e){I.get().each(e)}},P=Je.throttle(function(){h.document.body.scrollTop=0,h.document.documentElement.scrollTop=0,h.window.requestAnimationFrame(function(){L.on(function(e){return p(e,{top:un.offsetTop+"px",left:un.offsetLeft+"px",height:un.height+"px",width:un.width+"px"})})})},50),{bind:function(e){L.set(e),P(),un.addEventListener("resize",P),un.addEventListener("scroll",P)},unbind:function(){L.on(function(){un.removeEventListener("scroll",P),un.removeEventListener("resize",P)}),L.clear()}}),cn=function(e,n){var r,t,o,i=h.document.body,u=h.document.documentElement;t=e.getContainer();var s,c,a=we.fromDom(t),f=n.get(),d=we.fromDom(e.getBody()),l=Ke.deviceType.isTouch();if(r=t.style,o=e.getContentAreaContainer().firstChild.style,f)o.width=f.iframeWidth,o.height=f.iframeHeight,r.width=f.containerWidth,r.height=f.containerHeight,r.top=f.containerTop,r.left=f.containerLeft,l&&tn(),on.removeClass(i,"tox-fullscreen"),on.removeClass(u,"tox-fullscreen"),on.removeClass(t,"tox-fullscreen"),c=f.scrollPos,h.window.scrollTo(c.x,c.y),n.set(null),Ge(e,!1),sn.unbind(),e.off("remove",sn.unbind);else{var m={scrollPos:(s=D(h.window),{x:s.x(),y:s.y()}),containerWidth:r.width,containerHeight:r.height,containerTop:r.top,containerLeft:r.left,iframeWidth:o.width,iframeHeight:o.height};l&&rn(a,d),o.width=o.height="100%",r.width=r.height="",on.addClass(i,"tox-fullscreen"),on.addClass(u,"tox-fullscreen"),on.addClass(t,"tox-fullscreen"),sn.bind(a),e.on("remove",sn.unbind),n.set(m),Ge(e,!0)}},an=function(e,n){e.addCommand("mceFullScreen",function(){cn(e,n)})},fn=function(e,n){e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:F(e,n)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:F(e,n)})};!function dn(){te.add("fullscreen",function(e){var n=re(null);return e.settings.inline||(an(e,n),fn(e,n),e.addShortcut("Meta+Shift+F","","mceFullScreen")),oe(n)})}()}(window);
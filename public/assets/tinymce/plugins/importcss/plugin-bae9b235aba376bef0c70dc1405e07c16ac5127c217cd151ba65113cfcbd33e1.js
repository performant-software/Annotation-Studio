!function(){"use strict";function t(){}function n(t){return function(){return t}}function e(){return P}function r(t){return t.isNone()}function o(t){return t()}function i(t){return t}function u(t){return function(n){return function(t){if(null===t)return"null";var n=typeof t;return"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}}function c(t,n){return function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!w(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);I.apply(n,t[e])}return n}(function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(t,n))}function s(t){return"string"==typeof t?function(n){return-1!==n.indexOf(t)}:t instanceof RegExp?function(n){return t.test(n)}:t}function a(t,n,e){function r(n,i){var u,c=n.href;if((c=function(t){var n=v.cacheSuffix;return"string"==typeof t&&(t=t.replace("?"+n,"").replace("&"+n,"")),t}(c))&&e(c,i)&&!function(t,n){var e=t.settings,r=!1!==e.skin&&(e.skin||"oxide");if(r){var o=e.skin_url?t.documentBaseURI.toAbsolute(e.skin_url):y.baseURL+"/skins/ui/"+r,i=y.baseURL+"/skins/content/";return n===o+"/content"+(t.inline?".inline":"")+".min.css"||-1!==n.indexOf(i)}return!1}(t,c)){d.each(n.imports,(function(t){r(t,!0)}));try{u=n.cssRules||n.rules}catch(t){}d.each(u,(function(t){t.styleSheet?r(t.styleSheet,!0):t.selectorText&&d.each(t.selectorText.split(","),(function(t){o.push(d.trim(t))}))}))}}var o=[],i={};d.each(t.contentCSS,(function(t){i[t]=!0})),e=e||function(t,n){return n||i[t]};try{d.each(n.styleSheets,(function(t){r(t)}))}catch(t){}return o}function l(t,n){var e,r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(n);if(r){var o=r[1],i=r[2].substr(1).split(".").join(" "),u=d.makeMap("a,img");return r[1]?(e={title:n},t.schema.getTextBlockElements()[o]?e.block=o:t.schema.getBlockElements()[o]||u[o.toLowerCase()]?e.selector=o:e.inline=o):r[2]&&(e={inline:"span",title:n.substr(1),classes:i}),!1!==h(t)?e.classes=i:e.attributes={class:i},e}}function f(t,n){return null===n||!1!==_(t)}var m,p=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),y=tinymce.util.Tools.resolve("tinymce.EditorManager"),v=tinymce.util.Tools.resolve("tinymce.Env"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=function(t){return t.getParam("importcss_merge_classes")},_=function(t){return t.getParam("importcss_exclusive")},x=function(t){return t.getParam("importcss_selector_converter")},O=function(t){return t.getParam("importcss_selector_filter")},T=function(t){return t.getParam("importcss_groups")},b=function(t){return t.getParam("importcss_append")},k=function(t){return t.getParam("importcss_file_filter")},S=n(!1),A=n(!0),P=(m={fold:function(t){return t()},is:S,isSome:S,isNone:A,getOr:i,getOrThunk:o,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:n(null),getOrUndefined:n(void 0),or:i,orThunk:o,map:e,each:t,bind:e,exists:S,forall:A,filter:e,equals:r,equals_:r,toArray:function(){return[]},toString:n("none()")},Object.freeze&&Object.freeze(m),m),w=u("array"),E=u("function"),I=(Array.prototype.slice,Array.prototype.push),M=(E(Array.from)&&Array.from,l),j=function(t){t.on("init",(function(){function n(n,e){if(function(t,n,e,r){return!(f(t,e)?n in r:n in e.selectors)}(t,n,e,r)){!function(t,n,e,r){f(t,e)?r[n]=!0:e.selectors[n]=!0}(t,n,e,r);var o=function(t,n,e,r){return(r&&r.selector_converter?r.selector_converter:x(t)?x(t):function(){return l(t,e)}).call(n,e,r)}(t,t.plugins.importcss,n,e);if(o){var i=o.name||g.DOM.uniqueId();return t.formatter.register(i,o),d.extend({},{title:o.title,format:i})}}return null}var e=function(){var t=[],n=[],e={};return{addItemToGroup:function(t,r){e[t]?e[t].push(r):(n.push(t),e[t]=[r])},addItem:function(n){t.push(n)},toFormats:function(){return c(n,(function(t){var n=e[t];return 0===n.length?[]:[{title:t,items:n}]})).concat(t)}}}(),r={},o=s(O(t)),i=function(t){return d.map(t,(function(t){return d.extend({},t,{original:t,selectors:{},filter:s(t.filter),item:{text:t.title,menu:[]}})}))}(T(t));d.each(a(t,t.getDoc(),s(k(t))),(function(t){if(-1===t.indexOf(".mce-")&&(!o||o(t))){var r=function(t,n){return d.grep(t,(function(t){return!t.filter||t.filter(n)}))}(i,t);if(0<r.length)d.each(r,(function(r){var o=n(t,r);o&&e.addItemToGroup(r.title,o)}));else{var u=n(t,null);u&&e.addItem(u)}}}));var u=e.toFormats();t.fire("addStyleModifications",{items:u,replace:!b(t)})}))},D=function(t){return{convertSelectorToFormat:function(n){return M(t,n)}}};p.add("importcss",(function(t){return j(t),D(t)}))}();
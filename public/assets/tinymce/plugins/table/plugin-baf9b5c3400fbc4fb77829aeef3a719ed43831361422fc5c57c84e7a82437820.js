!function(t){"use strict";function e(t){return t}function n(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}}function r(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}}function o(){return yo}function i(t){return t.isNone()}function u(t){return t()}function c(t){return t}function a(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}}function l(t,e){return-1<function(t,e){return No.call(t,e)}(t,e)}function f(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1}function s(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r}function d(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function m(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r)&&n.push(i)}return n}function g(t,e,n){return function(t,e){for(var n=t.length-1;0<=n;n--)e(t[n],n)}(t,(function(t){n=e(n,t)})),n}function p(t,e,n){return d(t,(function(t){n=e(n,t)})),n}function h(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return So.some(o)}return So.none()}function v(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return So.some(n);return So.none()}function b(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!To(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);ko.apply(e,t[n])}return e}function w(t,e){return b(s(t,e))}function y(t,e){for(var n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0}function C(t){var e=Eo.call(t,0);return e.reverse(),e}function S(t,e){for(var n=Io(t),r=0,o=n.length;r<o;r++){var i=n[r];e(t[i],i)}}function x(t,e){return Po(t,(function(t,n){return{k:n,v:e(t,n)}}))}function R(t,e){return Mo(t,e)?So.from(t[e]):So.none()}function T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return d(t,(function(t,n){r[t]=vo(e[n])})),r}}function O(t){return t.slice(0).sort()}function D(t,e){throw new Error("All required keys ("+O(t).join(", ")+") were not specified. Specified keys were: "+O(e).join(", ")+".")}function A(t){throw new Error("Unsupported keys for object: "+O(t).join(", "))}function E(t,e){if(!To(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");d(e,(function(e){if(!Ro(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")}))}function N(t){var e=O(t);h(e,(function(t,n){return n<e.length-1&&t===e[n+1]})).each((function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}))}function k(t){return t.dom().nodeType}function I(t){return function(e){return k(e)===t}}function B(t){return k(t)===_o||"#comment"===Ho(t)}function P(e,n,r){if(!(Ro(r)||Oo(r)||Ao(r)))throw t.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")}function M(t,e,n){P(t.dom(),e,n)}function W(t,e){var n=t.dom();S(e,(function(t,e){P(n,e,t)}))}function _(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n}function L(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)}function j(t,e){t.dom().removeAttribute(e)}function z(t){return p(t.dom().attributes,(function(t,e){return t[e.name]=e.value,t}),{})}function H(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e}function F(t,e){return-1!==t.indexOf(e)}function U(t,e){return H(t,e,0)}function q(t){return void 0!==t.style&&Do(t.style.getPropertyValue)}function V(t){var e,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,e=t.apply(null,r)),e}}function G(t){var e=Uo(t)?t.dom().parentNode:t.dom();return null!=e&&e.ownerDocument.body.contains(e)}function Y(e,n,r){if(!Ro(r))throw t.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);q(e)&&e.style.setProperty(n,r)}function K(t,e,n){Y(t.dom(),e,n)}function X(t,e){var n=t.dom();S(e,(function(t,e){Y(n,e,t)}))}function $(e,n){var r=e.dom(),o=t.window.getComputedStyle(r).getPropertyValue(n),i=""!==o||G(e)?o:Ko(r,n);return null===i?void 0:i}function J(t,e){var n=t.dom(),r=Ko(n,e);return So.from(r).filter((function(t){return 0<t.length}))}function Q(t,e){!function(t,e){q(t)&&t.style.removeProperty(e)}(t.dom(),e),L(t,"style")&&""===function(t){return t.replace(/^\s+|\s+$/g,"")}(_(t,"style"))&&j(t,"style")}function Z(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)}function tt(t,e){function n(t){return Number(e.replace(r,"$"+t))}var r=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);return r?Qo(n(1),n(2)):{major:0,minor:0}}function et(t,e){return function(){return e===t}}function nt(t,e){return function(){return e===t}}function rt(t,e){var n=String(e).toLowerCase();return h(t,(function(t){return t.search(n)}))}function ot(t){return function(e){return F(e,t)}}function it(){return pi.get()}function ut(t,e){var n=t.dom();if(n.nodeType!==hi)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}function ct(t){return t.nodeType!==hi&&t.nodeType!==vi||0===t.childElementCount}function at(t){return Vo.fromDom(t.dom().ownerDocument)}function lt(t){return So.from(t.dom().parentNode).map(Vo.fromDom)}function ft(t,e){for(var n=Do(e)?e:bo,r=t.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=Vo.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o}function st(t){return So.from(t.dom().previousSibling).map(Vo.fromDom)}function dt(t){return So.from(t.dom().nextSibling).map(Vo.fromDom)}function mt(t){return s(t.dom().childNodes,Vo.fromDom)}function gt(t,e){var n=t.dom().childNodes;return So.from(n[e]).map(Vo.fromDom)}function pt(t,e){lt(t).each((function(n){n.dom().insertBefore(e.dom(),t.dom())}))}function ht(t,e){dt(t).fold((function(){lt(t).each((function(t){Ci(t,e)}))}),(function(t){pt(t,e)}))}function vt(t,e){(function(t){return gt(t,0)})(t).fold((function(){Ci(t,e)}),(function(n){t.dom().insertBefore(e.dom(),n.dom())}))}function bt(t,e){pt(t,e),Ci(e,t)}function wt(t,e){d(e,(function(n,r){ht(0===r?t:e[r-1],n)}))}function yt(t,e){d(e,(function(e){Ci(t,e)}))}function Ct(t){t.dom().textContent="",d(mt(t),(function(t){Si(t)}))}function St(t){var e=mt(t);0<e.length&&function(t,e){d(e,(function(e){pt(t,e)}))}(t,e),Si(t)}function xt(t,e,n){return function(t,e,n){return m(ft(t,n),e)}(t,(function(t){return ut(t,e)}),n)}function Rt(t,e){return function(t,e){return m(mt(t),e)}(t,(function(t){return ut(t,e)}))}function Tt(e,n){return function(e,n){var r=void 0===n?t.document:n.dom();return ct(r)?[]:s(r.querySelectorAll(e),Vo.fromDom)}(n,e)}function Ot(t,e,n,r,o){return t(n,r)?So.some(n):Do(o)&&o(n)?So.none():e(n,r,o)}function Dt(t,e,n){for(var r=t.dom(),o=Do(n)?n:vo(!1);r.parentNode;){r=r.parentNode;var i=Vo.fromDom(r);if(e(i))return So.some(i);if(o(i))break}return So.none()}function At(t,e,n){return Dt(t,(function(t){return ut(t,e)}),n)}function Et(t,e){return function(t,e){return h(t.dom().childNodes,(function(t){return e(Vo.fromDom(t))})).map(Vo.fromDom)}(t,(function(t){return ut(t,e)}))}function Nt(e,n){return function(e,n){var r=void 0===n?t.document:n.dom();return ct(r)?So.none():So.from(r.querySelector(e)).map(Vo.fromDom)}(n,e)}function kt(t,e,n){return Ot(ut,At,t,e,n)}function It(t,e,n){return void 0===n&&(n=bo),n(e)?So.none():l(t,Ho(e))?So.some(e):At(e,t.join(","),(function(t){return ut(t,"table")||n(t)}))}function Bt(t,e){return lt(e).map((function(e){return Rt(e,t)}))}function Pt(t,e){return parseInt(_(t,e),10)}function Mt(t,e){return t+","+e}function Wt(t){return Gi.get(t)}function _t(t){return Gi.getOption(t)}function Lt(t,e){Gi.set(t,e)}function jt(t){return"img"===Ho(t)?1:_t(t).fold((function(){return mt(t).length}),(function(t){return t.length}))}function zt(t){return function(t){return _t(t).filter((function(t){return 0!==t.trim().length||-1<t.indexOf("\xa0")})).isSome()}(t)||l(Yi,Ho(t))}function Ht(t){return function(t,e){var n=function(t){for(var r=0;r<t.childNodes.length;r++){var o=Vo.fromDom(t.childNodes[r]);if(e(o))return So.some(o);var i=n(t.childNodes[r]);if(i.isSome())return i}return So.none()};return n(t.dom())}(t,zt)}function Ft(t){return Ki(t,zt)}function Ut(t,e){return Vo.fromDom(t.dom().cloneNode(e))}function qt(t){return Ut(t,!1)}function Vt(t){return Ut(t,!0)}function Gt(t,e){var n=function(t,e){var n=Vo.fromTag(e);return W(n,z(t)),n}(t,e);return yt(n,mt(Vt(t))),n}function Yt(){var t=Vo.fromTag("td");return Ci(t,Vo.fromTag("br")),t}function Kt(t,e,n){var r=Gt(t,e);return S(n,(function(t,e){null===t?j(r,e):M(r,e,t)})),r}function Xt(t){return t}function $t(t){return function(){return Vo.fromTag("tr",t.dom())}}function Jt(t,e){return e.column()>=t.startCol()&&e.column()+e.colspan()-1<=t.finishCol()&&e.row()>=t.startRow()&&e.row()+e.rowspan()-1<=t.finishRow()}function Qt(t,e,n){var r=Ui.findItem(t,e,bi),o=Ui.findItem(t,n,bi);return r.bind((function(t){return o.map((function(e){return function(t,e){return Bi(Math.min(t.row(),e.row()),Math.min(t.column(),e.column()),Math.max(t.row()+t.rowspan()-1,e.row()+e.rowspan()-1),Math.max(t.column()+t.colspan()-1,e.column()+e.colspan()-1))}(t,e)}))}))}function Zt(){return{up:vo({selector:At,closest:kt,predicate:Dt,all:ft}),down:vo({selector:Tt,predicate:Pi}),styles:vo({get:$,getRaw:J,set:K,remove:Q}),attrs:vo({get:_,set:M,remove:j,copyTo:function(t,e){W(e,z(t))}}),insert:vo({before:pt,after:ht,afterAll:wt,append:Ci,appendAll:yt,prepend:vt,wrap:bt}),remove:vo({unwrap:St,remove:Si}),create:vo({nu:Vo.fromTag,clone:function(t){return Vo.fromDom(t.dom().cloneNode(!1))},text:Vo.fromText}),query:vo({comparePosition:function(t,e){return t.dom().compareDocumentPosition(e.dom())},prevSibling:st,nextSibling:dt}),property:vo({children:mt,name:Ho,parent:lt,document:function(t){return t.dom().ownerDocument},isText:Uo,isComment:B,isElement:Fo,getText:Wt,setText:Lt,isBoundary:function(t){return!!Fo(t)&&("body"===Ho(t)||l(au,Ho(t)))},isEmptyTag:function(t){return!!Fo(t)&&l(["br","img","hr","input"],Ho(t))}}),eq:bi,is:yi}}function te(t,e,r){var o=t.property().children(e);return v(o,n(t.eq,r)).map((function(t){return{before:vo(o.slice(0,t)),after:vo(o.slice(t+1))}}))}function ee(t,e){return n(t.eq,e)}function ne(t,e,n,r){function o(t){return v(t,r).fold((function(){return t}),(function(e){return t.slice(0,e+1)}))}void 0===r&&(r=bo);var i=[e].concat(t.up().all(e)),u=[n].concat(t.up().all(n)),c=o(i),a=o(u),l=h(c,(function(e){return f(a,ee(t,e))}));return{firstpath:vo(c),secondpath:vo(a),shared:vo(l)}}function re(t){return At(t,"table")}function oe(t,e,n){function r(t){return function(e){return void 0!==n&&n(e)||bi(e,t)}}return bi(t,e)?So.some(hu.create({boxes:So.some([t]),start:t,finish:e})):re(t).bind((function(o){return re(e).bind((function(i){if(bi(o,i))return So.some(hu.create({boxes:iu(o,t,e),start:t,finish:e}));if(wi(o,i)){var u=0<(c=xt(e,"td,th",r(o))).length?c[c.length-1]:e;return So.some(hu.create({boxes:uu(o,t,o,e,i),start:t,finish:u}))}if(wi(i,o)){var c,a=0<(c=xt(t,"td,th",r(i))).length?c[c.length-1]:t;return So.some(hu.create({boxes:uu(i,t,o,e,i),start:t,finish:a}))}return pu.ancestors(t,e).shared().bind((function(u){return kt(u,"table",n).bind((function(n){var u=xt(e,"td,th",r(n)),c=0<u.length?u[u.length-1]:e,a=xt(t,"td,th",r(n)),l=0<a.length?a[a.length-1]:t;return So.some(hu.create({boxes:uu(n,t,o,e,i),start:l,finish:c}))}))}))}))}))}function ie(t,n){return Eu.cata(n.get(),vo([]),e,vo([t]))}function ue(t){return{element:vo(t),mergable:So.none,unmergable:So.none,selection:vo([t])}}function ce(t,e){function n(n){var r=e(n);if(r<=0||null===r){var o=$(n,t);return parseFloat(o)||0}return r}function r(t,e){return p(e,(function(e,n){var r=$(t,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o}),0)}return{set:function(e,n){if(!Ao(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom();q(r)&&(r.style[t]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(t,e,n){var o=r(t,n);return o<e?e-o:0}}}function ae(t){return Wu.get(t)}function le(t){return Wu.getOuter(t)}function fe(t){return _u.get(t)}function se(t){return _u.getOuter(t)}function de(t,e,n){return function(t,e){var n=parseFloat(t);return isNaN(n)?e:n}($(t,e),n)}function me(t,e){K(t,"height",e+"px")}function ge(t,e,n,r){var o=parseInt(t,10);return function(t,e){return H(t,e,t.length-e.length)}(t,"%")&&"table"!==Ho(e)?function(t,e,n,r){var o=ji.table(t).map((function(t){var r=n(t);return Math.floor(e/100*r)})).getOr(e);return r(t,o),o}(e,o,n,r):o}function pe(t){var e=function(t){return J(t,"height").getOrThunk((function(){return ju(t)+"px"}))}(t);return e?ge(e,t,ae,me):ae(t)}function he(t){return J(t,"width").fold((function(){return So.from(_(t,"width"))}),(function(t){return So.some(t)}))}function ve(t,e){return t/e.pixelWidth()*100}function be(t,e){return void 0!==t?t:void 0!==e?e:0}function we(t){var e=t.dom().ownerDocument,n=e.body,r=e.defaultView,o=e.documentElement;if(n===t.dom())return Yu(n.offsetLeft,n.offsetTop);var i=be(r.pageYOffset,o.scrollTop),u=be(r.pageXOffset,o.scrollLeft),c=be(o.clientTop,n.clientTop),a=be(o.clientLeft,n.clientLeft);return Ku(t).translate(u-a,i-c)}function ye(t){return we(t).left()+se(t)}function Ce(t){return we(t).left()}function Se(t,e){return $u(t,Ce(e))}function xe(t,e){return $u(t,ye(e))}function Re(t){return we(t).top()}function Te(t,e){return Xu(t,Re(e))}function Oe(t,e){return Xu(t,Re(e)+le(e))}function De(t,e,n){if(0===n.length)return[];var r=s(n.slice(1),(function(e,n){return e.map((function(e){return t(n,e)}))})),o=n[n.length-1].map((function(t){return e(n.length-1,t)}));return r.concat([o])}function Ae(t){function e(e){return t(e).isRtl()?Qu.rtl:Qu.ltr}return{delta:function(t,n){return e(n).delta(t,n)},edge:function(t){return e(t).edge(t)},positions:function(t,n){return e(n).positions(t,n)}}}function Ee(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e}function Ne(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return So.none()}function ke(t,e,n,r){n===r?j(t,e):M(t,e,n)}function Ie(t,e){var n=_(t,e);return void 0===n||""===n?[]:n.split(" ")}function Be(t){return void 0!==t.dom().classList}function Pe(t,e){return function(t,e,n){return M(t,e,Ie(t,e).concat([n]).join(" ")),!0}(t,"class",e)}function Me(t,e){return function(t,e,n){var r=m(Ie(t,e),(function(t){return t!==n}));return 0<r.length?M(t,e,r.join(" ")):j(t,e),!1}(t,"class",e)}function We(t,e){Be(t)?t.dom().classList.add(e):Pe(t,e)}function _e(t){0===(Be(t)?t.dom().classList:function(t){return Ie(t,"class")}(t)).length&&j(t,"class")}function Le(t,e){return Be(t)&&t.dom().classList.contains(e)}function je(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n}function ze(t,e){if(e<0||e>=t.length-1)return So.none();var n=t[e].fold((function(){return Ne(C(t.slice(0,e)),(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return So.some({value:t,delta:0})})),r=t[e+1].fold((function(){return Ne(t.slice(e+1),(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return So.some({value:t,delta:1})}));return n.bind((function(t){return r.map((function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n}))}))}function He(t){var e=t.replace(/\./g,"-");return{resolve:function(t){return e+"-"+t}}}function Fe(t){d(Tt(t.parent(),"."+ac),Si)}function Ue(t,e,n){var r=t.origin();d(e,(function(e){e.each((function(e){var o=n(r,e);We(o,ac),Ci(t.parent(),o)}))}))}function qe(t,e,n,r,o,i){var u=we(e);!function(t,e,n,r){Ue(t,e,(function(t,e){var o=cc(e.row(),n.left()-t.left(),e.y()-t.top(),r,7);return We(o,lc),o}))}(t,0<n.length?o.positions(n,e):[],u,se(e)),function(t,e,n,r){Ue(t,e,(function(t,e){var o=uc(e.col(),e.x()-t.left(),n.top()-t.top(),7,r);return We(o,fc),o}))}(t,0<r.length?i.positions(r,e):[],u,le(e))}function Ve(t,e){d(Tt(t.parent(),"."+ac),e)}function Ge(t,e){return t.cells()[e]}function Ye(t,e){if(0===t.length)return 0;var n=t[0];return v(t,(function(t){return!e(n.element(),t.element())})).fold((function(){return t.length}),(function(t){return t}))}function Ke(t,e){return s(t,(function(t){var n=function(t){return Ne(t,(function(t){return lt(t.element()).map((function(t){var e=lt(t).isNone();return Ei(t,e)}))})).getOrThunk((function(){return Ei(e.row(),!0)}))}(t.details());return Ni(n.element(),t.details(),t.section(),n.isNew())}))}function Xe(t,e){return Ke(yc(t,bi),e)}function $e(t,e){return h(b(s(t.all(),(function(t){return t.cells()}))),(function(t){return bi(e,t.element())}))}function Je(t,e,n,r,o){return function(i,u,c,a,l){var f=zi(u),s=Ui.generate(f);return e(s,c).map((function(e){var n=function(t,e){return Cc(t,e,!1)}(s,a),r=t(n,e,bi,o(a)),i=Xe(r.grid(),a);return{grid:vo(i),cursor:r.cursor}})).fold((function(){return So.none()}),(function(t){var e=tc(u,t.grid());return n(u,t.grid(),l),r(u),sc(i,u,Ju.height,l),So.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})}))}}function Qe(t,e){return ji.cell(e.element()).bind((function(e){return $e(t,e)}))}function Ze(t,e){var n=Ee(s(e.selection(),(function(e){return ji.cell(e).bind((function(e){return $e(t,e)}))})));return 0<n.length?So.some({cells:n,generators:e.generators,clipboard:e.clipboard}):So.none()}function tn(t,e){var n=Ee(s(e.selection(),(function(e){return ji.cell(e).bind((function(e){return $e(t,e)}))})));return 0<n.length?So.some(n):So.none()}function en(t,e){return s(t,(function(){return Ei(e.cell(),!0)}))}function nn(t,e,n){return t.concat(function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n}(e,(function(){return bc.setCells(t[t.length-1],en(t[t.length-1].cells(),n))})))}function rn(t,e,n){return s(t,(function(t){return bc.setCells(t,t.cells().concat(en(je(0,e),n)))}))}function on(t,e,n,r){return s(t,(function(t){return bc.mapCells(t,(function(t){return function(t){return f(e,(function(e){return n(t.element(),e.element())}))}(t)?Ei(r(t.element(),n),!0):t}))}))}function un(t,e,n,r){return void 0!==bc.getCellElement(t[e],n)&&0<e&&r(bc.getCellElement(t[e-1],n),bc.getCellElement(t[e],n))}function cn(t,e,n){return 0<e&&n(bc.getCellElement(t,e-1),bc.getCellElement(t,e))}function an(t,e){return L(t,e)&&1<parseInt(_(t,e),10)}function ln(t,e,n){return J(t,e).fold((function(){return n(t)+"px"}),(function(t){return t}))}function fn(t,e){return ln(t,"width",(function(t){return qu.getPixelWidth(t,e)}))}function sn(t){return ln(t,"height",qu.getHeight)}function dn(t,e,n,o,i){var u=rc(t),c=s(u,(function(t){return t.map(e.edge)}));return s(u,(function(t,e){return t.filter(r(qc.hasColspan)).fold((function(){var t=ze(c,e);return o(t)}),(function(t){return n(t,i)}))}))}function mn(t){return t.map((function(t){return t+"px"})).getOr("")}function gn(t,e,n,o){var i=oc(t),u=s(i,(function(t){return t.map(e.edge)}));return s(i,(function(t,e){return t.filter(r(qc.hasRowspan)).fold((function(){var t=ze(u,e);return o(t)}),(function(t){return n(t)}))}))}function pn(t,e,n){for(var r=0,o=t;o<e;o++)r+=void 0!==n[o]?n[o]:0;return r}function hn(t){var n=e;return{width:vo(t),pixelWidth:vo(t),getWidths:Vc.getPixelWidths,getCellDelta:n,singleColumnWidth:function(t,e){return[Math.max(qc.minWidth(),t+e)-t]},minCellWidth:qc.minWidth,setElementWidth:qu.setPixelWidth,setTableWidth:function(t,e){var n=g(e,(function(t,e){return t+e}),0);qu.setPixelWidth(t,n)}}}function vn(t,e){var n=qu.percentageBasedSizeRegex().exec(e);if(null!==n)return function(t,e){var n=parseFloat(t),r=fe(e);return{width:vo(n),pixelWidth:vo(r),getWidths:Vc.getPercentageWidths,getCellDelta:function(t){return t/r*100},singleColumnWidth:function(t){return[100-t]},minCellWidth:function(){return qc.minWidth()/r*100},setElementWidth:qu.setPercentageWidth,setTableWidth:function(t,e,r){var o=r/100*n;qu.setPercentageWidth(t,n+o)}}}(n[1],t);var r=qu.pixelBasedSizeRegex().exec(e);return hn(null!==r?parseInt(r[1],10):fe(t))}function bn(t){return Ui.generate(t)}function wn(t){return bn(zi(t))}function yn(t,e){var n=m(e,(function(e){return!l(t,e)}));0<n.length&&A(n)}function Cn(t){return function(t,e){return Zc(t,e,{validate:Do,label:"function"})}(yn,t)}function Sn(t){var e=L(t,"colspan")?parseInt(_(t,"colspan"),10):1,n=L(t,"rowspan")?parseInt(_(t,"rowspan"),10):1;return{element:vo(t),colspan:vo(e),rowspan:vo(n)}}function xn(t,e){var n=t.property().name(e);return l(oa,n)}function Rn(t,e){return l(["br","img","hr","input"],t.property().name(e))}function Tn(t){0===ji.cells(t).length&&Si(t)}function On(t,e,n){return ga(t,e,n).orThunk((function(){return ga(t,0,0)}))}function Dn(t,e,n){return ma(t,ga(t,e,n))}function An(t){return p(t,(function(t,e){return f(t,(function(t){return t.row()===e.row()}))?t:t.concat([e])}),[]).sort((function(t,e){return t.row()-e.row()}))}function En(t){return p(t,(function(t,e){return f(t,(function(t){return t.column()===e.column()}))?t:t.concat([e])}),[]).sort((function(t,e){return t.column()-e.column()}))}function Nn(t,e,n){var r=Hi(t,n),o=Ui.generate(r);return Cc(o,e,!0)}function kn(t){return t.getBoundingClientRect().width}function In(t){return t.getBoundingClientRect().height}function Bn(t){return/^[0-9]+$/.test(t)&&(t+="px"),t}function Pn(t){var e=Tt(t,"td[data-mce-style],th[data-mce-style]");j(t,"data-mce-style"),d(e,(function(t){j(t,"data-mce-style")}))}function Mn(t){return t.getParam("table_default_attributes",xa,"object")}function Wn(t){return t.getParam("table_default_styles",Sa,"object")}function _n(t){return t.getParam("table_cell_advtab",!0,"boolean")}function Ln(t){return t.getParam("table_row_advtab",!0,"boolean")}function jn(t){return t.getParam("table_advtab",!0,"boolean")}function zn(t){return t.getParam("table_style_by_css",!1,"boolean")}function Hn(t){return t.getParam("table_class_list",[],"array")}function Fn(t){return!1===t.getParam("table_responsive_width")}function Un(t,e){return t.fire("newrow",{node:e})}function qn(t,e){return t.fire("newcell",{node:e})}function Vn(t,e,n,r){t.fire("ObjectResizeStart",{target:e,width:n,height:r})}function Gn(t,e,n,r){t.fire("ObjectResized",{target:e,width:n,height:r})}function Yn(t,e){function n(e){return U(e,"rgb")?t.toHex(e):e}return{borderwidth:J(Vo.fromDom(e),"border-width").getOr(""),borderstyle:J(Vo.fromDom(e),"border-style").getOr(""),bordercolor:J(Vo.fromDom(e),"border-color").map(n).getOr(""),backgroundcolor:J(Vo.fromDom(e),"background-color").map(n).getOr("")}}function Kn(t,e,n,r,o){var i={};return Na.each(t.split(" "),(function(t){r.formatter.matchNode(o,e+t)&&(i[n]=t)})),i[n]||(i[n]=""),i}function Xn(t,e){t.setAttrib("scope",e.scope),t.setAttrib("class",e.class),t.setStyle("width",Bn(e.width)),t.setStyle("height",Bn(e.height))}function $n(t,e){t.setStyle("background-color",e.backgroundcolor),t.setStyle("border-color",e.bordercolor),t.setStyle("border-style",e.borderstyle),t.setStyle("border-width",Bn(e.borderwidth))}function Jn(t,e,n){var r=t.dom,o=n.celltype&&e[0].nodeName.toLowerCase()!==n.celltype?r.rename(e[0],n.celltype):e[0],i=Ya.normal(r,o);Xn(i,n),_n(t)&&$n(i,n),Ba(t,o),Pa(t,o),n.halign&&ka(t,o,n.halign),n.valign&&Ia(t,o,n.valign)}function Qn(t,e,n){var r=t.dom;Na.each(e,(function(e){n.celltype&&e.nodeName.toLowerCase()!==n.celltype&&(e=r.rename(e,n.celltype));var o=Ya.ifTruthy(r,e);Xn(o,n),_n(t)&&$n(o,n),n.halign&&ka(t,e,n.halign),n.valign&&Ia(t,e,n.valign)}))}function Zn(t,e,n){var r=n.getData();n.close(),t.undoManager.transact((function(){(1===e.length?Jn:Qn)(t,e,r),t.focus()}))}function tr(t,e,n,r){var o=t.dom,i=r.getData();r.close();var u=1===e.length?Ya.normal:Ya.ifTruthy;t.undoManager.transact((function(){Na.each(e,(function(e){i.type!==e.parentNode.nodeName.toLowerCase()&&function(t,e,n){var r=t.getParent(e,"table"),o=e.parentNode,i=t.select(n,r)[0];i||(i=t.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(e),o.hasChildNodes()||t.remove(o)}(t.dom,e,i.type);var r=u(o,e);r.setAttrib("scope",i.scope),r.setAttrib("class",i.class),r.setStyle("height",Bn(i.height)),Ln(t)&&function(t,e){t.setStyle("background-color",e.backgroundcolor),t.setStyle("border-color",e.bordercolor),t.setStyle("border-style",e.borderstyle)}(r,i),i.align!==n.align&&(Ba(t,e),ka(t,e,i.align))})),t.focus()}))}function er(t,e,n,r,o){void 0===o&&(o=el);var i=Vo.fromTag("table");X(i,o.styles),W(i,o.attributes);var u=Vo.fromTag("tbody");Ci(i,u);for(var c=[],a=0;a<t;a++){for(var l=Vo.fromTag("tr"),f=0;f<e;f++){var s=a<n||f<r?Vo.fromTag("th"):Vo.fromTag("td");f<r&&M(s,"scope","row"),a<n&&M(s,"scope","col"),Ci(s,Vo.fromTag("br")),o.percentages&&K(s,"width",100/e+"%"),Ci(l,s)}c.push(l)}return yt(u,c),i}function nr(t,e){t.selection.select(e.dom(),!0),t.selection.collapse(!0)}function rr(t,e,n){var r,o=t.dom,i=n.getData();n.close(),""===i.class&&delete i.class,t.undoManager.transact((function(){if(!e){var n=parseInt(i.cols,10)||1,u=parseInt(i.rows,10)||1;e=nl(t,n,u)}!function(t,e,n){var r=t.dom,o={},i={};if(o.class=n.class,i.height=Bn(n.height),r.getAttrib(e,"width")&&!zn(t)?o.width=function(t){return t?t.replace(/px$/,""):""}(n.width):i.width=Bn(n.width),zn(t)?(i["border-width"]=Bn(n.border),i["border-spacing"]=Bn(n.cellspacing)):(o.border=n.border,o.cellpadding=n.cellpadding,o.cellspacing=n.cellspacing),zn(t)&&e.children)for(var u=0;u<e.children.length;u++)ol(r,e.children[u],{"border-width":Bn(n.border),padding:Bn(n.cellpadding)}),jn(t)&&ol(r,e.children[u],{"border-color":n.bordercolor});jn(t)&&(i["background-color"]=n.backgroundcolor,i["border-color"]=n.bordercolor,i["border-style"]=n.borderstyle),o.style=r.serializeStyle(Za(Wn(t),i)),r.setAttribs(e,Za(Mn(t),o))}(t,e,i),(r=o.select("caption",e)[0])&&!i.caption&&o.remove(r),!r&&i.caption&&((r=o.create("caption")).innerHTML=tl.ie?"\xa0":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),""===i.align?Ba(t,e):ka(t,e,i.align),t.focus(),t.addVisual()}))}function or(t){return function(e){return So.from(e.dom.getParent(e.selection.getStart(),t)).map(Vo.fromDom)}}function ir(t){function e(){t.stopPropagation()}function n(){t.preventDefault()}var r=Vo.fromDom(t.target),o=ho(n,e);return function(t,e,n,r,o,i,u){return{target:vo(t),x:vo(e),y:vo(n),stop:r,prevent:o,kill:i,raw:vo(u)}}(r,t.clientX,t.clientY,e,n,o,t)}function ur(t,e,r,o,i){var u=function(t,e){return function(n){t(n)&&e(ir(n))}}(r,o);return t.dom().addEventListener(e,u,i),{unbind:n(gl,t,e,u,i)}}function cr(t,e,n){return function(t,e,n,r){return ur(t,e,n,r,!1)}(t,e,pl,n)}function ar(){var t=So.none(),e=ml.create({move:dl(["info"])});return{onEvent:function(n,r){r.extract(n).each((function(n){(function(e,n){var r=t.map((function(t){return e.compare(t,n)}));return t=So.some(n),r})(r,n).each((function(t){e.trigger.move(t)}))}))},reset:function(){t=So.none()},events:e.registry}}function lr(){var t={onEvent:po,reset:po},e=ar(),n=t;return{on:function(){n.reset(),n=e},off:function(){n.reset(),n=t},isOn:function(){return n===e},onEvent:function(t,e){n.onEvent(t,e)},events:e.events}}function fr(){var t=ml.create({drag:dl(["xDelta","yDelta","target"])}),e=So.none(),n=function(){var t=ml.create({drag:dl(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}}();return n.events.drag.bind((function(n){e.each((function(e){t.trigger.drag(n.xDelta(),n.yDelta(),e)}))})),{assign:function(t){e=So.some(t)},get:function(){return e},mutate:n.mutate,events:t.registry}}function sr(t){return"true"===_(t,"contenteditable")}function dr(t,e,r){function o(t,e){return So.from(_(t,e))}function i(t,e){return qc.getInt(t,e)-parseInt(_(t,"data-initial-"+e),10)}function u(e,n){g.trigger.startAdjust(),l.assign(e),M(e,"data-initial-"+n,parseInt($(e,n),10)),We(e,xl),K(e,"opacity","0.2"),f.go(t.parent())}function c(e){return bi(e,t.view())}function a(t){return kt(t,"table",c).filter((function(t){return function(t,e){return kt(t,"[contenteditable]",e)}(t,c).exists(sr)}))}var l=fr(),f=Sl(l,{}),s=So.none();l.events.drag.bind((function(t){o(t.target(),"data-row").each((function(){var e=qc.getInt(t.target(),"top");K(t.target(),"top",e+t.yDelta()+"px")})),o(t.target(),"data-column").each((function(){var e=qc.getInt(t.target(),"left");K(t.target(),"left",e+t.xDelta()+"px")}))})),f.events.stop.bind((function(){l.get().each((function(n){s.each((function(u){o(n,"data-row").each((function(t){var e=i(n,"top");j(n,"data-initial-top"),g.trigger.adjustHeight(u,e,parseInt(t,10))})),o(n,"data-column").each((function(t){var e=i(n,"left");j(n,"data-initial-left"),g.trigger.adjustWidth(u,e,parseInt(t,10))})),sc(t,u,r,e)}))}))}));var d=cr(t.parent(),"mousedown",(function(t){pc(t.target())&&u(t.target(),"top"),hc(t.target())&&u(t.target(),"left")})),m=cr(t.view(),"mouseover",(function(n){a(n.target()).fold((function(){G(n.target())&&gc(t)}),(function(n){s=So.some(n),sc(t,n,r,e)}))})),g=ml.create({adjustHeight:dl(["table","delta","row"]),adjustWidth:dl(["table","delta","column"]),startAdjust:dl([])});return{destroy:function(){d.unbind(),m.unbind(),f.destroy(),gc(t)},refresh:function(n){sc(t,n,r,e)},on:f.on,off:f.off,hideBars:n(dc,t),showBars:n(mc,t),events:g.registry}}function mr(t,e){return kn(t.dom())/kn(e.dom())*100+"%"}function gr(t,e){return ji.table(t,e).bind((function(e){var n=ji.cells(e);return v(n,(function(e){return bi(t,e)})).map((function(t){return{index:vo(t),all:vo(n)}}))}))}function pr(t,e,n){var r=t.document.createRange();return function(t,e){e.fold((function(e){t.setStartBefore(e.dom())}),(function(e,n){t.setStart(e.dom(),n)}),(function(e){t.setStartAfter(e.dom())}))}(r,e),function(t,e){e.fold((function(e){t.setEndBefore(e.dom())}),(function(e,n){t.setEnd(e.dom(),n)}),(function(e){t.setEndAfter(e.dom())}))}(r,n),r}function hr(t,e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i}function vr(t){return{left:vo(t.left),top:vo(t.top),right:vo(t.right),bottom:vo(t.bottom),width:vo(t.width),height:vo(t.height)}}function br(t,e,n){return e(Vo.fromDom(n.startContainer),n.startOffset,Vo.fromDom(n.endContainer),n.endOffset)}function wr(t,e){return function(t,e){var n=e.ltr();return n.collapsed?e.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return Ll.rtl(Vo.fromDom(t.endContainer),t.endOffset,Vo.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return br(0,Ll.ltr,n)})):br(0,Ll.ltr,n)}(0,function(t,e){return e.match({domRange:function(t){return{ltr:vo(t),rtl:So.none}},relative:function(e,n){return{ltr:V((function(){return pr(t,e,n)})),rtl:V((function(){return So.some(pr(t,n,e))}))}},exact:function(e,n,r,o){return{ltr:V((function(){return hr(t,e,n,r,o)})),rtl:V((function(){return So.some(hr(t,r,o,e,n))}))}}})}(t,e))}function yr(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom}function Cr(t,e,n,r,o){function i(n){var r=t.dom().createRange();return r.setStart(e.dom(),n),r.collapse(!0),r}var u=Wt(e).length,c=function(t,e,n,r,o){if(0===o)return 0;if(e===r)return o-1;for(var i=r,u=1;u<o;u++){var c=t(u),a=Math.abs(e-c.left);if(n<=c.bottom){if(n<c.top||i<a)return u-1;i=a}}return 0}((function(t){return i(t).getBoundingClientRect()}),n,r,o.right,u);return i(c)}function Sr(t,e){return e-t.left<t.right-e}function xr(t,e,n){var r=t.dom().createRange();return r.selectNode(e.dom()),r.collapse(n),r}function Rr(t,e,n){var r=t.dom().createRange();r.selectNode(e.dom());var o=Sr(r.getBoundingClientRect(),n);return(!0===o?Ht:Ft)(e).map((function(e){return xr(t,e,o)}))}function Tr(t,e,n){var r=Sr(e.dom().getBoundingClientRect(),n);return So.some(xr(t,e,r))}function Or(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect();return function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),c=Math.max(i.top,Math.min(i.bottom,r));return zl(t,e,u,c)}(t,e,Math.max(i.left,Math.min(i.right,n)),Math.max(i.top,Math.min(i.bottom,r)))}function Dr(t,e){var n=Ho(t);return"input"===n?Pl.after(t):l(["br","img"],n)?0===e?Pl.before(t):Pl.after(t):Pl.on(t,e)}function Ar(t,e){var n=t.fold(Pl.before,Dr,Pl.after),r=e.fold(Pl.before,Dr,Pl.after)
;return Wl.relative(n,r)}function Er(t,e,n,r){var o=Dr(t,e),i=Dr(n,r);return Wl.relative(o,i)}function Nr(t,e,n,r){var o=function(t,e,n,r){var o=at(t).dom().createRange();return o.setStart(t.dom(),e),o.setEnd(n.dom(),r),o}(t,e,n,r),i=bi(t,n)&&e===r;return o.collapsed&&!i}function kr(t,e){So.from(t.getSelection()).each((function(t){t.removeAllRanges(),t.addRange(e)}))}function Ir(t,e,n,r,o){kr(t,hr(t,e,n,r,o))}function Br(t,e){return wr(t,e).match({ltr:function(e,n,r,o){Ir(t,e,n,r,o)},rtl:function(e,n,r,o){var i=t.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(e.dom(),n,r.dom(),o);else if(i.extend)try{!function(t,e,n,r,o,i){e.collapse(n.dom(),r),e.extend(o.dom(),i)}(0,i,e,n,r,o)}catch(i){Ir(t,r,o,e,n)}else Ir(t,r,o,e,n)}})}function Pr(t,e,n,r,o){Br(t,Er(e,n,r,o))}function Mr(t,e,n){Br(t,Ar(e,n))}function Wr(t){function e(t,e,r,o){return hr(n,t,e,r,o)}var n=Wl.getWin(t).dom(),r=function(t){return t.match({domRange:function(t){var e=Vo.fromDom(t.startContainer),n=Vo.fromDom(t.endContainer);return Er(e,t.startOffset,n,t.endOffset)},relative:Ar,exact:Er})}(t);return wr(n,r).match({ltr:e,rtl:e})}function _r(t){var e=Vo.fromDom(t.anchorNode),n=Vo.fromDom(t.focusNode);return Nr(e,t.anchorOffset,n,t.focusOffset)?So.some(Il.create(e,t.anchorOffset,n,t.focusOffset)):function(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return So.some(Il.create(Vo.fromDom(e.startContainer),e.startOffset,Vo.fromDom(n.endContainer),n.endOffset))}return So.none()}(t)}function Lr(t,e){var n=function(t,e){var n=t.document.createRange();return _l(n,e),n}(t,e);kr(t,n)}function jr(t){return function(t){return So.from(t.getSelection()).filter((function(t){return 0<t.rangeCount})).bind(_r)}(t).map((function(t){return Wl.exact(t.start(),t.soffset(),t.finish(),t.foffset())}))}function zr(t,e){return function(t){var e=t.getClientRects(),n=0<e.length?e[0]:t.getBoundingClientRect();return 0<n.width||0<n.height?So.some(n).map(vr):So.none()}(jl(t,e))}function Hr(t,e,n){return function(t,e,n){var r=Vo.fromDom(t.document);return Hl(r,e,n).map((function(t){return Il.create(Vo.fromDom(t.startContainer),t.startOffset,Vo.fromDom(t.endContainer),t.endOffset)}))}(t,e,n)}function Fr(t,e,n,r){return Ul(t,e,Nl(n),r)}function Ur(t,e,n,r){return Ul(t,e,kl(n),r)}function qr(t,e){return Wr(Wl.exact(e,0,e,0))}function Vr(t,e){return function(t){return 0===t.length?So.none():So.some(t[t.length-1])}(Tt(e,"tr")).bind((function(t){return Nt(t,"td,th").map((function(t){return qr(0,t)}))}))}function Gr(t,e,n,r){return void 0===r&&(r=Ql),t.property().parent(e).map((function(t){return Jl(t,r)}))}function Yr(t){return function(e){return 0===t.property().children(e).length}}function Kr(t,e){return function(t,e,n){return uf(t,e,Yr(t),n)}(af,t,e)}function Xr(t,e){return function(t,e,n){return cf(t,e,Yr(t),n)}(af,t,e)}function $r(t){return kt(t,"tr")}function Jr(t){return"br"===Ho(t)}function Qr(t,e,n,r){return function(t,e){return gt(t,e).filter(Jr).orThunk((function(){return gt(t,e-1).filter(Jr)}))}(e,n).bind((function(e){return r.traverse(e).fold((function(){return gf(e,r.gather,t).map(r.relative)}),(function(t){return function(t){return lt(t).bind((function(e){var n=mt(e);return mf(n,t).map((function(r){return df(e,n,t,r)}))}))}(t).map((function(t){return Pl.on(t.parent(),t.index())}))}))}))}function Zr(t){return bf.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})}function to(t,e){return So.some(t.getRect(e))}function eo(t,e,n){return function(t,e){return Ot((function(t,e){return e(t)}),Dt,t,e,void 0)}(e,la).fold(vo(!1),(function(e){return yf(t,e).exists((function(t){return function(t,e){return t.left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right()}(n,t)}))}))}function no(t,e,n){var r=t.move(n,5),o=Rf(e,t,n,r,100).getOr(r);return function(t,e,n){return t.point(e)>n.getInnerHeight()?So.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?So.some(-t.point(e)):So.none()}(t,o,e).fold((function(){return e.situsFromPoint(o.left(),t.point(o))}),(function(n){return e.scrollBy(0,n),e.situsFromPoint(o.left(),t.point(o)-n)}))}function ro(t,e){return function(t,e){return Dt(t,e,void 0).isSome()}(t,(function(t){return lt(t).exists((function(t){return bi(t,e)}))}))}function oo(t,e,n,r,o){return kt(r,"td,th",e).bind((function(r){return kt(r,"table",e).bind((function(i){return ro(o,i)?kf(t,e,n).bind((function(t){return kt(t.finish(),"td,th",e).map((function(e){return{start:vo(r),finish:vo(e),range:vo(t)}}))})):So.none()}))}))}function io(t,e){return kt(t,"td,th",e)}function uo(t){return function(e){return e===t}}function co(e){return{elementFromPoint:function(t,n){return Vo.fromPoint(Vo.fromDom(e.document),t,n)},getRect:function(t){return t.dom().getBoundingClientRect()},getRangedRect:function(t,n,r,o){var i=Wl.exact(t,n,r,o);return zr(e,i).map(Hf)},getSelection:function(){return jr(e).map((function(t){return Kl.convertToRange(e,t)}))},fromSitus:function(t){var n=Wl.relative(t.start(),t.finish());return Kl.convertToRange(e,n)},situsFromPoint:function(t,n){return Hr(e,t,n).map((function(t){return Yl(t.start(),t.soffset(),t.finish(),t.foffset())}))},clearSelection:function(){!function(t){t.getSelection().removeAllRanges()}(e)},collapseSelection:function(t){void 0===t&&(t=!1),jr(e).each((function(n){return n.fold((function(e){return e.collapse(t)}),(function(n,r){var o=t?n:r;Mr(e,o,o)}),(function(n,r,o,i){var u=t?n:o,c=t?r:i;Pr(e,u,c,u,c)}))}))},setSelection:function(t){Pr(e,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,n){Mr(e,t,n)},selectContents:function(t){Lr(e,t)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){return function(e){var n=void 0!==e?e.dom():t.document,r=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop;return Yu(r,o)}(Vo.fromDom(e.document)).top()},scrollBy:function(n,r){!function(e,n,r){(void 0!==r?r.dom():t.document).defaultView.scrollBy(e,n)}(n,r,Vo.fromDom(e.document))}}}function ao(t,e){d(e,(function(e){!function(t,e){Be(t)?t.dom().classList.remove(e):Me(t,e),_e(t)}(t,e)}))}function lo(t,e,n){var r=Wo(["mousedown","mouseover","mouseup","keyup","keydown"],[]),o=So.none(),i=Ta(t),u=qf.byAttr(Ou,(function(e,r,o){n.targets().each((function(n){ji.table(r).each((function(u){var c=Vo.fromDom(t.getDoc()),a=Xi.cellOperations(po,c,i),l=Vf.getOtherCells(u,n,a);Oa(t,e,r,o,l)}))}))}),(function(){Da(t)}));return t.on("init",(function(){function n(e,n){!function(t){return!0===t.raw().shiftKey}(e)||(n.kill()&&e.kill(),n.selection().each((function(e){var n=Wl.relative(e.start(),e.finish()),r=jl(m,n);t.selection.setRng(r)})))}function i(e){var r=C(e);if(r.raw().shiftKey&&zf.isNavigation(r.raw().which)){var o=t.selection.getRng(),i=Vo.fromDom(o.startContainer),u=Vo.fromDom(o.endContainer);v.keyup(r,i,o.startOffset,u,o.endOffset).each((function(t){n(r,t)}))}}function c(r){var o=C(r);e().each((function(t){t.hideBars()}));var i=t.selection.getRng(),u=Vo.fromDom(t.selection.getStart()),c=Vo.fromDom(i.startContainer),a=Vo.fromDom(i.endContainer),l=Ca.directionAt(u).isRtl()?zf.rtl:zf.ltr;v.keydown(o,c,i.startOffset,a,i.endOffset,l).each((function(t){n(o,t)})),e().each((function(t){t.showBars()}))}function a(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")}function l(t){return 0===t.button}function f(t){l(t)&&Gf(t)&&h.mousedown(C(t))}function s(t){(function(t){return void 0===t.buttons||0!=(1&t.buttons)})(t)&&Gf(t)&&h.mouseover(C(t))}function d(t){l(t)&&Gf(t)&&h.mouseup(C(t))}var m=t.getWin(),g=va(t),p=ba(t),h=Uf.mouse(m,g,p,u),v=Uf.keyboard(m,g,p,u),b=Uf.external(m,g,p,u);t.on("TableSelectorChange",(function(t){b(t.start,t.finish)}));var w,y,C=function(t){function e(){t.stopPropagation()}function n(){t.preventDefault()}var r=Vo.fromDom(t.target),o=ho(n,e);return{target:vo(r),x:vo(a(t)?t.x:null),y:vo(a(t)?t.y:null),stop:e,prevent:n,kill:o,raw:vo(t)}},S=(w=go(Vo.fromDom(g)),y=go(0),{touchEnd:function(t){var e=Vo.fromDom(t.target);if("td"===Ho(e)||"th"===Ho(e)){var n=w.get(),r=y.get();bi(n,e)&&t.timeStamp-r<300&&(t.preventDefault(),b(e,e))}w.set(e),y.set(t.timeStamp)}});t.on("mousedown",f),t.on("mouseover",s),t.on("mouseup",d),t.on("touchend",S.touchEnd),t.on("keyup",i),t.on("keydown",c),t.on("NodeChange",(function(){var e=t.selection,n=Vo.fromDom(e.getStart()),r=Vo.fromDom(e.getEnd());pu.sharedOne(ji.table,[n,r]).fold((function(){u.clear(g)}),po)})),o=So.some(r({mousedown:f,mouseover:s,mouseup:d,keyup:i,keydown:c}))})),{clear:u.clear,destroy:function(){o.each((function(){}))}}}function fo(t){var e=Yf(t),n=Kf(t,e),r=Dl(t),o=lo(t,r.lazyResize,n),i=Aa(t,r.lazyWire),u=go(So.none());return ll.registerCommands(t,i,o,e,u),Mu.registerEvents(t,e,i,o),$f.addMenuItems(t,n),Xf.addButtons(t,n),Xf.addToolbars(t),t.on("PreInit",(function(){t.serializer.addTempAttr(Ou.firstSelected()),t.serializer.addTempAttr(Ou.lastSelected())})),Ra(t)&&t.on("keydown",(function(e){Vl.handle(e,t,i,r.lazyWire)})),t.on("remove",(function(){r.destroy(),o.destroy()})),Jf(t,u,r,n)}var so,mo,go=function(t){function e(){return n}var n=t;return{get:e,set:function(t){n=t},clone:function(){return go(e())}}},po=function(){},ho=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},vo=function(t){return function(){return t}},bo=vo(!1),wo=vo(!0),yo=(so={fold:function(t){return t()},is:bo,isSome:bo,isNone:wo,getOr:c,getOrThunk:u,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:vo(null),getOrUndefined:vo(void 0),or:c,orThunk:u,map:o,each:po,bind:o,exists:bo,forall:wo,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:vo("none()")},Object.freeze&&Object.freeze(so),so),Co=function(t){function e(){return o}function n(e){return e(t)}var r=vo(t),o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:wo,isNone:bo,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return Co(e(t))},each:function(e){e(t)},bind:n,exists:n,forall:n,filter:function(e){return e(t)?o:yo},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(bo,(function(e){return n(t,e)}))}};return o},So={some:Co,none:o,from:function(t){return null==t?yo:Co(t)}},xo=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ro=a("string"),To=a("array"),Oo=a("boolean"),Do=a("function"),Ao=a("number"),Eo=Array.prototype.slice,No=Array.prototype.indexOf,ko=Array.prototype.push,Io=(Do(Array.from)&&Array.from,Object.keys),Bo=Object.hasOwnProperty,Po=function(t,e){var n={};return S(t,(function(t,r){var o=e(t,r);n[o.k]=o.v})),n},Mo=function(t,e){return Bo.call(t,e)},Wo=function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return E("required",t),E("optional",e),N(n),function(r){var o=Io(r);y(t,(function(t){return l(o,t)}))||D(t,o);var i=m(o,(function(t){return!l(n,t)}));0<i.length&&A(i);var u={};return d(t,(function(t){u[t]=vo(r[t])})),d(e,(function(t){u[t]=vo(Object.prototype.hasOwnProperty.call(r,t)?So.some(r[t]):So.none())})),u}},_o=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE),Lo=t.Node.DOCUMENT_NODE,jo=(t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),zo=t.Node.TEXT_NODE,Ho=(t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,void 0!==t.window?t.window:Function("return this;")(),function(t){return t.dom().nodeName.toLowerCase()}),Fo=I(jo),Uo=I(zo),qo=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:vo(t)}},Vo={fromHtml:function(e,n){var r=(n||t.document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw t.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return qo(r.childNodes[0])},fromTag:function(e,n){var r=(n||t.document).createElement(e);return qo(r)},fromText:function(e,n){var r=(n||t.document).createTextNode(e);return qo(r)},fromDom:qo,fromPoint:function(t,e,n){var r=t.dom();return So.from(r.elementFromPoint(e,n)).map(qo)}},Go=V((function(){return Yo(Vo.fromDom(t.document))})),Yo=function(t){var e=t.dom().body;if(null==e)throw new Error("Body is not available yet");return Vo.fromDom(e)},Ko=function(t,e){return q(t)?t.style.getPropertyValue(e):""},Xo=function(e,n){return Z(e,n,t.Node.DOCUMENT_POSITION_CONTAINED_BY)},$o=function(){return($o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Jo=function(){return Qo(0,0)},Qo=function(t,e){return{major:t,minor:e}},Zo={nu:Qo,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?Jo():tt(t,n)},unknown:Jo},ti="Firefox",ei=function(t){var e=t.current;return{current:e,version:t.version,isEdge:et("Edge",e),isChrome:et("Chrome",e),isIE:et("IE",e),isOpera:et("Opera",e),isFirefox:et(ti,e),isSafari:et("Safari",e)}},ni={unknown:function(){return ei({current:void 0,version:Zo.unknown()})},nu:ei,edge:vo("Edge"),chrome:vo("Chrome"),ie:vo("IE"),opera:vo("Opera"),firefox:vo(ti),safari:vo("Safari")},ri="Windows",oi="Android",ii="Solaris",ui="FreeBSD",ci=function(t){var e=t.current;return{current:e,version:t.version,isWindows:nt(ri,e),isiOS:nt("iOS",e),isAndroid:nt(oi,e),isOSX:nt("OSX",e),isLinux:nt("Linux",e),isSolaris:nt(ii,e),isFreeBSD:nt(ui,e)}},ai={unknown:function(){return ci({current:void 0,version:Zo.unknown()})},nu:ci,windows:vo(ri),ios:vo("iOS"),android:vo(oi),linux:vo("Linux"),osx:vo("OSX"),solaris:vo(ii),freebsd:vo(ui)},li=function(t,e){return rt(t,e).map((function(t){var n=Zo.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},fi=function(t,e){return rt(t,e).map((function(t){var n=Zo.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},si=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,di=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return F(t,"edge/")&&F(t,"chrome")&&F(t,"safari")&&F(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,si],search:function(t){return F(t,"chrome")&&!F(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return F(t,"msie")||F(t,"trident")}},{name:"Opera",versionRegexes:[si,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ot("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ot("firefox")},{name:"Safari",versionRegexes:[si,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(F(t,"safari")||F(t,"mobile/"))&&F(t,"applewebkit")}}],mi=[{name:"Windows",search:ot("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return F(t,"iphone")||F(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ot("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ot("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ot("linux"),versionRegexes:[]},{name:"Solaris",search:ot("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ot("freebsd"),versionRegexes:[]}],gi={browsers:vo(di),oses:vo(mi)},pi=go(function(t,e){var n=gi.browsers(),r=gi.oses(),o=li(n,t).fold(ni.unknown,ni.nu),i=fi(r,t).fold(ai.unknown,ai.nu);return{browser:o,os:i,deviceType:function(t,e,n,r){var o=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!o,u=t.isiOS()||t.isAndroid(),c=u||r("(pointer:coarse)"),a=o||!i&&u&&r("(min-device-width:768px)"),l=i||u&&!a,f=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),s=!l&&!a&&!f;return{isiPad:vo(o),isiPhone:vo(i),isTablet:vo(a),isPhone:vo(l),isTouch:vo(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:vo(f),isDesktop:vo(s)}}(i,o,t,e)}}(t.navigator.userAgent,(function(e){return t.window.matchMedia(e).matches}))),hi=jo,vi=Lo,bi=function(t,e){return t.dom()===e.dom()},wi=it().browser.isIE()?function(t,e){return Xo(t.dom(),e.dom())}:function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},yi=ut,Ci=(T("element","offset"),function(t,e){t.dom().appendChild(e.dom())}),Si=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},xi=(T("width","height"),T("width","height"),T("rows","columns")),Ri=T("row","column"),Ti=(T("x","y"),T("element","rowspan","colspan")),Oi=T("element","rowspan","colspan","isNew"),Di=T("element","rowspan","colspan","row","column"),Ai=T("element","cells","section"),Ei=T("element","isNew"),Ni=T("element","cells","section","isNew"),ki=T("cells","section"),Ii=T("details","section"),Bi=T("startRow","startCol","finishRow","finishCol"),Pi=function(t,e){var n=[];return d(mt(t),(function(t){e(t)&&(n=n.concat([t])),n=n.concat(Pi(t,e))})),n},Mi=function(t,e,n){return w(mt(t),(function(t){return ut(t,e)?n(t)?[t]:[]:Mi(t,e,n)}))},Wi={firstLayer:function(t,e){return Mi(t,e,vo(!0))},filterFirstLayer:Mi},_i=n(Bt,"th,td"),Li=n(Bt,"tr"),ji={cell:function(t,e){return It(["td","th"],t,e)},firstCell:function(t){return Nt(t,"th,td")},cells:function(t){return Wi.firstLayer(t,"th,td")},neighbourCells:_i,table:function(t,e){return kt(t,"table",e)},row:function(t,e){return It(["tr"],t,e)},rows:function(t){return Wi.firstLayer(t,"tr")},notCell:function(t,e){return It(["caption","tr","tbody","tfoot","thead"],t,e)},neighbourRows:Li,attr:Pt,grid:function(t,e,n){var r=Pt(t,e),o=Pt(t,n);return xi(r,o)}},zi=function(t){return s(ji.rows(t),(function(t){var e=t,n=lt(e).map((function(t){var e=Ho(t);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"})).getOr("tbody"),r=s(ji.cells(t),(function(t){var e=L(t,"rowspan")?parseInt(_(t,"rowspan"),10):1,n=L(t,"colspan")?parseInt(_(t,"colspan"),10):1;return Ti(t,e,n)}));return Ai(e,r,n)}))},Hi=function(t,e){return s(t,(function(t){var n=s(ji.cells(t),(function(t){var e=L(t,"rowspan")?parseInt(_(t,"rowspan"),10):1,n=L(t,"colspan")?parseInt(_(t,"colspan"),10):1;return Ti(t,e,n)}));return Ai(t,n,e.section())}))},Fi=function(t,e){return m(w(t.all(),(function(t){return t.cells()})),e)},Ui={generate:function(t){var e={},n=[],r=t.length,o=0;d(t,(function(t,r){var i=[];d(t.cells(),(function(t){for(var n=0;void 0!==e[Mt(r,n)];)n++;for(var u=Di(t.element(),t.rowspan(),t.colspan(),r,n),c=0;c<t.colspan();c++)for(var a=0;a<t.rowspan();a++){var l=n+c,f=Mt(r+a,l);e[f]=u,o=Math.max(o,l+1)}i.push(u)})),n.push(Ai(t.element(),i,t.section()))}));var i=xi(r,o);return{grid:vo(i),access:vo(e),all:vo(n)}},getAt:function(t,e,n){var r=t.access()[Mt(e,n)];return void 0!==r?So.some(r):So.none()},findItem:function(t,e,n){var r=Fi(t,(function(t){return n(e,t.element())}));return 0<r.length?So.some(r[0]):So.none()},filterItems:Fi,justCells:function(t){return b(s(t.all(),(function(t){return t.cells()})))}},qi=T("minRow","minCol","maxRow","maxCol"),Vi=function(t,e){function n(t){return ut(t.element(),e)}var r=zi(t),o=Ui.generate(r),i=function(t,e){var n=t.grid().columns(),r=t.grid().rows(),o=n,i=0,u=0;return S(t.access(),(function(t){if(e(t)){var n=t.row(),c=n+t.rowspan()-1,a=t.column(),l=a+t.colspan()-1;n<r?r=n:i<c&&(i=c),a<o?o=a:u<l&&(u=l)}})),qi(r,o,i,u)}(o,n),u="th:not("+e+"),td:not("+e+")",c=Wi.filterFirstLayer(t,"th,td",(function(t){return ut(t,u)}));return d(c,Si),function(t,e,n,r){for(var o,i,u,c=e.grid().columns(),a=e.grid().rows(),l=0;l<a;l++)for(var f=!1,s=0;s<c;s++)l<n.minRow()||l>n.maxRow()||s<n.minCol()||s>n.maxCol()||(Ui.getAt(e,l,s).filter(r).isNone()?(o=f,i=t[l].element(),u=Vo.fromTag("td"),Ci(u,Vo.fromTag("br")),(o?Ci:vt)(i,u)):f=!0)}(r,o,i,n),function(t,e){var n=m(Wi.firstLayer(t,"tr"),(function(t){return 0===t.dom().childElementCount}));d(n,Si),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||d(Wi.firstLayer(t,"th,td"),(function(t){j(t,"rowspan"),j(t,"colspan")})),j(t,"width"),j(t,"height"),Q(t,"width"),Q(t,"height")}(t,i),t},Gi=function(t,e){var n=function(e){return t(e)?So.from(e.dom().nodeValue):So.none()};return{get:function(r){if(!t(r))throw new Error("Can only get "+e+" value of a "+e+" node");return n(r).getOr("")},getOption:n,set:function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=r}}}(Uo,"text"),Yi=["img","br"],Ki=function(t,e){var n=function(t){for(var r=mt(t),o=r.length-1;0<=o;o--){var i=r[o];if(e(i))return So.some(i);var u=n(i);if(u.isSome())return u}return So.none()};return n(t)},Xi={cellOperations:function(t,e,n){return{row:$t(e),cell:function(e){var r=at(e.element()),o=Vo.fromTag(Ho(e.element()),r.dom()),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),u=0<i.length?function(t,e,n){return Ht(t).map((function(r){var o=xt(r,n.join(","),(function(e){return bi(e,t)}));return g(o,(function(t,e){var n=qt(e);return j(n,"contenteditable"),Ci(t,n),n}),e)})).getOr(e)}(e.element(),o,i):o;return Ci(u,Vo.fromTag("br")),function(t,e){var n=t.dom(),r=e.dom();q(n)&&q(r)&&(r.style.cssText=n.style.cssText)}(e.element(),o),Q(o,"height"),1!==e.colspan()&&Q(e.element(),"width"),t(e.element(),o),o},replace:Kt,gap:Yt}},paste:function(t){return{row:$t(t),cell:Yt,replace:Xt,gap:Yt}}},$i=function(t,e){var n=e.column(),r=e.column()+e.colspan()-1,o=e.row(),i=e.row()+e.rowspan()-1;return n<=t.finishCol()&&r>=t.startCol()&&o<=t.finishRow()&&i>=t.startRow()},Ji=function(t,e){for(var r=!0,o=n(Jt,e),i=e.startRow();i<=e.finishRow();i++)for(var u=e.startCol();u<=e.finishCol();u++)r=r&&Ui.getAt(t,i,u).exists(o);return r?So.some(e):So.none()},Qi=Qt,Zi=function(t,e,n){return Qt(t,e,n).bind((function(e){return Ji(t,e)}))},tu=function(t,e,n,r){return Ui.findItem(t,e,bi).bind((function(e){var o=0<n?e.row()+e.rowspan()-1:e.row(),i=0<r?e.column()+e.colspan()-1:e.column();return Ui.getAt(t,o+n,i+r).map((function(t){return t.element()}))}))},eu=function(t,e,r){return Qi(t,e,r).map((function(e){return s(Ui.filterItems(t,n($i,e)),(function(t){return t.element()}))}))},nu=function(t,e){return Ui.findItem(t,e,(function(t,e){return wi(e,t)})).map((function(t){return t.element()}))},ru=function(t){var e=zi(t);return Ui.generate(e)},ou=function(t,e,n){return ji.table(t).bind((function(r){var o=ru(r);return tu(o,t,e,n)}))},iu=function(t,e,n){var r=ru(t);return eu(r,e,n)},uu=function(t,e,n,r,o){var i=ru(t),u=bi(t,n)?So.some(e):nu(i,e),c=bi(t,o)?So.some(r):nu(i,r);return u.bind((function(t){return c.bind((function(e){return eu(i,t,e)}))}))},cu=function(t,e,n){var r=ru(t);return Zi(r,e,n)},au=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],lu=T("left","right"),fu=T("first","second","splits"),su=function(t,e,n,r){return g(r,(function(n,r){var o=e(t,r);return du(t,n,o)}),e(t,n))},du=function(t,e,r){return e.bind((function(e){return r.filter(n(t.eq,e))}))},mu={sharedOne:function(t,e,n){return 0<n.length?function(t,e,n,r){return r(t,e,n[0],n.slice(1))}(t,e,n,su):So.none()},subset:function(t,e,n){var r=ne(t,e,n);return r.shared().bind((function(e){return function(t,e,n,r){function o(n){var r=C(n),o=v(r,ee(t,e)).getOr(-1),u=o<r.length-1?r[o+1]:r[o];return v(i,ee(t,u))}var i=t.property().children(e);if(t.eq(e,n[0]))return So.some([n[0]]);if(t.eq(e,r[0]))return So.some([r[0]]);var u=o(n),c=o(r);return u.bind((function(t){return c.map((function(e){var n=Math.min(t,e),r=Math.max(t,e);return i.slice(n,r+1)}))}))}(t,e,r.firstpath(),r.secondpath())}))},ancestors:ne,breakToLeft:function(t,e,n){return te(t,e,n).map((function(r){var o=t.create().clone(e);return t.insert().appendAll(o,r.before().concat([n])),t.insert().appendAll(e,r.after()),t.insert().before(e,o),lu(o,e)}))},breakToRight:function(t,e,n){return te(t,e,n).map((function(n){var r=t.create().clone(e);return t.insert().appendAll(r,n.after()),t.insert().after(e,r),lu(e,r)}))},breakPath:function(t,e,n,r){var o=function(e,i,u){var c=fu(e,So.none(),u);return n(e)?fu(e,i,u):t.property().parent(e).bind((function(i){return r(t,i,e).map((function(t){var e=[{first:t.left,second:t.right}],r=n(i)?i:t.left();return o(r,So.some(t.right()),u.concat(e))}))})).getOr(c)};return o(e,So.none(),[])}},gu=Zt(),pu={sharedOne:function(t,e){return mu.sharedOne(gu,(function(e,n){return t(n)}),e)},subset:function(t,e){return mu.subset(gu,t,e)},ancestors:function(t,e,n){return mu.ancestors(gu,t,e,n)},breakToLeft:function(t,e){return mu.breakToLeft(gu,t,e)},breakToRight:function(t,e){return mu.breakToRight(gu,t,e)},breakPath:function(t,e,n){return mu.breakPath(gu,t,e,(function(t,e,r){return n(e,r)}))}},hu={create:Wo(["boxes","start","finish"],[])},vu=oe,bu=function(t,e){var n=Tt(t,e);return 0<n.length?So.some(n):So.none()},wu=function(t,e,n,r,o){return function(t,e){return h(t,(function(t){return ut(t,e)}))}(t,o).bind((function(t){return ou(t,e,n).bind((function(t){return function(t,e){return At(t,"table").bind((function(n){return Nt(n,e).bind((function(e){return oe(e,t).bind((function(t){return t.boxes().map((function(e){return{boxes:vo(e),start:vo(t.start()),finish:vo(t.finish())}}))}))}))}))}(t,r)}))}))},yu=function(t,e,n){return Nt(t,e).bind((function(e){return Nt(t,n).bind((function(t){return pu.sharedOne(re,[e,t]).map((function(n){return{first:vo(e),last:vo(t),table:vo(n)}}))}))}))},Cu=function(t,e){return bu(t,e)},Su=function(t,e,n){return yu(t,e,n).bind((function(e){function n(e){return bi(t,e)}var r=At(e.first(),"thead,tfoot,tbody,table",n),o=At(e.last(),"thead,tfoot,tbody,table",n);return r.bind((function(t){return o.bind((function(n){return bi(t,n)?cu(e.table(),e.first(),e.last()):So.none()}))}))}))},xu="data-mce-selected",Ru="data-mce-first-selected",Tu="data-mce-last-selected",Ou={selected:vo(xu),selectedSelector:vo("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:vo("[data-mce-selected]"),firstSelected:vo(Ru),firstSelectedSelector:vo("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:vo(Tu),lastSelectedSelector:vo("td[data-mce-last-selected],th[data-mce-last-selected]")},Du=function(e){if(!To(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var n=[],r={};return d(e,(function(o,i){var u=Io(o);if(1!==u.length)throw new Error("one and only one name per case");var c=u[0],a=o[c];if(void 0!==r[c])throw new Error("duplicate key detected:"+c);if("cata"===c)throw new Error("cannot have a case named cata (sorry)");if(!To(a))throw new Error("case arguments must be an array");n.push(c),r[c]=function(){var r=arguments.length;if(r!==a.length)throw new Error("Wrong number of arguments to case "+c+". Expected "+a.length+" ("+a+"), got "+r);for(var o=new Array(r),u=0;u<o.length;u++)o[u]=arguments[u];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,o)},match:function(t){var e=Io(t);if(n.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+e.join(","));if(!y(n,(function(t){return l(e,t)})))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+n.join(", "));return t[c].apply(null,o)},log:function(e){t.console.log(e,{constructors:n,constructor:c,params:o})}}}})),r},Au=Du([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Eu={cata:function(t,e,n,r){return t.fold(e,n,r)},none:Au.none,multiple:Au.multiple,single:Au.single},Nu=function(t,e){return Eu.cata(e.get(),So.none,(function(e){return 0===e.length?So.none():Su(t,Ou.firstSelectedSelector(),Ou.lastSelectedSelector()).bind((function(t){return 1<e.length?So.some({bounds:vo(t),cells:vo(e)}):So.none()}))}),So.none)},ku=function(t,e){var n=ie(t,e);return 0<n.length&&y(n,(function(t){return L(t,"rowspan")&&1<parseInt(_(t,"rowspan"),10)||L(t,"colspan")&&1<parseInt(_(t,"colspan"),10)}))?So.some(n):So.none()},Iu=ie,Bu=T("element","clipboard","generators"),Pu={noMenu:ue,forMenu:function(t,e,n){return{element:vo(n),mergable:vo(Nu(e,t)),unmergable:vo(ku(n,t)),selection:vo(Iu(n,t))}},notCell:function(t){return ue(t)},paste:Bu,pasteRows:function(t,e,n,r,o){return{element:vo(n),mergable:So.none,unmergable:So.none,selection:vo(Iu(n,t)),clipboard:vo(r),generators:vo(o)}}},Mu={registerEvents:function(e,n,r,o){e.on("BeforeGetContent",(function(t){!0===t.selection&&Eu.cata(n.get(),po,(function(n){t.preventDefault(),function(t){return ji.table(t[0]).map(Vt).map((function(t){return[Vi(t,Ou.attributeSelector())]}))}(n).each((function(n){t.content="text"===t.format?function(t){return s(t,(function(t){return t.dom().innerText})).join("")}(n):function(t,e){return s(e,(function(e){return t.selection.serializer.serialize(e.dom(),{})})).join("")}(e,n)}))}),po)})),e.on("BeforeSetContent",(function(n){!0===n.selection&&!0===n.paste&&So.from(e.dom.getParent(e.selection.getStart(),"th,td")).each((function(i){var u=Vo.fromDom(i);ji.table(u).each((function(i){var c=m(function(e){var n=(void 0||t.document).createElement("div");return n.innerHTML=e,mt(Vo.fromDom(n))}(n.content),(function(t){return"meta"!==Ho(t)}));if(1===c.length&&"table"===Ho(c[0])){n.preventDefault();var a=Vo.fromDom(e.getDoc()),l=Xi.paste(a),f=Pu.paste(u,c[0],l);r.pasteCells(i,f).each((function(t){e.selection.setRng(t),e.focus(),o.clear(i)}))}}))}))}))}},Wu=ce("height",(function(t){var e=t.dom();return G(t)?e.getBoundingClientRect().height:e.offsetHeight})),_u=ce("width",(function(t){return t.dom().offsetWidth})),Lu=it(),ju=function(t){return Lu.browser.isIE()||Lu.browser.isEdge()?function(t){var e=de(t,"padding-top",0),n=de(t,"padding-bottom",0),r=de(t,"border-top-width",0),o=de(t,"border-bottom-width",0),i=t.dom().getBoundingClientRect().height;return"border-box"===$(t,"box-sizing")?i:i-e-n-(r+o)}(t):de(t,"height",ae(t))},zu=/(\d+(\.\d+)?)(\w|%)*/,Hu=/(\d+(\.\d+)?)%/,Fu=/(\d+(\.\d+)?)px|em/,Uu=function(t,e){return L(t,e)?parseInt(_(t,e),10):1},qu={percentageBasedSizeRegex:vo(Hu),pixelBasedSizeRegex:vo(Fu),setPixelWidth:function(t,e){K(t,"width",e+"px")},setPercentageWidth:function(t,e){K(t,"width",e+"%")},setHeight:me,getPixelWidth:function(t,e){return he(t).fold((function(){return fe(t)}),(function(n){return function(t,e,n){var r=Fu.exec(e);if(null!==r)return parseInt(r[1],10);var o=Hu.exec(e);return null===o?fe(t):function(t,e){return t/100*e.pixelWidth()}(parseFloat(o[1]),n)}(t,n,e)}))},getPercentageWidth:function(t,e){return he(t).fold((function(){return ve(fe(t),e)}),(function(n){return function(t,e,n){var r=Hu.exec(e);return null!==r?parseFloat(r[1]):ve(fe(t),n)}(t,n,e)}))},getGenericWidth:function(t){return he(t).bind((function(t){var e=zu.exec(t);return null!==e?So.some({width:vo(parseFloat(e[1])),unit:vo(e[3])}):So.none()}))},setGenericWidth:function(t,e,n){K(t,"width",e+n)},getHeight:function(t){return function(t,e,n){return n(t)/Uu(t,e)}(t,"rowspan",pe)},getRawWidth:he},Vu=function(t,e){qu.getGenericWidth(t).each((function(n){var r=n.width()/2;qu.setGenericWidth(t,r,n.unit()),qu.setGenericWidth(e,r,n.unit())}))},Gu=function(t,e){return{left:vo(t),top:vo(e),translate:function(n,r){return Gu(t+n,e+r)}}},Yu=Gu,Ku=function(t){var e=t.dom(),n=e.ownerDocument.body;return n===e?Yu(n.offsetLeft,n.offsetTop):G(t)?function(t){var e=t.getBoundingClientRect();return Yu(e.left,e.top)}(e):Yu(0,0)},Xu=T("row","y"),$u=T("col","x"),Ju={height:{delta:e,positions:function(t){return De(Te,Oe,t)},edge:Re},rtl:{delta:function(t){return-t},edge:ye,positions:function(t){return De(xe,Se,t)}},ltr:{delta:e,edge:Ce,positions:function(t){return De(Se,xe,t)}}},Qu={ltr:Ju.ltr,rtl:Ju.rtl},Zu=function(t){var e=zi(t);return Ui.generate(e).grid()},tc=function(t,e){function n(e,n){0<e.length?function(e,n){var i=Et(t,n).getOrThunk((function(){var e=Vo.fromTag(n,at(t).dom());return Ci(t,e),e}));Ct(i);var u=s(e,(function(t){t.isNew()&&r.push(t.element());var e=t.element();return Ct(e),d(t.cells(),(function(t){t.isNew()&&o.push(t.element()),ke(t.element(),"colspan",t.colspan(),1),ke(t.element(),"rowspan",t.rowspan(),1),Ci(e,t.element())})),e}));yt(i,u)}(e,n):function(e){Et(t,e).each(Si)}(n)}var r=[],o=[],i=[],u=[],c=[];return d(e,(function(t){switch(t.section()){case"thead":i.push(t);break;case"tbody":u.push(t);break;case"tfoot":c.push(t)}})),n(i,"thead"),n(u,"tbody"),n(c,"tfoot"),{newRows:vo(r),newCells:vo(o)}},ec=function(t){return s(t,(function(t){var e=qt(t.element());return d(t.cells(),(function(t){var n=Vt(t.element());ke(n,"colspan",t.colspan(),1),ke(n,"rowspan",t.rowspan(),1),Ci(e,n)})),e}))},nc=function(t,e,n){var r=t();return h(r,e).orThunk((function(){return So.from(r[0]).orThunk(n)})).map((function(t){return t.element()}))},rc=function(t){
var e=t.grid(),n=je(0,e.columns()),r=je(0,e.rows());return s(n,(function(e){return nc((function(){return w(r,(function(n){return Ui.getAt(t,n,e).filter((function(t){return t.column()===e})).fold(vo([]),(function(t){return[t]}))}))}),(function(t){return 1===t.colspan()}),(function(){return Ui.getAt(t,0,e)}))}))},oc=function(t){var e=t.grid(),n=je(0,e.rows()),r=je(0,e.columns());return s(n,(function(e){return nc((function(){return w(r,(function(n){return Ui.getAt(t,e,n).filter((function(t){return t.row()===e})).fold(vo([]),(function(t){return[t]}))}))}),(function(t){return 1===t.rowspan()}),(function(){return Ui.getAt(t,e,0)}))}))},ic={resolve:He("ephox-snooker").resolve},uc=function(t,e,n,r,o){var i=Vo.fromTag("div");return X(i,{position:"absolute",left:e-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),W(i,{"data-column":t,role:"presentation"}),i},cc=function(t,e,n,r,o){var i=Vo.fromTag("div");return X(i,{position:"absolute",left:e+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),W(i,{"data-row":t,role:"presentation"}),i},ac=ic.resolve("resizer-bar"),lc=ic.resolve("resizer-rows"),fc=ic.resolve("resizer-cols"),sc=function(t,e,n,r){Fe(t);var o=zi(e),i=Ui.generate(o);qe(t,e,oc(i),rc(i),n,r)},dc=function(t){Ve(t,(function(t){K(t,"display","none")}))},mc=function(t){Ve(t,(function(t){K(t,"display","block")}))},gc=Fe,pc=function(t){return Le(t,lc)},hc=function(t){return Le(t,fc)},vc=function(t,e){return ki(e,t.section())},bc={addCell:function(t,e,n){var r=t.cells(),o=r.slice(0,e),i=r.slice(e),u=o.concat([n]).concat(i);return vc(t,u)},setCells:vc,mutateCell:function(t,e,n){t.cells()[e]=n},getCell:Ge,getCellElement:function(t,e){return Ge(t,e).element()},mapCells:function(t,e){var n=s(t.cells(),e);return ki(n,t.section())},cellLength:function(t){return t.cells().length}},wc=function(t,e,n,r){var o=function(t,e){return t[e]}(t,e).cells().slice(n),i=Ye(o,r),u=function(t,e){return s(t,(function(t){return bc.getCell(t,e)}))}(t,n).slice(e),c=Ye(u,r);return{colspan:vo(i),rowspan:vo(c)}},yc=function(t,e){var n=s(t,(function(t){return s(t.cells(),(function(){return!1}))}));return s(t,(function(r,o){var i=w(r.cells(),(function(r,i){if(!1!==n[o][i])return[];var u=wc(t,o,i,e);return function(t,e,r,o){for(var i=t;i<t+r;i++)for(var u=e;u<e+o;u++)n[i][u]=!0}(o,i,u.rowspan(),u.colspan()),[Oi(r.element(),u.rowspan(),u.colspan(),r.isNew())]}));return Ii(i,r.section())}))},Cc=function(t,e,n){for(var r=[],o=0;o<t.grid().rows();o++){for(var i=[],u=0;u<t.grid().columns();u++){var c=Ui.getAt(t,o,u).map((function(t){return Ei(t.element(),n)})).getOrThunk((function(){return Ei(e.gap(),!0)}));i.push(c)}var a=ki(i,t.all()[o].section());r.push(a)}return r},Sc=function(t){return{is:function(e){return t===e},isValue:wo,isError:bo,getOr:vo(t),getOrThunk:vo(t),getOrDie:vo(t),or:function(){return Sc(t)},orThunk:function(){return Sc(t)},fold:function(e,n){return n(t)},map:function(e){return Sc(e(t))},mapError:function(){return Sc(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return So.some(t)}}},xc=function(t){return{is:bo,isValue:bo,isError:wo,getOr:e,getOrThunk:function(t){return t()},getOrDie:function(){return function(t){return function(){throw new Error(t)}}(String(t))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(e){return e(t)},map:function(){return xc(t)},mapError:function(e){return xc(e(t))},each:po,bind:function(){return xc(t)},exists:bo,forall:wo,toOption:So.none}},Rc={value:Sc,error:xc,fromOption:function(t,e){return t.fold((function(){return xc(e)}),Sc)}},Tc=function(t,e,n){if(t.row()>=e.length||t.column()>bc.cellLength(e[0]))return Rc.error("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=e.slice(t.row()),o=r[0].cells().slice(t.column()),i=bc.cellLength(n[0]),u=n.length;return Rc.value({rowDelta:vo(r.length-u),colDelta:vo(o.length-i)})},Oc=function(t,e){var n=bc.cellLength(t[0]),r=bc.cellLength(e[0]);return{rowDelta:vo(0),colDelta:vo(n-r)}},Dc=function(t,n,r){var o=n.colDelta()<0?rn:e;return(n.rowDelta()<0?nn:e)(o(t,Math.abs(n.colDelta()),r),Math.abs(n.rowDelta()),r)},Ac=function(t,e,n,r){if(0===t.length)return t;for(var o=e.startRow();o<=e.finishRow();o++)for(var i=e.startCol();i<=e.finishCol();i++)bc.mutateCell(t[o],i,Ei(r(),!1));return t},Ec=function(t,e,n,r){for(var o=!0,i=0;i<t.length;i++)for(var u=0;u<bc.cellLength(t[0]);u++){var c=n(bc.getCellElement(t[i],u),e);!0===c&&!1===o?bc.mutateCell(t[i],u,Ei(r(),!0)):!0===c&&(o=!1)}return t},Nc=function(t,e,n,r){if(0<e&&e<t.length){var o=function(t,e){return p(t,(function(t,n){return f(t,(function(t){return e(t.element(),n.element())}))?t:t.concat([n])}),[])}(t[e-1].cells(),n);d(o,(function(o){for(var i=So.none(),u=function(e){for(var u=function(u){var c=t[e].cells()[u];n(c.element(),o.element())&&(i.isNone()&&(i=So.some(r())),i.each((function(n){bc.mutateCell(t[e],u,Ei(n,!0))})))},c=0;c<bc.cellLength(t[0]);c++)u(c)},c=e;c<t.length;c++)u(c)}))}return t},kc=function(t,e,r,o,i){return Tc(t,e,r).map((function(u){var c=Dc(e,u,o);return function(t,e,r,o,i){for(var u,c,a,l,f,s=t.row(),d=t.column(),m=s+r.length,g=d+bc.cellLength(r[0]),p=s;p<m;p++)for(var h=d;h<g;h++){u=e,c=p,a=h,f=l=void 0,l=n(i,bc.getCell(u[c],a).element()),f=u[c],1<u.length&&1<bc.cellLength(f)&&(0<a&&l(bc.getCellElement(f,a-1))||a<f.cells().length-1&&l(bc.getCellElement(f,a+1))||0<c&&l(bc.getCellElement(u[c-1],a))||c<u.length-1&&l(bc.getCellElement(u[c+1],a)))&&Ec(e,bc.getCellElement(e[p],h),i,o.cell);var v=bc.getCellElement(r[p-s],h-d),b=o.replace(v);bc.mutateCell(e[p],h,Ei(b,!0))}return e}(t,c,r,o,i)}))},Ic=function(t,e,n,r,o){Nc(e,t,o,r.cell);var i=Oc(n,e),u=Dc(n,i,r),c=Oc(e,u),a=Dc(e,c,r);return a.slice(0,t).concat(u).concat(a.slice(t,a.length))},Bc=function(t,e,n,r,o){var i=t.slice(0,e),u=t.slice(e),c=bc.mapCells(t[n],(function(n,i){return 0<e&&e<t.length&&r(bc.getCellElement(t[e-1],i),bc.getCellElement(t[e],i))?bc.getCell(t[e],i):Ei(o(n.element(),r),!0)}));return i.concat([c]).concat(u)},Pc=function(t,e,n,r,o){return s(t,(function(t){var i=0<e&&e<bc.cellLength(t)&&r(bc.getCellElement(t,e-1),bc.getCellElement(t,e))?bc.getCell(t,e):Ei(o(bc.getCellElement(t,n),r),!0);return bc.addCell(t,e,i)}))},Mc=function(t,e,n,r,o){var i=n+1;return s(t,(function(t,u){var c=u===e?Ei(o(bc.getCellElement(t,n),r),!0):bc.getCell(t,n);return bc.addCell(t,i,c)}))},Wc=function(t,e,n,r,o){var i=e+1,u=t.slice(0,i),c=t.slice(i),a=bc.mapCells(t[e],(function(t,e){return e===n?Ei(o(t.element(),r),!0):t}));return u.concat([a]).concat(c)},_c=function(t,e,n){return t.slice(0,e).concat(t.slice(n+1))},Lc=function(t,e,n){var r=s(t,(function(t){var r=t.cells().slice(0,e).concat(t.cells().slice(n+1));return ki(r,t.section())}));return m(r,(function(t){return 0<t.cells().length}))},jc=function(t,e,n,r){var o=w(t,(function(r,o){return un(t,o,e,n)||cn(r,e,n)?[]:[bc.getCell(r,e)]}));return on(t,o,n,r)},zc=function(t,e,n,r){var o=t[e],i=w(o.cells(),(function(r,i){return un(t,e,i,n)||cn(o,i,n)?[]:[r]}));return on(t,i,n,r)},Hc=Du([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Fc=$o({},Hc),Uc=function(t,e,n,r){function o(t){return s(t,vo(0))}function i(t,e){if(0<=n){var i=Math.max(r.minCellWidth(),u[e]-n);return o(u.slice(0,t)).concat([n,i-u[e]]).concat(o(u.slice(e+1)))}var c=Math.max(r.minCellWidth(),u[t]+n),a=u[t]-c;return o(u.slice(0,t)).concat([c-u[t],a]).concat(o(u.slice(e+1)))}var u=t.slice(0),c=function(t,e){return 0===t.length?Fc.none():1===t.length?Fc.only(0):0===e?Fc.left(0,1):e===t.length-1?Fc.right(e-1,e):0<e&&e<t.length-1?Fc.middle(e-1,e,e+1):Fc.none()}(t,e),a=vo(o(u)),l=i;return c.fold(a,(function(t){return r.singleColumnWidth(u[t],n)}),l,(function(t,e,n){return i(e,n)}),(function(t,e){if(0<=n)return o(u.slice(0,e)).concat([n]);var i=Math.max(r.minCellWidth(),u[e]+n);return o(u.slice(0,e)).concat([i-u[e]])}))},qc={hasColspan:function(t){return an(t,"colspan")},hasRowspan:function(t){return an(t,"rowspan")},minWidth:vo(10),minHeight:vo(10),getInt:function(t,e){return parseInt($(t,e),10)}},Vc={getRawWidths:function(t,e,n){return dn(t,e,fn,mn,n)},getPixelWidths:function(t,e,n){return dn(t,e,qu.getPixelWidth,(function(t){return t.getOrThunk(n.minCellWidth)}),n)},getPercentageWidths:function(t,e,n){return dn(t,e,qu.getPercentageWidth,(function(t){return t.fold((function(){return n.minCellWidth()}),(function(t){return t/n.pixelWidth()*100}))}),n)},getPixelHeights:function(t,e){return gn(t,e,qu.getHeight,(function(t){return t.getOrThunk(qc.minHeight)}))},getRawHeights:function(t,e){return gn(t,e,sn,mn)}},Gc=function(t,e){return s(Ui.justCells(t),(function(t){var n=pn(t.column(),t.column()+t.colspan(),e);return{element:t.element,width:vo(n),colspan:t.colspan}}))},Yc=function(t,e){return s(Ui.justCells(t),(function(t){var n=pn(t.row(),t.row()+t.rowspan(),e);return{element:t.element,height:vo(n),rowspan:t.rowspan}}))},Kc=function(t,e){return s(t.all(),(function(t,n){return{element:t.element,height:vo(e[n])}}))},Xc=function(t){return qu.getRawWidth(t).fold((function(){return hn(fe(t))}),(function(e){return vn(t,e)}))},$c=function(t,e,n,r){var o=Xc(t),i=o.getCellDelta(e),u=wn(t),c=o.getWidths(u,r,o),a=s(Uc(c,n,i,o),(function(t,e){return t+c[e]}));d(Gc(u,a),(function(t){o.setElementWidth(t.element(),t.width())})),n===u.grid().columns()-1&&o.setTableWidth(t,a,i)},Jc=function(t,e,n,r){var o=wn(t),i=s(Vc.getPixelHeights(o,r),(function(t,r){return n===r?Math.max(e+t,qc.minHeight()):t})),u=Yc(o,i);d(Kc(o,i),(function(t){qu.setHeight(t.element(),t.height())})),d(u,(function(t){qu.setHeight(t.element(),t.height())}));var c=function(t){return g(t,(function(t,e){return t+e}),0)}(i);qu.setHeight(t,c)},Qc=function(t,e,n){var r=Xc(t),o=bn(e),i=r.getWidths(o,n,r),u=Gc(o,i);d(u,(function(t){r.setElementWidth(t.element(),t.width())})),0<u.length&&r.setTableWidth(t,i,r.getCellDelta(0))},Zc=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return E("required",e),N(e),function(r){var o=Io(r);y(e,(function(t){return l(o,t)}))||D(e,o),t(e,o);var i=m(e,(function(t){return!n.validate(r[t],t)}));return 0<i.length&&function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+O(t).join(", ")+") were not.")}(i,n.label),r}},ta=Cn(["cell","row","replace","gap"]),ea=function(t,e){function n(n){return function(e){return t.cell(e)}(e(n))}function r(t){var e=n(t);return o.get().isNone()&&o.set(So.some(e)),i=So.some({item:t,replacement:e}),e}void 0===e&&(e=Sn),ta(t);var o=go(So.none()),i=So.none();return{getOrInit:function(t,e){return i.fold((function(){return r(t)}),(function(n){return e(t,n.item)?n.replacement:r(t)}))},cursor:o.get}},na=function(t,e){return function(n){function r(r){var u={scope:t},c=n.replace(r,e,u);return i.push({item:r,sub:c}),o.get().isNone()&&o.set(So.some(c)),c}var o=go(So.none());ta(n);var i=[];return{replaceOrInit:function(t,e){return function(t,e){return h(i,(function(n){return e(n.item,t)}))}(t,e).fold((function(){return r(t)}),(function(n){return e(t,n.item)?n.sub:r(t)}))},cursor:o.get}}},ra=function(t){ta(t);var e=go(So.none());return{combine:function(n){return e.get().isNone()&&e.set(So.some(n)),function(){var e=t.cell({element:vo(n),colspan:vo(1),rowspan:vo(1)});return Q(e,"width"),Q(n,"width"),e}},cursor:e.get}},oa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ia=xn,ua=function(t,e){return l(["ol","ul"],t.property().name(e))},ca=Rn,aa=Zt(),la=function(t){return ia(aa,t)},fa=function(t){return ua(aa,t)},sa=function(t){return ca(aa,t)},da=function(t){function e(t){return"br"===Ho(t)}function n(t){return Ft(t).bind((function(n){var r=function(t){return dt(t).map((function(t){return!!la(t)||!!sa(t)&&"img"!==Ho(t)})).getOr(!1)}(n);return lt(n).map((function(o){return!0===r||function(t){return"li"===Ho(t)||Dt(t,fa).isSome()}(o)||e(n)||la(o)&&!bi(t,o)?[]:[Vo.fromTag("br")]}))})).getOr([])}var r,o=0===(r=w(t,(function(t){var r=mt(t);return function(t){return y(t,(function(t){return e(t)||Uo(t)&&0===Wt(t).trim().length}))}(r)?[]:r.concat(n(t))}))).length?[Vo.fromTag("br")]:r;Ct(t[0]),yt(t[0],o)},ma=T("grid","cursor"),ga=function(t,e,n){return So.from(t[e]).bind((function(t){return So.from(t.cells()[n]).bind((function(t){return So.from(t.element())}))}))},pa=Qc,ha={insertRowBefore:Je((function(t,e,n,r){var o=e.row(),i=e.row();return Dn(Bc(t,i,o,n,r.getOrInit),i,e.column())}),Qe,po,po,ea),insertRowsBefore:Je((function(t,e,n,r){var o=e[0].row(),i=e[0].row();return Dn(p(An(e),(function(t){return Bc(t,i,o,n,r.getOrInit)}),t),i,e[0].column())}),tn,po,po,ea),insertRowAfter:Je((function(t,e,n,r){var o=e.row(),i=e.row()+e.rowspan();return Dn(Bc(t,i,o,n,r.getOrInit),i,e.column())}),Qe,po,po,ea),insertRowsAfter:Je((function(t,e,n,r){var o=An(e),i=o[o.length-1].row(),u=o[o.length-1].row()+o[o.length-1].rowspan();return Dn(p(o,(function(t){return Bc(t,u,i,n,r.getOrInit)}),t),u,e[0].column())}),tn,po,po,ea),insertColumnBefore:Je((function(t,e,n,r){var o=e.column(),i=e.column();return Dn(Pc(t,i,o,n,r.getOrInit),e.row(),i)}),Qe,pa,po,ea),insertColumnsBefore:Je((function(t,e,n,r){var o=En(e),i=o[0].column(),u=o[0].column();return Dn(p(o,(function(t){return Pc(t,u,i,n,r.getOrInit)}),t),e[0].row(),u)}),tn,pa,po,ea),insertColumnAfter:Je((function(t,e,n,r){var o=e.column(),i=e.column()+e.colspan();return Dn(Pc(t,i,o,n,r.getOrInit),e.row(),i)}),Qe,pa,po,ea),insertColumnsAfter:Je((function(t,e,n,r){var o=e[e.length-1].column(),i=e[e.length-1].column()+e[e.length-1].colspan();return Dn(p(En(e),(function(t){return Pc(t,i,o,n,r.getOrInit)}),t),e[0].row(),i)}),tn,pa,po,ea),splitCellIntoColumns:Je((function(t,e,n,r){return Dn(Mc(t,e.row(),e.column(),n,r.getOrInit),e.row(),e.column())}),Qe,pa,po,ea),splitCellIntoRows:Je((function(t,e,n,r){return Dn(Wc(t,e.row(),e.column(),n,r.getOrInit),e.row(),e.column())}),Qe,po,po,ea),eraseColumns:Je((function(t,e){var n=En(e),r=Lc(t,n[0].column(),n[n.length-1].column()),o=On(r,e[0].row(),e[0].column());return ma(r,o)}),tn,pa,Tn,ea),eraseRows:Je((function(t,e){var n=An(e),r=_c(t,n[0].row(),n[n.length-1].row()),o=On(r,e[0].row(),e[0].column());return ma(r,o)}),tn,po,Tn,ea),makeColumnHeader:Je((function(t,e,n,r){return Dn(jc(t,e.column(),n,r.replaceOrInit),e.row(),e.column())}),Qe,po,po,na("row","th")),unmakeColumnHeader:Je((function(t,e,n,r){return Dn(jc(t,e.column(),n,r.replaceOrInit),e.row(),e.column())}),Qe,po,po,na(null,"td")),makeRowHeader:Je((function(t,e,n,r){return Dn(zc(t,e.row(),n,r.replaceOrInit),e.row(),e.column())}),Qe,po,po,na("col","th")),unmakeRowHeader:Je((function(t,e,n,r){return Dn(zc(t,e.row(),n,r.replaceOrInit),e.row(),e.column())}),Qe,po,po,na(null,"td")),mergeCells:Je((function(t,e,n){var r=e.cells();da(r);var o=Ac(t,e.bounds(),n,vo(r[0]));return ma(o,So.from(r[0]))}),(function(t,e){return e.mergable()}),po,po,ra),unmergeCells:Je((function(t,e,n,r){var o=g(e,(function(t,e){return Ec(t,e,n,r.combine(e))}),t);return ma(o,So.from(e[0]))}),(function(t,e){return e.unmergable()}),pa,po,ra),pasteCells:Je((function(t,e,n){var r,o,i,u,c=(r=e.clipboard(),o=e.generators(),i=zi(r),u=Ui.generate(i),Cc(u,o,!0)),a=Ri(e.row(),e.column());return kc(a,t,c,e.generators(),n).fold((function(){return ma(t,So.some(e.element()))}),(function(t){var n=On(t,e.row(),e.column());return ma(t,n)}))}),(function(t,e){return ji.cell(e.element()).bind((function(n){return $e(t,n).map((function(t){return $o($o({},t),{generators:e.generators,clipboard:e.clipboard})}))}))}),pa,po,ea),pasteRowsBefore:Je((function(t,e,n){var r=t[e.cells[0].row()],o=e.cells[0].row(),i=Nn(e.clipboard(),e.generators(),r),u=Ic(o,t,i,e.generators(),n),c=On(u,e.cells[0].row(),e.cells[0].column());return ma(u,c)}),Ze,po,po,ea),pasteRowsAfter:Je((function(t,e,n){var r=t[e.cells[0].row()],o=e.cells[e.cells.length-1].row()+e.cells[e.cells.length-1].rowspan(),i=Nn(e.clipboard(),e.generators(),r),u=Ic(o,t,i,e.generators(),n),c=On(u,e.cells[0].row(),e.cells[0].column());return ma(u,c)}),Ze,po,po,ea)},va=function(t){return Vo.fromDom(t.getBody())},ba=function(t){return function(e){return bi(e,va(t))}},wa={isRtl:vo(!1)},ya={isRtl:vo(!0)},Ca={directionAt:function(t){return"rtl"===function(t){return"rtl"===$(t,"direction")?"rtl":"ltr"}(t)?ya:wa}},Sa={"border-collapse":"collapse",width:"100%"},xa={border:"1"},Ra=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},Ta=function(t){var e=t.getParam("table_clone_elements");return Ro(e)?So.some(e.split(/[ ,]/)):Array.isArray(e)?So.some(e):So.none()},Oa=function(t,e,n,r,o){t.fire("TableSelectionChange",{cells:e,start:n,finish:r,otherCells:o})},Da=function(t){t.fire("TableSelectionClear")},Aa=function(t,e){function n(t){return"table"===Ho(va(t))}function r(e,n,r,i){return function(u,c){Pn(u);var a=i(),l=Vo.fromDom(t.getDoc()),f=Ae(Ca.directionAt),s=Xi.cellOperations(r,l,o);return n(u)?e(a,u,c,s,f).bind((function(e){return d(e.newRows(),(function(e){Un(t,e.dom())})),d(e.newCells(),(function(e){qn(t,e.dom())})),e.cursor().map((function(e){var n=t.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n}))})):So.none()}}var o=Ta(t);return{deleteRow:r(ha.eraseRows,(function(e){var r=Zu(e);return!1===n(t)||1<r.rows()}),po,e),deleteColumn:r(ha.eraseColumns,(function(e){var r=Zu(e);return!1===n(t)||1<r.columns()}),po,e),insertRowsBefore:r(ha.insertRowsBefore,wo,po,e),insertRowsAfter:r(ha.insertRowsAfter,wo,po,e),insertColumnsBefore:r(ha.insertColumnsBefore,wo,Vu,e),insertColumnsAfter:r(ha.insertColumnsAfter,wo,Vu,e),mergeCells:r(ha.mergeCells,wo,po,e),unmergeCells:r(ha.unmergeCells,wo,po,e),pasteRowsBefore:r(ha.pasteRowsBefore,wo,po,e),pasteRowsAfter:r(ha.pasteRowsAfter,wo,po,e),pasteCells:r(ha.pasteCells,wo,po,e)}},Ea=function(t,e,n){var r=zi(t),o=Ui.generate(r);return tn(o,e).map((function(t){var e=Xe(Cc(o,n,!1).slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),n);return ec(e)}))},Na=tinymce.util.Tools.resolve("tinymce.util.Tools"),ka=function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},Ia=function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},Ba=function(t,e){Na.each("left center right".split(" "),(function(n){t.formatter.remove("align"+n,{},e)}))},Pa=function(t,e){Na.each("top middle bottom".split(" "),(function(n){t.formatter.remove("valign"+n,{},e)}))},Ma=function(t,e,n){var r;return function(e,r){for(var o=0;o<r.length;o++){var i=t.getStyle(r[o],n);if(void 0===e&&(e=i),e!==i)return""}return e}(r,t.select("td,th",e))},Wa=n(Kn,"left center right"),_a=n(Kn,"top middle bottom"),La=function(t,e,n){var r=function(t,n){return n=n||[],Na.each(t,(function(t){var o={text:t.text||t.title};t.menu?o.menu=r(t.menu):(o.value=t.value,e&&e(o)),n.push(o)})),n};return r(t,n||[])},ja=function(t){var e=t[0],n=t.slice(1),r=Io(e);return d(n,(function(t){d(r,(function(n){S(t,(function(t,r){var o=e[n];""!==o&&n===r&&o!==t&&(e[n]="")}))}))})),e},za=function(t){var e=[{name:"borderstyle",type:"selectbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}},Ha=function(t,e,n){var r,o,i,u=t.dom;return $o($o({width:u.getStyle(e,"width")||u.getAttrib(e,"width"),height:u.getStyle(e,"height")||u.getAttrib(e,"height"),cellspacing:u.getStyle(e,"border-spacing")||u.getAttrib(e,"cellspacing"),cellpadding:u.getAttrib(e,"cellpadding")||Ma(t.dom,e,"padding"),border:(r=u,o=e,i=J(Vo.fromDom(o),"border-width"),zn(t)&&i.isSome()?i.getOr(""):r.getAttrib(o,"border")||Ma(t.dom,o,"border-width")||Ma(t.dom,o,"border")),caption:!!u.select("caption",e)[0],class:u.getAttrib(e,"class","")},Wa("align","align",t,e)),n?Yn(u,e):{})},Fa=function(t,e,n){var r=t.dom;return $o($o({height:r.getStyle(e,"height")||r.getAttrib(e,"height"),scope:r.getAttrib(e,"scope"),class:r.getAttrib(e,"class",""),align:"",type:e.parentNode.nodeName.toLowerCase()},Wa("align","align",t,e)),n?Yn(r,e):{})},Ua=function(t,e,n){var r=t.dom;return $o($o($o({width:r.getStyle(e,"width")||r.getAttrib(e,"width"),height:r.getStyle(e,"height")||r.getAttrib(e,"height"),scope:r.getAttrib(e,"scope"),celltype:e.nodeName.toLowerCase(),class:r.getAttrib(e,"class","")},Wa("align","halign",t,e)),_a("valign","valign",t,e)),n?Yn(r,e):{})},qa=function(t,e){function n(t){return U(t,"rgb")?r.toHex(t):t}var r,o,i,u,c,a,l,f=Wn(t),s=Mn(t),d=t.dom,m=e?(r=d,o=R(f,"border-style").getOr(""),i=R(f,"border-color").getOr(""),u=R(f,"background-color").getOr(""),{borderstyle:o,bordercolor:n(i),backgroundcolor:n(u)}):{};return $o($o($o($o($o($o({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),f),s),m),(l=f["border-width"],zn(t)&&l?{border:l}:R(s,"border").fold((function(){return{}}),(function(t){return{border:t}})))),(c=R(f,"border-spacing").or(R(s,"cellspacing")).fold((function(){return{}}),(function(t){return{cellspacing:t}})),a=R(f,"border-padding").or(R(s,"cellpadding")).fold((function(){return{}}),(function(t){return{cellpadding:t}})),$o($o({},c),a)))},Va=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"selectbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"selectbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"selectbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"selectbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],Ga=function(t){return function(t){var e=function(t){return t.getParam("table_cell_class_list",[],"array")}(t),n=La(e,(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})}));return 0<e.length?So.some({name:"class",type:"selectbox",label:"Class",items:n}):So.none()}(t).fold((function(){return Va}),(function(t){return Va.concat(t)}))},Ya={normal:function(t,e){return{setAttrib:function(n,r){t.setAttrib(e,n,r)},setStyle:function(n,r){t.setStyle(e,n,r)}}},ifTruthy:function(t,e){return{setAttrib:function(n,r){r&&t.setAttrib(e,n,r)},setStyle:function(n,r){r&&t.setStyle(e,n,r)}}}},Ka=function(t){var e,r=[];if(r=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!r.length&&e&&r.push(e),e=e||r[0]){var o=Na.map(r,(function(e){return Ua(t,e,_n(t))})),i=ja(o),u={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ga(t)},za("cell")]},c={type:"panel",items:[{type:"grid",columns:2,items:Ga(t)}]};t.windowManager.open({title:"Cell Properties",size:"normal",body:_n(t)?u:c,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onSubmit:n(Zn,t,r)})}},Xa=[{type:"selectbox",name:"type",label:"Row type",items:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],$a=function(t){return function(t){var e=function(t){return t.getParam("table_row_class_list",[],"array")}(t),n=La(e,(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})}));return 0<e.length?So.some({name:"class",type:"selectbox",label:"Class",items:n}):So.none()}(t).fold((function(){return Xa}),(function(t){return Xa.concat(t)}))},Ja=function(t){var e,r,o=t.dom,i=[];if((e=o.getParent(t.selection.getStart(),"table"))&&(r=o.getParent(t.selection.getStart(),"td,th"),Na.each(e.rows,(function(t){Na.each(t.cells,(function(e){if((o.getAttrib(e,"data-mce-selected")||e===r)&&i.indexOf(t)<0)return i.push(t),!1}))})),i[0])){var u=Na.map(i,(function(e){return Fa(t,e,Ln(t))})),c=ja(u),a={type:"tabpanel",tabs:[{title:"General",name:"general",items:$a(t)},za("row")]},l={type:"panel",items:[{type:"grid",columns:2,items:$a(t)}]};t.windowManager.open({title:"Row Properties",size:"normal",body:Ln(t)?a:l,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:c,onSubmit:n(tr,t,i,c)})}},Qa=Object.prototype.hasOwnProperty,Za=(mo=function(t,e){return e},function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var o=t[r];for(var i in o)Qa.call(o,i)&&(n[i]=mo(n[i],o[i]))}return n}),tl=tinymce.util.Tools.resolve("tinymce.Env"),el={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},nl=function(t,e,r){var o=Wn(t),i={styles:o,attributes:Mn(t),percentages:function(t){return Ro(t)&&-1!==t.indexOf("%")}(o.width)&&!Fn(t)},u=er(r,e,0,0,i);M(u,"data-mce-id","__mce");var c=function(t){var e=Vo.fromTag("div"),n=Vo.fromDom(t.dom().cloneNode(!0));return Ci(e,n),function(t){return t.dom().innerHTML}(e)}(u);return t.insertContent(c),Nt(va(t),'table[data-mce-id="__mce"]').map((function(e){return Fn(t)&&K(e,"width",$(e,"width")),j(e,"data-mce-id"),function(t,e){d(Tt(e,"tr"),(function(e){Un(t,e.dom()),d(Tt(e,"th,td"),(function(e){qn(t,e.dom())}))}))}(t,e),function(t,e){Nt(e,"td,th").each(n(nr,t))}(t,e),e.dom()})).getOr(null)},rl=function(t,e,n){var r=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=function(t){return t.getParam("table_appearance_options",!0,"boolean")}(t)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=e?[{type:"selectbox",name:"class",label:"Class",items:La(Hn(t),(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})}))}]:[];return r.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(o).concat([{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(i)},ol=function(t,e,n,r){if("TD"===e.tagName||"TH"===e.tagName)Ro(n)?t.setStyle(e,n,r):t.setStyle(e,n);else if(e.children)for(var o=0;o<e.children.length;o++)ol(t,e.children[o],n,r)},il=function(t,e){var r,o=t.dom,i=qa(t,jn(t));!1===e?(r=o.getParent(t.selection.getStart(),"table"))?i=Ha(t,r,jn(t)):jn(t)&&(i.borderstyle="",i.bordercolor="",i.backgroundcolor=""):(i.cols="1",i.rows="1",jn(t)&&(i.borderstyle="",i.bordercolor="",i.backgroundcolor=""));var u=0<Hn(t).length;u&&i.class&&(i.class=i.class.replace(/\s*mce\-item\-table\s*/g,""));var c={type:"grid",columns:2,items:rl(t,u,e)},a=jn(t)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[c]},za("table")]}:{type:"panel",items:[c]};t.windowManager.open({title:"Table Properties",size:"normal",body:a,onSubmit:n(rr,t,r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i})},ul=or("th,td"),cl=or("th,td,caption"),al=Na.each,ll={registerCommands:function(t,e,o,i,u){function c(t){return ji.table(t,m)}function a(t){return{width:kn(t.dom()),height:kn(t.dom())}}function l(e){ul(t).each((function(n){c(n).each((function(r){var u=Pu.forMenu(i,r,n),c=a(r);e(r,u).each((function(e){!function(t,e,n){var r=a(n);e.width===r.width&&e.height===r.height||(Vn(t,n.dom(),e.width,e.height),Gn(t,n.dom(),r.width,r.height))}(t,c,r),t.selection.setRng(e),t.focus(),o.clear(r),Pn(r)}))}))}))}function f(){return ul(t).map((function(e){return c(e).bind((function(n){var r=Vo.fromDom(t.getDoc()),o=Pu.forMenu(i,n,e),u=Xi.cellOperations(po,r,So.none());return Ea(n,o,u)}))}))}function d(e){u.get().each((function(n){var r=s(n,(function(t){return Vt(t)}));ul(t).each((function(n){c(n).each((function(u){var c=Vo.fromDom(t.getDoc()),a=Xi.paste(c),l=Pu.pasteRows(i,u,n,r,a);e(u,l).each((function(e){t.selection.setRng(e),t.focus(),o.clear(u)}))}))}))}))}var m=ba(t);al({mceTableSplitCells:function(){l(e.unmergeCells)},mceTableMergeCells:function(){l(e.mergeCells)},mceTableInsertRowBefore:function(){l(e.insertRowsBefore)},mceTableInsertRowAfter:function(){l(e.insertRowsAfter)},mceTableInsertColBefore:function(){l(e.insertColumnsBefore)},mceTableInsertColAfter:function(){l(e.insertColumnsAfter)},mceTableDeleteCol:function(){l(e.deleteColumn)},mceTableDeleteRow:function(){l(e.deleteRow)},mceTableCutRow:function(){f().each((function(t){u.set(t),l(e.deleteRow)}))},mceTableCopyRow:function(){f().each((function(t){u.set(t)}))},mceTablePasteRowBefore:function(){d(e.pasteRowsBefore)},mceTablePasteRowAfter:function(){d(e.pasteRowsAfter)},mceTableDelete:function(){cl(t).each((function(e){ji.table(e,m).filter(r(m)).each((function(e){var n=Vo.fromText("");if(ht(e,n),Si(e),t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else{var r=t.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.selection.setRng(r),t.nodeChanged()}}))}))}},(function(e,n){t.addCommand(n,e)})),al({mceInsertTable:n(il,t,!0),mceTableProps:n(il,t,!1),mceTableRowProps:n(Ja,t),mceTableCellProps:n(Ka,t)},(function(e,n){t.addCommand(n,(function(){e()}))}))}},fl=function(t){var e=So.from(t.dom().documentElement).map(Vo.fromDom).getOr(t);return{parent:vo(e),view:vo(t),origin:vo(Yu(0,0))}},sl=function(t,e){return{parent:vo(e),view:vo(t),origin:vo(Yu(0,0))}},dl=function(t){var e=T.apply(null,t),n=[];return{bind:function(t){if(void 0===t)throw new Error("Event bind error: undefined handler");n.push(t)},unbind:function(t){n=m(n,(function(e){return e!==t}))},trigger:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.apply(null,t);d(n,(function(t){t(o)}))}}},ml={create:function(t){return{registry:x(t,(function(t){return{bind:t.bind,unbind:t.unbind}})),trigger:x(t,(function(t){return t.trigger}))}}},gl=function(t,e,n,r){t.dom().removeEventListener(e,n,r)},pl=vo(!0),hl={resolve:He("ephox-dragster").resolve},vl=Cn(["compare","extract","mutate","sink"]),bl=Cn(["element","start","stop","destroy"]),wl=Cn(["forceDrop","drop","move","delayDrop"]),yl=vl({compare:function(t,e){return Yu(e.left()-t.left(),e.top()-t.top())},extract:function(t){return So.some(Yu(t.x(),t.y()))},sink:function(t,e){var n=function(t){var e=Za({layerClass:hl.resolve("blocker")},t),n=Vo.fromTag("div");return M(n,"role","presentation"),X(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),We(n,hl.resolve("blocker")),We(n,e.layerClass),{element:function(){return n},destroy:function(){Si(n)}}}(e),r=cr(n.element(),"mousedown",t.forceDrop),o=cr(n.element(),"mouseup",t.drop),i=cr(n.element(),"mousemove",t.move),u=cr(n.element(),"mouseout",t.delayDrop);return bl({element:n.element,start:function(t){Ci(t,n.element())},stop:function(){Si(n.element())},destroy:function(){n.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()}})},mutate:function(t,e){t.mutate(e.left(),e.top())}}),Cl=function(e,n,r){function o(){f.stop(),a.isOn()&&(a.off(),c.trigger.stop())}function i(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u&&t.apply(null,e)}}var u=!1,c=ml.create({start:dl([]),stop:dl([])}),a=lr(),l=function(e,n){var r=null;return{cancel:function(){null!==r&&(t.clearTimeout(r),r=null)},throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null!==r&&t.clearTimeout(r),r=t.setTimeout((function(){e.apply(null,o),r=null}),n)}}}(o,200);a.events.move.bind((function(t){n.mutate(e,t.info())}));var f=n.sink(wl({forceDrop:o,drop:i(o),move:i((function(t){l.cancel(),a.onEvent(t,n)})),delayDrop:i(l.throttle)}),r);return{element:f.element,go:function(t){f.start(t),a.on(),c.trigger.start()},on:function(){u=!0},off:function(){u=!1},
destroy:function(){f.destroy()},events:c.registry}},Sl=function(t,e){void 0===e&&(e={});var n=void 0!==e.mode?e.mode:yl;return Cl(t,n,e)},xl=ic.resolve("resizer-bar-dragging"),Rl=function(t,e){var n=Ju.height,r=dr(t,e,n),o=ml.create({beforeResize:dl(["table"]),afterResize:dl(["table"]),startDrag:dl([])});return r.events.adjustHeight.bind((function(t){o.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());Jc(t.table(),e,t.row(),n),o.trigger.afterResize(t.table())})),r.events.startAdjust.bind((function(){o.trigger.startDrag()})),r.events.adjustWidth.bind((function(t){o.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());$c(t.table(),n,t.column(),e),o.trigger.afterResize(t.table())})),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}},Tl=function(t){return t.inline?sl(va(t),function(){var t=Vo.fromTag("div");return X(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ci(Go(),t),t}()):fl(Vo.fromDom(t.getDoc()))},Ol=function(t,e){t.inline&&Si(e.parent())},Dl=function(t){function e(t){return"TABLE"===t.nodeName}function n(e){var n=t.dom.getStyle(e,"width")||t.dom.getAttrib(e,"width");return So.from(n).filter((function(t){return 0<t.length}))}function r(){return c}var o,i,u=So.none(),c=So.none(),a=So.none(),l=/(\d+(\.\d+)?)%/;return t.on("init",(function(){var e=Ae(Ca.directionAt),n=Tl(t);if(a=So.some(n),function(t){var e=t.getParam("object_resizing",!0);return Ro(e)?"table"===e:e}(t)&&function(t){return t.getParam("table_resize_bars",!0,"boolean")}(t)){var r=Rl(n,e);r.on(),r.events.startDrag.bind((function(){u=So.some(t.selection.getRng())})),r.events.beforeResize.bind((function(e){var n=e.table().dom();Vn(t,n,kn(n),In(n))})),r.events.afterResize.bind((function(e){var n=e.table(),r=n.dom();Pn(n),u.each((function(e){t.selection.setRng(e),t.focus()})),Gn(t,r,kn(r),In(r)),t.undoManager.add()})),c=So.some(r)}})),t.on("ObjectResizeStart",(function(r){var u=r.target;if(e(u)){var c=n(u).map((function(t){return l.test(t)})).getOr(!1);c&&Fn(t)?function(t){K(Vo.fromDom(t),"width",kn(t).toString()+"px")}(u):!c&&function(t){return!0===t.getParam("table_responsive_width")}(t)&&function(t){var e=Vo.fromDom(t);lt(e).map((function(t){return mr(e,t)})).each((function(t){K(e,"width",t),d(Tt(e,"tr"),(function(t){d(mt(t),(function(e){K(e,"width",mr(e,t))}))}))}))}(u),o=r.width,i=n(u).getOr("")}})),t.on("ObjectResized",(function(n){var r=n.target;if(e(r)){var u=r;if(l.test(i)){var c=parseFloat(l.exec(i)[1]),a=n.width*c/o;t.dom.setStyle(u,"width",a+"%")}else{var f=[];Na.each(u.rows,(function(e){Na.each(e.cells,(function(e){var n=t.dom.getStyle(e,"width",!0);f.push({cell:e,width:n})}))})),Na.each(f,(function(e){t.dom.setStyle(e.cell,"width",e.width),t.dom.setAttrib(e.cell,"width",null)}))}}})),t.on("SwitchMode",(function(){r().each((function(e){t.readonly?e.hideBars():e.showBars()}))})),{lazyResize:r,lazyWire:function(){return a.getOr(fl(Vo.fromDom(t.getBody())))},destroy:function(){c.each((function(t){t.destroy()})),a.each((function(e){Ol(t,e)}))}}},Al=Du([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),El=$o($o({},Al),{none:function(t){return void 0===t&&(t=void 0),Al.none(t)}}),Nl=function(t,e){return gr(t,e).fold((function(){return El.none(t)}),(function(e){return e.index()+1<e.all().length?El.middle(t,e.all()[e.index()+1]):El.last(t)}))},kl=function(t,e){return gr(t,e).fold((function(){return El.none()}),(function(e){return 0<=e.index()-1?El.middle(t,e.all()[e.index()-1]):El.first(t)}))},Il={create:T("start","soffset","finish","foffset")},Bl=Du([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Pl={before:Bl.before,on:Bl.on,after:Bl.after,cata:function(t,e,n,r){return t.fold(e,n,r)},getStart:function(t){return t.fold(e,e,e)}},Ml=Du([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Wl={domRange:Ml.domRange,relative:Ml.relative,exact:Ml.exact,exactFromRange:function(t){return Ml.exact(t.start(),t.soffset(),t.finish(),t.foffset())},getWin:function(t){return function(t){return Vo.fromDom(t.dom().ownerDocument.defaultView)}(function(t){return t.match({domRange:function(t){return Vo.fromDom(t.startContainer)},relative:function(t){return Pl.getStart(t)},exact:function(t){return t}})}(t))},range:Il.create},_l=function(t,e){t.selectNodeContents(e.dom())},Ll=Du([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),jl=function(t,e){return wr(t,e).match({ltr:function(e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(e,n,r,o){var i=t.document.createRange();return i.setStart(r.dom(),o),i.setEnd(e.dom(),n),i}})},zl=function(t,e,n,r){return Uo(e)?function(t,e,n,r){var o=t.dom().createRange();return o.selectNode(e.dom()),Ne(o.getClientRects(),(function(t){return yr(t,n,r)?So.some(t):So.none()})).map((function(o){return Cr(t,e,n,r,o)}))}(t,e,n,r):function(t,e,n,r){var o=t.dom().createRange();return Ne(mt(e),(function(e){return o.selectNode(e.dom()),yr(o.getBoundingClientRect(),n,r)?zl(t,e,n,r):So.none()}))}(t,e,n,r)},Hl=document.caretPositionFromPoint?function(t,e,n){return So.from(t.dom().caretPositionFromPoint(e,n)).bind((function(e){if(null===e.offsetNode)return So.none();var n=t.dom().createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),So.some(n)}))}:document.caretRangeFromPoint?function(t,e,n){return So.from(t.dom().caretRangeFromPoint(e,n))}:function(t,e,n){return Vo.fromPoint(t,e,n).bind((function(r){function o(){return function(t,e,n){return(0===mt(e).length?Tr:Rr)(t,e,n)}(t,r,e)}return 0===mt(r).length?o():Or(t,r,e,n).orThunk(o)}))},Fl=tinymce.util.Tools.resolve("tinymce.util.VK"),Ul=function(t,e,n,r){return n.fold(So.none,So.none,(function(t,e){return Ht(e).map((function(t){return qr(0,t)}))}),(function(n){return ji.table(n,e).bind((function(e){var o=Pu.noMenu(n);return t.undoManager.transact((function(){r.insertRowsAfter(e,o)})),Vr(0,e)}))}))},ql=["table","li","dl"],Vl={handle:function(t,e,n,r){if(t.keyCode===Fl.TAB){var o=va(e),i=function(t){var e=Ho(t);return bi(t,o)||l(ql,e)},u=e.selection.getRng();if(u.collapsed){var c=Vo.fromDom(u.startContainer);ji.cell(c,i).each((function(o){t.preventDefault(),(t.shiftKey?Ur:Fr)(e,i,o,n,r).each((function(t){e.selection.setRng(t)}))}))}}}},Gl={create:T("selection","kill")},Yl=function(t,e,n,r){return{start:vo(Pl.on(t,e)),finish:vo(Pl.on(n,r))}},Kl={convertToRange:function(t,e){var n=jl(t,e);return Il.create(Vo.fromDom(n.startContainer),n.startOffset,Vo.fromDom(n.endContainer),n.endOffset)},makeSitus:Yl},Xl=function(t,e,n,r,o){return bi(n,r)?So.none():vu(n,r,e).bind((function(e){var r=e.boxes().getOr([]);return 0<r.length?(o(t,r,e.start(),e.finish()),So.some(Gl.create(So.some(Kl.makeSitus(n,0,n,jt(n))),!0))):So.none()}))},$l={sync:function(t,e,n,r,o,i,u){return bi(n,o)&&r===i?So.none():kt(n,"td,th",e).bind((function(n){return kt(o,"td,th",e).bind((function(r){return Xl(t,e,n,r,u)}))}))},detect:Xl,update:function(t,e,n,r,o){return wu(r,t,e,o.firstSelectedSelector(),o.lastSelectedSelector()).map((function(t){return o.clearBeforeUpdate(n),o.selectRange(n,t.boxes(),t.start(),t.finish()),t.boxes()}))}},Jl=T("item","mode"),Ql=function(t,e,n,r){return void 0===r&&(r=Zl),n.sibling(t,e).map((function(t){return Jl(t,r)}))},Zl=function(t,e,n,r){void 0===r&&(r=Zl);var o=t.property().children(e);return n.first(o).map((function(t){return Jl(t,r)}))},tf=[{current:Gr,next:Ql,fallback:So.none()},{current:Ql,next:Zl,fallback:So.some(Gr)},{current:Zl,next:Zl,fallback:So.some(Ql)}],ef=function(t,e,n,r,o){return void 0===o&&(o=tf),h(o,(function(t){return t.current===n})).bind((function(n){return n.current(t,e,r,n.next).orThunk((function(){return n.fallback.bind((function(n){return ef(t,e,n,r)}))}))}))},nf=function(){return{sibling:function(t,e){return t.query().prevSibling(e)},first:function(t){return 0<t.length?So.some(t[t.length-1]):So.none()}}},rf=function(){return{sibling:function(t,e){return t.query().nextSibling(e)},first:function(t){return 0<t.length?So.some(t[0]):So.none()}}},of=function(t,e,n,r,o,i){return ef(t,e,r,o).bind((function(e){return i(e.item())?So.none():n(e.item())?So.some(e.item()):of(t,e.item(),n,e.mode(),o,i)}))},uf=function(t,e,n,r){return of(t,e,n,Ql,nf(),r)},cf=function(t,e,n,r){return of(t,e,n,Ql,rf(),r)},af=Zt(),lf=T("element","offset"),ff=(T("element","deltaOffset"),T("element","start","finish"),T("begin","end"),T("element","text"),Du([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),sf=$o($o({},ff),{verify:function(t,e,n,r,o,i,u){return kt(r,"td,th",u).bind((function(n){return kt(e,"td,th",u).map((function(e){return bi(n,e)?bi(r,n)&&jt(n)===o?i(e):ff.none("in same cell"):pu.sharedOne($r,[n,e]).fold((function(){return function(t,e,n){var r=t.getRect(e),o=t.getRect(n);return o.right>r.left&&o.left<r.right}(t,e,n)?ff.success():i(e)}),(function(){return i(e)}))}))})).getOr(ff.none("default"))},cata:function(t,e,n,r,o){return t.fold(e,n,r,o)}}),df=(T("ancestor","descendants","element","index"),T("parent","children","element","index")),mf=function(t,e){return v(t,n(bi,e))},gf=function(t,e,n){return e(t,n).bind((function(t){return Uo(t)&&0===Wt(t).trim().length?gf(t,e,n):So.some(t)}))},pf=function(t,e,n,r){return(Jr(e)?function(t,e,n){return n.traverse(e).orThunk((function(){return gf(e,n.gather,t)})).map(n.relative)}(t,e,r):Qr(t,e,n,r)).map((function(t){return{start:vo(t),finish:vo(t)}}))},hf=function(t){return sf.cata(t,(function(){return So.none()}),(function(){return So.none()}),(function(t){return So.some(lf(t,0))}),(function(t){return So.some(lf(t,jt(t)))}))},vf=Wo(["left","top","right","bottom"],[]),bf={nu:vf,moveUp:function(t,e){return vf({left:t.left(),top:t.top()-e,right:t.right(),bottom:t.bottom()-e})},moveDown:function(t,e){return vf({left:t.left(),top:t.top()+e,right:t.right(),bottom:t.bottom()+e})},moveBottomTo:function(t,e){var n=t.bottom()-t.top();return vf({left:t.left(),top:e-n,right:t.right(),bottom:e})},moveTopTo:function(t,e){var n=t.bottom()-t.top();return vf({left:t.left(),top:e,right:t.right(),bottom:e+n})},getTop:function(t){return t.top()},getBottom:function(t){return t.bottom()},translate:function(t,e,n){return vf({left:t.left()+e,top:t.top()+n,right:t.right()+e,bottom:t.bottom()+n})},toString:function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"}},wf=function(t,e,n){return Fo(e)?to(t,e).map(Zr):Uo(e)?function(t,e,n){return 0<=n&&n<jt(e)?t.getRangedRect(e,n,e,n+1):0<n?t.getRangedRect(e,n-1,e,n):So.none()}(t,e,n).map(Zr):So.none()},yf=function(t,e){return Fo(e)?to(t,e).map(Zr):Uo(e)?t.getRangedRect(e,0,e,jt(e)).map(Zr):So.none()},Cf=Du([{none:[]},{retry:["caret"]}]),Sf={point:bf.getTop,adjuster:function(t,e,n,r,o){var i=bf.moveUp(o,5);return Math.abs(n.top()-r.top())<1||n.bottom()<o.top()?Cf.retry(i):n.bottom()===o.top()?Cf.retry(bf.moveUp(o,1)):eo(t,e,o)?Cf.retry(bf.translate(i,5,0)):Cf.none()},move:bf.moveUp,gather:Kr},xf={point:bf.getBottom,adjuster:function(t,e,n,r,o){var i=bf.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1||n.top()>o.bottom()?Cf.retry(i):n.top()===o.bottom()?Cf.retry(bf.moveDown(o,1)):eo(t,e,o)?Cf.retry(bf.translate(i,5,0)):Cf.none()},move:bf.moveDown,gather:Xr},Rf=function(t,e,n,r,o){return 0===o?So.some(r):function(t,e,n){return t.elementFromPoint(e,n).filter((function(t){return"table"===Ho(t)})).isSome()}(t,r.left(),e.point(r))?function(t,e,n,r,o){return Rf(t,e,n,e.move(r,5),o)}(t,e,n,r,o-1):t.situsFromPoint(r.left(),e.point(r)).bind((function(i){return i.start().fold(So.none,(function(i){return yf(t,i).bind((function(u){return e.adjuster(t,i,u,n,r).fold(So.none,(function(r){return Rf(t,e,n,r,o-1)}))})).orThunk((function(){return So.some(r)}))}),So.none)}))},Tf={tryUp:n(no,Sf),tryDown:n(no,xf),ieTryUp:function(t,e){return t.situsFromPoint(e.left(),e.top()-5)},ieTryDown:function(t,e){return t.situsFromPoint(e.left(),e.bottom()+5)},getJumpSize:vo(5)},Of=it(),Df=function(t,e,n,r,o,i){return 0===i?So.none():Nf(t,e,n,r,o).bind((function(u){var c=t.fromSitus(u),a=sf.verify(t,n,r,c.finish(),c.foffset(),o.failure,e);return sf.cata(a,(function(){return So.none()}),(function(){return So.some(u)}),(function(u){return bi(n,u)&&0===r?Af(t,n,r,bf.moveUp,o):Df(t,e,u,0,o,i-1)}),(function(u){return bi(n,u)&&r===jt(u)?Af(t,n,r,bf.moveDown,o):Df(t,e,u,jt(u),o,i-1)}))}))},Af=function(t,e,n,r,o){return wf(t,e,n).bind((function(e){return Ef(t,o,r(e,Tf.getJumpSize()))}))},Ef=function(t,e,n){return Of.browser.isChrome()||Of.browser.isSafari()||Of.browser.isFirefox()||Of.browser.isEdge()?e.otherRetry(t,n):Of.browser.isIE()?e.ieRetry(t,n):So.none()},Nf=function(t,e,n,r,o){return wf(t,n,r).bind((function(e){return Ef(t,o,e)}))},kf=function(t,e,n){return function(t,e,n){return t.getSelection().bind((function(r){return pf(e,r.finish(),r.foffset(),n).fold((function(){return So.some(lf(r.finish(),r.foffset()))}),(function(o){var i=t.fromSitus(o),u=sf.verify(t,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,e);return hf(u)}))}))}(t,e,n).bind((function(r){return Df(t,e,r.element(),r.offset(),n,20).map(t.fromSitus)}))},If=it(),Bf=function(t,e,n,r,o,i){return If.browser.isIE()?So.none():i(r,e).orThunk((function(){return oo(t,e,n,r,o).map((function(t){var e=t.range();return Gl.create(So.some(Kl.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)}))}))},Pf=function(t,e,n,r,o,i,u){return oo(t,n,r,o,i).bind((function(t){return $l.detect(e,n,t.start(),t.finish(),u)}))},Mf=function(t,e){return kt(t,"tr",e).bind((function(t){return kt(t,"table",e).bind((function(n){var r=Tt(n,"tr");return bi(t,r[0])?function(t,e,n){return uf(af,t,e,n)}(n,(function(t){return Ft(t).isSome()}),e).map((function(t){var e=jt(t);return Gl.create(So.some(Kl.makeSitus(t,e,t,e)),!0)})):So.none()}))}))},Wf=function(t,e){return kt(t,"tr",e).bind((function(t){return kt(t,"table",e).bind((function(n){var r=Tt(n,"tr");return bi(t,r[r.length-1])?function(t,e,n){return cf(af,t,e,n)}(n,(function(t){return Ht(t).isSome()}),e).map((function(t){return Gl.create(So.some(Kl.makeSitus(t,0,t,0)),!0)})):So.none()}))}))},_f={down:{traverse:dt,gather:Xr,relative:Pl.before,otherRetry:Tf.tryDown,ieRetry:Tf.ieTryDown,failure:sf.failedDown},up:{traverse:st,gather:Kr,relative:Pl.before,otherRetry:Tf.tryUp,ieRetry:Tf.ieTryUp,failure:sf.failedUp}},Lf=uo(38),jf=uo(40),zf={ltr:{isBackward:uo(37),isForward:uo(39)},rtl:{isBackward:uo(39),isForward:uo(37)},isUp:Lf,isDown:jf,isNavigation:function(t){return 37<=t&&t<=40}},Hf=function(t){return{left:t.left(),top:t.top(),right:t.right(),bottom:t.bottom(),width:t.width(),height:t.height()}},Ff=(it().browser.isSafari(),T("rows","cols")),Uf={mouse:function(t,e,n,r){var o=function(t,e,n,r){function o(){i=So.none()}var i=So.none();return{mousedown:function(t){r.clear(e),i=io(t.target(),n)},mouseover:function(o){i.each((function(i){r.clearBeforeUpdate(e),io(o.target(),n).each((function(o){vu(i,o,n).each((function(n){var u=n.boxes().getOr([]);(1<u.length||1===u.length&&!bi(i,o))&&(r.selectRange(e,u,n.start(),n.finish()),t.selectContents(o))}))}))}))},mouseup:function(){i.each(o)}}}(co(t),e,n,r);return{mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},keyboard:function(t,e,r,o){function i(){return o.clear(e),So.none()}var u=co(t);return{keydown:function(t,c,a,l,f,s){var d=t.raw(),m=d.which,g=!0===d.shiftKey;return bu(e,o.selectedSelector()).fold((function(){return zf.isDown(m)&&g?n(Pf,u,e,r,_f.down,l,c,o.selectRange):zf.isUp(m)&&g?n(Pf,u,e,r,_f.up,l,c,o.selectRange):zf.isDown(m)?n(Bf,u,r,_f.down,l,c,Wf):zf.isUp(m)?n(Bf,u,r,_f.up,l,c,Mf):So.none}),(function(t){function n(n){return function(){return Ne(n,(function(n){return $l.update(n.rows(),n.cols(),e,t,o)})).fold((function(){return yu(e,o.firstSelectedSelector(),o.lastSelectedSelector()).map((function(t){var n=zf.isDown(m)||s.isForward(m)?Pl.after:Pl.before;return u.setRelativeSelection(Pl.on(t.first(),0),n(t.table())),o.clear(e),Gl.create(So.none(),!0)}))}),(function(){return So.some(Gl.create(So.none(),!0))}))}}return zf.isDown(m)&&g?n([Ff(1,0)]):zf.isUp(m)&&g?n([Ff(-1,0)]):s.isBackward(m)&&g?n([Ff(0,-1),Ff(-1,0)]):s.isForward(m)&&g?n([Ff(0,1),Ff(1,0)]):zf.isNavigation(m)&&0==g?i:So.none}))()},keyup:function(t,n,i,u,c){return bu(e,o.selectedSelector()).fold((function(){var a=t.raw(),l=a.which;return 0==(!0===a.shiftKey)?So.none():zf.isNavigation(l)?$l.sync(e,r,n,i,u,c,o.selectRange):So.none()}),So.none)}}},external:function(t,e,n,r){var o=co(t);return function(t,i){r.clearBeforeUpdate(e),vu(t,i,n).each((function(t){var n=t.boxes().getOr([]);r.selectRange(e,n,t.start(),t.finish()),o.selectContents(i),o.collapseSelection()}))}}},qf={byClass:function(t){function e(e){d(Tt(e,t.selectedSelector()),r)}var n=function(t){return function(e){We(e,t)}}(t.selected()),r=function(t){return function(e){ao(e,t)}}([t.selected(),t.lastSelected(),t.firstSelected()]);return{clearBeforeUpdate:e,clear:e,selectRange:function(r,o,i,u){e(r),d(o,n),We(i,t.firstSelected()),We(u,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(t,e,n){function r(e){j(e,t.selected()),j(e,t.firstSelected()),j(e,t.lastSelected())}function o(e){M(e,t.selected(),"1")}function i(t){u(t),n()}var u=function(e){d(Tt(e,t.selectedSelector()),r)};return{clearBeforeUpdate:u,clear:i,selectRange:function(n,r,u,c){i(n),d(r,o),M(u,t.firstSelected(),"1"),M(c,t.lastSelected(),"1"),e(r,u,c)},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}}},Vf={getOtherCells:function(t,e,n){var r=zi(t),o=Ui.generate(r);return tn(o,e).map((function(t){var e=Cc(o,n,!1);return{upOrLeftCells:function(t,e,n){return w(Xe(t.slice(0,e[e.length-1].row()+1),n),(function(t){return s(t.cells().slice(0,e[e.length-1].column()+1),(function(t){return t.element()}))}))}(e,t,n),downOrRightCells:function(t,e,n){return w(Xe(t.slice(e[0].row()+e[0].rowspan()-1,t.length),n),(function(t){return s(t.cells().slice(e[0].column()+e[0].colspan()-1,+t.cells().length),(function(t){return t.element()}))}))}(e,t,n)}}))}},Gf=function(t){return!1===Le(Vo.fromDom(t.target),"ephox-snooker-resizer-bar")},Yf=function(t){return{get:function(){var e=va(t);return Cu(e,Ou.selectedSelector()).fold((function(){return void 0===t.selection.getStart()?Eu.none():Eu.single(t.selection)}),(function(t){return Eu.multiple(t)}))}}},Kf=function(t,e){function n(){return cl(t).bind((function(t){return ji.table(t).map((function(n){return"caption"===Ho(t)?Pu.notCell(t):Pu.forMenu(e,n,t)}))}))}function r(){i.set(V(n)()),d(u.get(),(function(t){return t()}))}function o(t,e){function n(){return i.get().fold((function(){t.setDisabled(!0)}),(function(n){t.setDisabled(e(n))}))}return n(),u.set(u.get().concat([n])),function(){u.set(m(u.get(),(function(t){return t!==n})))}}var i=go(So.none()),u=go([]);return t.on("NodeChange TableSelectorChange",r),{onSetupTable:function(t){return o(t,(function(){return!1}))},onSetupCellOrRow:function(t){return o(t,(function(t){return"caption"===Ho(t.element())}))},onSetupMergeable:function(t){return o(t,(function(t){return t.mergable().isNone()}))},onSetupUnmergeable:function(t){return o(t,(function(t){return t.unmergable().isNone()}))},resetTargets:r,targets:function(){return i.get()}}},Xf={addButtons:function(t,e){function n(e){return function(){return t.execCommand(e)}}t.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(t){return t("inserttable | cell row column | advtablesort | tableprops deletetable")}}),t.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:n("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:n("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:n("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:n("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),t.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:n("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),t.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:n("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:n("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:n("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:n("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:n("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:n("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:n("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",onAction:n("mceTableCutRow"),icon:"temporary-placeholder",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",onAction:n("mceTableCopyRow"),icon:"temporary-placeholder",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",onAction:n("mceTablePasteRowBefore"),icon:"temporary-placeholder",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",onAction:n("mceTablePasteRowAfter"),icon:"temporary-placeholder",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:n("mceInsertTable"),icon:"table"})},addToolbars:function(t){var e=function(t){return t.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")}(t);0<e.length&&t.ui.registry.addContextToolbar("table",{predicate:function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},items:e,scope:"node",position:"node"})}},$f={addMenuItems:function(t,e){function n(e){return function(){return t.execCommand(e)}}function r(e){var n=e.numRows,r=e.numColumns;t.undoManager.transact((function(){nl(t,r,n)})),t.addVisual()}var o={text:"Table properties",onSetup:e.onSetupTable,onAction:n("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:e.onSetupTable,onAction:n("mceTableDelete")},u=[{type:"menuitem",text:"Insert row before",icon:"table-insert-row-above",onAction:n("mceTableInsertRowBefore"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Insert row after",icon:"table-insert-row-after",onAction:n("mceTableInsertRowAfter"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Delete row",icon:"table-delete-row",onAction:n("mceTableDeleteRow"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Row properties",icon:"table-row-properties",onAction:n("mceTableRowProps"),onSetup:e.onSetupCellOrRow},{type:"separator"},{type:"menuitem",text:"Cut row",onAction:n("mceTableCutRow"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Copy row",onAction:n("mceTableCopyRow"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Paste row before",onAction:n("mceTablePasteRowBefore"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Paste row after",onAction:n("mceTablePasteRowAfter"),onSetup:e.onSetupCellOrRow}],c={type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return u}},a=[{type:"menuitem",text:"Insert column before",icon:"table-insert-column-before",onAction:n("mceTableInsertColBefore"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Insert column after",icon:"table-insert-column-after",onAction:n("mceTableInsertColAfter"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Delete column",icon:"table-delete-column",onAction:n("mceTableDeleteCol"),onSetup:e.onSetupCellOrRow}],l={type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return a}},f=[{type:"menuitem",text:"Cell properties",icon:"table-cell-properties",onAction:n("mceTableCellProps"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Merge cells",icon:"table-merge-cells",onAction:n("mceTableMergeCells"),onSetup:e.onSetupMergeable},{type:"menuitem",text:"Split cell",icon:"table-split-cells",onAction:n("mceTableSplitCells"),onSetup:e.onSetupUnmergeable}],s={type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return f}};!1===function(t){return t.getParam("table_grid",!0,"boolean")}(t)?t.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:n("mceInsertTable")}):t.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:r}]}}),t.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:n("mceInsertTable")}),t.ui.registry.addMenuItem("tableprops",o),t.ui.registry.addMenuItem("deletetable",i),t.ui.registry.addNestedMenuItem("row",c),t.ui.registry.addNestedMenuItem("column",l),t.ui.registry.addNestedMenuItem("cell",s),t.ui.registry.addContextMenu("table",{update:function(){return e.resetTargets(),e.targets().fold((function(){return""}),(function(t){return"caption"===Ho(t.element())?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}})}},Jf=function(t,e,n,r){return{insertTable:function(e,n){return nl(t,e,n)},setClipboardRows:function(t){return function(t,e){var n=s(t,Vo.fromDom);e.set(So.from(n))}(t,e)},getClipboardRows:function(){return function(t){return t.get().fold((function(){}),(function(t){return s(t,(function(t){return t.dom()}))}))}(e)},resizeHandler:n,selectionTargets:r}};xo.add("table",fo)}(window);
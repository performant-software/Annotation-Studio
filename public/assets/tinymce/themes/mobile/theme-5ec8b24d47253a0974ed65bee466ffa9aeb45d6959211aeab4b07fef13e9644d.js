!function(n){"use strict";function t(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]])}return e}function e(){}function r(n){return n}function o(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}function i(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(null,t)}}function u(n){return function(){throw new Error(n)}}function c(n){return n()}function a(){return na}function f(n){return n.isNone()}function s(n){return n()}function l(n){return n}function d(n,t){return ua(n,(function(n,e){return{k:e,v:t(n,e)}}))}function m(n,t){return oa.call(n,t)}function g(n,t){function e(n){return Number(t.replace(r,"$"+n))}var r=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}}(n,t);return r?sa(e(1),e(2)):{major:0,minor:0}}function p(n,t){return function(){return t===n}}function h(n,t){return function(){return t===n}}function v(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"==t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t}(t)===n}}function y(n,t){return-1<function(n,t){return Ra.call(n,t)}(n,t)}function b(n,t){for(var e=0,r=n.length;e<r;e++)if(t(n[e],e))return!0;return!1}function x(n,t){for(var e=0,r=n.length;e<r;e++)t(n[e],e)}function w(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r];t(i,r)&&e.push(i)}return e}function S(n,t,e){return function(n,t){for(var e=n.length-1;0<=e;e--)t(n[e],e)}(n,(function(n){e=t(e,n)})),e}function T(n,t,e){return x(n,(function(n){e=t(e,n)})),e}function O(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return ea.some(o)}return ea.none()}function k(n,t){for(var e=0,r=n.length;e<r;e++)if(t(n[e],e))return ea.some(e);return ea.none()}function E(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!Da(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);Ba.apply(t,n[e])}return t}function C(n,t){return E(Va(n,t))}function D(n,t){for(var e=0,r=n.length;e<r;++e)if(!0!==t(n[e],e))return!1;return!0}function M(n){var t=Aa.call(n,0);return t.reverse(),t}function I(n,t){return w(n,(function(n){return!y(t,n)}))}function F(n){return[n]}function A(n,t){var e=String(t).toLowerCase();return O(n,(function(n){return n.search(e)}))}function R(n,t){return-1!==n.indexOf(t)}function B(n){return function(t){return R(t,n)}}function V(){return La.get()}function N(n,t){bf(n,n.element(),t,{})}function j(n,t,e){bf(n,n.element(),t,e)}function _(n){N(n,ff())}function P(n,t,e){bf(n,t,e,{})}function H(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}}function z(n){return n.dom().nodeName.toLowerCase()}function L(n){return function(t){return function(n){return n.dom().nodeType}(t)===n}}function G(n){var t=Ef(n)?n.dom().parentNode:n.dom();return null!=t&&t.ownerDocument.body.contains(t)}function U(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(n.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+t.length+" arguments");var r={};return x(n,(function(n,e){r[n]=Jc(t[e])})),r}}function $(n){return n.slice(0).sort()}function W(n,t){if(!Da(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");x(t,(function(t){if(!Ea(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.")}))}function X(n,t){var e=n.concat(t);if(0===e.length)throw new Error("You must specify at least one required or optional field.");return W("required",n),W("optional",t),function(n){var t=$(n);O(t,(function(n,e){return e<t.length-1&&n===t[e+1]})).each((function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))}(e),function(r){var o=ra(r);D(n,(function(n){return y(o,n)}))||function(n,t){throw new Error("All required keys ("+$(n).join(", ")+") were not specified. Specified keys were: "+$(t).join(", ")+".")}(n,o);var i=w(o,(function(n){return!y(e,n)}));0<i.length&&function(n){throw new Error("Unsupported keys for object: "+$(n).join(", "))}(i);var u={};return x(n,(function(n){u[n]=Jc(r[n])})),x(t,(function(n){u[n]=Jc(Object.prototype.hasOwnProperty.call(r,n)?ea.some(r[n]):ea.none())})),u}}function q(n,t){var e=n.dom();if(e.nodeType!==Mf)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}function Y(n){return n.nodeType!==Mf&&n.nodeType!==If||0===n.childElementCount}function K(t,e){var r=void 0===e?n.document:e.dom();return Y(r)?[]:Va(r.querySelectorAll(t),wf.fromDom)}function J(t,e){var r=void 0===e?n.document:e.dom();return Y(r)?ea.none():ea.from(r.querySelector(t)).map(wf.fromDom)}function Q(n,t){return n.dom()===t.dom()}function Z(n){return wf.fromDom(n.dom().ownerDocument)}function nn(n){return ea.from(n.dom().parentNode).map(wf.fromDom)}function tn(n,t){var e=n.dom().childNodes;return ea.from(e[t]).map(wf.fromDom)}function en(n,t){nn(n).each((function(e){e.dom().insertBefore(t.dom(),n.dom())}))}function rn(n,t){(function(n){return ea.from(n.dom().nextSibling).map(wf.fromDom)})(n).fold((function(){nn(n).each((function(n){Af(n,t)}))}),(function(n){en(n,t)}))}function on(n,t){(function(n){return tn(n,0)})(n).fold((function(){Af(n,t)}),(function(e){n.dom().insertBefore(t.dom(),e.dom())}))}function un(n,t){x(t,(function(t){Af(n,t)}))}function cn(n){n.dom().textContent="",x(Ff(n),(function(n){Rf(n)}))}function an(n,t){Af(n.element(),t.element())}function fn(n,t){var e=n.components();!function(n){x(n.components(),(function(n){return Rf(n.element())})),cn(n.element()),n.syncComponents()}(n),x(I(e,t),(function(t){Bf(t),n.getSystem().removeFromWorld(t)})),x(t,(function(t){t.getSystem().isConnected()?an(n,t):(n.getSystem().addToWorld(t),an(n,t),G(n.element())&&Vf(t)),n.syncComponents()}))}function sn(n){var t=nn(n.element()).bind((function(t){return n.getSystem().getByDom(t).toOption()}));!function(n){Bf(n),Rf(n.element()),n.getSystem().removeFromWorld(n)}(n),t.each((function(n){n.syncComponents()}))}function ln(n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var u in i)Lf.call(i,u)&&(r[u]=n(r[u],i[u]))}return r}}function dn(n){return $f.defaultedThunk(Jc(n))}function mn(n){return function(t){return m(t,n)?ea.from(t[n]):ea.none()}}function gn(n,t){return mn(t)(n)}function pn(n,t){var e={};return e[n]=t,e}function hn(n,t){return function(n,t){var e={};return ia(n,(function(n,r){y(t,r)||(e[r]=n)})),e}(n,t)}function vn(n,t){return function(n,t){return function(e){return m(e,n)?e[n]:t}}(n,t)}function yn(n,t){return pn(n,t)}function bn(n){return function(n){var t={};return x(n,(function(n){t[n.key]=n.value})),t}(n)}function xn(n,t){var e=function(n){var t=[],e=[];return x(n,(function(n){n.fold((function(n){t.push(n)}),(function(n){e.push(n)}))})),{errors:t,values:e}}(n);return 0<e.errors.length?function(n){return Hf.error(E(n))}(e.errors):function(n,t){return 0===n.length?Hf.value(t):Hf.value(Gf(t,Uf.apply(void 0,n)))}(e.values,t)}function wn(n,t){return function(n,t){return m(n,t)&&void 0!==n[t]&&null!==n[t]}(n,t)}function Sn(n,t,e){return n.stype===Xc.Error?t(n.serror):e(n.svalue)}function Tn(n){return{stype:Xc.Value,svalue:n}}function On(n){return{stype:Xc.Error,serror:n}}function kn(n){return Kc(cs,E)(n)}function En(n){return Ca(n)&&100<ra(n).length?" removed due to size":JSON.stringify(n,null,2)}function Cn(n,t){return cs([{path:n,getErrorInfo:t}])}function Dn(n,t,e){return gn(t,e).fold((function(){return function(n,t,e){return Cn(n,(function(){return'Could not find valid *strict* value for "'+t+'" in '+En(e)}))}(n,e,t)}),is)}function Mn(n,t,e){var o=gn(n,t).fold((function(){return e(n)}),r);return is(o)}function In(n,t,e,r){return e.fold((function(e,o,i,u){function c(t){var i=u.extract(n.concat([e]),r,t);return ss(i,(function(n){return pn(o,r(n))}))}function a(t){return t.fold((function(){var n=pn(o,r(ea.none()));return is(n)}),(function(t){var i=u.extract(n.concat([e]),r,t);return ss(i,(function(n){return pn(o,r(ea.some(n)))}))}))}return i.fold((function(){return as(Dn(n,t,e),c)}),(function(n){return as(Mn(t,e,n),c)}),(function(){return as(function(n,t){return is(gn(n,t))}(t,e),a)}),(function(n){return as(function(n,t,e){var r=gn(n,t).map((function(t){return!0===t?e(n):t}));return is(r)}(t,e,n),a)}),(function(n){var r=n(t),o=ss(Mn(t,e,Jc({})),(function(n){return Gf(r,n)}));return as(o,c)}))}),(function(n,e){var o=e(t);return is(pn(n,r(o)))}))}function Fn(n){return{extract:function(t,e,r){return fs(n(r,e),(function(n){return function(n,t){return Cn(n,(function(){return t}))}(t,n)}))},toString:function(){return"val"},toDsl:function(){return gs.itemOf(n)}}}function An(n){var t=vs(n),e=S(n,(function(n,t){return t.fold((function(t){return Gf(n,yn(t,!0))}),Jc(n))}),{});return{extract:function(n,r,o){var i=Ma(o)?[]:function(n){return w(ra(n),(function(t){return wn(n,t)}))}(o),u=w(i,(function(n){return!wn(e,n)}));return 0===u.length?t.extract(n,r,o):function(n,t){return Cn(n,(function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"}))}(n,u)},toString:t.toString,toDsl:t.toDsl}}function Rn(n,t){function e(t,e){return function(n){return{extract:function(t,e,r){var o=Va(r,(function(r,o){return n.extract(t.concat(["["+o+"]"]),e,r)}));return ms(o)},toString:function(){return"array("+n.toString()+")"},toDsl:function(){return gs.arrOf(n)}}}(Fn(n)).extract(t,r,e)}return{extract:function(n,r,o){var i=ra(o),u=e(n,i);return as(u,(function(e){var i=Va(e,(function(n){return hs.field(n,n,Wf(),t)}));return vs(i).extract(n,r,o)}))},toString:function(){return"setOf("+t.toString()+")"},toDsl:function(){return gs.setOf(n,t)}}}function Bn(n,t,e,r,o){return Jf(r,o).fold((function(){return function(n,t,e){return Cn(n,(function(){return'The chosen schema: "'+e+'" did not exist in branches: '+En(t)}))}(n,r,o)}),(function(r){return r.extract(n.concat(["branch: "+o]),t,e)}))}function Vn(n,t){return{extract:function(e,r,o){return Jf(o,n).fold((function(){return function(n,t){return Cn(n,(function(){return'Choice schema did not contain choice key: "'+t+'"'}))}(e,n)}),(function(n){return Bn(e,r,o,t,n)}))},toString:function(){return"chooseOn("+n+"). Possible values: "+ra(t)},toDsl:function(){return gs.choiceOf(n,t)}}}function Nn(n){return Fn((function(t){return n(t).fold(cs,is)}))}function jn(n,t){return Rn((function(t){return rs(n(t))}),t)}function _n(n,t,e){return os(function(n,t,e,r){var o=t.extract([n],e,r);return ls(o,(function(n){return{input:r,errors:n}}))}(n,t,r,e))}function Pn(n){return n.fold((function(n){throw new Error(Ss(n))}),r)}function Hn(n,t,e){return Pn(_n(n,t,e))}function zn(n,t){return Vn(n,d(t,vs))}function Ln(n){return xs(n,n,Wf(),ys())}function Gn(n,t){return xs(n,n,Wf(),t)}function Un(n,t){return xs(n,n,Wf(),vs(t))}function $n(n){return xs(n,n,Xf(),ys())}function Wn(n,t){return xs(n,n,Xf(),t)}function Xn(n,t){return Wn(n,vs(t))}function qn(n,t){return Wn(n,An(t))}function Yn(n,t){return xs(n,n,dn(t),ys())}function Kn(n,t,e){return xs(n,n,dn(t),e)}function Jn(n,t){return bs(n,t)}function Qn(n,t){return Q(n.element(),t.event().target())}function Zn(n){if(!wn(n,"can")&&!wn(n,"abort")&&!wn(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return Hn("Extracting event.handler",An([Yn("can",Jc(!0)),Yn("abort",Jc(!1)),Yn("run",e)]),n)}function nt(n){var t=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return T(n,(function(n,r){return n&&t(r).apply(void 0,e)}),!0)}}(n,(function(n){return n.can})),e=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return T(n,(function(n,r){return n||t(r).apply(void 0,e)}),!1)}}(n,(function(n){return n.abort}));return Zn({can:t,abort:e,run:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];x(n,(function(n){n.run.apply(void 0,t)}))}})}function tt(n,t,e,r,o){return n(e,r)?ea.some(e):Ia(o)&&o(e)?ea.none():t(e,r,o)}function et(n,t,e){for(var r=n.dom(),o=Ia(e)?e:Jc(!1);r.parentNode;){r=r.parentNode;var i=wf.fromDom(r);if(t(i))return ea.some(i);if(o(i))break}return ea.none()}function rt(n,t,e){return tt((function(n,t){return t(n)}),et,n,t,e)}function ot(n,t){var e=function(n){for(var r=0;r<n.childNodes.length;r++){var o=wf.fromDom(n.childNodes[r]);if(t(o))return ea.some(o);var i=e(n.childNodes[r]);if(i.isSome())return i}return ea.none()};return e(n.dom())}function it(n){return bn(n)}function ut(n,t){return{key:n,value:Zn({abort:t})}}function ct(n,t){return{key:n,value:Zn({run:t})}}function at(n,t,e){return{key:n,value:Zn({run:function(n){t.apply(void 0,[n].concat(e))}})}}function ft(n){return function(t){return{key:n,value:Zn({run:function(n,e){Qn(n,e)&&t(n,e)}})}}}function st(n,t,e){return function(n,t){return ct(n,(function(e,r){e.getSystem().getByUid(t).each((function(t){!function(n,t,e,r){n.getSystem().triggerEvent(e,t,r.event())}(t,t.element(),n,r)}))}))}(n,t.partUids[e])}function lt(n){return ct(n,(function(n,t){t.cut()}))}function dt(n,t){var e=n.toString(),r=e.indexOf(")")+1,o=e.indexOf("("),i=e.substring(o+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:t,parameters:Is(i)}},n}function mt(n){return{classes:void 0!==n.classes?n.classes:[],attributes:void 0!==n.attributes?n.attributes:{},styles:void 0!==n.styles?n.styles:{}}}function gt(n,t,e){return Ds((function(r){e(r,n,t)}))}function pt(n,t,e){return function(n,t,e){var r=e.toString(),o=r.indexOf(")")+1,i=r.indexOf("("),u=r.substring(i+1,o-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:t,parameters:Is(u.slice(0,1).concat(u.slice(3)))}},n}((function(r){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var u=[r].concat(o);return r.config({name:Jc(n)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+e)}),(function(n){var e=Array.prototype.slice.call(u,1);return t.apply(void 0,[r,n.config,n.state].concat(e))}))}),e,t)}function ht(n){return{key:n,value:void 0}}function vt(n){var t=Hn("Creating behaviour: "+n.name,Vs,n);return function(n,t,e,r,o,i){var u=An(n),c=Xn(t,[qn("config",n)]);return Fs(u,c,t,e,r,o,i)}(t.fields,t.name,t.active,t.apis,t.extra,t.state)}function yt(t,e,r){if(!(Ea(r)||Ma(r)||Fa(r)))throw n.console.error("Invalid call to Attr.set. Key ",e,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,r+"")}function bt(n,t,e){yt(n.dom(),t,e)}function xt(n,t){var e=n.dom();ia(t,(function(n,t){yt(e,t,n)}))}function wt(n,t){var e=n.dom().getAttribute(t);return null===e?void 0:e}function St(n,t){var e=n.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(t)}function Tt(n,t){n.dom().removeAttribute(t)}function Ot(n,t){var e=wt(n,t);return void 0===e||""===e?[]:e.split(" ")}function kt(n){return void 0!==n.dom().classList}function Et(n,t){return function(n,t,e){return bt(n,t,Ot(n,t).concat([e]).join(" ")),!0}(n,"class",t)}function Ct(n,t){return function(n,t,e){var r=w(Ot(n,t),(function(n){return n!==e}));return 0<r.length?bt(n,t,r.join(" ")):Tt(n,t),!1}(n,"class",t)}function Dt(n,t){kt(n)?n.dom().classList.add(t):Et(n,t)}function Mt(n){0===(kt(n)?n.dom().classList:function(n){return Ot(n,"class")}(n)).length&&Tt(n,"class")}function It(n,t){kt(n)?n.dom().classList.remove(t):Ct(n,t),Mt(n)}function Ft(n,t){return kt(n)&&n.dom().classList.contains(t)}function At(n,t,e){It(n,e),Dt(n,t)}function Rt(n){n.dom().focus()}function Bt(n){n.dom().blur()}function Vt(t){var e=void 0!==t?t.dom():n.document;return ea.from(e.activeElement).map(wf.fromDom)}function Nt(n){return Vt(Z(n)).filter((function(t){return n.dom().contains(t.dom())}))}function jt(n){return n.dom().innerHTML}function _t(t,e){var r=Z(t).dom(),o=wf.fromDom(r.createDocumentFragment()),i=function(t,e){var r=(e||n.document).createElement("div");return r.innerHTML=t,Ff(wf.fromDom(r))}(e,r);un(o,i),cn(t),Af(t,o)}function Pt(n){return function(n,t){return wf.fromDom(n.dom().cloneNode(t))}(n,!1)}function Ht(n){return function(n){var t=wf.fromTag("div"),e=wf.fromDom(n.dom().cloneNode(!0));return Af(t,e),jt(t)}(Pt(n))}function zt(n){return Ht(n)}function Lt(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t}function Gt(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return ea.none()}function Ut(t,e,r){switch(Jf(Ys.get(),t).orThunk((function(){return Gt(ra(Ys.get()),(function(n){return-1<t.indexOf(n)?ea.some(Ys.get()[n]):ea.none()}))})).getOr(ts.NORMAL)){case ts.NORMAL:return r(Js());case ts.LOGGING:var o=function(t,e){var r=[],o=(new Date).getTime();return{logEventCut:function(n,t,e){r.push({outcome:"cut",target:t,purpose:e})},logEventStopped:function(n,t,e){r.push({outcome:"stopped",target:t,purpose:e})},logNoParent:function(n,t,e){r.push({outcome:"no-parent",target:t,purpose:e})},logEventNoHandlers:function(n,t){r.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(n,t,e){r.push({outcome:"response",purpose:e,target:t})},write:function(){var i=(new Date).getTime();y(["mousemove","mouseover","mouseout",mf()],t)||n.console.log(t,{event:t,time:i-o,target:e.dom(),sequence:Va(r,(function(n){return y(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+zt(n.target)+")":n.outcome}))})}}}(t,e),i=r(o);return o.write(),i;case ts.STOP:return!0}}function $t(n,t,e){return Ut(n,t,e)}function Wt(n,t,e){return function(){var n=new Error;void 0!==n.stack&&O(n.stack.split("\n"),(function(n){return 0<n.indexOf("alloy")&&!b(Ks,(function(t){return-1<n.indexOf(t)}))})).getOr($s)}(),xs(t,t,e,Nn((function(n){return Hf.value((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(void 0,t)}))})))}function Xt(n){return Wt(0,n,dn(e))}function qt(n){return Wt(0,n,dn(ea.none))}function Yt(n){return Wt(0,n,Wf())}function Kt(n){return Wt(0,n,Wf())}function Jt(n,t){return Jn(n,Jc(t))}function Qt(n){return Jn(n,r)}function Zt(n,t,e){var r=t.aria;r.update(n,r,e.get())}function ne(n,t,e){t.toggleClass.each((function(t){e.get()?Dt(n.element(),t):It(n.element(),t)}))}function te(n,t,e){ol(n,t,e,!e.get())}function ee(n,t,e){e.set(!0),ne(n,t,e),Zt(n,t,e)}function re(n,t,e){e.set(!1),ne(n,t,e),Zt(n,t,e)}function oe(n,t,e){ol(n,t,e,t.selected)}function ie(){return[ct(V().deviceType.isTouch()?rf.tap():nf(),(function(n,t){t.stop(),_(n)})),lt(V().deviceType.isTouch()?Ga():Wa())]}function ue(n,t){t.ignore||(Rt(n.element()),t.onFocus(n))}function ce(n){return void 0!==n.style&&Ia(n.style.getPropertyValue)}function ae(t,e,r){if(!Ea(r))throw n.console.error("Invalid call to CSS.set. Property ",e,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);ce(t)&&t.style.setProperty(e,r)}function fe(n,t){var e=n.dom();ia(t,(function(n,t){ae(e,t,n)}))}function se(t,e){var r=t.dom(),o=n.window.getComputedStyle(r).getPropertyValue(e),i=""!==o||G(t)?o:bl(r,e);return null===i?void 0:i}function le(n,t){var e=n.dom(),r=bl(e,t);return ea.from(r).filter((function(n){return 0<n.length}))}function de(n,t){!function(n,t){ce(n)&&n.style.removeProperty(t)}(n.dom(),t),St(n,"style")&&""===function(n){return n.replace(/^\s+|\s+$/g,"")}(wt(n,"style"))&&Tt(n,"style")}function me(n){return n.dom().offsetWidth}function ge(n,t){function e(e){var r=t(e);if(r<=0||null===r){var o=se(e,n);return parseFloat(o)||0}return r}function r(n,t){return T(t,(function(t,e){var r=se(n,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)}return{set:function(t,e){if(!Fa(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e);var r=t.dom();ce(r)&&(r.style[n]=e+"px")},get:e,getOuter:e,aggregate:r,max:function(n,t,e){var o=r(n,e);return o<t?t-o:0}}}function pe(n){return xl.get(n)}function he(n,t,e){return w(function(n,t){for(var e=Ia(t)?t:Qc,r=n.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=wf.fromDom(i);if(o.push(u),!0===e(u))break;r=i}return o}(n,e),t)}function ve(n,t){return w(function(n){return nn(n).map(Ff).map((function(t){return w(t,(function(t){return!Q(n,t)}))})).getOr([])}(n),t)}function ye(n,t){return K(t,n)}function be(n){return J(n)}function xe(n,t,e){return et(n,(function(n){return q(n,t)}),e)}function we(n,t){return J(t,n)}function Se(n,t,e){return tt(q,xe,n,t,e)}function Te(n,t,e){var r=M(n.slice(0,t)),o=M(n.slice(t+1));return O(r.concat(o),e)}function Oe(n,t,e){return O(M(n.slice(0,t)),e)}function ke(n,t,e){var r=n.slice(0,t);return O(n.slice(t+1).concat(r),e)}function Ee(n,t,e){return O(n.slice(t+1),e)}function Ce(n){return function(t){var e=t.raw();return y(n,e.which)}}function De(n){return function(t){return D(n,(function(n){return n(t)}))}}function Me(n){return!0===n.raw().shiftKey}function Ie(n){return!0===n.raw().ctrlKey}function Fe(n,t){return{matches:n,classification:t}}function Ae(n,t,e,r){var o=n+t;return r<o?e:o<e?r:o}function Re(n,t,e){return n<=t?t:e<=n?e:n}function Be(n,t,e,r){x(ye(n.element(),"."+t.highlightClass),(function(e){b(r,(function(n){return n.element()===e}))||(It(e,t.highlightClass),n.getSystem().getByDom(e).each((function(e){t.onDehighlight(n,e),N(e,yf())})))}))}function Ve(n,t,e,r){Be(n,t,0,[r]),Sl(n,t,e,r)||(Dt(r.element(),t.highlightClass),t.onHighlight(n,r),N(r,vf()))}function Ne(n,t,e,r){var o=ye(n.element(),"."+t.itemClass);return k(o,(function(n){return Ft(n,t.highlightClass)})).bind((function(t){var e=Ae(t,r,0,o.length-1);return n.getSystem().getByDom(o[e]).toOption()}))}function je(n,t,e){t.exists((function(n){return e.exists((function(t){return Q(t,n)}))}))||j(n,hf(),{prevFocus:t,newFocus:e})}function _e(){function n(n){return Nt(n.element())}return{get:n,set:function(t,e){var r=n(t);t.getSystem().triggerFocus(e,t.element()),je(t,r,n(t))}}}function Pe(n,t,e,r,o){function i(n,t,e,r,o){return function(n,t){return O(n,(function(n){return n.matches(t)})).map((function(n){return n.classification}))}(e(n,t,r,o),t.event()).bind((function(e){return e(n,t,r,o)}))}var u={schema:function(){return n.concat([Yn("focusManager",_e()),Kn("focusInside","onFocus",Nn((function(n){return y(["onFocus","onEnterOrSpace","onApi"],n)?Hf.value(n):Hf.error("Invalid value for focusInside")}))),Jt("handler",u),Jt("state",t),Jt("sendFocusIn",o)])},processKey:i,toEvents:function(n,t){var u=n.focusInside!==Xs.OnFocusMode?ea.none():o(n).map((function(e){return ct(of(),(function(r,o){e(r,n,t),o.stop()}))}));return it(u.toArray().concat([ct(Ka(),(function(r,u){i(r,u,e,n,t).fold((function(){!function(e,r){var i=Ce([32].concat([13]))(r.event());n.focusInside===Xs.OnEnterOrSpaceMode&&i&&Qn(e,r)&&o(n).each((function(o){o(e,n,t),r.stop()}))}(r,u)}),(function(){u.stop()}))})),ct(Ja(),(function(e,o){i(e,o,r,n,t).each((function(){o.stop()}))}))]))}};return u}function He(n){function t(n,t){return 0<pe(n.visibilitySelector.bind((function(n){return Se(t,n)})).getOr(t))}function e(n,e){(function(n,e){var r=w(ye(n.element(),e.selector),(function(n){return t(e,n)}));return ea.from(r[e.firstTabstop])})(n,e).each((function(t){e.focusManager.set(n,t)}))}function r(n,e,r,o,i){return i(e,r,(function(n){return function(n,e){return t(n,e)&&n.useTabstopAt(e)}(o,n)})).fold((function(){return o.cyclic?ea.some(!0):ea.none()}),(function(t){return o.focusManager.set(n,t),ea.some(!0)}))}function i(n,t,e,i){var u=ye(n.element(),e.selector);return function(n,t){return t.focusManager.get(n).bind((function(n){return Se(n,t.selector)}))}(n,e).bind((function(t){return k(u,o(Q,t)).bind((function(t){return r(n,u,t,e,i)}))}))}var u=[$n("onEscape"),$n("onEnter"),Yn("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Yn("firstTabstop",0),Yn("useTabstopAt",Jc(!0)),$n("visibilitySelector")].concat([n]),c=Jc([Fe(De([Me,Ce([9])]),(function(n,t,e){return i(n,0,e,e.cyclic?Te:Oe)})),Fe(Ce([9]),(function(n,t,e){return i(n,0,e,e.cyclic?ke:Ee)})),Fe(Ce([27]),(function(n,t,e){return e.onEscape.bind((function(e){return e(n,t)}))})),Fe(De([wl,Ce([13])]),(function(n,t,e){return e.onEnter.bind((function(e){return e(n,t)}))}))]),a=Jc([]);return Pe(u,As.init,c,a,(function(){return ea.some(e)}))}function ze(n){return"input"===z(n)&&"radio"!==wt(n,"type")||"textarea"===z(n)}function Le(n,t,e){return ze(e)&&Ce([32])(t.event())?ea.none():function(n,t,e){return P(n,e,ff()),ea.some(!0)}(n,0,e)}function Ge(){return ea.some(!0)}function Ue(n,t,e){return e.execute(n,t,n.element())}function $e(){var n=aa(ea.none());return Rs({readState:function(){return n.get().map((function(n){return{numRows:n.numRows(),numColumns:n.numColumns()}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,e){n.set(ea.some({numRows:Jc(t),numColumns:Jc(e)}))},getNumRows:function(){return n.get().map((function(n){return n.numRows()}))},getNumColumns:function(){return n.get().map((function(n){return n.numColumns()}))}})}function We(n,t){return function(e){return"rtl"===nd(e)?t:n}}function Xe(n){return function(t,e,r,o){var i=n(t.element());return td(i,t,e,r,o)}}function qe(n,t){return Xe(We(n,t))}function Ye(n,t){return Xe(We(t,n))}function Ke(n){return function(t,e,r,o){return td(n,t,e,r,o)}}function Je(n){return!function(n){return n.offsetWidth<=0&&n.offsetHeight<=0}(n.dom())}function Qe(n,t,e){var r=o(Q,t);return function(n,t){return k(n,t).map((function(t){return id({index:t,candidates:n})}))}(w(ye(n,e),Je),r)}function Ze(n,t){return k(n,(function(n){return Q(t,n)}))}function nr(n,t,e,r){return r(Math.floor(t/e),t%e).bind((function(t){var r=t.row()*e+t.column();return 0<=r&&r<n.length?ea.some(n[r]):ea.none()}))}function tr(n,t,e,r,o){return nr(n,t,r,(function(t,i){var u=t===e-1?n.length-t*r:r,c=Ae(i,o,0,u-1);return ea.some({row:Jc(t),column:Jc(c)})}))}function er(n,t,e,r,o){return nr(n,t,r,(function(t,i){var u=Ae(t,o,0,e-1),c=Re(i,0,(u===e-1?n.length-u*r:r)-1);return ea.some({row:Jc(u),column:Jc(c)})}))}function rr(n,t){we(n.element(),t.selector).each((function(e){t.focusManager.set(n,e)}))}function or(n){return function(t,e,r,o){return Qe(t,e,r.selector).bind((function(t){return n(t.candidates(),t.index(),o.getNumRows().getOr(r.initSize.numRows),o.getNumColumns().getOr(r.initSize.numColumns))}))}}function ir(n,t,e){return e.captureTab?ea.some(!0):ea.none()}function ur(n,t,e,r){var o=function(n,t,e){var i=Ae(t,r,0,e.length-1);return i===n?ea.none():function(n){return"button"===z(n)&&"disabled"===wt(n,"disabled")}(e[i])?o(n,i,e):ea.from(e[i])};return Qe(n,e,t).bind((function(n){var t=n.index(),e=n.candidates();return o(t,t,e)}))}function cr(n,t,e){return function(n,t){return t.focusManager.get(n).bind((function(n){return Se(n,t.selector)}))}(n,e).bind((function(r){return e.execute(n,t,r)}))}function ar(n,t){t.getInitial(n).orThunk((function(){return we(n.element(),t.selector)})).each((function(e){t.focusManager.set(n,e)}))}function fr(n,t,e){return ur(n,e.selector,t,-1)}function sr(n,t,e){return ur(n,e.selector,t,1)}function lr(n){return function(t,e,r){return n(t,e,r).bind((function(){return r.executeOnMove?cr(t,e,r):ea.some(!0)}))}}function dr(n,t,e){return e.onEscape(n,t)}function mr(n,t,e){return ea.from(n[t]).bind((function(n){return ea.from(n[e]).map((function(n){return vd({rowIndex:t,columnIndex:e,cell:n})}))}))}function gr(n,t,e,r){return mr(n,t,Ae(e,r,0,n[t].length-1))}function pr(n,t,e,r){var o=Ae(e,r,0,n.length-1);return mr(n,o,Re(t,0,n[o].length-1))}function hr(n,t,e,r){return mr(n,t,Re(e+r,0,n[t].length-1))}function vr(n,t,e,r){var o=Re(e+r,0,n.length-1);return mr(n,o,Re(t,0,n[o].length-1))}function yr(n,t){t.previousSelector(n).orThunk((function(){var e=t.selectors;return we(n.element(),e.cell)})).each((function(e){t.focusManager.set(n,e)}))}function br(n,t){return function(e,r,o){var i=o.cycles?n:t;return Se(r,o.selectors.row).bind((function(n){return Ze(ye(n,o.selectors.cell),r).bind((function(t){var r=ye(e,o.selectors.row);return Ze(r,n).bind((function(n){var e=function(n,t){return Va(n,(function(n){return ye(n,t.selectors.cell)}))}(r,o);return i(e,n,t).map((function(n){return n.cell()}))}))}))}))}}function xr(n,t,e){return e.focusManager.get(n).bind((function(r){return e.execute(n,t,r)}))}function wr(n,t){we(n.element(),t.selector).each((function(e){t.focusManager.set(n,e)}))}function Sr(n,t,e){return ur(n,e.selector,t,-1)}function Tr(n,t,e){return ur(n,e.selector,t,1)}function Or(n,t){return function(n,t,e){return Kn(n,t,vs(e))}(n,{},Va(t,(function(t){return function(n,t){return xs(n,n,Xf(),Fn((function(){return cs("The field: "+n+" is forbidden. "+t)})))}(t.name(),"Cannot configure "+t.name()+" for "+n)})).concat([Jn("dump",r)]))}function kr(n){return n.dump}function Er(n,t){return Yc(Yc({},n.dump),Bs(t))}function Cr(n,t,e,r){return e.uiType===Gd?function(n,t,e,r){return n.exists((function(n){return n!==e.owner}))?Ud.single(!0,Jc(e)):Jf(r,e.name).fold((function(){throw new Error("Unknown placeholder component: "+e.name+"\nKnown: ["+ra(r)+"]\nNamespace: "+n.getOr("none")+"\nSpec: "+JSON.stringify(e,null,2))}),(function(n){return n.replace()}))}(n,0,e,r):Ud.single(!1,Jc(e))}function Dr(n,t,e,r){var o=d(r,(function(n,t){return function(n,t){var e=!1;return{name:Jc(n),required:function(){return t.fold((function(n){return n}),(function(n){return n}))},used:function(){return e},replace:function(){if(!0===e)throw new Error("Trying to use the same placeholder more than once: "+n);return e=!0,t}}}(t,n)})),i=function(n,t,e,r){return C(e,(function(e){return $d(n,t,e,r)}))}(n,t,e,o);return ia(o,(function(e){if(!1===e.used()&&e.required())throw new Error("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),i}function Mr(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++Yd+String(t)}function Ir(n){function t(n){return n.name}return n.fold(t,t,t,t)}function Fr(n,t){return function(e){var r=Hn("Converting part type",t,e);return n(r)}}function Ar(n,t,e,r){return Gf(t.defaults(n,e,r),e,{uid:n.partUids[t.name]},t.overrides(n,e,r))}function Rr(n,t){var e={};return x(t,(function(t){(function(n){return n.fold(ea.some,ea.none,ea.some,ea.some)})(t).each((function(t){var r=lm(n,t.pname);e[t.name]=function(e){var o=Hn("Part: "+t.name+" in "+n,vs(t.schema),e);return Yc(Yc({},r),{config:e,validated:o})}}))})),e}function Br(n,t,e){return function(n,t,e){var r={},o={};return x(e,(function(n){n.fold((function(n){r[n.pname]=Wd(!0,(function(t,e,r){return n.factory.sketch(Ar(t,n,e,r))}))}),(function(n){var e=t.parts[n.name];o[n.name]=Jc(n.factory.sketch(Ar(t,n,e[sm()]),e))}),(function(n){r[n.pname]=Wd(!1,(function(t,e,r){return n.factory.sketch(Ar(t,n,e,r))}))}),(function(n){r[n.pname]=Xd(!0,(function(t,e,r){var o=t[n.name];return Va(o,(function(e){return n.factory.sketch(Gf(n.defaults(t,e,r),e,n.overrides(t,e)))}))}))}))})),{internals:Jc(r),externals:Jc(o)}}(0,t,e)}function Vr(n,t,e){return Dr(ea.some(n),t,t.components,e)}function Nr(n,t,e){var r=t.partUids[e];return n.getSystem().getByUid(r).toOption()}function jr(n,t,e){return Nr(n,t,e).getOrDie("Could not find part: "+e)}function _r(n,t){var e=function(n){return Va(n,Ir)}(t);return bn(Va(e,(function(t){return{key:t,value:n+"-"+t}})))}function Pr(n){return xs("partUids","partUids",Yf((function(t){return _r(t.uid,n)})),Ts())}function Hr(n){return yn(dm,n)}function zr(n){return function(n,t){var e=t.toString(),r=e.indexOf(")")+1,o=e.indexOf("("),i=e.substring(o+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Is(i.slice(1))}},n}((function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return n.apply(void 0,[t.getApis()].concat([t].concat(e)))}),n)}function Lr(n){return Mr(n)}function Gr(n,t,e,r,o){var i=function(n,t){return(0<n.length?[Un("parts",n)]:[]).concat([Ln("uid"),Yn("dom",{}),Yn("components",[]),Qt("originalSpec"),Yn("debug.sketcher",{})]).concat(t)}(r,o);return Hn(n+" [SpecSchema]",An(i.concat(t)),e)}function Ur(n,t,e,r,o){var i=bm(o),u=function(n){return C(n,(function(n){
return n.fold(ea.none,ea.some,ea.none,ea.none).map((function(n){return Un(n.name,n.schema.concat([Qt(sm())]))})).toArray()}))}(e),c=Gr(n,t,i,u,[Pr(e)]),a=Br(0,c,e);return r(c,Vr(n,c,a.internals()),i,a.externals())}function $r(n){var t=Hn("Sketcher for "+n.name,xm,n),e=d(t.apis,zr),r=d(t.extraApis,(function(n,t){return dt(n,t)}));return Yc(Yc({name:Jc(t.name),partFields:Jc([]),configFields:Jc(t.configFields),sketch:function(n){return function(n,t,e,r){var o=bm(r);return e(Gr(n,t,o,[],[]),o)}(t.name,t.configFields,t.factory,n)}},e),r)}function Wr(n){var t=Hn("Sketcher for "+n.name,wm,n),e=Rr(t.name,t.partFields),r=d(t.apis,zr),o=d(t.extraApis,(function(n,t){return dt(n,t)}));return Yc(Yc({name:Jc(t.name),partFields:Jc(t.partFields),configFields:Jc(t.configFields),sketch:function(n){return Ur(t.name,t.configFields,t.partFields,t.factory,n)},parts:Jc(e)},r),o)}function Xr(n){var t=wf.fromHtml(n),e=Ff(t),r=function(n){return T(void 0!==n.dom().attributes?n.dom().attributes:[],(function(n,t){var e;return"class"===t.name?n:Yc(Yc({},n),((e={})[t.name]=t.value,e))}),{})}(t),o=function(n){return Array.prototype.slice.call(n.dom().classList,0)}(t),i=0===e.length?{}:{innerHtml:jt(t)};return Yc({tag:z(t),classes:o,attributes:r},i)}function qr(n){return{dom:Om(n)}}function Yr(n){return Bs([fl.config({toggleClass:gl.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),sl(n,(function(n,t){(t?fl.on:fl.off)(n)}))])}function Kr(n,t){var e=t.ui.registry.getAll().icons;return ea.from(e[n]).fold((function(){return Om('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+n+' ${prefix}-icon"></span>')}),(function(n){return Om('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item">'+n+"</span>")}))}function Jr(n){return am({name:n+"-edge",overrides:function(t){return t.model.manager.edgeActions[n].fold((function(){return{}}),(function(n){var e=it([at(Ga(),n,[t])]),r=it([at(Wa(),n,[t]),at(Xa(),(function(t,e){e.mouseIsDown.get()&&n(t,e)}),[t])]);return{events:Cm?e:r}}))}})}function Qr(n,t,e){t.store.manager.onLoad(n,t,e)}function Zr(n,t,e){t.store.manager.onUnload(n,t,e)}function no(){var n=aa(null);return Rs({set:n.set,get:n.get,isNotSet:function(){return null===n.get()},clear:function(){n.set(null)},readState:function(){return{mode:"memory",value:n.get()}}})}function to(){var n=aa({}),t=aa({});return Rs({readState:function(){return{mode:"dataset",dataByValue:n.get(),dataByText:t.get()}},lookup:function(e){return Jf(n.get(),e).orThunk((function(){return Jf(t.get(),e)}))},update:function(e){var r=n.get(),o=t.get(),i={},u={};x(e,(function(n){i[n.value]=n,Jf(n,"meta").each((function(t){Jf(t,"text").each((function(t){u[t]=n}))}))})),n.set(Yc(Yc({},r),i)),t.set(Yc(Yc({},o),u))},clear:function(){n.set({}),t.set({})}})}function eo(n,t,e,r){var o=t.store;e.update([r]),o.setValue(n,r),t.onSetValue(n,r)}function ro(n,t){Um.set(n,t)}function oo(n){return Um.get(n)}function io(n){var t=n.event().raw();if(Xm){var e=t;return void 0!==e.touches&&1===e.touches.length?ea.some(e.touches[0]).map((function(n){return Wm(n.clientX,n.clientY)})):ea.none()}var r=t;return void 0!==r.clientX?ea.some(r).map((function(n){return Wm(n.clientX,n.clientY)})):ea.none()}function uo(n){return n.model.minX}function co(n){return n.model.minY}function ao(n){return n.model.minX-1}function fo(n){return n.model.minY-1}function so(n){return n.model.maxX}function lo(n){return n.model.maxY}function mo(n){return n.model.maxX+1}function go(n){return n.model.maxY+1}function po(n,t,e){return t(n)-e(n)}function ho(n){return po(n,so,uo)}function vo(n){return po(n,lo,co)}function yo(n){return ho(n)/2}function bo(n){return vo(n)/2}function xo(n){return n.stepSize}function wo(n){return n.snapToGrid}function So(n){return n.snapStart}function To(n){return n.rounded}function Oo(n,t){return void 0!==n[t+"-edge"]}function ko(n){return Oo(n,"left")}function Eo(n){return Oo(n,"right")}function Co(n){return Oo(n,"top")}function Do(n){return Oo(n,"bottom")}function Mo(n){return n.model.value.get()}function Io(n){return{x:Jc(n)}}function Fo(n){return{y:Jc(n)}}function Ao(n,t){return{x:Jc(n),y:Jc(t)}}function Ro(n,t){j(n,qm(),{value:t})}function Bo(n,t,e,r){return n<t?n:e<n?e:n===t?t-1:Math.max(t,n-r)}function Vo(n,t,e,r){return e<n?n:n<t?t:n===e?e+1:Math.min(e,n+r)}function No(n,t,e){return Math.max(t,Math.min(e,n))}function jo(n){var t=n.min,e=n.max,r=n.range,o=n.value,i=n.step,u=n.snap,c=n.snapStart,a=n.rounded,f=n.hasMinEdge,s=n.hasMaxEdge,l=n.minBound,d=n.maxBound,m=n.screenRange,g=f?t-1:t,p=s?e+1:e;if(o<l)return g;if(d<o)return p;var h=function(n,t,e){return Math.min(e,Math.max(n,t))-t}(o,l,d),v=No(h/m*r+t,g,p);return u&&t<=v&&v<=e?function(n,t,e,r,o){return o.fold((function(){var o=n-t,i=Math.round(o/r)*r;return No(t+i,t-1,e+1)}),(function(t){var o=(n-t)%r,i=Math.round(o/r),u=Math.floor((n-t)/r),c=Math.floor((e-t)/r),a=t+Math.min(c,u+i)*r;return Math.max(t,a)}))}(v,t,e,i,c):a?Math.round(v):v}function _o(n){var t=n.min,e=n.max,r=n.range,o=n.value,i=n.hasMinEdge,u=n.hasMaxEdge,c=n.maxBound,a=n.maxOffset,f=n.centerMinEdge,s=n.centerMaxEdge;return o<t?i?0:f:e<o?u?c:s:(o-t)/r*a}function Po(n){return n.element().dom().getBoundingClientRect()}function Ho(n,t){return n[t]}function zo(n){return Ho(Po(n),Ym)}function Lo(n){return Ho(Po(n),"right")}function Go(n){return Ho(Po(n),"top")}function Uo(n){return Ho(Po(n),"bottom")}function $o(n){return Ho(Po(n),"width")}function Wo(n){return Ho(Po(n),"height")}function Xo(n,t,e){return(n+t)/2-e}function qo(n,t){var e=Po(n),r=Po(t);return Xo(Ho(e,Ym),Ho(e,"right"),Ho(r,Ym))}function Yo(n,t){var e=Po(n),r=Po(t);return Xo(Ho(e,"top"),Ho(e,"bottom"),Ho(r,"top"))}function Ko(n,t){j(n,qm(),{value:t})}function Jo(n){return{x:Jc(n)}}function Qo(n,t,e){return jo({min:uo(t),max:so(t),range:ho(t),value:e,step:xo(t),snap:wo(t),snapStart:So(t),rounded:To(t),hasMinEdge:ko(t),hasMaxEdge:Eo(t),minBound:zo(n),maxBound:Lo(n),screenRange:$o(n)})}function Zo(n){return function(t,e){return function(n,t,e){var r=(0<n?Vo:Bo)(Mo(e).x(),uo(e),so(e),xo(e));return Ko(t,Jo(r)),ea.some(r)}(n,t,e).map((function(){return!0}))}}function ni(n,t,e,r,o,i){var u=function(n,t,e,r,o){var i=$o(n),u=r.bind((function(t){return ea.some(qo(t,n))})).getOr(0),c=o.bind((function(t){return ea.some(qo(t,n))})).getOr(i);return _o({min:uo(t),max:so(t),range:ho(t),value:e,hasMinEdge:ko(t),hasMaxEdge:Eo(t),minBound:zo(n),minOffset:0,maxBound:Lo(n),maxOffset:i,centerMinEdge:u,centerMaxEdge:c})}(t,i,e,r,o);return zo(t)-zo(n)+u}function ti(n,t){j(n,qm(),{value:t})}function ei(n){return{y:Jc(n)}}function ri(n,t,e){return jo({min:co(t),max:lo(t),range:vo(t),value:e,step:xo(t),snap:wo(t),snapStart:So(t),rounded:To(t),hasMinEdge:Co(t),hasMaxEdge:Do(t),minBound:Go(n),maxBound:Uo(n),screenRange:Wo(n)})}function oi(n){return function(t,e){return function(n,t,e){var r=(0<n?Vo:Bo)(Mo(e).y(),co(e),lo(e),xo(e));return ti(t,ei(r)),ea.some(r)}(n,t,e).map((function(){return!0}))}}function ii(n,t,e,r,o,i){var u=function(n,t,e,r,o){var i=Wo(n),u=r.bind((function(t){return ea.some(Yo(t,n))})).getOr(0),c=o.bind((function(t){return ea.some(Yo(t,n))})).getOr(i);return _o({min:co(t),max:lo(t),range:vo(t),value:e,hasMinEdge:Co(t),hasMaxEdge:Do(t),minBound:Go(n),minOffset:0,maxBound:Uo(n),maxOffset:i,centerMinEdge:u,centerMaxEdge:c})}(t,i,e,r,o);return Go(t)-Go(n)+u}function ui(n,t){j(n,qm(),{value:t})}function ci(n,t){return{x:Jc(n),y:Jc(t)}}function ai(n,t){return function(e,r){return function(n,t,e,r){var o=0<n?Vo:Bo,i=t?Mo(r).x():o(Mo(r).x(),uo(r),so(r),xo(r));return ui(e,ci(i,t?o(Mo(r).y(),co(r),lo(r),xo(r)):Mo(r).y())),ea.some(i)}(n,t,e,r).map((function(){return!0}))}}function fi(n,t,e,r){return Em.forToolbar(t,(function(){var r=e();n.setContextToolbar([{label:t+" group",items:r}])}),{},r)}function si(n){return[function(n){function t(n){return n<0?"black":360<n?"white":"hsl("+n+", 100%, 50%)"}return vg.sketch({dom:Om('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[vg.parts()["left-edge"](qr('<div class="${prefix}-hue-slider-black"></div>')),vg.parts().spectrum({dom:Om('<div class="${prefix}-slider-gradient-container"></div>'),components:[qr('<div class="${prefix}-slider-gradient"></div>')],behaviours:Bs([fl.config({toggleClass:gl.resolve("thumb-active")})])}),vg.parts()["right-edge"](qr('<div class="${prefix}-hue-slider-white"></div>')),vg.parts().thumb({dom:Om('<div class="${prefix}-slider-thumb"></div>'),behaviours:Bs([fl.config({toggleClass:gl.resolve("thumb-active")})])})],onChange:function(e,r,o){var i=t(o.x());yl(r.element(),"background-color",i),n.onChange(e,r,i)},onDragStart:function(n,t){fl.on(t)},onDragEnd:function(n,t){fl.off(t)},onInit:function(n,e,r,o){var i=t(o.x());yl(e.element(),"background-color",i)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:function(){return n.getInitialValue()}}}},sliderBehaviours:Bs([ll(vg.refresh)])})}(n)]}function li(n){var t=n.selection.getStart(),e=wf.fromDom(t),r=wf.fromDom(n.getBody()),o=function(n,t){return(kf(t)?ea.some(t):nn(t).filter(kf)).map((function(t){return rt(t,(function(n){return le(n,"font-size").isSome()}),n).bind((function(n){return le(n,"font-size")})).getOrThunk((function(){return se(t,"font-size")}))})).getOr("")}((function(n){return Q(r,n)}),e);return O(wg,(function(n){return o===n})).getOr("medium")}function di(n){return[qr('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),function(n){return xg({onChange:n.onChange,sizes:Tg,category:"font",getInitialValue:n.getInitialValue})}(n),qr('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')]}function mi(n){var t=function(n){return void 0!==n.uid}(n)&&wn(n,"uid")?n.uid:Lr("memento");return{get:function(n){return n.getSystem().getByUid(t).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(t).toOption()},asSpec:function(){return Yc(Yc({},n),{uid:t})}}}function gi(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],wi(n,pi(vi,this),pi(yi,this))}function pi(n,t){return function(){return n.apply(t,arguments)}}function hi(n){var t=this;null!==this._state?Pl((function(){var e=t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void n.reject(t)}n.resolve(r)}else(t._state?n.resolve:n.reject)(t._value)})):this._deferreds.push(n)}function vi(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if("function"==typeof t)return void wi(pi(t,n),pi(vi,this),pi(yi,this))}this._state=!0,this._value=n,bi.call(this)}catch(n){yi.call(this,n)}}function yi(n){this._state=!1,this._value=n,bi.call(this)}function bi(){for(var n=0,t=this._deferreds;n<t.length;n++){var e=t[n];hi.call(this,e)}this._deferreds=[]}function xi(n,t,e,r){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.resolve=e,this.reject=r}function wi(n,t,e){var r=!1;try{n((function(n){r||(r=!0,t(n))}),(function(n){r||(r=!0,e(n))}))}catch(n){if(r)return;r=!0,e(n)}}function Si(t){return function(t){return new Og((function(e){var r=new n.FileReader;r.onloadend=function(){e(r.result)},r.readAsDataURL(t)}))}(t).then((function(n){return n.split(",")[1]}))}function Ti(n,t){(function(n){return Si(n)})(t).then((function(e){n.undoManager.transact((function(){var r=n.editorUpload.blobCache,o=r.create(Mr("mceu"),t,e);r.add(o);var i=n.dom.createHTML("img",{src:o.blobUri()});n.insertContent(i)}))}))}function Oi(n){var t=mi({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:it([lt(nf()),ct(Za(),(function(t,e){(function(n){var t=n.event(),e=t.raw().target.files||t.raw().dataTransfer.files;return ea.from(e[0])})(e).each((function(t){Ti(n,t)}))}))])});return Sm.sketch({dom:Em.getToolbarIconButton("image",n),components:[t.asSpec()],action:function(n){t.get(n).element().dom().click()}})}function ki(n){return n.dom().textContent}function Ei(n){return 0<n.length}function Ci(n){return null==n?"":n}function Di(n,t,e){return e.text.toOption().filter(Ei).fold((function(){return function(n){return wt(n,"href")===ki(n)}(n)?ea.some(t):ea.none()}),ea.some)}function Mi(n,t){var e=t.selection.getRng();n(),t.selection.setRng(e)}function Ii(n){return n.dom().value}function Fi(n,t){if(void 0===t)throw new Error("Value.set was undefined");n.dom().value=t}function Ai(n){return Yc(Yc({},function(n){return Bs([vl.config({onFocus:!1===n.selectOnFocus?e:function(n){var t=n.element(),e=Ii(t);t.dom().setSelectionRange(0,e.length)}})])}(n)),Er(n.inputBehaviours,[Gm.config({store:{mode:"manual",initialValue:n.data.getOr(void 0),getValue:function(n){return Ii(n.element())},setValue:function(n,t){Ii(n.element())!==t&&Fi(n.element(),t)}},onSetValue:n.onSetValue})]))}function Ri(n,t){var e=mi(Bg.sketch({inputAttributes:{placeholder:jg.translate(t)},onSetValue:function(n){N(n,Qa())},inputBehaviours:Bs([Fg.config({find:ea.some}),Ng.config({}),Hd.config({mode:"execution"})]),selectOnFocus:!1})),r=mi(Sm.sketch({dom:Om('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(n){var t=e.get(n);Gm.setValue(t,"")}}));return{name:n,spec:Ag.sketch({dom:Om('<div class="${prefix}-input-container"></div>'),components:[e.asSpec(),r.asSpec()],containerBehaviours:Bs([fl.config({toggleClass:gl.resolve("input-container-empty")}),Fg.config({find:function(n){return ea.some(e.get(n))}}),Mg("input-clearing",[ct(Qa(),(function(n){var t=e.get(n);(0<Gm.getValue(t).length?fl.off:fl.on)(n)}))])])})}}function Bi(n,t){t.disabled&&Pg(n,t)}function Vi(n,t){return!0===t.useNative&&y(_g,z(n.element()))}function Ni(n){bt(n.element(),"disabled","disabled")}function ji(n){Tt(n.element(),"disabled")}function _i(n){bt(n.element(),"aria-disabled","true")}function Pi(n){bt(n.element(),"aria-disabled","false")}function Hi(n,t){t.disableClass.each((function(t){It(n.element(),t)})),(Vi(n,t)?ji:Pi)(n),t.onEnabled(n)}function zi(n,t){return Vi(n,t)?function(n){return St(n.element(),"disabled")}(n):function(n){return"true"===wt(n.element(),"aria-disabled")}(n)}function Li(n){return"<alloy.field."+n+">"}function Gi(){function n(){t.get().each((function(n){n.destroy()}))}var t=aa(ea.none());return{clear:function(){n(),t.set(ea.none())},isSet:function(){return t.get().isSome()},set:function(e){n(),t.set(ea.some(e))},run:function(n){t.get().each(n)}}}function Ui(){var n=aa(ea.none());return{clear:function(){n.set(ea.none())},set:function(t){n.set(ea.some(t))},isSet:function(){return n.get().isSome()},on:function(t){n.get().each(t)}}}function $i(n){function t(n,t,e){return Sm.sketch({dom:Om('<span class="${prefix}-icon-'+t+' ${prefix}-icon"></span>'),action:function(t){j(t,o,{direction:n})},buttonBehaviours:Bs([Lg.config({disableClass:gl.resolve("toolbar-navigation-disabled"),disabled:!e})])})}function e(n,t){var e=ye(n.element(),"."+gl.resolve("serialised-dialog-screen"));we(n.element(),"."+gl.resolve("serialised-dialog-chain")).each((function(n){0<=i.state.currentScreen.get()+t&&i.state.currentScreen.get()+t<e.length&&(le(n,"left").each((function(r){var o=parseInt(r,10),i=oo(e[0]);yl(n,"left",o-t*i+"px")})),i.state.currentScreen.set(i.state.currentScreen.get()+t))}))}function r(n){var t=ye(n.element(),"input");ea.from(t[i.state.currentScreen.get()]).each((function(t){n.getSystem().getByDom(t).each((function(t){!function(n,t){n.getSystem().triggerFocus(t,n.element())}(n,t.element())}))}));var e=c.get(n);Dl.highlightAt(e,i.state.currentScreen.get())}var o="navigateEvent",i=Hn("SerialisedDialog",vs([Ln("fields"),Yn("maxFieldIndex",n.fields.length-1),Ln("onExecute"),Ln("getInitialValue"),Jn("state",(function(){return{dialogSwipeState:Ui(),currentScreen:aa(0)}}))]),n),u=mi($g((function(n){return{dom:Om('<div class="${prefix}-serialised-dialog"></div>'),components:[Ag.sketch({dom:Om('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:Va(i.fields,(function(e,r){return r<=i.maxFieldIndex?Ag.sketch({dom:Om('<div class="${prefix}-serialised-dialog-screen"></div>'),components:[t(-1,"previous",0<r),n.field(e.name,e.spec),t(1,"next",r<i.maxFieldIndex)]}):n.field(e.name,e.spec)}))})],formBehaviours:Bs([ll((function(n,t){!function(n,t){we(n.element(),"."+gl.resolve("serialised-dialog-chain")).each((function(n){yl(n,"left",-i.state.currentScreen.get()*t.width+"px")}))}(n,t)})),Hd.config({mode:"special",focusIn:function(n){r(n)},onTab:function(n){return e(n,1),ea.some(!0)},onShiftTab:function(n){return e(n,-1),ea.some(!0)}}),Mg("form-events",[Es((function(n){i.state.currentScreen.set(0),i.state.dialogSwipeState.clear();var t=c.get(n);Dl.highlightFirst(t),i.getInitialValue(n).each((function(t){Gm.setValue(n,t)}))})),Ms(i.onExecute),ct(tf(),(function(n,t){"left"===t.event().raw().propertyName&&r(n)})),ct(o,(function(n,t){e(n,t.event().direction())}))])])}}))),c=mi({dom:Om('<div class="${prefix}-dot-container"></div>'),behaviours:Bs([Dl.config({highlightClass:gl.resolve("dot-active"),itemClass:gl.resolve("dot-item")})]),components:C(i.fields,(function(n,t){return t<=i.maxFieldIndex?[qr('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]}))});return{dom:Om('<div class="${prefix}-serializer-wrapper"></div>'),components:[u.asSpec(),c.asSpec()],behaviours:Bs([Hd.config({mode:"special",focusIn:function(n){var t=u.get(n);Hd.focusIn(t)}}),Mg("serializer-wrapper-events",[ct(Ga(),(function(n,t){var e=t.event();i.state.dialogSwipeState.set(Wg(e.raw().touches[0].clientX))})),ct(Ua(),(function(n,t){var e=t.event();i.state.dialogSwipeState.on((function(n){t.event().prevent(),i.state.dialogSwipeState.set(Xg(n,e.raw().touches[0].clientX))}))})),ct($a(),(function(n){i.state.dialogSwipeState.on((function(t){e(u.get(n),-1*qg(t))}))}))])])}}function Wi(n){function t(t){return function(){throw new Error("The component must be in a context to send: "+t+"\n"+zt(n().element())+" is not in context.")}}return{debugInfo:Jc("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:Jc(!1)}}function Xi(n,t){var e={};return ia(n,(function(n,r){ia(n,(function(n,o){var i=vn(o,[])(e);e[o]=i.concat([t(r,n)])}))})),e}function qi(n){return n.cHandler}function Yi(n,t){return{name:Jc(n),handler:Jc(t)}}function Ki(n,t,e){var r=Yc(Yc({},e),function(n,t){var e={};return x(n,(function(n){e[n.name()]=n.handlers(t)})),e}(t,n));return Xi(r,Yi)}function Ji(n){var t=function(n){return Ia(n)?{can:Jc(!0),abort:Jc(!1),run:n}:n}(n);return function(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=[n,e].concat(r);t.abort.apply(void 0,i)?e.stop():t.can.apply(void 0,i)&&t.run.apply(void 0,i)}}function Qi(n,t,e){var r=t[e];return r?function(n,t,e,r){var o=e.slice(0);try{var i=o.sort((function(e,o){var i=e[t](),u=o[t](),c=r.indexOf(i),a=r.indexOf(u);if(-1===c)throw new Error("The ordering for "+n+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===a)throw new Error("The ordering for "+n+" does not have an entry for "+u+".\nOrder specified: "+JSON.stringify(r,null,2));return c<a?-1:a<c?1:0}));return Hf.value(i)}catch(n){return Hf.error([n])}}("Event: "+e,"name",n,r).map((function(n){var t=Va(n,(function(n){return n.handler()}));return nt(t)})):function(n,t){return Hf.error(["The event ("+n+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(Va(t,(function(n){return n.name()})),null,2)])}(e,n)}function Zi(n){return _n("custom.definition",vs([xs("dom","dom",Wf(),vs([Ln("tag"),Yn("styles",{}),Yn("classes",[]),Yn("attributes",{}),$n("value"),$n("innerHtml")])),Ln("components"),Ln("uid"),Yn("events",{}),Yn("apis",{}),xs("eventOrder","eventOrder",function(n){return $f.mergeWithThunk(Jc(n))}({"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing","item-events","tooltipping"],mousedown:["focusing","alloy.base.behaviour","item-type-events"],touchstart:["focusing","alloy.base.behaviour","item-type-events"],mouseover:["item-type-events","tooltipping"]}),Ts()),$n("domModification")]),n)}function nu(n,t){x(t,(function(t){Dt(n,t)}))}function tu(n,t){x(t,(function(t){It(n,t)}))}function eu(n,t){return function(n,t){var e=Va(t,(function(n){return Xn(n.name(),[Ln("config"),Yn("state",As)])})),r=_n("component.behaviours",vs(e),n.behaviours).fold((function(t){throw new Error(Ss(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))}),(function(n){return n}));return{list:t,data:d(r,(function(n){var t=n.map((function(n){return{config:n.config,state:n.state.init(n.config)}}));return function(){return t}}))}}(n,t)}function ru(n){var t=function(n){var t=vn("behaviours",{})(n),e=w(ra(t),(function(n){return void 0!==t[n]}));return Va(e,(function(n){return t[n].me}))}(n);return eu(n,t)}function ou(n,t,e){var r=function(n){return Yc(Yc({},n.dom),{uid:n.uid,domChildren:Va(n.components,(function(n){return n.element()}))})}(n),o=function(n){return n.domModification.fold((function(){return mt({})}),mt)}(n),i={"alloy.base.modification":o};return function(n,t){return Yc(Yc({},n),{attributes:Yc(Yc({},n.attributes),t.attributes),styles:Yc(Yc({},n.styles),t.styles),classes:n.classes.concat(t.classes)})}(r,0<t.length?function(n,t,e,r){function o(n){return S(n,(function(n,t){return Yc(Yc({},t.modification),n)}),{})}var i=Yc({},t);x(e,(function(t){i[t.name()]=t.exhibit(n,r)}));var u=Xi(i,(function(n,t){return{name:n,modification:t}})),c=S(u.classes,(function(n,t){return t.modification.concat(n)}),[]);return mt({classes:c,attributes:o(u.attributes),styles:o(u.styles)})}(e,i,t,r):o)}function iu(n,t,e){var r={"alloy.base.behaviour":function(n){return n.events}(n)};return function(n,t,e,r){var o=Ki(n,e,r);return ep(o,t)}(e,n.eventOrder,t,r).getOrDie()}function uu(n){function t(){return s}var e=aa(np),r=Pn(Zi(n)),o=ru(n),i=function(n){return n.list}(o),u=function(n){return n.data}(o),c=function(n){var t=wf.fromTag(n.tag);xt(t,n.attributes),nu(t,n.classes),fe(t,n.styles),n.innerHtml.each((function(n){return _t(t,n)}));var e=n.domChildren;return un(t,e),n.value.each((function(n){Fi(t,n)})),n.uid,vm(t,n.uid),t}(ou(r,i,u)),a=iu(r,i,u),f=aa(r.components),s={getSystem:e.get,config:function(t){var e=u;return(Ia(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(n){return Ia(u[n.name()])},spec:Jc(n),readState:function(n){return u[n]().map((function(n){return n.state.readState()})).getOr("not enabled")},getApis:function(){return r.apis},connect:function(n){e.set(n)},disconnect:function(){e.set(Wi(t))},element:Jc(c),syncComponents:function(){var n=C(Ff(c),(function(n){return e.get().getByDom(n).fold((function(){return[]}),(function(n){return[n]}))}));f.set(n)},components:f.get,events:Jc(a)};return s}function cu(n){var e=Zg(n),r=e.events,o=t(e,["events"]),i=function(n){var t=vn("components",[])(n);return Va(t,ip)}(o),u=Yc(Yc({},o),{events:Yc(Yc({},Qg),r),components:i});return Hf.value(uu(u))}function au(n){var t=wf.fromText(n);return rp({element:t})}function fu(n){(Nt(n.element()).isNone()||vl.isFocused(n))&&(vl.isFocused(n)||vl.focus(n),j(n,cp,{item:n}))}function su(n){j(n,ap,{item:n})}function lu(n,t,e,r){var o=n.getSystem().build(r);Nf(n,o,e)}function du(n,t,e,r){O(xp(n),(function(n){return Q(r.element(),n.element())})).each(sn)}function mu(n,t,e,r,o){var i=xp(n);return ea.from(i[r]).map((function(t){return du(n,0,0,t),o.each((function(t){lu(n,0,(function(n,t){!function(n,t,e){tn(n,e).fold((function(){Af(n,t)}),(function(n){en(n,t)}))}(n,t,r)}),t)})),t}))}function gu(n,t){var e={};ia(n,(function(n,t){x(n,(function(n){e[n]=t}))}));var r=t,o=function(n){return ua(n,(function(n,t){return{k:n,v:t}}))}(t),i=d(o,(function(n,t){return[t].concat(Sp(e,r,o,t))}));return d(e,(function(n){return Jf(i,n).getOr([n])}))}function pu(n,t,e,r){return Jf(t.routes,r.start).bind((function(n){return Jf(n,r.destination)}))}function hu(n,t,e){(function(n,t,e){return Dp(n,t).bind((function(r){return Cp(n,t,e,r)}))})(n,t,e).each((function(e){var r=e.transition;It(n.element(),r.transitionClass),Tt(n.element(),t.destinationAttr)}))}function vu(n,t,e,r){hu(n,t,e),St(n.element(),t.stateAttr)&&wt(n.element(),t.stateAttr)!==r&&t.onFinish(n,r),bt(n.element(),t.stateAttr,r)}function yu(n){return Jf(n,"format").getOr(n.title)}function bu(n){return wn(n,"items")?function(n){var t=Gf(hn(n,["items"]),{menu:!0}),e=jp(n.items);return{item:t,menus:Gf(e.menus,yn(n.title,e.items)),expansions:Gf(e.expansions,yn(n.title,n.title))}}(n):{item:n,menus:{},expansions:{}}}function xu(n){var t=n.replace(/\|/g," ").trim();return 0<t.length?t.split(/\s+/):[]}function wu(n){var t=void 0!==n.toolbar?n.toolbar:zp;return Da(t)?Lp(t):xu(t)}function Su(n){function t(){n.stopPropagation()}function e(){n.preventDefault()}var r=wf.fromDom(n.target),o=Kc(e,t);return function(n,t,e,r,o,i,u){return{target:Jc(n),x:Jc(t),y:Jc(e),stop:r,prevent:o,kill:i,raw:Jc(u)}}(r,n.clientX,n.clientY,t,e,o,n)}function Tu(n,t,e,r,i){var u=function(n,t){return function(e){n(e)&&t(Su(e))}}(e,r);return n.dom().addEventListener(t,u,i),{unbind:o($p,n,t,u,i)}}function Ou(n,t,e){return function(n,t,e,r){return Tu(n,t,e,r,!1)}(n,t,Wp,e)}function ku(n,t,e){return function(n,t,e,r){return Tu(n,t,e,r,!0)}(n,t,Wp,e)}function Eu(n){var t=n.matchMedia("(orientation: portrait)").matches;return{isPortrait:Jc(t)}}function Cu(n){var t=n.raw();return void 0===t.touches||1!==t.touches.length?ea.none():ea.some(t.touches[0])}function Du(t){var e=aa(ea.none()),r=aa(!1),o=function(t,e){var r=null;return{cancel:function(){null!==r&&(n.clearTimeout(r),r=null)},schedule:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];r=n.setTimeout((function(){t.apply(null,o),r=null}),e)}}}((function(n){t.triggerEvent(df(),n),r.set(!0)}),400),i=bn([{key:Ga(),value:function(n){return Cu(n).each((function(t){o.cancel();var i={x:Jc(t.clientX),y:Jc(t.clientY),target:n.target};o.schedule(n),r.set(!1),e.set(ea.some(i))})),ea.none()}},{key:Ua(),value:function(n){return o.cancel(),Cu(n).each((function(n){e.get().each((function(t){!function(n,t){var e=Math.abs(n.clientX-t.x()),r=Math.abs(n.clientY-t.y());return 5<e||5<r}(n,t)||e.set(ea.none())}))})),ea.none()}},{key:$a(),value:function(n){return o.cancel(),e.get().filter((function(t){return Q(t.target(),n.target())})).map((function(){return r.get()?(n.prevent(),!1):t.triggerEvent(lf(),n)}))}}]);return{fireIfReady:function(n,t){return Jf(i,t).bind((function(t){return t(n)}))}}}function Mu(n){return th.getOption(n)}function Iu(n,t,e){var r=n.document.createRange();return function(n,t){t.fold((function(t){n.setStartBefore(t.dom())}),(function(t,e){n.setStart(t.dom(),e)}),(function(t){n.setStartAfter(t.dom())}))}(r,t),function(n,t){t.fold((function(t){n.setEndBefore(t.dom())}),(function(t,e){n.setEnd(t.dom(),e)}),(function(t){n.setEndAfter(t.dom())}))}(r,e),r}function Fu(n,t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom(),e),i.setEnd(r.dom(),o),i}function Au(n){return{left:Jc(n.left),top:Jc(n.top),right:Jc(n.right),bottom:Jc(n.bottom),width:Jc(n.width),height:Jc(n.height)}}function Ru(n,t,e){return t(wf.fromDom(e.startContainer),e.startOffset,wf.fromDom(e.endContainer),e.endOffset)}function Bu(n,t){return function(n,t){var e=t.ltr();return e.collapsed?t.rtl().filter((function(n){return!1===n.collapsed})).map((function(n){return ch.rtl(wf.fromDom(n.endContainer),n.endOffset,wf.fromDom(n.startContainer),n.startOffset)})).getOrThunk((function(){return Ru(0,ch.ltr,e)})):Ru(0,ch.ltr,e)}(0,function(n,t){return t.match({domRange:function(n){return{ltr:Jc(n),rtl:ea.none}},relative:function(t,e){return{ltr:H((function(){return Iu(n,t,e)})),rtl:H((function(){return ea.some(Iu(n,e,t))}))}},exact:function(t,e,r,o){return{ltr:H((function(){return Fu(n,t,e,r,o)})),rtl:H((function(){return ea.some(Fu(n,r,o,t,e))}))}}})}(n,t))}function Vu(n,t){var e=z(n);return"input"===e?oh.after(n):y(["br","img"],e)?0===t?oh.before(n):oh.after(n):oh.on(n,t)}function Nu(n,t,e,r){var o=function(n,t,e,r){var o=Z(n).dom().createRange();return o.setStart(n.dom(),t),o.setEnd(e.dom(),r),o}(n,t,e,r),i=Q(n,e)&&t===r;return o.collapsed&&!i}function ju(n,t,e,r,o){!function(n,t){ea.from(n.getSelection()).each((function(n){n.removeAllRanges(),n.addRange(t)}))}(n,Fu(n,t,e,r,o))}function _u(n,t,e,r,o){!function(n,t){Bu(n,t).match({ltr:function(t,e,r,o){ju(n,t,e,r,o)},rtl:function(t,e,r,o){var i=n.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom(),e,r.dom(),o);else if(i.extend)try{!function(n,t,e,r,o,i){t.collapse(e.dom(),r),t.extend(o.dom(),i)}(0,i,t,e,r,o)}catch(i){ju(n,r,o,t,e)}else ju(n,r,o,t,e)}})}(n,function(n,t,e,r){var o=Vu(n,t),i=Vu(e,r);return uh.relative(o,i)}(t,e,r,o))}function Pu(n){var t=wf.fromDom(n.anchorNode),e=wf.fromDom(n.focusNode);return Nu(t,n.anchorOffset,e,n.focusOffset)?ea.some(eh.create(t,n.anchorOffset,e,n.focusOffset)):function(n){if(0<n.rangeCount){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return ea.some(eh.create(wf.fromDom(t.startContainer),t.startOffset,wf.fromDom(e.endContainer),e.endOffset))}return ea.none()}(n)}function Hu(n){return ea.from(n.getSelection()).filter((function(n){return 0<n.rangeCount})).bind(Pu)}function zu(n,t){return function(n){var t=n.getClientRects(),e=0<t.length?t[0]:n.getBoundingClientRect();return 0<e.width||0<e.height?ea.some(e).map(Au):ea.none()}(function(n,t){return Bu(n,t).match({ltr:function(t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom(),e),i.setEnd(r.dom(),o),i},rtl:function(t,e,r,o){var i=n.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),e),i}})}(n,t))}function Lu(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:Jc(2),height:n.height}}function Gu(n){return{left:Jc(n.left),top:Jc(n.top),right:Jc(n.right),bottom:Jc(n.bottom),width:Jc(n.width),height:Jc(n.height)}}function Uu(n){if(n.collapsed){var t=wf.fromDom(n.startContainer);return nn(t).bind((function(e){var r=uh.exact(t,n.startOffset,e,function(n){return"img"===z(n)?1:Mu(n).fold((function(){return Ff(n).length}),(function(n){return n.length}))}(e));return zu(n.startContainer.ownerDocument.defaultView,r).map(Lu).map(F)})).getOr([])}return Va(n.getClientRects(),Gu)}function $u(n,t){bt(n,sh,t)}function Wu(n){return{top:Jc(n.top()),bottom:Jc(n.top()+n.height())}}function Xu(n,t){var e=function(n){return nh(n,sh)}(t),r=n.innerHeight;return r<e?ea.some(e-r):ea.none()}function qu(n){return ea.some(wf.fromDom(n.dom().contentWindow.document.body))}function Yu(n){return ea.some(wf.fromDom(n.dom().contentWindow.document))}function Ku(n){return ea.from(n.dom().contentWindow)}function Ju(n){return Ku(n).bind(Hu)}function Qu(n){return n.getFrame()}function Zu(n,t){return function(e){return e[n].getOrThunk((function(){var n=Qu(e);return function(){return t(n)}}))()}}function nc(n,t,e,r){return n[e].getOrThunk((function(){return function(n){return Ou(t,r,n)}}))}function tc(n){return{left:Jc(n.left),top:Jc(n.top),right:Jc(n.right),bottom:Jc(n.bottom),width:Jc(n.width),height:Jc(n.height)}}function ec(t,e){var r=null;return{cancel:function(){null!==r&&(n.clearTimeout(r),r=null)},throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null!==r&&n.clearTimeout(r),r=n.setTimeout((function(){t.apply(null,o),r=null}),e)}}}function rc(n){return"true"===wt(n,Ih)?function(n){return 0<n.dom().scrollLeft||function(n){n.dom().scrollLeft=1;var t=0!==n.dom().scrollLeft;return n.dom().scrollLeft=0,t}(n)}(n):function(n){return 0<n.dom().scrollTop||function(n){n.dom().scrollTop=1;var t=0!==n.dom().scrollTop;return n.dom().scrollTop=0,t}(n)}(n)}function oc(){function n(n){var t=!0===n.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:Om('<div aria-label="'+n.label+'" class="${prefix}-toolbar-group '+t+'"></div>'),
tgroupBehaviours:Bs([Mg("adhoc-scrollable-toolbar",!0===n.scrollable?[Ds((function(n){yl(n.element(),"overflow-x","auto"),Fh.markAsHorizontal(n.element()),Rp.register(n.element())}))]:[])]),components:[Ag.sketch({components:[Mh.parts().items({})]})],markers:{itemSelector:"."+gl.resolve("toolbar-group-item")},items:n.items}}function t(){Eh.setGroups(e,o.get()),fl.off(e)}var e=ip(Eh.sketch({dom:Om('<div class="${prefix}-toolbar"></div>'),components:[Eh.parts().groups({})],toolbarBehaviours:Bs([fl.config({toggleClass:gl.resolve("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),Hd.config({mode:"cyclic"})]),shell:!0})),r=ip(Ag.sketch({dom:{classes:[gl.resolve("toolstrip")]},components:[up(e)],containerBehaviours:Bs([fl.config({toggleClass:gl.resolve("android-selection-context-toolbar"),toggleOnExecute:!1})])})),o=aa([]);return{wrapper:Jc(r),toolbar:Jc(e),createGroups:function(t){return Va(t,Kc(Mh.sketch,n))},setGroups:function(n){o.set(n),t()},setContextToolbar:function(n){fl.on(e),Eh.setGroups(e,n)},restoreToolbar:function(){fl.isOn(e)&&t()},refresh:function(){},focus:function(){Hd.focusIn(e)}}}function ic(n,t){wp.append(n,up(t))}function uc(n,t){wp.remove(n,t)}function cc(n,t){return t.getAnimationRoot.fold((function(){return n.element()}),(function(t){return t(n)}))}function ac(n){return n.dimension.property}function fc(n,t){return n.dimension.getDimension(t)}function sc(n,t){tu(cc(n,t),[t.shrinkingClass,t.growingClass])}function lc(n,t){It(n.element(),t.openClass),Dt(n.element(),t.closedClass),yl(n.element(),ac(t),"0px"),me(n.element())}function dc(n,t){It(n.element(),t.closedClass),Dt(n.element(),t.openClass),de(n.element(),ac(t))}function mc(n,t,e){e.setCollapsed(),yl(n.element(),ac(t),fc(t,n.element())),me(n.element()),sc(n,t),lc(n,t),t.onStartShrink(n),t.onShrunk(n)}function gc(n,t,e,r){var o=r.getOrThunk((function(){return fc(t,n.element())}));e.setCollapsed(),yl(n.element(),ac(t),o),me(n.element());var i=cc(n,t);It(i,t.growingClass),Dt(i,t.shrinkingClass),lc(n,t),t.onStartShrink(n)}function pc(n,t,e){var r=fc(t,n.element());("0px"===r?mc:gc)(n,t,e,ea.some(r))}function hc(n,t,e){var r=cc(n,t),o=Ft(r,t.shrinkingClass),i=fc(t,n.element());dc(n,t);var u=fc(t,n.element());(o?function(){yl(n.element(),ac(t),i),me(n.element())}:function(){lc(n,t)})(),It(r,t.shrinkingClass),Dt(r,t.growingClass),dc(n,t),yl(n.element(),ac(t),u),e.setExpanded(),t.onStartGrow(n)}function vc(n,t){return!0===Ft(cc(n,t),t.growingClass)}function yc(n,t){return!0===Ft(cc(n,t),t.shrinkingClass)}function bc(t,r){var o=ip(Ag.sketch({dom:{tag:"div",classes:[gl.resolve("dropup")]},components:[],containerBehaviours:Bs([wp.config({}),_h.config({closedClass:gl.resolve("dropup-closed"),openClass:gl.resolve("dropup-open"),shrinkingClass:gl.resolve("dropup-shrinking"),growingClass:gl.resolve("dropup-growing"),dimension:{property:"height"},onShrunk:function(n){t(),r(),wp.set(n,[])},onGrown:function(){t(),r()}}),ll((function(){i(e)}))])})),i=function(t){n.window.requestAnimationFrame((function(){t(),_h.shrink(o)}))};return{appear:function(t,e,r){!0===_h.hasShrunk(o)&&!1===_h.isTransitioning(o)&&n.window.requestAnimationFrame((function(){e(r),wp.set(o,[t()]),_h.grow(o)}))},disappear:i,component:Jc(o),element:o.element}}function xc(n){return 8===n.raw().which&&!y(["input","textarea"],z(n.target()))&&!function(n){return Se(n,'[contenteditable="true"]',void 0).isSome()}(n.target())}function wc(t,e){var r=Hn("Getting GUI events settings",Hh,e),o=V().deviceType.isTouch()?["touchstart","touchmove","touchend","touchcancel","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],i=Du(r),u=Va(o.concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(n){return Ou(t,n,(function(t){i.fireIfReady(t,n).each((function(n){n&&t.kill()})),r.triggerEvent(n,t)&&t.kill()}))})),c=aa(ea.none()),a=Ou(t,"paste",(function(t){i.fireIfReady(t,"paste").each((function(n){n&&t.kill()})),r.triggerEvent("paste",t)&&t.kill(),c.set(ea.some(n.setTimeout((function(){r.triggerEvent(cf(),t)}),0)))})),f=Ou(t,"keydown",(function(n){r.triggerEvent("keydown",n)?n.kill():!0===r.stopBackspace&&xc(n)&&n.prevent()})),s=function(n,t){return Ph?ku(n,"focus",t):Ou(n,"focusin",t)}(t,(function(n){r.triggerEvent("focusin",n)&&n.kill()})),l=aa(ea.none()),d=function(n,t){return Ph?ku(n,"blur",t):Ou(n,"focusout",t)}(t,(function(t){r.triggerEvent("focusout",t)&&t.kill(),l.set(ea.some(n.setTimeout((function(){r.triggerEvent(uf(),t)}),0)))}));return{unbind:function(){x(u,(function(n){n.unbind()})),f.unbind(),s.unbind(),d.unbind(),a.unbind(),c.get().each(n.clearTimeout),l.get().each(n.clearTimeout)}}}function Sc(n,t){var e=Jf(n,"target").map((function(n){return n()})).getOr(t);return aa(e)}function Tc(n,t,e,r,o,i){var u=n(t,r),c=function(n,t){var e=aa(!1),r=aa(!1);return{stop:function(){e.set(!0)},cut:function(){r.set(!0)},isStopped:e.get,isCut:r.get,event:Jc(n),setSource:t.set,getSource:t.get}}(e,o);return u.fold((function(){return i.logEventNoHandlers(t,r),zh.complete()}),(function(n){var e=n.descHandler();return qi(e)(c),c.isStopped()?(i.logEventStopped(t,n.element(),e.purpose()),zh.stopped()):c.isCut()?(i.logEventCut(t,n.element(),e.purpose()),zh.complete()):nn(n.element()).fold((function(){return i.logNoParent(t,n.element(),e.purpose()),zh.complete()}),(function(r){return i.logEventResponse(t,n.element(),e.purpose()),zh.resume(r)}))}))}function Oc(n,t){var r=function(n){var t=aa(!1);return{stop:function(){t.set(!0)},cut:e,isStopped:t.get,isCut:Jc(!1),event:Jc(n),setSource:u("Cannot set source of a broadcasted event"),getSource:u("Cannot get source of a broadcasted event")}}(t);return x(n,(function(n){qi(n.descHandler())(r)})),r.isStopped()}function kc(){var n={};return{registerId:function(t,e,r){ia(r,(function(r,o){var i=void 0!==n[o]?n[o]:{};i[e]=tp(r,t),n[o]=i}))},unregisterId:function(t){ia(n,(function(n){n.hasOwnProperty(t)&&delete n[t]}))},filterByType:function(t){return Jf(n,t).map((function(n){return ca(n,(function(n,t){return $h(t,n)}))})).getOr([])},find:function(t,e,r){var o=Kf(e)(n);return ks(r,(function(n){return function(n,t){return ym(t).fold((function(){return ea.none()}),(function(e){var r=Kf(e);return n.bind(r).map((function(n){return Uh(t,n)}))}))}(o,n)}),t)}}}function Ec(){function n(n){var t=n.element();return ym(t).fold((function(){return function(n,t){var e=Mr(pm+n);return vm(t,e),e}("uid-",n.element())}),(function(n){return n}))}var t=kc(),e={},r=function(n){ym(n.element()).each((function(n){delete e[n],t.unregisterId(n)}))};return{find:function(n,e,r){return t.find(n,e,r)},filter:function(n){return t.filterByType(n)},register:function(o){var i=n(o);wn(e,i)&&function(n,t){var o=e[t];if(o!==n)throw new Error('The tagId "'+t+'" is already used by: '+zt(o.element())+"\nCannot use it for: "+zt(n.element())+"\nThe conflicting element is"+(G(o.element())?" ":" not ")+"already in the DOM");r(n)}(o,i);var u=[o];t.registerId(u,i,o.events()),e[i]=o},unregister:r,getById:function(n){return Kf(n)(e)}}}function Cc(n){var t=ip(Ag.sketch({dom:{classes:[gl.resolve("outer-container")].concat(n.classes)},containerBehaviours:Bs([Ps.config({alpha:Xh(),omega:qh()})])}));return Wh(t)}function Dc(t){n.setTimeout((function(){throw t}),0)}function Mc(n,t,e){return Math.abs(n-t)<=e?ea.none():n<t?ea.some(n+e):ea.some(n-e)}function Ic(n,t){return Gt([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],(function(e){return function(n,t){return n?ea.some(t):ea.none()}(n<=e.width&&t<=e.height,e.keyboard)})).getOr({portrait:t/5,landscape:n/4})}function Fc(n){var t=qp(n).isPortrait(),e=function(n){return Ic(n.screen.width,n.screen.height)}(n),r=t?e.portrait:e.landscape;return(t?n.screen.height:n.screen.width)-n.innerHeight>r?0:r}function Ac(n,t){var e=Z(n).dom().defaultView;return pe(n)+pe(t)-Fc(e)}function Rc(n){return nh(n,dv)}function Bc(n,t){var e=function(n){return wt(n,mv)}(n);return lv.fixed(n,e,t)}function Vc(n,t){return lv.scroller(n,t)}function Nc(n){var t=Rc(n);return("true"===wt(n,gv)?Vc:Bc)(n,t)}function jc(n,t,e){var r=Z(n).dom().defaultView.innerHeight;return bt(n,pv,r+"px"),r-t-e}function _c(n){var t=le(n,"top").getOr("0");return parseInt(t,10)}function Pc(n){return parseInt(n.dom().scrollTop,10)}function Hc(n,t){var e=t+yv(n)+"px";yl(n,"top",e)}function zc(n,t){return t((function(t){var e=[],r=0;0===n.length?t([]):x(n,(function(o,i){o.get(function(o){return function(i){e[o]=i,++r>=n.length&&t(e)}}(i))}))}))}function Lc(n,t){return n.fold((function(n,e,r){return function(n,t,e,r){return yl(n,t,e+r+"px"),cv(r)}(n,e,t,r)}),(function(n,e){return function(n,t,e){var r=t+e,o=le(n,"top").getOr(e),i=r-parseInt(o,10),u=n.dom().scrollTop+i;return wv(n,u,r)}(n,t,e)}))}function Gc(n,t,e,o,i,u){var c=function(n){var t=aa(ov.pure({}));return{start:function(e){var r=ov.nu((function(t){return n(e).get(t)}));t.set(r)},idle:function(n){t.get().get((function(){n()}))}}}((function(e){return Ov(n,t,e)})),a=ec((function(){c.idle((function(){Ev(e,o.pageYOffset).get((function(){(function(){var n=ah(u);return ea.from(n[0]).bind((function(n){var e=n.top()-t.dom().scrollTop;return e>o.innerHeight+5||e<-5?ea.some({top:Jc(e),bottom:Jc(e+n.height())}):ea.none()}))})().each((function(n){t.dom().scrollTop=t.dom().scrollTop+n.top()})),c.start(0),i.refresh()}))}))}),1e3),f=Ou(wf.fromDom(o),"scroll",(function(){o.pageYOffset<0||a.throttle()}));return Ev(e,o.pageYOffset).get(r),{unbind:f.unbind}}function Uc(n,t,e){n.system().broadcastOn([Gs.formatChanged()],{command:t,state:e})}function $c(n){return{getNotificationManagerImpl:function(){return{open:Jc({progressBar:{value:e},close:e,text:e,getEl:Jc(null),moveTo:e,moveRel:e,settings:{}}),close:e,reposition:e,getArgs:Jc({})}},renderUI:function(){function t(){n.fire("ScrollIntoView")}function r(t,e,r,o){!1===o&&n.selection.collapse();var i=s(t,e,r);c.setToolbarGroups(!0===o?i.readOnly:i.main),n.setMode(!0===o?"readonly":"design"),n.fire(!0===o?Bv():Vv()),c.updateMode(o)}function o(t,e){return n.on(t,e),{unbind:function(){n.off(t)}}}var i=n.getElement(),u=Fv(n);!1===function(n){return!1===n.settings.skin}(n)?(n.contentCSS.push(u.content),Hs.DOM.styleSheetLoader.load(u.ui,Rv(n))):Rv(n)();var c=V().os.isAndroid()?function(n){var t=Cc({classes:[gl.resolve("android-container")]}),r=oc(),o=Gi(),i=Ah(o),u=Rh(),c=bc(e,n);return t.add(r.wrapper()),t.add(u),t.add(c.component()),{system:Jc(t),element:t.element,init:function(n){o.set(Th(n))},exit:function(){o.run((function(n){n.exit(),wp.remove(u,i)}))},setToolbarGroups:function(n){var t=r.createGroups(n);r.setGroups(t)},setContextToolbar:function(n){var t=r.createGroups(n);r.setContextToolbar(t)},focusToolbar:function(){r.focus()},restoreToolbar:function(){r.restoreToolbar()},updateMode:function(n){Bh(u,i,n,t.root())},socket:Jc(u),dropup:Jc(c)}}(t):function(n){var t=Cc({classes:[gl.resolve("ios-container")]}),e=oc(),r=Gi(),o=Ah(r),i=Rh(),u=bc((function(){r.run((function(n){n.refreshStructure()}))}),n);return t.add(e.wrapper()),t.add(i),t.add(u.component()),{system:Jc(t),element:t.element,init:function(n){r.set(Mv(n))},exit:function(){r.run((function(n){wp.remove(i,o),n.exit()}))},setToolbarGroups:function(n){var t=e.createGroups(n);e.setGroups(t)},setContextToolbar:function(n){var t=e.createGroups(n);e.setContextToolbar(t)},focusToolbar:function(){e.focus()},restoreToolbar:function(){e.restoreToolbar()},updateMode:function(n){Bh(i,o,n,t.root())},socket:Jc(i),dropup:Jc(u)}}(t);!function(n,t){jf(n,t,rn)}(wf.fromDom(i),c.system());var a=i.ownerDocument.defaultView,f=Yp(a,{onChange:function(){c.system().broadcastOn([Gs.orientationChanged()],{width:Kp(a)})},onReady:e}),s=function(n,t,e){var r=n.get();return{readOnly:r.backToMask.concat(t.get()),main:r.backToMask.concat(e.get())}};return n.on("init",(function(){c.init({editor:{getFrame:function(){return wf.fromDom(n.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:e}},onToReading:function(n){return o(Bv(),n)},onToEditing:function(n){return o(Vv(),n)},onScrollToCursor:function(t){return n.on("ScrollIntoView",(function(n){t(n)})),{unbind:function(){n.off("ScrollIntoView"),f.destroy()}}},onTouchToolstrip:function(){t()},onTouchContent:function(){(function(n){return Nt(n).bind((function(n){return c.system().getByDom(n).toOption()}))})(wf.fromDom(n.editorContainer.querySelector("."+gl.resolve("toolbar")))).each(_),c.restoreToolbar(),t()},onTapContent:function(t){var e=t.target();"img"===z(e)?(n.selection.select(e.dom()),t.kill()):"a"===z(e)&&c.system().getByDom(wf.fromDom(n.editorContainer)).each((function(n){Ps.isAlpha(n)&&Ls(e.dom())}))}},container:wf.fromDom(n.editorContainer),socket:wf.fromDom(n.contentAreaContainer),toolstrip:wf.fromDom(n.editorContainer.querySelector("."+gl.resolve("toolstrip"))),toolbar:wf.fromDom(n.editorContainer.querySelector("."+gl.resolve("toolbar"))),dropup:c.dropup(),alloy:c.system(),translate:e,setReadOnly:function(n){r(g,m,d,n)},readOnlyOnInit:function(){return!1}});var t=function(){c.dropup().disappear((function(){c.system().broadcastOn([Gs.dropupDismissed()],{})}))},i={label:"The first group",scrollable:!1,items:[Em.forToolbar("back",(function(){n.selection.collapse(),c.exit()}),{},n)]},u={label:"Back to read only",scrollable:!1,items:[Em.forToolbar("readonly-back",(function(){r(g,m,d,!0)}),{},n)]},a=Gp(c,n),s=Up(n.settings,a),l={label:"The extra group",scrollable:!1,items:[]},d=aa([{label:"the action group",scrollable:!0,items:s},l]),m=aa([{label:"The read only mode group",scrollable:!0,items:[]},l]),g=aa({backToMask:[i],backToReadOnly:[u]});Av(c,n)})),n.on("remove",(function(){c.exit()})),n.on("detach",(function(){!function(n){x(Ff(n.element()),(function(t){n.getByDom(t).each(Bf)})),Rf(n.element())}(c.system()),c.system().destroy()})),{iframeContainer:c.socket().element().dom(),editorContainer:c.element().dom()}}}}var Wc,Xc,qc,Yc=function(){return(Yc=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},Kc=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t.apply(null,e))}},Jc=function(n){return function(){return n}},Qc=Jc(!1),Zc=Jc(!0),na=(Wc={fold:function(n){return n()},is:Qc,isSome:Qc,isNone:Zc,getOr:l,getOrThunk:s,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:Jc(null),getOrUndefined:Jc(void 0),or:l,orThunk:s,map:a,each:e,bind:a,exists:Qc,forall:Zc,filter:a,equals:f,equals_:f,toArray:function(){return[]},toString:Jc("none()")},Object.freeze&&Object.freeze(Wc),Wc),ta=function(n){function t(){return o}function e(t){return t(n)}var r=Jc(n),o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:Zc,isNone:Qc,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:t,orThunk:t,map:function(t){return ta(t(n))},each:function(t){t(n)},bind:e,exists:e,forall:e,filter:function(t){return t(n)?o:na},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(Qc,(function(t){return e(n,t)}))}};return o},ea={some:ta,none:a,from:function(n){return null==n?na:ta(n)}},ra=Object.keys,oa=Object.hasOwnProperty,ia=function(n,t){for(var e=ra(n),r=0,o=e.length;r<o;r++){var i=e[r];t(n[i],i)}},ua=function(n,t){var e={};return ia(n,(function(n,r){var o=t(n,r);e[o.k]=o.v})),e},ca=function(n,t){var e=[];return ia(n,(function(n,r){e.push(t(n,r))})),e},aa=function(n){function t(){return e}var e=n;return{get:t,set:function(n){e=n},clone:function(){return aa(t())}}},fa=function(){return sa(0,0)},sa=function(n,t){return{major:n,minor:t}},la={nu:sa,detect:function(n,t){var e=String(t).toLowerCase();return 0===n.length?fa():g(n,e)},unknown:fa},da="Edge",ma="Chrome",ga="Opera",pa="Firefox",ha="Safari",va=function(n){var t=n.current;return{current:t,version:n.version,isEdge:p(da,t),isChrome:p(ma,t),isIE:p("IE",t),isOpera:p(ga,t),isFirefox:p(pa,t),isSafari:p(ha,t)}},ya={unknown:function(){return va({current:void 0,version:la.unknown()})},nu:va,edge:Jc(da),chrome:Jc(ma),ie:Jc("IE"),opera:Jc(ga),firefox:Jc(pa),safari:Jc(ha)},ba="Windows",xa="Android",wa="Linux",Sa="Solaris",Ta="FreeBSD",Oa=function(n){var t=n.current;return{current:t,version:n.version,isWindows:h(ba,t),isiOS:h("iOS",t),isAndroid:h(xa,t),isOSX:h("OSX",t),isLinux:h(wa,t),isSolaris:h(Sa,t),isFreeBSD:h(Ta,t)}},ka={unknown:function(){return Oa({current:void 0,version:la.unknown()})},nu:Oa,windows:Jc(ba),ios:Jc("iOS"),android:Jc(xa),linux:Jc(wa),osx:Jc("OSX"),solaris:Jc(Sa),freebsd:Jc(Ta)},Ea=v("string"),Ca=v("object"),Da=v("array"),Ma=v("boolean"),Ia=v("function"),Fa=v("number"),Aa=Array.prototype.slice,Ra=Array.prototype.indexOf,Ba=Array.prototype.push,Va=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o)}return r},Na=(Ia(Array.from)&&Array.from,function(n,t){return A(n,t).map((function(n){var e=la.detect(n.versionRegexes,t);return{current:n.name,version:e}}))}),ja=function(n,t){return A(n,t).map((function(n){var e=la.detect(n.versionRegexes,t);return{current:n.name,version:e}}))},_a=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pa=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return R(n,"edge/")&&R(n,"chrome")&&R(n,"safari")&&R(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_a],search:function(n){return R(n,"chrome")&&!R(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return R(n,"msie")||R(n,"trident")}},{name:"Opera",versionRegexes:[_a,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:B("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:B("firefox")},{name:"Safari",versionRegexes:[_a,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(R(n,"safari")||R(n,"mobile/"))&&R(n,"applewebkit")}}],Ha=[{name:"Windows",search:B("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return R(n,"iphone")||R(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:B("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:B("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:B("linux"),versionRegexes:[]},{name:"Solaris",search:B("sunos"),versionRegexes:[]},{name:"FreeBSD",search:B("freebsd"),versionRegexes:[]}],za={browsers:Jc(Pa),oses:Jc(Ha)},La=aa(function(n,t){var e=za.browsers(),r=za.oses(),o=Na(e,n).fold(ya.unknown,ya.nu),i=ja(r,n).fold(ka.unknown,ka.nu);return{browser:o,os:i,deviceType:function(n,t,e,r){var o=n.isiOS()&&!0===/ipad/i.test(e),i=n.isiOS()&&!o,u=n.isiOS()||n.isAndroid(),c=u||r("(pointer:coarse)"),a=o||!i&&u&&r("(min-device-width:768px)"),f=i||u&&!a,s=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e),l=!f&&!a&&!s;return{isiPad:Jc(o),isiPhone:Jc(i),isTablet:Jc(a),isPhone:Jc(f),isTouch:Jc(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:Jc(s),isDesktop:Jc(l)}}(i,o,n,t)}}(n.navigator.userAgent,(function(t){return n.window.matchMedia(t).matches}))),Ga=Jc("touchstart"),Ua=Jc("touchmove"),$a=Jc("touchend"),Wa=Jc("mousedown"),Xa=Jc("mousemove"),qa=Jc("mouseup"),Ya=Jc("mouseover"),Ka=Jc("keydown"),Ja=Jc("keyup"),Qa=Jc("input"),Za=Jc("change"),nf=Jc("click"),tf=Jc("transitionend"),ef=Jc("selectstart"),rf={tap:Jc("alloy.tap")},of=Jc("alloy.focus"),uf=Jc("alloy.blur.post"),cf=Jc("alloy.paste.post"),af=Jc("alloy.receive"),ff=Jc("alloy.execute"),sf=Jc("alloy.focus.item"),lf=rf.tap,df=Jc("alloy.longpress"),mf=Jc("alloy.system.init"),gf=Jc("alloy.system.attached"),pf=Jc("alloy.system.detached"),hf=Jc("alloy.focusmanager.shifted"),vf=Jc("alloy.highlight"),yf=Jc("alloy.dehighlight"),bf=function(n,t,e,r){var o=Yc({target:t},r);n.getSystem().triggerEvent(e,t,d(o,Jc))},xf=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:Jc(n)}},wf={fromHtml:function(t,e){var r=(e||n.document).createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||1<r.childNodes.length)throw n.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return xf(r.childNodes[0])},fromTag:function(t,e){var r=(e||n.document).createElement(t);return xf(r)},fromText:function(t,e){var r=(e||n.document).createTextNode(t);return xf(r)},fromDom:xf,fromPoint:function(n,t,e){var r=n.dom();return ea.from(r.elementFromPoint(t,e)).map(xf)}},Sf=(n.Node.ATTRIBUTE_NODE,n.Node.CDATA_SECTION_NODE,n.Node.COMMENT_NODE,n.Node.DOCUMENT_NODE),Tf=(n.Node.DOCUMENT_TYPE_NODE,n.Node.DOCUMENT_FRAGMENT_NODE,n.Node.ELEMENT_NODE),Of=n.Node.TEXT_NODE,kf=(n.Node.PROCESSING_INSTRUCTION_NODE,n.Node.ENTITY_REFERENCE_NODE,n.Node.ENTITY_NODE,n.Node.NOTATION_NODE,void 0!==n.window?n.window:Function("return this;")(),L(Tf)),Ef=L(Of),Cf=H((function(){return Df(wf.fromDom(n.document))})),Df=function(n){var t=n.dom().body;if(null==t)throw new Error("Body is not available yet");return wf.fromDom(t)},Mf=Tf,If=Sf,Ff=(V().browser.isIE(),function(n){return Va(n.dom().childNodes,wf.fromDom)}),Af=(U("element","offset"),function(n,t){n.dom().appendChild(t.dom())}),Rf=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Bf=function(n){N(n,pf()),x(n.components(),Bf)},Vf=function(n){x(n.components(),Vf),N(n,gf())},Nf=function(n,t,e){n.getSystem().addToWorld(t),e(n.element(),t.element()),G(n.element())&&Vf(t),n.syncComponents()},jf=function(n,t,e){e(n,t.element()),x(Ff(t.element()),(function(n){t.getByDom(n).each(Vf)}))},_f=function(n){return{is:function(t){return n===t},isValue:Zc,isError:Qc,getOr:Jc(n),getOrThunk:Jc(n),getOrDie:Jc(n),or:function(){return _f(n)},orThunk:function(){return _f(n)},fold:function(t,e){return e(n)},map:function(t){return _f(t(n))},mapError:function(){return _f(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOption:function(){return ea.some(n)}}},Pf=function(n){return{is:Qc,isValue:Qc,isError:Zc,getOr:r,getOrThunk:function(n){return n()},getOrDie:function(){return u(String(n))()},or:function(n){return n},orThunk:function(n){return n()},fold:function(t){return t(n)},map:function(){return Pf(n)},mapError:function(t){return Pf(t(n))},each:e,bind:function(){return Pf(n)},exists:Qc,forall:Zc,toOption:ea.none}},Hf={value:_f,error:Pf,fromOption:function(n,t){return n.fold((function(){return Pf(t)}),_f)}},zf=function(t){if(!Da(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],r={};return x(t,(function(o,i){var u=ra(o);if(1!==u.length)throw new Error("one and only one name per case");var c=u[0],a=o[c];if(void 0!==r[c])throw new Error("duplicate key detected:"+c);if("cata"===c)throw new Error("cannot have a case named cata (sorry)");if(!Da(a))throw new Error("case arguments must be an array");e.push(c),r[c]=function(){var r=arguments.length;if(r!==a.length)throw new Error("Wrong number of arguments to case "+c+". Expected "+a.length+" ("+a+"), got "+r);for(var o=new Array(r),u=0;u<o.length;u++)o[u]=arguments[u];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[i].apply(null,o)},match:function(n){var t=ra(n);if(e.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+t.join(","));if(!D(e,(function(n){return y(t,n)})))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+e.join(", "));return n[c].apply(null,o)},log:function(t){n.console.log(t,{constructors:e,constructor:c,params:o})}}}})),r},Lf=Object.prototype.hasOwnProperty,Gf=ln((function(n,t){return Ca(n)&&Ca(t)?Gf(n,t):t})),Uf=ln((function(n,t){return t})),$f=zf([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Wf=$f.strict,Xf=$f.asOption,qf=$f.defaultedThunk,Yf=$f.mergeWithThunk,Kf=(zf([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(n){return mn(n)}),Jf=function(n,t){return gn(n,t)};(qc=Xc=Xc||{})[qc.Error=0]="Error",qc[qc.Value=1]="Value";var Qf,Zf,ns,ts,es,rs=function(n){return n.fold(On,Tn)},os=function(n){return Sn(n,Hf.error,Hf.value)},is=Tn,us=function(n){var t=[],e=[];return x(n,(function(n){Sn(n,(function(n){return e.push(n)}),(function(n){return t.push(n)}))})),{values:t,errors:e}},cs=On,as=function(n,t){return n.stype===Xc.Value?t(n.svalue):n},fs=function(n,t){return n.stype===Xc.Error?t(n.serror):n},ss=function(n,t){return n.stype===Xc.Value?{stype:Xc.Value,svalue:t(n.svalue)}:n},ls=function(n,t){return n.stype===Xc.Error?{stype:Xc.Error,serror:t(n.serror)}:n},ds=function(n,t){var e=us(n);return 0<e.errors.length?kn(e.errors):function(n,t){return 0<n.length?is(Gf(t,Uf.apply(void 0,n))):is(t)}(e.values,t)},ms=function(n){var t=us(n);return 0<t.errors.length?kn(t.errors):is(t.values)},gs=zf([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]},{thunk:["description"]},{func:["args","outputSchema"]}]),ps=zf([{field:["name","presence","type"]},{state:["name"]}]),hs=zf([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),vs=function(n){return{extract:function(t,e,r){return function(n,t,e,r){var o=Va(e,(function(e){return In(n,t,e,r)}));return ds(o,{})}(t,r,n,e)},toString:function(){return"obj{\n"+Va(n,(function(n){return n.fold((function(n,t,e,r){return n+" -> "+r.toString()}),(function(n){return"state("+n+")"}))})).join("\n")+"}"},toDsl:function(){return gs.objOf(Va(n,(function(n){return n.fold((function(n,t,e,r){return ps.field(n,e,r)}),(function(n){return ps.state(n)}))})))}}},ys=Jc(Fn(is)),bs=hs.state,xs=hs.field,ws=Fn(is),Ss=function(n){return"Errors: \n"+function(n){var t=10<n.length?n.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):n;return Va(t,(function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}))}(n.errors)+"\n\nInput object: "+En(n.input)},Ts=Jc(ws),Os=(Qf=Ia,Zf="function",Fn((function(n){var t=typeof n;return Qf(n)?is(n):cs("Expected type: "+Zf+" but got: "+t)}))),ks=function(n,t,e){return rt(n,(function(n){return t(n).isSome()}),e).bind(t)},Es=ft(gf()),Cs=ft(pf()),Ds=ft(mf()),Ms=(ns=ff(),function(n){return ct(ns,n)}),Is=function(n){return Va(n,(function(n){return function(n,t){return function(n,t,e){return""===t||!(n.length<t.length)&&n.substr(e,e+t.length)===t}(n,t,n.length-t.length)}(n,"/*")?n.substring(0,n.length-"/*".length):n}))},Fs=function(n,t,e,r,i,u,c){function a(n){return wn(n,e)?n[e]():ea.none()}var f=d(i,(function(n,t){return pt(e,n,t)})),s=d(u,(function(n,t){return dt(n,t)})),l=Yc(Yc(Yc({},s),f),{revoke:o(ht,e),config:function(t){var r=Hn(e+"-config",n,t);return{key:e,value:{config:r,me:l,configAsRaw:H((function(){return Hn(e+"-config",n,t)})),initialConfig:t,state:c}}},schema:function(){return t},exhibit:function(n,t){return a(n).bind((function(n){return Jf(r,"exhibit").map((function(e){return e(t,n.config,n.state)}))})).getOr(mt({}))},name:function(){return e},handlers:function(n){return a(n).map((function(n){return vn("events",(function(){return{}}))(r)(n.config,n.state)})).getOr({})}});return l},As={init:function(){return Rs({readState:function(){return"No State required"}})}},Rs=function(n){return n},Bs=function(n){return bn(n)},Vs=An([Ln("fields"),Ln("name"),Yn("active",{}),Yn("apis",{}),Yn("state",As),Yn("extra",{})]),Ns=An([Ln("branchKey"),Ln("branches"),Ln("name"),Yn("active",{}),Yn("apis",{}),Yn("state",As),Yn("extra",{})]),js=Jc(void 0),_s=Object.freeze({toAlpha:function(n,t){At(n.element(),t.alpha,t.omega)},toOmega:function(n,t){At(n.element(),t.omega,t.alpha)},isAlpha:function(n,t){return Ft(n.element(),t.alpha)},isOmega:function(n,t){return Ft(n.element(),t.omega)},clear:function(n,t){It(n.element(),t.alpha),It(n.element(),t.omega)}}),Ps=vt({fields:[Ln("alpha"),Ln("omega")],name:"swapping",apis:_s}),Hs=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),zs=tinymce.util.Tools.resolve("tinymce.ThemeManager"),Ls=function(t){var e=n.document.createElement("a");e.target="_blank",e.href=t.href,e.rel="noreferrer noopener";var r=n.document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,n.window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.document.body.appendChild(e),e.dispatchEvent(r),n.document.body.removeChild(e)},Gs={formatChanged:Jc("formatChanged"),orientationChanged:Jc("orientationChanged"),dropupDismissed:Jc("dropupDismissed")},Us=Object.freeze({events:function(n){return it([ct(af(),(function(t,e){var r=n.channels,o=function(n,t){return t.universal()?n:w(n,(function(n){return y(t.channels(),n)}))}(ra(r),e);x(o,(function(n){var o=r[n],i=o.schema,u=Hn("channel["+n+"] data\nReceiver: "+zt(t.element()),i,e.data());o.onReceive(t,u)}))}))])}}),$s="unknown";(es=ts=ts||{})[es.STOP=0]="STOP",es[es.NORMAL=1]="NORMAL",es[es.LOGGING=2]="LOGGING";var Ws,Xs,qs,Ys=aa({}),Ks=["alloy/data/Fields","alloy/debugging/Debugging"],Js=Jc({logEventCut:e,logEventStopped:e,logNoParent:e,logEventNoHandlers:e,logEventResponse:e,write:e}),Qs=Jc([Ln("menu"),Ln("selectedMenu")]),Zs=Jc([Ln("item"),Ln("selectedItem")]),nl=(Jc(vs(Zs().concat(Qs()))),Jc(vs(Zs()))),tl=Un("initSize",[Ln("numColumns"),Ln("numRows")]),el=Jc(tl),rl=vt({fields:[Gn("channels",jn(Hf.value,An([Yt("onReceive"),Yn("schema",Ts())])))],name:"receiving",active:Us}),ol=function(n,t,e,r){(r?ee:re)(n,t,e)},il=Object.freeze({onLoad:oe,toggle:te,isOn:function(n,t,e){return e.get()},on:ee,off:re,set:ol}),ul=Object.freeze({exhibit:function(){return mt({})},events:function(n,t){var e=function(n,t,e){return Ms((function(r){e(r,n,t)}))}(n,t,te),r=gt(n,t,oe);return it(E([n.toggleOnExecute?[e]:[],[r]]))}}),cl=function(n,t,e){bt(n.element(),"aria-expanded",e)},al=[Yn("selected",!1),$n("toggleClass"),Yn("toggleOnExecute",!0),Kn("aria",{mode:"none"},zn("mode",{pressed:[Yn("syncWithExpanded",!1),Jt("update",(function(n,t,e){bt(n.element(),"aria-pressed",e),t.syncWithExpanded&&cl(n,t,e)}))],checked:[Jt("update",(function(n,t,e){bt(n.element(),"aria-checked",e)}))],expanded:[Jt("update",cl)],selected:[Jt("update",(function(n,t,e){bt(n.element(),"aria-selected",e)}))],none:[Jt("update",e)]}))],fl=vt({fields:al,name:"toggling",active:ul,apis:il,state:(Ws=!1,{init:function(){var n=aa(Ws);return{get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(Ws)},readState:function(){return n.get()}}}})}),sl=function(n,t){return rl.config({channels:yn(Gs.formatChanged(),{onReceive:function(e,r){r.command===n&&t(e,r.state)}})})},ll=function(n){return rl.config({channels:yn(Gs.orientationChanged(),{onReceive:n})})},dl=function(n,t){return{key:n,value:{onReceive:t}}},ml="tinymce-mobile",gl={resolve:function(n){return ml+"-"+n},prefix:Jc(ml)},pl=Object.freeze({focus:ue,blur:function(n,t){t.ignore||Bt(n.element())},isFocused:function(n){return function(n){var t=Z(n).dom();return n.dom()===t.activeElement}(n.element())}}),hl=Object.freeze({exhibit:function(n,t){return mt(t.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(n){return it([ct(of(),(function(t,e){ue(t,n),e.stop()}))].concat(n.stopMousedown?[ct(Wa(),(function(n,t){t.event().prevent()}))]:[]))}}),vl=vt({fields:[Xt("onFocus"),Yn("stopMousedown",!1),Yn("ignore",!1)],name:"focusing",active:hl,apis:pl}),yl=function(n,t,e){ae(n.dom(),t,e)},bl=function(n,t){return ce(n)?n.style.getPropertyValue(t):""},xl=ge("height",(function(n){var t=n.dom();return G(n)?t.getBoundingClientRect().height:t.offsetHeight})),wl=i(Me),Sl=function(n,t,e,r){return Ft(r.element(),t.highlightClass)},Tl=function(n,t,e,r){var o=ye(n.element(),"."+t.itemClass);return ea.from(o[r]).fold((function(){return Hf.error("No element found with index "+r)}),n.getSystem().getByDom)},Ol=function(n,t){return we(n.element(),"."+t.itemClass).bind((function(t){return n.getSystem().getByDom(t).toOption()}))},kl=function(n,t){var e=ye(n.element(),"."+t.itemClass);return(0<e.length?ea.some(e[e.length-1]):ea.none()).bind((function(t){return n.getSystem().getByDom(t).toOption()
}))},El=function(n,t){var e=ye(n.element(),"."+t.itemClass);return Lt(Va(e,(function(t){return n.getSystem().getByDom(t).toOption()})))},Cl=Object.freeze({dehighlightAll:function(n,t){return Be(n,t,0,[])},dehighlight:function(n,t,e,r){Sl(n,t,e,r)&&(It(r.element(),t.highlightClass),t.onDehighlight(n,r),N(r,yf()))},highlight:Ve,highlightFirst:function(n,t,e){Ol(n,t).each((function(r){Ve(n,t,e,r)}))},highlightLast:function(n,t,e){kl(n,t).each((function(r){Ve(n,t,e,r)}))},highlightAt:function(n,t,e,r){Tl(n,t,e,r).fold((function(n){throw new Error(n)}),(function(r){Ve(n,t,e,r)}))},highlightBy:function(n,t,e,r){O(El(n,t),r).each((function(r){Ve(n,t,e,r)}))},isHighlighted:Sl,getHighlighted:function(n,t){return we(n.element(),"."+t.highlightClass).bind((function(t){return n.getSystem().getByDom(t).toOption()}))},getFirst:Ol,getLast:kl,getPrevious:function(n,t){return Ne(n,t,0,-1)},getNext:function(n,t){return Ne(n,t,0,1)},getCandidates:El}),Dl=vt({fields:[Ln("highlightClass"),Ln("itemClass"),Xt("onHighlight"),Xt("onDehighlight")],name:"highlighting",apis:Cl});(qs=Xs=Xs||{}).OnFocusMode="onFocus",qs.OnEnterOrSpaceMode="onEnterOrSpace",qs.OnApiMode="onApi";var Ml,Il,Fl,Al,Rl,Bl,Vl,Nl,jl,_l,Pl,Hl,zl,Ll,Gl,Ul,$l,Wl,Xl,ql,Yl=He(Jn("cyclic",Jc(!1))),Kl=He(Jn("cyclic",Jc(!0))),Jl=[Yn("execute",Le),Yn("useSpace",!1),Yn("useEnter",!0),Yn("useControlEnter",!1),Yn("useDown",!1)],Ql=Pe(Jl,As.init,(function(n,t,e){var r=e.useSpace&&!ze(n.element())?[32]:[],o=e.useEnter?[13]:[],i=e.useDown?[40]:[];return[Fe(Ce(r.concat(o).concat(i)),Ue)].concat(e.useControlEnter?[Fe(De([Ie,Ce([13])]),Ue)]:[])}),(function(n,t,e){return e.useSpace&&!ze(n.element())?[Fe(Ce([32]),Ge)]:[]}),(function(){return ea.none()})),Zl=Object.freeze({flatgrid:$e,init:function(n){return n.state(n)}}),nd=function(n){return"rtl"===se(n,"direction")?"rtl":"ltr"},td=function(n,t,e,r,o){return r.focusManager.get(t).bind((function(e){return n(t.element(),e,r,o)})).map((function(n){return r.focusManager.set(t,n),!0}))},ed=Ke,rd=Ke,od=Ke,id=X(["index","candidates"],[]),ud=[Ln("selector"),Yn("execute",Le),qt("onEscape"),Yn("captureTab",!1),el()],cd=or((function(n,t,e,r){return tr(n,t,e,r,-1)})),ad=or((function(n,t,e,r){return tr(n,t,e,r,1)})),fd=or((function(n,t,e,r){return er(n,t,e,r,-1)})),sd=or((function(n,t,e,r){return er(n,t,e,r,1)})),ld=Jc([Fe(Ce([37]),qe(cd,ad)),Fe(Ce([39]),Ye(cd,ad)),Fe(Ce([38]),ed(fd)),Fe(Ce([40]),rd(sd)),Fe(De([Me,Ce([9])]),ir),Fe(De([wl,Ce([9])]),ir),Fe(Ce([27]),(function(n,t,e){return e.onEscape(n,t)})),Fe(Ce([32].concat([13])),(function(n,t,e){return function(n,t){return t.focusManager.get(n).bind((function(n){return Se(n,t.selector)}))}(n,e).bind((function(r){return e.execute(n,t,r)}))}))]),dd=Jc([Fe(Ce([32]),Ge)]),md=Pe(ud,$e,ld,dd,(function(){return ea.some(rr)})),gd=[Ln("selector"),Yn("getInitial",ea.none),Yn("execute",Le),qt("onEscape"),Yn("executeOnMove",!1),Yn("allowVertical",!0)],pd=Jc([Fe(Ce([32]),Ge)]),hd=Pe(gd,As.init,(function(n,t,e){var r=[37].concat(e.allowVertical?[38]:[]),o=[39].concat(e.allowVertical?[40]:[]);return[Fe(Ce(r),lr(qe(fr,sr))),Fe(Ce(o),lr(Ye(fr,sr))),Fe(Ce([13]),cr),Fe(Ce([32]),cr),Fe(Ce([27]),dr)]}),pd,(function(){return ea.some(ar)})),vd=X(["rowIndex","columnIndex","cell"],[]),yd=[Un("selectors",[Ln("row"),Ln("cell")]),Yn("cycles",!0),Yn("previousSelector",ea.none),Yn("execute",Le)],bd=br((function(n,t,e){return gr(n,t,e,-1)}),(function(n,t,e){return hr(n,t,e,-1)})),xd=br((function(n,t,e){return gr(n,t,e,1)}),(function(n,t,e){return hr(n,t,e,1)})),wd=br((function(n,t,e){return pr(n,e,t,-1)}),(function(n,t,e){return vr(n,e,t,-1)})),Sd=br((function(n,t,e){return pr(n,e,t,1)}),(function(n,t,e){return vr(n,e,t,1)})),Td=Jc([Fe(Ce([37]),qe(bd,xd)),Fe(Ce([39]),Ye(bd,xd)),Fe(Ce([38]),ed(wd)),Fe(Ce([40]),rd(Sd)),Fe(Ce([32].concat([13])),(function(n,t,e){return Nt(n.element()).bind((function(r){return e.execute(n,t,r)}))}))]),Od=Jc([Fe(Ce([32]),Ge)]),kd=Pe(yd,As.init,Td,Od,(function(){return ea.some(yr)})),Ed=[Ln("selector"),Yn("execute",Le),Yn("moveOnTab",!1)],Cd=Jc([Fe(Ce([38]),od(Sr)),Fe(Ce([40]),od(Tr)),Fe(De([Me,Ce([9])]),(function(n,t,e){return e.moveOnTab?od(Sr)(n,t,e):ea.none()})),Fe(De([wl,Ce([9])]),(function(n,t,e){return e.moveOnTab?od(Tr)(n,t,e):ea.none()})),Fe(Ce([13]),xr),Fe(Ce([32]),xr)]),Dd=Jc([Fe(Ce([32]),Ge)]),Md=Pe(Ed,As.init,Cd,Dd,(function(){return ea.some(wr)})),Id=[qt("onSpace"),qt("onEnter"),qt("onShiftEnter"),qt("onLeft"),qt("onRight"),qt("onTab"),qt("onShiftTab"),qt("onUp"),qt("onDown"),qt("onEscape"),Yn("stopSpaceKeyup",!1),$n("focusIn")],Fd=Pe(Id,As.init,(function(n,t,e){return[Fe(Ce([32]),e.onSpace),Fe(De([wl,Ce([13])]),e.onEnter),Fe(De([Me,Ce([13])]),e.onShiftEnter),Fe(De([Me,Ce([9])]),e.onShiftTab),Fe(De([wl,Ce([9])]),e.onTab),Fe(Ce([38]),e.onUp),Fe(Ce([40]),e.onDown),Fe(Ce([37]),e.onLeft),Fe(Ce([39]),e.onRight),Fe(Ce([32]),e.onSpace),Fe(Ce([27]),e.onEscape)]}),(function(n,t,e){return e.stopSpaceKeyup?[Fe(Ce([32]),Ge)]:[]}),(function(n){return n.focusIn})),Ad=Yl.schema(),Rd=Kl.schema(),Bd=hd.schema(),Vd=md.schema(),Nd=kd.schema(),jd=Ql.schema(),_d=Md.schema(),Pd=Fd.schema(),Hd=(_l=Hn("Creating behaviour: "+(jl={branchKey:"mode",branches:Object.freeze({acyclic:Ad,cyclic:Rd,flow:Bd,flatgrid:Vd,matrix:Nd,execution:jd,menu:_d,special:Pd}),name:"keying",active:{events:function(n,t){return n.handler.toEvents(n,t)}},apis:{focusIn:function(n,t,e){t.sendFocusIn(t).fold((function(){n.getSystem().triggerFocus(n.element(),n.element())}),(function(r){r(n,t,e)}))},setGridSize:function(t,e,r,o,i){wn(r,"setGridSize")?r.setGridSize(o,i):n.console.error("Layout does not support setGridSize")}},state:Zl}).name,Ns,jl),Ml=zn(_l.branchKey,_l.branches),Il=_l.name,Fl=_l.active,Al=_l.apis,Rl=_l.extra,Bl=_l.state,Nl=Xn(Il,[Wn("config",Vl=Ml)]),Fs(Vl,Nl,Il,Fl,Al,Rl,Bl)),zd=Or,Ld=Er,Gd="placeholder",Ud=zf([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),$d=function(n,t,e,o){return Cr(n,0,e,o).fold((function(r,i){var u=i(t,e.config,e.validated),c=C(Jf(u,"components").getOr([]),(function(e){return $d(n,t,e,o)}));return[Yc(Yc({},u),{components:c})]}),(function(n,o){var i=o(t,e.config,e.validated);return e.validated.preprocess.getOr(r)(i)}))},Wd=Ud.single,Xd=Ud.multiple,qd=Jc(Gd),Yd=0,Kd=zf([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Jd=Yn("factory",{sketch:r}),Qd=Yn("schema",[]),Zd=Ln("name"),nm=xs("pname","pname",qf((function(n){return"<alloy."+Mr(n.name)+">"})),Ts()),tm=Jn("schema",(function(){return[$n("preprocess")]})),em=Yn("defaults",Jc({})),rm=Yn("overrides",Jc({})),om=vs([Jd,Qd,Zd,nm,em,rm]),im=vs([Jd,Qd,Zd,nm,em,rm]),um=vs([Jd,tm,Zd,Ln("unit"),nm,em,rm]),cm=Fr(Kd.required,om),am=Fr(Kd.optional,im),fm=Fr(Kd.group,um),sm=Jc("entirety"),lm=function(n,t){return{uiType:qd(),owner:n,name:t}},dm=Mr("alloy-premade"),mm=Jc("alloy-id-"),gm=Jc("data-alloy-id"),pm=mm(),hm=gm(),vm=function(n,t){Object.defineProperty(n.dom(),hm,{value:t,writable:!0})},ym=function(n){var t=kf(n)?n.dom()[hm]:null;return ea.from(t)},bm=function(n){return n.hasOwnProperty("uid")?n:Yc(Yc({},n),{uid:Lr("uid")})},xm=An([Ln("name"),Ln("factory"),Ln("configFields"),Yn("apis",{}),Yn("extraApis",{})]),wm=An([Ln("name"),Ln("factory"),Ln("configFields"),Ln("partFields"),Yn("apis",{}),Yn("extraApis",{})]),Sm=$r({name:"Button",factory:function(n){function t(t){return Jf(n.dom,"attributes").bind((function(n){return Jf(n,t)}))}var e=function(n){return it(E([n.map((function(n){return Ms((function(t,e){n(t),e.stop()}))})).toArray(),ie()]))}(n.action),r=n.dom.tag;return{uid:n.uid,dom:n.dom,components:n.components,events:e,behaviours:Ld(n.buttonBehaviours,[vl.config({}),Hd.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==r)return{role:t("role").getOr("button")};var n=t("type").getOr("button"),e=t("role").map((function(n){return{role:n}})).getOr({});return Yc({type:n},e)}()},eventOrder:n.eventOrder}},configFields:[Yn("uid",void 0),Ln("dom"),Yn("components",[]),zd("buttonBehaviours",[vl,Hd]),$n("action"),$n("role"),Yn("eventOrder",{})]}),Tm=vt({fields:[],name:"unselecting",active:Object.freeze({events:function(){return it([ut(ef(),Jc(!0))])},exhibit:function(){return mt({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),Om=function(n){var t=function(n,t){return n.replace(/\$\{([^{}]*)\}/g,(function(n,e){var r=t[e];return function(n){var t=typeof n;return"string"==t||"number"==t}(r)?r.toString():n}))}(n,{prefix:gl.prefix()});return Xr(t)},km=function(n,t,e,r){return Sm.sketch({dom:Kr(n,r),action:t,buttonBehaviours:Gf(Bs([Tm.config({})]),e)})},Em={forToolbar:km,forToolbarCommand:function(n,t){return km(t,(function(){n.execCommand(t)}),{},n)},forToolbarStateAction:function(n,t,e,r){var o=Yr(e);return km(t,r,o,n)},forToolbarStateCommand:function(n,t){var e=Yr(t);return km(t,(function(){n.execCommand(t)}),e,n)},getToolbarIconButton:Kr},Cm=V().deviceType.isTouch(),Dm=am({schema:[Ln("dom")],name:"label"}),Mm=Jr("top-left"),Im=Jr("top"),Fm=Jr("top-right"),Am=Jr("right"),Rm=Jr("bottom-right"),Bm=Jr("bottom"),Vm=Jr("bottom-left"),Nm=[Dm,Jr("left"),Am,Im,Bm,Mm,Fm,Vm,Rm,cm({name:"thumb",defaults:Jc({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:it([st(Ga(),n,"spectrum"),st(Ua(),n,"spectrum"),st($a(),n,"spectrum"),st(Wa(),n,"spectrum"),st(Xa(),n,"spectrum"),st(qa(),n,"spectrum")])}}}),cm({schema:[Jn("mouseIsDown",(function(){return aa(!1)}))],name:"spectrum",overrides:function(n){function t(t,r){return e.getValueFromEvent(r).map((function(r){return e.setValueFrom(t,n,r)}))}var e=n.model.manager,r=it([ct(Ga(),t),ct(Ua(),t)]),o=it([ct(Wa(),t),ct(Xa(),(function(e,r){n.mouseIsDown.get()&&t(e,r)}))]);return{behaviours:Bs(Cm?[]:[Hd.config({mode:"special",onLeft:function(t){return e.onLeft(t,n)},onRight:function(t){return e.onRight(t,n)},onUp:function(t){return e.onUp(t,n)},onDown:function(t){return e.onDown(t,n)}}),vl.config({})]),events:Cm?r:o}}})],jm=Object.freeze({onLoad:Qr,onUnload:Zr,setValue:function(n,t,e,r){t.store.manager.setValue(n,t,e,r)},getValue:function(n,t,e){return t.store.manager.getValue(n,t,e)},getState:function(n,t,e){return e}}),_m=Object.freeze({events:function(n,t){return it(n.resetOnDom?[Es((function(e){Qr(e,n,t)})),Cs((function(e){Zr(e,n,t)}))]:[gt(n,t,Qr)])}}),Pm=Object.freeze({memory:no,dataset:to,manual:function(){return Rs({readState:function(){}})},init:function(n){return n.store.manager.state(n)}}),Hm=[$n("initialValue"),Ln("getFallbackEntry"),Ln("getDataKey"),Ln("setValue"),Jt("manager",{setValue:eo,getValue:function(n,t,e){var r=t.store,o=r.getDataKey(n);return e.lookup(o).fold((function(){return r.getFallbackEntry(o)}),(function(n){return n}))},onLoad:function(n,t,e){t.store.initialValue.each((function(r){eo(n,t,e,r)}))},onUnload:function(n,t,e){e.clear()},state:to})],zm=[Ln("getValue"),Yn("setValue",e),$n("initialValue"),Jt("manager",{setValue:function(n,t,e,r){t.store.setValue(n,r),t.onSetValue(n,r)},getValue:function(n,t){return t.store.getValue(n)},onLoad:function(n,t){t.store.initialValue.each((function(e){t.store.setValue(n,e)}))},onUnload:e,state:As.init})],Lm=[$n("initialValue"),Jt("manager",{setValue:function(n,t,e,r){e.set(r),t.onSetValue(n,r)},getValue:function(n,t,e){return e.get()},onLoad:function(n,t,e){t.store.initialValue.each((function(n){e.isNotSet()&&e.set(n)}))},onUnload:function(n,t,e){e.clear()},state:no})],Gm=vt({fields:[Kn("store",{mode:"memory"},zn("mode",{memory:Lm,manual:zm,dataset:Hm})),Xt("onSetValue"),Yn("resetOnDom",!1)],name:"representing",active:_m,apis:jm,extra:{setValueFrom:function(n,t){var e=Gm.getValue(t);Gm.setValue(n,e)}},state:Pm}),Um=ge("width",(function(n){return n.dom().offsetWidth})),$m=function(n,t){return{left:Jc(n),top:Jc(t),translate:function(e,r){return $m(n+e,t+r)}}},Wm=$m,Xm=V().deviceType.isTouch(),qm=Jc("slider.change.value"),Ym="left",Km=Zo(-1),Jm=Zo(1),Qm=ea.none,Zm=ea.none,ng={"top-left":ea.none(),top:ea.none(),"top-right":ea.none(),right:ea.some((function(n,t){Ro(n,Io(mo(t)))})),"bottom-right":ea.none(),bottom:ea.none(),"bottom-left":ea.none(),left:ea.some((function(n,t){Ro(n,Io(ao(t)))}))},tg=Object.freeze({setValueFrom:function(n,t,e){var r=Qo(n,t,e);return Ko(n,Jo(r)),r},setToMin:function(n,t){Ko(n,Jo(uo(t)))},setToMax:function(n,t){Ko(n,Jo(so(t)))},findValueOfOffset:Qo,getValueFromEvent:function(n){return io(n).map((function(n){return n.left()}))},findPositionOfValue:ni,setPositionFromValue:function(n,t,e,r){var o=Mo(e),i=ni(n,r.getSpectrum(n),o.x(),r.getLeftEdge(n),r.getRightEdge(n),e),u=oo(t.element())/2;yl(t.element(),"left",i-u+"px")},onLeft:Km,onRight:Jm,onUp:Qm,onDown:Zm,edgeActions:ng}),eg=ea.none,rg=ea.none,og=oi(-1),ig=oi(1),ug={"top-left":ea.none(),top:ea.some((function(n,t){Ro(n,Fo(fo(t)))})),"top-right":ea.none(),right:ea.none(),"bottom-right":ea.none(),bottom:ea.some((function(n,t){Ro(n,Fo(go(t)))})),"bottom-left":ea.none(),left:ea.none()},cg=Object.freeze({setValueFrom:function(n,t,e){var r=ri(n,t,e);return ti(n,ei(r)),r},setToMin:function(n,t){ti(n,ei(co(t)))},setToMax:function(n,t){ti(n,ei(lo(t)))},findValueOfOffset:ri,getValueFromEvent:function(n){return io(n).map((function(n){return n.top()}))},findPositionOfValue:ii,setPositionFromValue:function(n,t,e,r){var o=Mo(e),i=ii(n,r.getSpectrum(n),o.y(),r.getTopEdge(n),r.getBottomEdge(n),e),u=pe(t.element())/2;yl(t.element(),"top",i-u+"px")},onLeft:eg,onRight:rg,onUp:og,onDown:ig,edgeActions:ug}),ag=ai(-1,!1),fg=ai(1,!1),sg=ai(-1,!0),lg=ai(1,!0),dg={"top-left":ea.some((function(n,t){Ro(n,Ao(ao(t),fo(t)))})),top:ea.some((function(n,t){Ro(n,Ao(yo(t),fo(t)))})),"top-right":ea.some((function(n,t){Ro(n,Ao(mo(t),fo(t)))})),right:ea.some((function(n,t){Ro(n,Ao(mo(t),bo(t)))})),"bottom-right":ea.some((function(n,t){Ro(n,Ao(mo(t),go(t)))})),bottom:ea.some((function(n,t){Ro(n,Ao(yo(t),go(t)))})),"bottom-left":ea.some((function(n,t){Ro(n,Ao(ao(t),go(t)))})),left:ea.some((function(n,t){Ro(n,Ao(ao(t),bo(t)))}))},mg=Object.freeze({setValueFrom:function(n,t,e){var r=ci(Qo(n,t,e.left()),ri(n,t,e.top()));return ui(n,r),r},setToMin:function(n,t){ui(n,ci(uo(t),co(t)))},setToMax:function(n,t){ui(n,ci(so(t),lo(t)))},getValueFromEvent:function(n){return io(n)},setPositionFromValue:function(n,t,e,r){var o=Mo(e),i=ni(n,r.getSpectrum(n),o.x(),r.getLeftEdge(n),r.getRightEdge(n),e),u=ii(n,r.getSpectrum(n),o.y(),r.getTopEdge(n),r.getBottomEdge(n),e),c=oo(t.element())/2,a=pe(t.element())/2;yl(t.element(),"left",i-c+"px"),yl(t.element(),"top",u-a+"px")},onLeft:ag,onRight:fg,onUp:sg,onDown:lg,edgeActions:dg}),gg=V().deviceType.isTouch(),pg=[Yn("stepSize",1),Yn("onChange",e),Yn("onChoose",e),Yn("onInit",e),Yn("onDragStart",e),Yn("onDragEnd",e),Yn("snapToGrid",!1),Yn("rounded",!0),$n("snapStart"),Gn("model",zn("mode",{x:[Yn("minX",0),Yn("maxX",100),Jn("value",(function(n){return aa(n.mode.minX)})),Ln("getInitialValue"),Jt("manager",tg)],y:[Yn("minY",0),Yn("maxY",100),Jn("value",(function(n){return aa(n.mode.minY)})),Ln("getInitialValue"),Jt("manager",cg)],xy:[Yn("minX",0),Yn("maxX",100),Yn("minY",0),Yn("maxY",100),Jn("value",(function(n){return aa({x:Jc(n.mode.minX),y:Jc(n.mode.minY)})})),Ln("getInitialValue"),Jt("manager",mg)]})),Or("sliderBehaviours",[Hd,Gm])].concat(gg?[]:[Jn("mouseIsDown",(function(){return aa(!1)}))]),hg=V().deviceType.isTouch(),vg=Wr({name:"Slider",configFields:pg,partFields:Nm,factory:function(n,t){function e(t){return jr(t,n,"thumb")}function r(t){return jr(t,n,"spectrum")}function o(t){return Nr(t,n,"left-edge")}function i(t){return Nr(t,n,"right-edge")}function u(t){return Nr(t,n,"top-edge")}function c(t){return Nr(t,n,"bottom-edge")}function a(t,e){l.setPositionFromValue(t,e,n,{getLeftEdge:o,getRightEdge:i,getTopEdge:u,getBottomEdge:c,getSpectrum:r})}function f(t,r){s.value.set(r);var o=e(t);return a(t,o),n.onChange(t,o,r),ea.some(!0)}var s=n.model,l=s.manager,d=[ct(Ga(),(function(t){n.onDragStart(t,e(t))})),ct($a(),(function(t){n.onDragEnd(t,e(t))}))],m=[ct(Wa(),(function(t,r){r.stop(),n.onDragStart(t,e(t)),n.mouseIsDown.set(!0)})),ct(qa(),(function(t){n.onDragEnd(t,e(t))}))],g=hg?d:m;return{uid:n.uid,dom:n.dom,components:t,behaviours:Er(n.sliderBehaviours,E([hg?[]:[Hd.config({mode:"special",focusIn:function(t){return Nr(t,n,"spectrum").map(Hd.focusIn).map(Jc(!0))}})],[Gm.config({store:{mode:"manual",getValue:function(){return s.value.get()}}}),rl.config({channels:{"mouse.released":{onReceive:function(t){function e(){Nr(t,n,"thumb").each((function(e){var r=s.value.get();n.onChoose(t,e,r)}))}if(hg)e();else{var r=n.mouseIsDown.get();n.mouseIsDown.set(!1),r&&e()}}}}})]])),events:it([ct(qm(),(function(n,t){f(n,t.event().value())})),Es((function(t){var o=s.getInitialValue();s.value.set(o);var i=e(t);a(t,i);var u=r(t);n.onInit(t,i,u,s.value.get())}))].concat(g)),apis:{resetToMin:function(t){l.setToMin(t,n)},resetToMax:function(t){l.setToMax(t,n)},changeValue:f,refresh:a},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(n,t){n.resetToMin(t)},resetToMax:function(n,t){n.resetToMax(t)},refresh:function(n,t){n.refresh(t)}}}),yg=function(n,t){var e={onChange:function(n,e,r){t.undoManager.transact((function(){t.formatter.apply("forecolor",{value:r}),t.nodeChanged()}))},getInitialValue:function(){return-1}};return fi(n,"color-levels",(function(){return si(e)}),t)},bg=An([Ln("getInitialValue"),Ln("onChange"),Ln("category"),Ln("sizes")]),xg=function(n){var t=Hn("SizeSlider",bg,n);return vg.sketch({dom:{tag:"div",classes:[gl.resolve("slider-"+t.category+"-size-container"),gl.resolve("slider"),gl.resolve("slider-size-container")]},onChange:function(n,e,r){var o=r.x();!function(n){return 0<=n&&n<t.sizes.length}(o)||t.onChange(o)},onDragStart:function(n,t){fl.on(t)},onDragEnd:function(n,t){fl.off(t)},model:{mode:"x",minX:0,maxX:t.sizes.length-1,getInitialValue:function(){return{x:function(){return t.getInitialValue()}}}},stepSize:1,snapToGrid:!0,sliderBehaviours:Bs([ll(vg.refresh)]),components:[vg.parts().spectrum({dom:Om('<div class="${prefix}-slider-size-container"></div>'),components:[qr('<div class="${prefix}-slider-size-line"></div>')]}),vg.parts().thumb({dom:Om('<div class="${prefix}-slider-thumb"></div>'),behaviours:Bs([fl.config({toggleClass:gl.resolve("thumb-active")})])})]})},wg=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],Sg={candidates:Jc(wg),get:function(n){return function(n){return k(wg,(function(t){return t===n}))}(li(n)).getOr(2)},apply:function(n,t){(function(n){return ea.from(wg[n])})(t).each((function(t){!function(n,t){li(n)!==t&&n.execCommand("fontSize",!1,t)}(n,t)}))}},Tg=Sg.candidates(),Og=window.Promise?window.Promise:(Pl=gi.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){n.setTimeout(t,1)},Hl=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)},gi.prototype.catch=function(n){return this.then(null,n)},gi.prototype.then=function(n,t){var e=this;return new gi((function(r,o){hi.call(e,new xi(n,t,r,o))}))},gi.all=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Array.prototype.slice.call(1===n.length&&Hl(n[0])?n[0]:n);return new gi((function(n,t){function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(n){r(i,n)}),t)}e[i]=u,0==--o&&n(e)}catch(n){t(n)}}if(0===e.length)return n([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])}))},gi.resolve=function(n){return n&&"object"==typeof n&&n.constructor===gi?n:new gi((function(t){t(n)}))},gi.reject=function(n){return new gi((function(t,e){e(n)}))},gi.race=function(n){return new gi((function(t,e){for(var r=0,o=n;r<o.length;r++)o[r].then(t,e)}))},gi),kg=function(n){return Se(wf.fromDom(n.selection.getStart()),"a")},Eg={getInfo:function(n){return kg(n).fold((function(){return function(n){return{url:"",text:n.selection.getContent({format:"text"}),title:"",target:"",link:ea.none()}}(n)}),(function(n){return function(n){var t=ki(n),e=wt(n,"href"),r=wt(n,"title"),o=wt(n,"target");return{url:Ci(e),text:t!==e?Ci(t):"",title:Ci(r),target:Ci(o),link:ea.some(n)}}(n)}))},applyInfo:function(n,t){t.url.toOption().filter(Ei).fold((function(){!function(n,t){t.link.bind(r).each((function(){n.execCommand("unlink")}))}(n,t)}),(function(e){var o=function(n,t){var e={};return e.href=n,t.title.toOption().filter(Ei).each((function(n){e.title=n})),t.target.toOption().filter(Ei).each((function(n){e.target=n})),e}(e,t);t.link.bind(r).fold((function(){var r=t.text.toOption().filter(Ei).getOr(e);n.insertContent(n.dom.createHTML("a",o,n.dom.encode(r)))}),(function(n){var r=Di(n,e,t);xt(n,o),r.each((function(t){!function(n,t){n.dom().textContent=t}(n,t)}))}))}))},query:kg},Cg=V(),Dg=function(n,t){(Cg.os.isAndroid()?Mi:c)(t,n)},Mg=function(n,t){return{key:n,value:{config:{},me:function(n,t){var e=it(t);return vt({fields:[Ln("enabled")],name:n,active:{events:Jc(e)}})}(n,t),configAsRaw:Jc({}),initialConfig:{},state:As}}},Ig=Object.freeze({getCurrent:function(n,t){return t.find(n)}}),Fg=vt({fields:[Ln("find")],name:"composing",apis:Ig}),Ag=$r({name:"Container",factory:function(n){var e=n.dom,r=e.attributes,o=t(e,["attributes"]);return{uid:n.uid,dom:Yc({tag:"div",attributes:Yc({role:"presentation"},r)},o),components:n.components,behaviours:kr(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[Yn("components",[]),Or("containerBehaviours",[]),Yn("events",{}),Yn("domModification",{}),Yn("eventOrder",{})]}),Rg=$r({name:"DataField",factory:function(n){return{uid:n.uid,dom:n.dom,behaviours:Ld(n.dataBehaviours,[Gm.config({store:{mode:"memory",initialValue:n.getInitialValue()}}),Fg.config({find:ea.some})]),events:it([Es((function(t){Gm.setValue(t,n.getInitialValue())}))])}},configFields:[Ln("uid"),Ln("dom"),Ln("getInitialValue"),zd("dataBehaviours",[Gm,Fg])]}),Bg=$r({name:"Input",configFields:Jc([$n("data"),Yn("inputAttributes",{}),Yn("inputStyles",{}),Yn("tag","input"),Yn("inputClasses",[]),Xt("onSetValue"),Yn("styles",{}),Yn("eventOrder",{}),Or("inputBehaviours",[Gm,vl]),Yn("selectOnFocus",!0)])(),factory:function(n){return{uid:n.uid,dom:function(n){return{tag:n.tag,attributes:Yc({type:"text"},n.inputAttributes),styles:n.inputStyles,classes:n.inputClasses}}(n),components:[],behaviours:Ai(n),eventOrder:n.eventOrder}}}),Vg=Object.freeze({exhibit:function(n,t){return mt({attributes:bn([{key:t.tabAttr,value:"true"}])})}}),Ng=vt({fields:[Yn("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:Vg}),jg=tinymce.util.Tools.resolve("tinymce.util.I18n"),_g=["input","button","textarea","select"],Pg=function(n,t){t.disableClass.each((function(t){Dt(n.element(),t)})),(Vi(n,t)?Ni:_i)(n),t.onDisabled(n)},Hg=Object.freeze({enable:Hi,disable:Pg,isDisabled:zi,onLoad:Bi,set:function(n,t,e,r){(r?Pg:Hi)(n,t,e)}}),zg=Object.freeze({exhibit:function(n,t){return mt({classes:t.disabled?t.disableClass.map(F).getOr([]):[]})},events:function(n,t){return it([ut(ff(),(function(t){return zi(t,n)})),gt(n,t,Bi)])}}),Lg=vt({fields:[Yn("disabled",!1),Yn("useNative",!0),$n("disableClass"),Xt("onDisabled"),Xt("onEnabled")],name:"disabling",active:zg,apis:Hg}),Gg=[Or("formBehaviours",[Gm])],Ug=function(n,t){return{uid:n.uid,dom:n.dom,components:t,behaviours:Er(n.formBehaviours,[Gm.config({store:{mode:"manual",getValue:function(t){var e=function(n,t){var e=n.getSystem();return d(t.partUids,(function(n){return Jc(e.getByUid(n))}))}(t,n);return d(e,(function(n){return n().bind((function(n){return function(n,t){return n.fold((function(){return Hf.error(t)}),Hf.value)}(Fg.getCurrent(n),"missing current")})).map(Gm.getValue)}))},setValue:function(t,e){ia(e,(function(e,r){Nr(t,n,r).each((function(n){Fg.getCurrent(n).each((function(n){Gm.setValue(n,e)}))}))}))}}})]),apis:{getField:function(t,e){return Nr(t,n,e).bind(Fg.getCurrent)}}}},$g=(zr((function(n,t,e){return n.getField(t,e)})),function(n){var t,e=(t=[],{field:function(n,e){return t.push(n),function(n,t,e){return{uiType:qd(),owner:n,name:t,config:e,validated:{}}}("form",Li(n),e)},record:function(){return t}}),r=n(e),o=e.record(),i=Va(o,(function(n){return cm({name:n,pname:Li(n)})}));return Ur("form",Gg,i,Ug,r)}),Wg=function(n){return{xValue:n,points:[]}},Xg=function(n,t){if(t===n.xValue)return n;var e=0<t-n.xValue?1:-1,r={direction:e,xValue:t};return{xValue:t,points:(0===n.points.length?[]:n.points[n.points.length-1].direction===e?n.points.slice(0,n.points.length-1):n.points).concat([r])}},qg=function(n){if(0===n.points.length)return 0;var t=n.points[0].direction,e=n.points[n.points.length-1].direction;return-1===t&&-1===e?-1:1===t&&1===e?1:0},Yg=H((function(n,t){return[{label:"the link group",items:[$i({fields:[Ri("url","Type or paste URL"),Ri("text","Link text"),Ri("title","Link title"),Ri("target","Link target"),{name:"link",spec:Rg.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return ea.none()}})}],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return ea.some(Eg.getInfo(t))},onExecute:function(e){var r=Gm.getValue(e);Eg.applyInfo(t,r),n.restoreToolbar(),t.focus()}})]}]})),Kg=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],Jg=it([(zl=of(),Ll=function(t,e){var r=e.event().originator(),o=e.event().target();return!function(n,t,e){return Q(t,n.element())&&!Q(t,e)}(t,r,o)||(n.console.warn(of()+" did not get interpreted by the desired target. \nOriginator: "+zt(r)+"\nTarget: "+zt(o)+"\nCheck the "+of()+" event handlers"),!1)},{key:zl,value:Zn({can:Ll})})]),Qg=Object.freeze({events:Jg}),Zg=r,np=Wi(),tp=function(n,t){return function(n,t){return{cHandler:n,purpose:Jc(t)}}(o.apply(void 0,[n.handler].concat(t)),n.purpose())},ep=function(n,t){var e=ca(n,(function(n,e){return(1===n.length?Hf.value(n[0].handler()):Qi(n,t,e)).map((function(r){var o=Ji(r),i=1<n.length?w(t[e],(function(t){return b(n,(function(n){return n.name()===t}))})).join(" > "):n[0].name();return yn(e,function(n,t){return{handler:n,purpose:Jc(t)}}(o,i))}))}));return xn(e,{})},rp=function(n){var t=Hn("external.component",An([Ln("element"),$n("uid")]),n),r=aa(Wi());t.uid.each((function(n){vm(t.element,n)}));var o={getSystem:r.get,config:ea.none,hasConfigured:Jc(!1),connect:function(n){r.set(n)},disconnect:function(){r.set(Wi((function(){return o})))},getApis:function(){return{}},element:Jc(t.element),spec:Jc(n),readState:Jc("No state"),syncComponents:e,components:Jc([]),events:Jc({})};return Hr(o)},op=Lr,ip=function(n){return function(n){return Jf(n,dm)}(n).fold((function(){return cu(n.hasOwnProperty("uid")?n:Yc({uid:op("")},n)).getOrDie()}),(function(n){return n}))},up=Hr,cp="alloy.item-hover",ap="alloy.item-focus",fp=Jc(cp),sp=Jc(ap),lp=[Ln("data"),Ln("components"),Ln("dom"),Yn("hasSubmenu",!1),$n("toggling"),zd("itemBehaviours",[fl,vl,Hd,Gm]),Yn("ignoreFocus",!1),Yn("domModification",{}),Jt("builder",(function(n){return{dom:n.dom,domModification:Yc(Yc({},n.domModification),{attributes:Yc(Yc(Yc({role:n.toggling.isSome()?"menuitemcheckbox":"menuitem"},n.domModification.attributes),{"aria-haspopup":n.hasSubmenu}),n.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Ld(n.itemBehaviours,[n.toggling.fold(fl.revoke,(function(n){return fl.config(Yc({aria:{mode:"checked"}},n))})),vl.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:function(n){su(n)}}),Hd.config({mode:"execution"}),Gm.config({store:{mode:"memory",initialValue:n.data}}),Mg("item-type-events",function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var r=Array(n),o=0;for(t=0;t<e;t++)for(var i=arguments[t],u=0,c=i.length;u<c;u++,o++)r[o]=i[u];return r}(ie(),[ct(Ya(),fu),ct(sf(),vl.focus)]))]),components:n.components,eventOrder:n.eventOrder}})),Yn("eventOrder",{})],dp=[Ln("dom"),Ln("components"),Jt("builder",(function(n){return{dom:n.dom,components:n.components,events:it([function(n){return ct(n,(function(n,t){t.stop()}))}(sf())])}}))],mp=Jc([cm({name:"widget",overrides:function(n){return{behaviours:Bs([Gm.config({store:{mode:"manual",getValue:function(){return n.data},setValue:function(){}}})])}}})]),gp=[Ln("uid"),Ln("data"),Ln("components"),Ln("dom"),Yn("autofocus",!1),Yn("ignoreFocus",!1),zd("widgetBehaviours",[Gm,vl,Hd]),Yn("domModification",{}),Pr(mp()),Jt("builder",(function(n){function t(t){return Nr(t,n,"widget").map((function(n){return Hd.focusIn(n),n}))}function e(t,e){return ze(e.event().target())||n.autofocus&&e.setSource(t.element()),ea.none()}var r=Br(0,n,mp()),o=Vr("item-widget",n,r.internals());return{dom:n.dom,components:o,domModification:n.domModification,events:it([Ms((function(n,e){t(n).each((function(){e.stop()}))})),ct(Ya(),fu),ct(sf(),(function(e){n.autofocus?t(e):vl.focus(e)}))]),behaviours:Ld(n.widgetBehaviours,[Gm.config({store:{mode:"memory",initialValue:n.data}}),vl.config({ignore:n.ignoreFocus,onFocus:function(n){su(n)}}),Hd.config({mode:"special",focusIn:n.autofocus?function(n){t(n)}:js(),onLeft:e,onRight:e,onEscape:function(t,e){return vl.isFocused(t)||n.autofocus?(n.autofocus&&e.setSource(t.element()),ea.none()):(vl.focus(t),ea.some(!0))}})])}}))],pp=zn("type",{widget:gp,item:lp,separator:dp}),hp=Jc([fm({factory:{sketch:function(n){var t=Hn("menu.spec item",pp,n);return t.builder(t)}},name:"items",unit:"item",defaults:function(n,t){return t.hasOwnProperty("uid")?t:Yc(Yc({},t),{uid:Lr("item")})},overrides:function(n,t){return{type:t.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}}}})]),vp=Jc([Ln("value"),Ln("items"),Ln("dom"),Ln("components"),Yn("eventOrder",{}),Or("menuBehaviours",[Dl,Gm,Fg,Hd]),Kn("movement",{mode:"menu",moveOnTab:!0},zn("mode",{grid:[el(),Jt("config",(function(n,t){return{mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:n.focusManager}}))],matrix:[Jt("config",(function(n,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+n.markers.item},focusManager:n.focusManager}})),Ln("rowSelector")],menu:[Yn("moveOnTab",!0),Jt("config",(function(n,t){return{mode:"menu",selector:"."+n.markers.item,moveOnTab:t.moveOnTab,focusManager:n.focusManager}}))]})),Gn("markers",nl()),Yn("fakeFocus",!1),Yn("focusManager",_e()),Xt("onHighlight")]),yp=Jc("alloy.menu-focus"),bp=Wr({name:"Menu",configFields:vp(),partFields:hp(),factory:function(n,t){return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:Er(n.menuBehaviours,[Dl.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight}),Gm.config({store:{mode:"memory",initialValue:n.value}}),Fg.config({find:ea.some}),Hd.config(n.movement.config(n,n.movement))]),events:it([ct(sp(),(function(n,t){var e=t.event();n.getSystem().getByDom(e.target()).each((function(e){Dl.highlight(n,e),t.stop(),j(n,yp(),{menu:n,item:e})}))})),ct(fp(),(function(n,t){var e=t.event().item();Dl.highlight(n,e)}))]),components:t,eventOrder:n.eventOrder,domModification:{attributes:{role:"menu"}}}}}),xp=function(n){return n.components()},wp=vt({fields:[],name:"replacing",apis:Object.freeze({append:function(n,t,e,r){lu(n,0,Af,r)},prepend:function(n,t,e,r){lu(n,0,on,r)},remove:du,replaceAt:mu,replaceBy:function(n,t,e,r,o){return k(xp(n),r).bind((function(t){return mu(n,0,0,t,o)}))},set:function(n,t,r,o){!function(n,t){var r=Z(t),o=Vt(r).bind((function(n){function e(t){return Q(n,t)}return e(t)?ea.some(t):ot(t,e)}));n(t);o.each((function(n){Vt(r).filter((function(t){return Q(t,n)})).fold((function(){Rt(n)}),e)}))}((function(){var t=Va(o,n.getSystem().build);fn(n,t)}),n.element())},contents:xp})}),Sp=function(n,t,e,r){return Jf(e,r).bind((function(r){return Jf(n,r).bind((function(r){var o=Sp(n,t,e,r);return ea.some([r].concat(o))}))})).getOr([])},Tp=function(n){return"prepared"===n.type?ea.some(n.menu):ea.none()},Op={init:function(){function n(n){
return function(n,t){for(var e=ra(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i];if(t(u,i,n))return ea.some(u)}return ea.none()}(t.get(),(function(t){return t===n}))}var t=aa({}),e=aa({}),r=aa({}),o=aa(ea.none()),i=aa({}),u=function(n){return c(n).bind(Tp)},c=function(n){return Jf(e.get(),n)},a=function(n){return Jf(t.get(),n)};return{setMenuBuilt:function(n,t){var r;e.set(Yc(Yc({},e.get()),((r={})[n]={type:"prepared",menu:t},r)))},setContents:function(n,u,c,a){o.set(ea.some(n)),t.set(c),e.set(u),i.set(a);var f=gu(a,c);r.set(f)},expand:function(n){return Jf(t.get(),n).map((function(t){var e=Jf(r.get(),n).getOr([]);return[t].concat(e)}))},refresh:function(n){return Jf(r.get(),n)},collapse:function(n){return Jf(r.get(),n).bind((function(n){return 1<n.length?ea.some(n.slice(1)):ea.none()}))},lookupMenu:c,lookupItem:a,otherMenus:function(n){var t=i.get();return I(ra(t),n)},getPrimary:function(){return o.get().bind(u)},getMenus:function(){return e.get()},clear:function(){t.set({}),e.set({}),r.set({}),o.set(ea.none())},isClear:function(){return o.get().isNone()},getTriggeringPath:function(t,e){var i=w(a(t).toArray(),(function(n){return u(n).isSome()}));return Jf(r.get(),t).bind((function(t){var r=M(i.concat(t));return function(n){for(var t=[],e=0;e<n.length;e++){var r=n[e];if(!r.isSome())return ea.none();t.push(r.getOrDie())}return ea.some(t)}(C(r,(function(t,i){return function(t,e,r){return u(t).bind((function(o){return n(t).bind((function(n){return e(n).map((function(n){return{triggeredMenu:o,triggeringItem:n,triggeringPath:r}}))}))}))}(t,e,r.slice(0,i+1)).fold((function(){return o.get().is(t)?[]:[ea.none()]}),(function(n){return[ea.some(n)]}))})))}))}}},extractPreparedMenu:Tp},kp=Jc("collapse-item"),Ep=$r({name:"TieredMenu",configFields:[Kt("onExecute"),Kt("onEscape"),Yt("onOpenMenu"),Yt("onOpenSubmenu"),Yt("onRepositionMenu"),Xt("onCollapseMenu"),Yn("highlightImmediately",!0),Un("data",[Ln("primary"),Ln("menus"),Ln("expansions")]),Yn("fakeFocus",!1),Xt("onHighlight"),Xt("onHover"),Un("markers",[Ln("backgroundMenu")].concat(Qs()).concat(Zs())),Ln("dom"),Yn("navigateOnHover",!0),Yn("stayInDom",!1),Or("tmenuBehaviours",[Hd,Dl,Fg,wp]),Yn("eventOrder",{})],apis:{collapseMenu:function(n,t){n.collapseMenu(t)},highlightPrimary:function(n,t){n.highlightPrimary(t)},repositionMenus:function(n,t){n.repositionMenus(t)}},factory:function(n){function t(t,r,o){return d(o,(function(o,i){function u(){return bp.sketch(Yc(Yc({dom:o.dom},o),{value:i,items:o.items,markers:n.markers,fakeFocus:n.fakeFocus,onHighlight:n.onHighlight,focusManager:n.fakeFocus?function(){function n(n){return Dl.getHighlighted(n).map((function(n){return n.element()}))}return{get:n,set:function(t,r){var o=n(t);t.getSystem().getByDom(r).fold(e,(function(n){Dl.highlight(t,n)}));var i=n(t);je(t,o,i)}}}():_e()}))}return i===r?{type:"prepared",menu:t.getSystem().build(u())}:{type:"notbuilt",nbMenu:u}}))}function r(n){return Gm.getValue(n).value}function o(n,t){Dl.highlight(n,t),Dl.getHighlighted(t).orThunk((function(){return Dl.getFirst(t)})).each((function(t){P(n,t.element(),sf())}))}function i(n,t){return Lt(Va(t,(function(t){return n.lookupMenu(t).bind((function(n){return"prepared"===n.type?ea.some(n.menu):ea.none()}))})))}function u(t,e,r){x(i(e,e.otherMenus(r)),(function(e){tu(e.element(),[n.markers.backgroundMenu]),n.stayInDom||wp.remove(t,e)}))}function c(t,e){var o=function(t){return h.get().getOrThunk((function(){var e={},o=w(ye(t.element(),"."+n.markers.item),(function(n){return"true"===wt(n,"aria-haspopup")}));return x(o,(function(n){t.getSystem().getByDom(n).each((function(n){var t=r(n);e[t]=n}))})),h.set(ea.some(e)),e}))}(t);ia(o,(function(n,t){var r=y(e,t);bt(n.element(),"aria-expanded",r)}))}function a(t,e,r){return ea.from(r[0]).bind((function(c){return e.lookupMenu(c).bind((function(c){if("notbuilt"===c.type)return ea.none();var a=c.menu;return x(i(e,r.slice(1)),(function(t){Dt(t.element(),n.markers.backgroundMenu)})),G(a.element())||wp.append(t,up(a)),tu(a.element(),[n.markers.backgroundMenu]),o(t,a),u(t,e,r),ea.some(a)}))}))}function f(t,e,o){void 0===o&&(o=g.HighlightSubmenu);var i=r(e);return v.expand(i).bind((function(r){return c(t,r),ea.from(r[0]).bind((function(i){return v.lookupMenu(i).bind((function(u){var c=function(n,t,e){if("notbuilt"!==e.type)return e.menu;var r=n.getSystem().build(e.nbMenu());return v.setMenuBuilt(t,r),r}(t,i,u);return G(c.element())||wp.append(t,up(c)),n.onOpenSubmenu(t,e,c,M(r)),o===g.HighlightSubmenu?(Dl.highlightFirst(c),a(t,v,r)):(Dl.dehighlightAll(c),ea.some(e))}))}))}))}function s(t,e){var o=r(e);return v.collapse(o).bind((function(r){return c(t,r),a(t,v,r).map((function(r){return n.onCollapseMenu(t,e,r),r}))}))}function l(t){return function(e,r){return Se(r.getSource(),"."+n.markers.item).bind((function(n){return e.getSystem().getByDom(n).toOption().bind((function(n){return t(e,n).map((function(){return!0}))}))}))}}function m(n){return Dl.getHighlighted(n).bind(Dl.getHighlighted)}var g,p,h=aa(ea.none()),v=Op.init(),b=function(){return d(n.data.menus,(function(n){return C(n.items,(function(n){return"separator"===n.type?[]:[n.data.value]}))}))};(p=g=g||{})[p.HighlightSubmenu=0]="HighlightSubmenu",p[p.HighlightParent=1]="HighlightParent";var S=it([ct(yp(),(function(n,t){var e=t.event().item();v.lookupItem(r(e)).each((function(){var e=t.event().menu();Dl.highlight(n,e);var o=r(t.event().item());v.refresh(o).each((function(t){return u(n,v,t)}))}))})),Ms((function(t,e){var o=e.event().target();t.getSystem().getByDom(o).each((function(e){0===r(e).indexOf("collapse-item")&&s(t,e),f(t,e,g.HighlightSubmenu).fold((function(){n.onExecute(t,e)}),(function(){}))}))})),Es((function(e){(function(e){var r=t(e,n.data.primary,n.data.menus),o=b();return v.setContents(n.data.primary,r,n.data.expansions,o),v.getPrimary()})(e).each((function(t){wp.append(e,up(t)),n.onOpenMenu(e,t),n.highlightImmediately&&o(e,t)}))}))].concat(n.navigateOnHover?[ct(fp(),(function(t,e){var o=e.event().item();!function(n,t){var e=r(t);v.refresh(e).bind((function(t){return c(n,t),a(n,v,t)}))}(t,o),f(t,o,g.HighlightParent),n.onHover(t,o)}))]:[])),T={collapseMenu:function(n){m(n).each((function(t){s(n,t)}))},highlightPrimary:function(n){v.getPrimary().each((function(t){o(n,t)}))},repositionMenus:function(t){v.getPrimary().bind((function(n){return m(t).bind((function(n){var t=r(n),e=function(n){return ca(n,(function(n){return n}))}(v.getMenus()),o=Lt(Va(e,Op.extractPreparedMenu));return v.getTriggeringPath(t,(function(n){return function(n,t,e){return Gt(t,(function(n){return n.getSystem().isConnected()?O(Dl.getCandidates(n),(function(n){return r(n)===e})):ea.none()}))}(0,o,n)}))})).map((function(t){return{primary:n,triggeringPath:t}}))})).fold((function(){(function(n){return ea.from(n.components()[0]).filter((function(n){return"menu"===wt(n.element(),"role")}))})(t).each((function(e){n.onRepositionMenu(t,e,[])}))}),(function(e){var r=e.primary,o=e.triggeringPath;n.onRepositionMenu(t,r,o)}))}};return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:Er(n.tmenuBehaviours,[Hd.config({mode:"special",onRight:l((function(n,t){return ze(t.element())?ea.none():f(n,t,g.HighlightSubmenu)})),onLeft:l((function(n,t){return ze(t.element())?ea.none():s(n,t)})),onEscape:l((function(t,e){return s(t,e).orThunk((function(){return n.onEscape(t,e).map((function(){return t}))}))})),focusIn:function(n){v.getPrimary().each((function(t){P(n,t.element(),sf())}))}}),Dl.config({highlightClass:n.markers.selectedMenu,itemClass:n.markers.menu}),Fg.config({find:function(n){return Dl.getHighlighted(n)}}),wp.config({})]),eventOrder:n.eventOrder,apis:T,events:S}},extraApis:{tieredData:function(n,t,e){return{primary:n,menus:t,expansions:e}},singleData:function(n,t){return{primary:n,menus:yn(n,t),expansions:{}}},collapseItem:function(n){return{value:Mr(kp()),meta:{text:n}}}}}),Cp=function(n,t,e,r){return pu(0,t,0,r).bind((function(n){return n.transition.map((function(t){return{transition:t,route:n}}))}))},Dp=function(n,t){return St(n.element(),t.destinationAttr)?ea.some({start:wt(n.element(),t.stateAttr),destination:wt(n.element(),t.destinationAttr)}):ea.none()},Mp=Object.freeze({findRoute:pu,disableTransition:hu,getCurrentRoute:Dp,jumpTo:vu,progressTo:function(n,t,e,r){!function(n,t){St(n.element(),t.destinationAttr)&&(bt(n.element(),t.stateAttr,wt(n.element(),t.destinationAttr)),Tt(n.element(),t.destinationAttr))}(n,t);var o=function(n,t,e,r){return{start:wt(n.element(),t.stateAttr),destination:r}}(n,t,0,r);Cp(n,t,e,o).fold((function(){vu(n,t,e,r)}),(function(o){hu(n,t,e);var i=o.transition;Dt(n.element(),i.transitionClass),bt(n.element(),t.destinationAttr,r)}))},getState:function(n,t){var e=n.element();return St(e,t.stateAttr)?ea.some(wt(e,t.stateAttr)):ea.none()}}),Ip=Object.freeze({events:function(n,t){return it([ct(tf(),(function(e,r){var o=r.event().raw();Dp(e,n).each((function(r){pu(0,n,0,r).each((function(i){i.transition.each((function(i){o.propertyName===i.property&&(vu(e,n,t,r.destination),n.onTransition(e,r))}))}))}))})),Es((function(e){vu(e,n,t,n.initialState)}))])}}),Fp=vt({fields:[Yn("destinationAttr","data-transitioning-destination"),Yn("stateAttr","data-transitioning-state"),Ln("initialState"),Xt("onTransition"),Xt("onFinish"),Gn("routes",jn(Hf.value,jn(Hf.value,An([qn("transition",[Ln("property"),Ln("transitionClass")])]))))],name:"transitioning",active:Ip,apis:Mp,extra:{createRoutes:function(n){var t={};return ia(n,(function(n,e){var r=e.split("<->");t[r[0]]=yn(r[1],n),t[r[1]]=yn(r[0],n)})),t},createBistate:function(n,t,e){return bn([{key:n,value:yn(t,e)},{key:t,value:yn(n,e)}])},createTristate:function(n,t,e,r){return bn([{key:n,value:bn([{key:t,value:r},{key:e,value:r}])},{key:t,value:bn([{key:n,value:r},{key:e,value:r}])},{key:e,value:bn([{key:n,value:r},{key:t,value:r}])}])}}}),Ap=gl.resolve("scrollable"),Rp={register:function(n){Dt(n,Ap)},deregister:function(n){It(n,Ap)},scrollable:Jc(Ap)},Bp=function(n,t,e,r,o){return{data:{value:n,text:t},type:"item",dom:{tag:"div",classes:o?[gl.resolve("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:gl.resolve("format-matches"),selected:e},itemBehaviours:Bs(o?[]:[sl(n,(function(n,t){(t?fl.on:fl.off)(n)}))]),components:[{dom:{tag:"div",attributes:{style:r},innerHtml:t}}]}},Vp=function(n,t,e,r){return{value:n,dom:{tag:"div"},components:[Sm.sketch({dom:{tag:"div",classes:[gl.resolve("styles-collapser")]},components:r?[{dom:{tag:"span",classes:[gl.resolve("styles-collapse-icon")]}},au(n)]:[au(n)],action:function(n){if(r){var t=e().get(n);Ep.collapseMenu(t)}}}),{dom:{tag:"div",classes:[gl.resolve("styles-menu-items-container")]},components:[bp.parts().items({})],behaviours:Bs([Mg("adhoc-scrollable-menu",[Es((function(n){yl(n.element(),"overflow-y","auto"),yl(n.element(),"-webkit-overflow-scrolling","touch"),Rp.register(n.element())})),Cs((function(n){de(n.element(),"overflow-y"),de(n.element(),"-webkit-overflow-scrolling"),Rp.deregister(n.element())}))])])}],items:t,menuBehaviours:Bs([Fp.config({initialState:"after",routes:Fp.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},Np=function(n){var t=function(n,t){var e=Vp("Styles",[].concat(Va(n.items,(function(t){return Bp(yu(t),t.title,t.isSelected(),t.getPreview(),wn(n.expansions,yu(t)))}))),t,!1),r=d(n.menus,(function(e,r){var o=Va(e,(function(t){return Bp(yu(t),t.title,void 0!==t.isSelected&&t.isSelected(),void 0!==t.getPreview?t.getPreview():"",wn(n.expansions,yu(t)))}));return Vp(r,o,t,!0)})),o=Gf(r,yn("styles",e));return{tmenu:Ep.tieredData("styles",o,n.expansions)}}(n.formats,(function(){return e})),e=mi(Ep.sketch({dom:{tag:"div",classes:[gl.resolve("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(t,e){var r=Gm.getValue(e);return n.handle(e,r.value),ea.none()},onEscape:function(){return ea.none()},onOpenMenu:function(n,t){var e=oo(n.element());ro(t.element(),e),Fp.jumpTo(t,"current")},onOpenSubmenu:function(n,t,e){var r=oo(n.element()),o=xe(t.element(),'[role="menu"]').getOrDie("hacky"),i=n.getSystem().getByDom(o).getOrDie();ro(e.element(),r),Fp.progressTo(i,"before"),Fp.jumpTo(e,"after"),Fp.progressTo(e,"current")},onCollapseMenu:function(n,t,e){var r=xe(t.element(),'[role="menu"]').getOrDie("hacky"),o=n.getSystem().getByDom(r).getOrDie();Fp.progressTo(o,"after"),Fp.progressTo(e,"current")},navigateOnHover:!1,highlightImmediately:!0,data:t.tmenu,markers:{backgroundMenu:gl.resolve("styles-background-menu"),menu:gl.resolve("styles-menu"),selectedMenu:gl.resolve("styles-selected-menu"),item:gl.resolve("styles-item"),selectedItem:gl.resolve("styles-selected-item")}}));return e.asSpec()},jp=function(n){return S(n,(function(n,t){var e=bu(t);return{menus:Gf(n.menus,e.menus),items:[e.item].concat(n.items),expansions:Gf(n.expansions,e.expansions)}}),{menus:{},expansions:{},items:[]})},_p={expand:jp},Pp=function(n,t){function e(t){return function(){return n.formatter.match(t)}}function r(t){return function(){return n.formatter.getCssText(t)}}var o=Jf(t,"style_formats").getOr(Kg),i=function(t){return Va(t,(function(t){if(wn(t,"items")){var o=i(t.items);return Gf(function(n){return Gf(n,{isSelected:Jc(!1),getPreview:Jc("")})}(t),{items:o})}return wn(t,"format")?function(n){return Gf(n,{isSelected:e(n.format),getPreview:r(n.format)})}(t):function(t){var o=Mr(t.title),i=Gf(t,{format:o,isSelected:e(o),getPreview:r(o)});return n.formatter.register(o,i),i}(t)}))};return i(o)},Hp=function(n,t,e){var r=function(n,t){var e=function(t){return C(t,(function(t){return void 0===t.items?!wn(t,"format")||n.formatter.canApply(t.format)?[t]:[]:0<e(t.items).length?[t]:[]}))},r=e(t);return _p.expand(r)}(n,t);return Np({formats:r,handle:function(t,r){n.undoManager.transact((function(){fl.isOn(t)?n.formatter.remove(r):n.formatter.apply(r)})),e()}})},zp=["undo","bold","italic","link","image","bullist","styleselect"],Lp=function(n){return C(n,(function(n){return Da(n)?Lp(n):xu(n)}))},Gp=function(n,t){function e(n){return function(){return Em.forToolbarCommand(t,n)}}function r(n){return function(){return Em.forToolbarStateCommand(t,n)}}function o(n,e,r){return function(){return Em.forToolbarStateAction(t,n,e,r)}}function i(){return Hp(t,h,(function(){t.fire("scrollIntoView")}))}function u(n,e){return{isSupported:function(){var e=t.ui.registry.getAll().buttons;return n.forall((function(n){return wn(e,n)}))},sketch:e}}var c=e("undo"),a=e("redo"),f=r("bold"),s=r("italic"),l=r("underline"),d=e("removeformat"),m=o("unlink","link",(function(){t.execCommand("unlink",null,!1)})),g=o("unordered-list","ul",(function(){t.execCommand("InsertUnorderedList",null,!1)})),p=o("ordered-list","ol",(function(){t.execCommand("InsertOrderedList",null,!1)})),h=Pp(t,t.settings);return{undo:u(ea.none(),c),redo:u(ea.none(),a),bold:u(ea.none(),f),italic:u(ea.none(),s),underline:u(ea.none(),l),removeformat:u(ea.none(),d),link:u(ea.none(),(function(){return function(n,t){return Em.forToolbarStateAction(t,"link","link",(function(){var e=Yg(n,t);n.setContextToolbar(e),Dg(t,(function(){n.focusToolbar()})),Eg.query(t).each((function(n){t.selection.select(n.dom())}))}))}(n,t)})),unlink:u(ea.none(),m),image:u(ea.none(),(function(){return Oi(t)})),bullist:u(ea.some("bullist"),g),numlist:u(ea.some("numlist"),p),fontsizeselect:u(ea.none(),(function(){return function(n,t){var e={onChange:function(n){Sg.apply(t,n)},getInitialValue:function(){return Sg.get(t)}};return fi(n,"font-size",(function(){return di(e)}),t)}(n,t)})),forecolor:u(ea.none(),(function(){return yg(n,t)})),styleselect:u(ea.none(),(function(){return Em.forToolbar("style-formats",(function(e){t.fire("toReading"),n.dropup().appear(i,fl.on,e)}),Bs([fl.config({toggleClass:gl.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),rl.config({channels:bn([dl(Gs.orientationChanged(),fl.off),dl(Gs.dropupDismissed(),fl.off)])})]),t)}))}},Up=function(n,t){var e=wu(n),r={};return C(e,(function(n){var e=!wn(r,n)&&wn(t,n)&&t[n].isSupported()?[t[n].sketch()]:[];return r[n]=!0,e}))},$p=function(n,t,e,r){n.dom().removeEventListener(t,e,r)},Wp=Jc(!0),Xp=tinymce.util.Tools.resolve("tinymce.util.Delay"),qp=Eu,Yp=function(n,t){var e=wf.fromDom(n),r=null,o=Ou(e,"orientationchange",(function(){Xp.clearInterval(r);var e=Eu(n);t.onChange(e),i((function(){t.onReady(e)}))})),i=function(t){Xp.clearInterval(r);var e=n.innerHeight,o=0;r=Xp.setInterval((function(){e!==n.innerHeight?(Xp.clearInterval(r),t(ea.some(n.innerHeight))):20<o&&(Xp.clearInterval(r),t(ea.none())),o++}),50)};return{onAdjustment:i,destroy:function(){o.unbind()}}},Kp=function(n){var t=V().os.isiOS(),e=Eu(n).isPortrait();return t&&!e?n.screen.height:n.screen.width},Jp=function(n){var t=Du({triggerEvent:function(t,e){n.onTapContent(e)}});return{fireTouchstart:function(n){t.fireIfReady(n,"touchstart")},onTouchend:function(){return Ou(n.body(),"touchend",(function(n){t.fireIfReady(n,"touchend")}))},onTouchmove:function(){return Ou(n.body(),"touchmove",(function(n){t.fireIfReady(n,"touchmove")}))}}},Qp=6<=V().os.version.major,Zp=function(n,t,r){function o(n){return!Q(n.start(),n.finish())||n.soffset()!==n.foffset()}function i(){var e=n.doc().dom().hasFocus()&&n.getSelection().exists(o);r.getByDom(t).each(!0===(e||Vt(c).filter((function(n){return"input"===z(n)})).exists((function(n){return n.dom().selectionStart!==n.dom().selectionEnd})))?fl.on:fl.off)}var u=Jp(n),c=Z(t),a=[Ou(n.body(),"touchstart",(function(t){n.onTouchContent(),u.fireTouchstart(t)})),u.onTouchmove(),u.onTouchend(),Ou(t,"touchstart",(function(){n.onTouchToolstrip()})),n.onToReading((function(){Bt(n.body())})),n.onToEditing(e),n.onScrollToCursor((function(t){t.preventDefault(),n.getCursorBox().each((function(t){var e=n.win(),r=t.top()>e.innerHeight||t.bottom()>e.innerHeight?t.bottom()-e.innerHeight+50:0;0!=r&&e.scrollTo(e.pageXOffset,e.pageYOffset+r)}))}))].concat(1==Qp?[]:[Ou(wf.fromDom(n.win()),"blur",(function(){r.getByDom(t).each(fl.off)})),Ou(c,"select",i),Ou(n.doc(),"selectionchange",i)]);return{destroy:function(){x(a,(function(n){n.unbind()}))}}},nh=function(n,t){var e=parseInt(wt(n,t),10);return isNaN(e)?0:e},th=function(n,t){var e=function(t){return n(t)?ea.from(t.dom().nodeValue):ea.none()};return{get:function(r){if(!n(r))throw new Error("Can only get "+t+" value of a "+t+" node");return e(r).getOr("")},getOption:e,set:function(e,r){if(!n(e))throw new Error("Can only set raw "+t+" value of a "+t+" node");e.dom().nodeValue=r}}}(Ef,"text"),eh={create:U("start","soffset","finish","foffset")},rh=zf([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),oh={before:rh.before,on:rh.on,after:rh.after,cata:function(n,t,e,r){return n.fold(t,e,r)},getStart:function(n){return n.fold(r,r,r)}},ih=zf([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),uh={domRange:ih.domRange,relative:ih.relative,exact:ih.exact,exactFromRange:function(n){return ih.exact(n.start(),n.soffset(),n.finish(),n.foffset())},getWin:function(n){return function(n){return wf.fromDom(n.dom().ownerDocument.defaultView)}(function(n){return n.match({domRange:function(n){return wf.fromDom(n.startContainer)},relative:function(n){return oh.getStart(n)},exact:function(n){return n}})}(n))},range:eh.create},ch=zf([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ah=(document.caretPositionFromPoint||document.caretRangeFromPoint,function(n){var t=n.getSelection();return void 0!==t&&0<t.rangeCount?Uu(t.getRangeAt(0)):[]}),fh=function(n){n.focus();var t=wf.fromDom(n.document.body);(Vt().exists((function(n){return y(["input","textarea"],z(n))}))?function(n){Xp.setTimeout((function(){n()}),0)}:c)((function(){Vt().each(Bt),Rt(t)}))},sh="data-"+gl.resolve("last-outer-height"),lh=function(n,t){var e=wf.fromDom(t.document.body),r=Ou(wf.fromDom(n),"resize",(function(){Xu(n,e).each((function(n){(function(n){var t=ah(n);return 0<t.length?ea.some(t[0]).map(Wu):ea.none()})(t).each((function(e){var r=function(n,t,e){return t.top()>n.innerHeight||t.bottom()>n.innerHeight?Math.min(e,t.bottom()-n.innerHeight+50):0}(t,e,n);0!==r&&t.scrollTo(t.pageXOffset,t.pageYOffset+r)}))})),$u(e,n.innerHeight)}));return $u(e,n.innerHeight),{toEditing:function(){fh(t)},destroy:function(){r.unbind()}}},dh={getBody:Zu("getBody",qu),getDoc:Zu("getDoc",Yu),getWin:Zu("getWin",Ku),getSelection:Zu("getSelection",Ju),getFrame:Qu,getActiveApi:function(n){var t=Qu(n);return qu(t).bind((function(e){return Yu(t).bind((function(r){return Ku(t).map((function(i){var u=wf.fromDom(r.dom().documentElement),c=n.getCursorBox.getOrThunk((function(){return function(){return function(n){return Hu(n).map((function(n){return uh.exact(n.start(),n.soffset(),n.finish(),n.foffset())}))}(i).bind((function(n){return zu(i,n).orThunk((function(){return function(n){return Hu(n).filter((function(n){return Q(n.start(),n.finish())&&n.soffset()===n.foffset()})).bind((function(n){var t=n.start().dom().getBoundingClientRect();return 0<t.width||0<t.height?ea.some(t).map(tc):ea.none()}))}(i)}))}))}})),a=n.setSelection.getOrThunk((function(){return function(n,t,e,r){_u(i,n,t,e,r)}})),f=n.clearSelection.getOrThunk((function(){return function(){!function(n){n.getSelection().removeAllRanges()}(i)}}));return{body:Jc(e),doc:Jc(r),win:Jc(i),html:Jc(u),getSelection:o(Ju,t),setSelection:a,clearSelection:f,frame:Jc(t),onKeyup:nc(n,r,"onKeyup","keyup"),onNodeChanged:nc(n,r,"onNodeChanged","SelectionChange"),onDomChanged:n.onDomChanged,onScrollToCursor:n.onScrollToCursor,onScrollToElement:n.onScrollToElement,onToReading:n.onToReading,onToEditing:n.onToEditing,onToolbarScrollStart:n.onToolbarScrollStart,onTouchContent:n.onTouchContent,onTapContent:n.onTapContent,onTouchToolstrip:n.onTouchToolstrip,getCursorBox:c}}))}))}))}},mh="data-ephox-mobile-fullscreen-style",gh="position:absolute!important;",ph="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",hh=V().os.isAndroid(),vh=function(n,t){function e(n){return function(t){var e=wt(t,"style"),r=void 0===e?"no-styles":e.trim();r!==n&&(bt(t,mh,r),bt(t,"style",n))}}var r=function(n,t){return he(n,(function(n){return q(n,t)}),void 0)}(n,"*"),o=C(r,(function(n){return function(n,t){return ve(n,(function(n){return q(n,t)}))}(n,"*")})),i=function(n){var t=se(n,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"}(t);x(o,e("display:none!important;")),x(r,e(gh+ph+i)),e((!0===hh?"":gh)+ph+i)(n)},yh=function(){x(function(n){return K(n)}("["+mh+"]"),(function(n){var t=wt(n,mh);"no-styles"!==t?bt(n,"style",t):Tt(n,"style"),Tt(n,mh)}))},bh=function(){var n=be("head").getOrDie(),t=be('meta[name="viewport"]').getOrThunk((function(){var t=wf.fromTag("meta");return bt(t,"name","viewport"),Af(n,t),t})),e=wt(t,"content");return{maximize:function(){bt(t,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){null!=e&&0<e.length?bt(t,"content",e):bt(t,"content","user-scalable=yes")}}},xh=function(n,t){var e=bh(),r=Gi(),o=Gi();return{enter:function(){t.hide(),Dt(n.container,gl.resolve("fullscreen-maximized")),Dt(n.container,gl.resolve("android-maximized")),e.maximize(),Dt(n.body,gl.resolve("android-scroll-reload")),r.set(lh(n.win,dh.getWin(n.editor).getOrDie("no"))),dh.getActiveApi(n.editor).each((function(t){vh(n.container,t.body()),o.set(Zp(t,n.toolstrip,n.alloy))}))},exit:function(){e.restore(),t.show(),It(n.container,gl.resolve("fullscreen-maximized")),It(n.container,gl.resolve("android-maximized")),yh(),It(n.body,gl.resolve("android-scroll-reload")),o.clear(),r.clear()}}},wh=function(t){var e=mi(Ag.sketch({dom:Om('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:Bs([fl.config({toggleClass:gl.resolve("mask-tap-icon-selected"),toggleOnExecute:!1})])})),r=function(t,e){var r=null;return{cancel:function(){null!==r&&(n.clearTimeout(r),r=null)},throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null===r&&(r=n.setTimeout((function(){t.apply(null,o),r=null}),e))}}}(t,200);return Ag.sketch({dom:Om('<div class="${prefix}-disabled-mask"></div>'),components:[Ag.sketch({dom:Om('<div class="${prefix}-content-container"></div>'),components:[Sm.sketch({dom:Om('<div class="${prefix}-content-tap-section"></div>'),components:[e.asSpec()],action:function(){r.throttle()},buttonBehaviours:Bs([fl.config({toggleClass:gl.resolve("mask-tap-icon-selected")})])})]})]})},Sh=vs([Un("editor",[Ln("getFrame"),$n("getBody"),$n("getDoc"),$n("getWin"),$n("getSelection"),$n("setSelection"),$n("clearSelection"),$n("cursorSaver"),$n("onKeyup"),$n("onNodeChanged"),$n("getCursorBox"),Ln("onDomChanged"),Yn("onTouchContent",e),Yn("onTapContent",e),Yn("onTouchToolstrip",e),Yn("onScrollToCursor",Jc({unbind:e})),Yn("onScrollToElement",Jc({unbind:e})),Yn("onToEditing",Jc({unbind:e})),Yn("onToReading",Jc({unbind:e})),Yn("onToolbarScrollStart",r)]),Ln("socket"),Ln("toolstrip"),Ln("dropup"),Ln("toolbar"),Ln("container"),Ln("alloy"),Jn("win",(function(n){return Z(n.socket).dom().defaultView})),Jn("body",(function(n){return wf.fromDom(n.socket.dom().ownerDocument.body)})),Yn("translate",r),Yn("setReadOnly",e),Yn("readOnlyOnInit",Jc(!0))]),Th=function(n){var t=Hn("Getting AndroidWebapp schema",Sh,n);yl(t.toolstrip,"width","100%");var r=ip(wh((function(){t.setReadOnly(t.readOnlyOnInit()),i.enter()}),t.translate));t.alloy.add(r);var o={show:function(){t.alloy.add(r)},hide:function(){t.alloy.remove(r)}};Af(t.container,r.element());var i=xh(t,o);return{setReadOnly:t.setReadOnly,refreshStructure:e,enter:i.enter,exit:i.exit,destroy:e}},Oh=Jc([Ln("dom"),Yn("shell",!0),Or("toolbarBehaviours",[wp])]),kh=Jc([am({name:"groups",overrides:function(){return{behaviours:Bs([wp.config({})])}}})]),Eh=Wr({name:"Toolbar",configFields:Oh(),partFields:kh(),factory:function(t,e){var r=function(n){return t.shell?ea.some(n):Nr(n,t,"groups")},o=t.shell?{behaviours:[wp.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:o.components,behaviours:Er(t.toolbarBehaviours,o.behaviours),apis:{setGroups:function(t,e){r(t).fold((function(){throw n.console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(n){wp.set(n,e)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,t,e){n.setGroups(t,e)}}}),Ch=Jc([Ln("items"),(Gl=["itemSelector"],Un("markers",Va(Gl,Ln))),Or("tgroupBehaviours",[Hd])]),Dh=Jc([fm({name:"items",unit:"item"})]),Mh=Wr({name:"ToolbarGroup",configFields:Ch(),partFields:Dh(),factory:function(n,t){return{uid:n.uid,dom:n.dom,components:t,behaviours:Er(n.tgroupBehaviours,[Hd.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),Ih="data-"+gl.resolve("horizontal-scroll"),Fh={exclusive:function(n,t){return Ou(n,"touchmove",(function(n){Se(n.target(),t).filter(rc).fold((function(){n.raw().preventDefault()}),e)}))},markAsHorizontal:function(n){bt(n,Ih,"true")}},Ah=function(n){return ip(Sm.sketch({dom:Om('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){n.run((function(n){n.setReadOnly(!1)}))}}))},Rh=function(){return ip(Ag.sketch({dom:Om('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:Bs([wp.config({})])}))},Bh=function(n,t,e,r){(!0===e?Ps.toAlpha:Ps.toOmega)(r),(e?ic:uc)(n,t)},Vh=Object.freeze({refresh:function(n,t,e){if(e.isExpanded()){de(n.element(),ac(t));var r=fc(t,n.element());yl(n.element(),ac(t),r)}},grow:function(n,t,e){e.isExpanded()||hc(n,t,e)},shrink:function(n,t,e){e.isExpanded()&&pc(n,t,e)},immediateShrink:function(n,t,e){e.isExpanded()&&mc(n,t,e)},hasGrown:function(n,t,e){return e.isExpanded()},hasShrunk:function(n,t,e){return e.isCollapsed()},isGrowing:vc,isShrinking:yc,isTransitioning:function(n,t){return!0===vc(n,t)||!0===yc(n,t)},toggleGrow:function(n,t,e){(e.isExpanded()?pc:hc)(n,t,e)},disableTransitions:sc}),Nh=Object.freeze({exhibit:function(n,t){return mt(t.expanded?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:yn(t.dimension.property,"0px")})},events:function(n,t){return it([function(n,t){return ft(n)(t)}(tf(),(function(e,r){r.event().raw().propertyName===n.dimension.property&&(sc(e,n),t.isExpanded()&&de(e.element(),n.dimension.property),(t.isExpanded()?n.onGrown:n.onShrunk)(e))}))])}}),jh=[Ln("closedClass"),Ln("openClass"),Ln("shrinkingClass"),Ln("growingClass"),$n("getAnimationRoot"),Xt("onShrunk"),Xt("onStartShrink"),Xt("onGrown"),Xt("onStartGrow"),Yn("expanded",!1),Gn("dimension",zn("property",{width:[Jt("property","width"),Jt("getDimension",(function(n){return oo(n)+"px"}))],height:[Jt("property","height"),Jt("getDimension",(function(n){return pe(n)+"px"}))]}))],_h=vt({fields:jh,name:"sliding",active:Nh,apis:Vh,state:Object.freeze({init:function(n){var t=aa(n.expanded);return Rs({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:o(t.set,!1),setExpanded:o(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),Ph=V().browser.isFirefox(),Hh=An([(Ul="triggerEvent",Gn(Ul,Os)),Yn("stopBackspace",!0)]),zh=zf([{stopped:[]},{resume:["element"]},{complete:[]}]),Lh=function(n,t,e,r,o,i){return Tc(n,t,e,r,o,i).fold((function(){return!0}),(function(r){return Lh(n,t,e,r,o,i)}),(function(){return!1}))},Gh=function(n,t,e,r,o){var i=Sc(e,r);return Lh(n,t,e,r,i,o)},Uh=U("element","descHandler"),$h=function(n,t){return{id:Jc(n),descHandler:Jc(t)}},Wh=function(n){function t(t){return nn(n.element()).fold((function(){return!0}),(function(n){return Q(t,n)}))}function r(n,e){return i.find(t,n,e)}function o(n){x(i.filter(af()),(function(t){qi(t.descHandler())(n)}))}var i=Ec(),u=wc(n.element(),{triggerEvent:function(n,t){return $t(n,t.target(),(function(e){return function(n,t,e,r){var o=e.target();return Gh(n,t,e,o,r)}(r,n,t,e)}))}}),c={debugInfo:Jc("real"),triggerEvent:function(n,t,e){$t(n,t,(function(o){Gh(r,n,e,t,o)}))},triggerFocus:function(n,t){ym(n).fold((function(){Rt(n)}),(function(){$t(of(),n,(function(o){!function(n,t,e,r,o){Tc(n,t,e,r,Sc(e,r),o)}(r,of(),{originator:Jc(t),kill:e,prevent:e,target:Jc(n)},n,o)}))}))},triggerEscape:function(n,t){c.triggerEvent("keydown",n.element(),t.event())},getByUid:function(n){return p(n)},getByDom:function(n){return h(n)},build:ip,addToGui:function(n){s(n)},removeFromGui:function(n){l(n)},addToWorld:function(n){a(n)},removeFromWorld:function(n){f(n)},broadcast:function(n){d(n)},broadcastOn:function(n,t){m(n,t)},broadcastEvent:function(n,t){g(n,t)},isConnected:Jc(!0)},a=function(n){n.connect(c),Ef(n.element())||(i.register(n),x(n.components(),a),c.triggerEvent(mf(),n.element(),{target:Jc(n.element())}))},f=function(n){Ef(n.element())||(x(n.components(),f),i.unregister(n)),n.disconnect()},s=function(t){!function(n,t){Nf(n,t,Af)}(n,t)},l=function(n){sn(n)},d=function(n){o({universal:Jc(!0),data:Jc(n)})},m=function(n,t){o({universal:Jc(!1),channels:Jc(n),data:Jc(t)})},g=function(n,t){return Oc(i.filter(n),t)},p=function(n){return i.getById(n).fold((function(){return Hf.error(new Error('Could not find component with uid: "'+n+'" in system.'))}),Hf.value)},h=function(n){var t=ym(n).getOr("not found");return p(t)};return a(n),{root:Jc(n),element:n.element,destroy:function(){u.unbind(),Rf(n.element())},add:s,remove:l,getByUid:p,getByDom:h,addToWorld:a,removeFromWorld:f,broadcast:d,broadcastOn:m,broadcastEvent:g}},Xh=Jc(gl.resolve("readonly-mode")),qh=Jc(gl.resolve("edit-mode")),Yh=function(n,t){var e=wf.fromTag("input");fe(e,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),Af(n,e),Rt(e),t(e),Rf(e)},Kh=function(n){var t=n.getSelection();if(0<t.rangeCount){var e=t.getRangeAt(0),r=n.document.createRange();r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset),t.removeAllRanges(),t.addRange(r)}},Jh=function(n,t){Vt().each((function(n){Q(n,t)||Bt(n)})),n.focus(),Rt(wf.fromDom(n.document.body)),Kh(n)},Qh={stubborn:function(n,t,e,r){function o(){Jh(t,r)}var i=Ou(e,"keydown",(function(n){y(["input","textarea"],z(n.target()))||o()}));return{toReading:function(){Yh(n,Bt)},toEditing:o,onToolbarTouch:function(){},destroy:function(){i.unbind()}}},timid:function(n,t,r,o){function i(){Bt(o)}return{toReading:function(){i()},toEditing:function(){Jh(t,o)},onToolbarTouch:function(){i()},destroy:e}}},Zh=function(n,t,e,r){function o(){t.run((function(n){n.refreshSelection()}))}function i(n,e){var o=n-r.dom().scrollTop;t.run((function(n){n.scrollIntoView(o,o+e)}))}function u(){
t.run((function(n){n.clearSelection()}))}function c(){n.getCursorBox().each((function(n){i(n.top(),n.height())})),t.run((function(n){n.syncHeight()}))}var a=Jp(n),f=ec(c,300),s=[n.onKeyup((function(){u(),f.throttle()})),n.onNodeChanged(o),n.onDomChanged(f.throttle),n.onDomChanged(o),n.onScrollToCursor((function(n){n.preventDefault(),f.throttle()})),n.onScrollToElement((function(n){n.element(),i(t,r)})),n.onToEditing((function(){t.run((function(n){n.toEditing()}))})),n.onToReading((function(){t.run((function(n){n.toReading()}))})),Ou(n.doc(),"touchend",(function(t){Q(n.html(),t.target())||Q(n.body(),t.target())})),Ou(e,"transitionend",(function(n){"height"===n.raw().propertyName&&function(){var n=pe(e);t.run((function(t){t.setViewportOffset(n)})),o(),c()}()})),ku(e,"touchstart",(function(e){t.run((function(n){n.highlightSelection()})),function(n){t.run((function(t){t.onToolbarTouch(n)}))}(e),n.onTouchToolstrip()})),Ou(n.body(),"touchstart",(function(t){u(),n.onTouchContent(),a.fireTouchstart(t)})),a.onTouchmove(),a.onTouchend(),Ou(n.body(),"click",(function(n){n.kill()})),Ou(e,"touchmove",(function(){n.onToolbarScrollStart()}))];return{destroy:function(){x(s,(function(n){n.unbind()}))}}},nv={},tv={exports:nv};$l=void 0,Wl=nv,Xl=tv,ql=void 0,function(n){"object"==typeof Wl&&void 0!==Xl?Xl.exports=n():"function"==typeof $l&&$l.amd?$l([],n):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=n()}((function(){return function n(t,e,r){function o(u,c){if(!e[u]){if(!t[u]){var a="function"==typeof ql&&ql;if(!c&&a)return a(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=e[u]={exports:{}};t[u][0].call(s.exports,(function(n){return o(t[u][1][n]||n)}),s,s.exports,n,t,e,r)}return e[u].exports}for(var i="function"==typeof ql&&ql,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,t){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(n){if(f===setTimeout)return setTimeout(n,0);if((f===e||!f)&&setTimeout)return f=setTimeout,setTimeout(n,0);try{return f(n,0)}catch(t){try{return f.call(null,n,0)}catch(t){return f.call(this,n,0)}}}function i(){g&&d&&(g=!1,d.length?m=d.concat(m):p=-1,m.length&&u())}function u(){if(!g){var n=o(i);g=!0;for(var t=m.length;t;){for(d=m,m=[];++p<t;)d&&d[p].run();p=-1,t=m.length}d=null,g=!1,function(n){if(s===clearTimeout)return clearTimeout(n);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(n);try{return s(n)}catch(t){try{return s.call(null,n)}catch(t){return s.call(this,n)}}}(n)}}function c(n,t){this.fun=n,this.array=t}function a(){}var f,s,l=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:e}catch(n){f=e}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(n){s=r}}();var d,m=[],g=!1,p=-1;l.nextTick=function(n){var t=new Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];m.push(new c(n,t)),1!==m.length||g||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.prependListener=a,l.prependOnceListener=a,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],2:[function(n,t){(function(n){function e(){}function r(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(n,this)}function o(n,t){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,r._immediateFn((function(){var e=1===n._state?t.onFulfilled:t.onRejected;if(null!==e){var r;try{r=e(n._value)}catch(n){return void u(t.promise,n)}i(t.promise,r)}else(1===n._state?i:u)(t.promise,n._value)}))):n._deferreds.push(t)}function i(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if(t instanceof r)return n._state=3,n._value=t,void c(n);if("function"==typeof e)return void f(function(n,t){return function(){n.apply(t,arguments)}}(e,t),n)}n._state=1,n._value=t,c(n)}catch(t){u(n,t)}}function u(n,t){n._state=2,n._value=t,c(n)}function c(n){2===n._state&&0===n._deferreds.length&&r._immediateFn((function(){n._handled||r._unhandledRejectionFn(n._value)}));for(var t=0,e=n._deferreds.length;t<e;t++)o(n,n._deferreds[t]);n._deferreds=null}function a(n,t,e){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.promise=e}function f(n,t){var e=!1;try{n((function(n){e||(e=!0,i(t,n))}),(function(n){e||(e=!0,u(t,n))}))}catch(n){if(e)return;e=!0,u(t,n)}}var s,l;s=this,l=setTimeout,r.prototype.catch=function(n){return this.then(null,n)},r.prototype.then=function(n,t){var r=new this.constructor(e);return o(this,new a(n,t,r)),r},r.all=function(n){var t=Array.prototype.slice.call(n);return new r((function(n,e){function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(n){r(i,n)}),e)}t[i]=u,0==--o&&n(t)}catch(n){e(n)}}if(0===t.length)return n([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])}))},r.resolve=function(n){return n&&"object"==typeof n&&n.constructor===r?n:new r((function(t){t(n)}))},r.reject=function(n){return new r((function(t,e){e(n)}))},r.race=function(n){return new r((function(t,e){for(var r=0,o=n.length;r<o;r++)n[r].then(t,e)}))},r._immediateFn="function"==typeof n?function(t){n(t)}:function(n){l(n,0)},r._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},r._setImmediateFn=function(n){r._immediateFn=n},r._setUnhandledRejectionFn=function(n){r._unhandledRejectionFn=n},void 0!==t&&t.exports?t.exports=r:s.Promise||(s.Promise=r)}).call(this,n("timers").setImmediate)},{timers:3}],3:[function(n,t,e){(function(t,r){function o(n,t){this._id=n,this._clearFn=t}var i=n("process/browser.js").nextTick,u=Function.prototype.apply,c=Array.prototype.slice,a={},f=0;e.setTimeout=function(){return new o(u.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(u.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(n){n.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(n,t){clearTimeout(n._idleTimeoutId),n._idleTimeout=t},e.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},e._unrefActive=e.active=function(n){clearTimeout(n._idleTimeoutId);var t=n._idleTimeout;0<=t&&(n._idleTimeoutId=setTimeout((function(){n._onTimeout&&n._onTimeout()}),t))},e.setImmediate="function"==typeof t?t:function(n){var t=f++,r=!(arguments.length<2)&&c.call(arguments,1);return a[t]=!0,i((function(){a[t]&&(r?n.apply(null,r):n.call(null),e.clearImmediate(t))})),t},e.clearImmediate="function"==typeof r?r:function(n){delete a[n]}}).call(this,n("timers").setImmediate,n("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(n,t){var e=n("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:r.Promise||e}},{"promise-polyfill":2}]},{},[4])(4)}));var ev=tv.exports.boltExport,rv=function(t){var e=ea.none(),r=[],o=function(n){i()?c(n):r.push(n)},i=function(){return e.isSome()},u=function(n){x(n,c)},c=function(t){e.each((function(e){n.setTimeout((function(){t(e)}),0)}))};return t((function(n){e=ea.some(n),u(r),r=[]})),{get:o,map:function(n){return rv((function(t){o((function(e){t(n(e))}))}))},isReady:i}},ov={nu:rv,pure:function(n){return rv((function(t){t(n)}))}},iv=function(n){function t(t){n().then(t,Dc)}return{map:function(t){return iv((function(){return n().then(t)}))},bind:function(t){return iv((function(){return n().then((function(n){return t(n).toPromise()}))}))},anonBind:function(t){return iv((function(){return n().then((function(){return t.toPromise()}))}))},toLazy:function(){return ov.nu(t)},toCached:function(){var t=null;return iv((function(){return null===t&&(t=n()),t}))},toPromise:n,get:t}},uv=function(n){return iv((function(){return new ev(n)}))},cv=function(n){return iv((function(){return ev.resolve(n)}))},av=function(){var n=null;return{animate:function(t,e,r,o,i,u){function c(n){f=!0,i(n)}function a(t){Xp.clearInterval(n),c(t)}var f=!1;Xp.clearInterval(n),n=Xp.setInterval((function(){var i=t();Mc(i,e,r).fold((function(){Xp.clearInterval(n),c(e)}),(function(r){if(o(r,a),!f){var u=t();(u!==r||Math.abs(u-e)>Math.abs(i-e))&&(Xp.clearInterval(n),c(e))}}))}),u)}}},fv=Ac,sv=function(n,t,e){var r=Ac(t,e),o=pe(t)+pe(e)-r;yl(n,"padding-bottom",o+"px")},lv=zf([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),dv="data-"+gl.resolve("position-y-fixed"),mv="data-"+gl.resolve("y-property"),gv="data-"+gl.resolve("scrolling"),pv="data-"+gl.resolve("last-window-height"),hv=function(n){var t=ye(n,"["+dv+"]");return Va(t,Nc)},vv=function(n,t,e,r){function o(){var t=c.innerHeight;return function(n){return nh(n,pv)}(n)<t}function u(){if(m){var o=pe(e),i=pe(r),u=jc(n,o,i);bt(n,dv,o+"px"),yl(n,"height",u+"px"),sv(t,n,r)}}var c=Z(n).dom().defaultView,a=function(n){var t=wt(n,"style");return fe(n,{position:"absolute",top:"0px"}),bt(n,dv,"0px"),bt(n,mv,"top"),{restore:function(){bt(n,"style",t||""),Tt(n,dv),Tt(n,mv)}}}(e),f=pe(e),s=pe(r),l=function(n,t,e){var r=wt(e,"style");return Rp.register(e),fe(e,{position:"absolute",height:t+"px",width:"100%",top:n+"px"}),bt(e,dv,n+"px"),bt(e,gv,"true"),bt(e,mv,"top"),{restore:function(){Rp.deregister(e),bt(e,"style",r||""),Tt(e,dv),Tt(e,gv),Tt(e,mv)}}}(f,jc(n,f,s),n),d=function(n){var t=wt(n,"style");return fe(n,{position:"absolute",bottom:"0px"}),bt(n,dv,"0px"),bt(n,mv,"bottom"),{restore:function(){bt(n,"style",t||""),Tt(n,dv),Tt(n,mv)}}}(r),m=!0;return sv(t,n,r),{setViewportOffset:function(t){bt(n,dv,t+"px"),u()},isExpanding:o,isShrinking:i(o),refresh:u,restore:function(){m=!1,a.restore(),l.restore(),d.restore()}}},yv=Rc,bv=av(),xv="data-"+gl.resolve("last-scroll-top"),wv=function(n,t,e){return uv((function(r){var i=o(Pc,n);bv.animate(i,t,15,(function(t){n.dom().scrollTop=t,yl(n,"top",_c(n)+15+"px")}),(function(){n.dom().scrollTop=t,yl(n,"top",e+"px"),r(t)}),10)}))},Sv=function(n,t){return uv((function(e){var r=o(Pc,n);bt(n,xv,r());var i=Math.abs(t-r()),u=Math.ceil(i/10);bv.animate(r,t,u,(function(t,e){nh(n,xv)!==n.dom().scrollTop?e(n.dom().scrollTop):(n.dom().scrollTop=t,bt(n,xv,t))}),(function(){n.dom().scrollTop=t,bt(n,xv,t),e(t)}),10)}))},Tv=function(n,t){return uv((function(e){function r(t){yl(n,"top",t+"px")}var i=o(_c,n),u=Math.abs(t-i()),c=Math.ceil(u/10);bv.animate(i,t,c,r,(function(){r(t),e(t)}),10)}))},Ov=function(n,t,e){var r=Z(n).dom().defaultView;return uv((function(o){Hc(n,e),Hc(t,e),r.scrollTo(0,e),o(e)}))},kv=function(n,t,e,r,i){var u=fv(t,e),c=o(Kh,n);u<r||u<i?Sv(t,t.dom().scrollTop-u+i).get(c):r<0&&Sv(t,t.dom().scrollTop+r).get(c)},Ev=function(n,t){var e=hv(n);return function(n){return zc(n,uv)}(Va(e,(function(n){return Lc(n,t)})))},Cv=function(n){var t=n.cWin(),o=n.ceBody(),i=n.socket(),u=n.toolstrip(),c=n.toolbar(),a=n.contentElement(),f=n.keyboardType(),s=n.outerWindow(),l=n.dropup(),d=vv(i,o,u,l),m=f(n.outerBody(),t,Cf(),a,u,c),g=Yp(s,{onChange:e,onReady:d.refresh});g.onAdjustment((function(){d.refresh()}));var p=Ou(wf.fromDom(s),"resize",(function(){d.isExpanding()&&d.refresh()})),h=Gc(u,i,n.outerBody(),s,d,t),v=function(n,t){function e(n){var t=wf.fromTag("span");return nu(t,[gl.resolve("layer-editor"),gl.resolve("unfocused-selection")]),fe(t,{left:n.left()+"px",top:n.top()+"px",width:n.width()+"px",height:n.height()+"px"}),t}var r=n.document,o=wf.fromTag("div");Dt(o,gl.resolve("unfocused-selections")),Af(wf.fromDom(r.documentElement),o);var i=Ou(o,"touchstart",(function(e){e.prevent(),Jh(n,t),u()})),u=function(){cn(o)};return{update:function(){u();var t=ah(n),r=Va(t,e);un(o,r)},isActive:function(){return 0<Ff(o).length},destroy:function(){i.unbind(),Rf(o)},clear:u}}(t,a),y=function(){v.clear()};return{toEditing:function(){m.toEditing(),y()},toReading:function(){m.toReading()},onToolbarTouch:function(n){m.onToolbarTouch(n)},refreshSelection:function(){v.isActive()&&v.update()},clearSelection:y,highlightSelection:function(){v.update()},scrollIntoView:function(n,e){kv(t,i,l,n,e)},updateToolbarPadding:e,setViewportOffset:function(n){d.setViewportOffset(n),Tv(i,n).get(r)},syncHeight:function(){yl(a,"height",a.dom().contentWindow.document.body.scrollHeight+"px")},refreshStructure:d.refresh,destroy:function(){d.restore(),g.destroy(),h.unbind(),p.unbind(),m.destroy(),v.destroy(),Yh(Cf(),Bt)}}},Dv=function(t,r){var o=bh(),i=Ui(),u=Ui(),c=Gi(),a=Gi();return{enter:function(){r.hide();var f=wf.fromDom(n.document);dh.getActiveApi(t.editor).each((function(r){i.set({socketHeight:le(t.socket,"height"),iframeHeight:le(r.frame(),"height"),outerScroll:n.document.body.scrollTop}),u.set({exclusives:Fh.exclusive(f,"."+Rp.scrollable())}),Dt(t.container,gl.resolve("fullscreen-maximized")),vh(t.container,r.body()),o.maximize(),yl(t.socket,"overflow","scroll"),yl(t.socket,"-webkit-overflow-scrolling","touch"),Rt(r.body());var s=X(["cWin","ceBody","socket","toolstrip","toolbar","dropup","contentElement","cursor","keyboardType","isScrolling","outerWindow","outerBody"],[]);c.set(Cv(s({cWin:r.win(),ceBody:r.body(),socket:t.socket,toolstrip:t.toolstrip,toolbar:t.toolbar,dropup:t.dropup.element(),contentElement:r.frame(),cursor:e,outerBody:t.body,outerWindow:t.win,keyboardType:Qh.stubborn,isScrolling:function(){return u.get().exists((function(n){return n.socket.isScrolling()}))}}))),c.run((function(n){n.syncHeight()})),a.set(Zh(r,c,t.toolstrip,t.socket,t.dropup))}))},refreshStructure:function(){c.run((function(n){n.refreshStructure()}))},exit:function(){o.restore(),a.clear(),c.clear(),r.show(),i.on((function(e){e.socketHeight.each((function(n){yl(t.socket,"height",n)})),e.iframeHeight.each((function(n){yl(t.editor.getFrame(),"height",n)})),n.document.body.scrollTop=e.scrollTop})),i.clear(),u.on((function(n){n.exclusives.unbind()})),u.clear(),It(t.container,gl.resolve("fullscreen-maximized")),yh(),Rp.deregister(t.toolbar),de(t.socket,"overflow"),de(t.socket,"-webkit-overflow-scrolling"),Bt(t.editor.getFrame()),dh.getActiveApi(t.editor).each((function(n){n.clearSelection()}))}}},Mv=function(n){var t=Hn("Getting IosWebapp schema",Sh,n);yl(t.toolstrip,"width","100%"),yl(t.container,"position","relative");var r=ip(wh((function(){t.setReadOnly(t.readOnlyOnInit()),i.enter()}),t.translate));t.alloy.add(r);var o={show:function(){t.alloy.add(r)},hide:function(){t.alloy.remove(r)}},i=Dv(t,o);return{setReadOnly:t.setReadOnly,refreshStructure:i.refreshStructure,enter:i.enter,exit:i.exit,destroy:e}},Iv=tinymce.util.Tools.resolve("tinymce.EditorManager"),Fv=function(n){var t=Jf(n.settings,"skin_url").fold((function(){return Iv.baseURL+"/skins/ui/oxide"}),(function(n){return n}));return{content:t+"/content.mobile.min.css",ui:t+"/skin.mobile.min.css"}},Av=function(n,t){x(ra(t.formatter.get()),(function(e){t.formatter.formatChanged(e,(function(t){Uc(n,e,t)}))})),x(["ul","ol"],(function(e){t.selection.selectorChanged(e,(function(t){Uc(n,e,t)}))}))},Rv=(Jc(["x-small","small","medium","large","x-large"]),function(n){function t(){n._skinLoaded=!0,n.fire("SkinLoaded")}return function(){n.initialized?t():n.on("init",t)}}),Bv=Jc("toReading"),Vv=Jc("toEditing");zs.add("mobile",$c)}(window);
!function(w){"use strict";function Q(){}function d(e,o){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(o.apply(null,t))}}function l(t){return t}function m(o){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=r.concat(t);return o.apply(null,e)}}function v(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}}function i(t){return function(){throw new Error(t)}}function h(t,n){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.indexOf(o)<0&&(e[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(e[o[r]]=t[o[r]])}return e}function b(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var o=Array(t),r=0;for(n=0;n<e;n++)for(var i=arguments[n],u=0,a=i.length;u<a;u++,r++)o[r]=i[u];return o}function t(){return uh}function c(t){return t.isNone()}function n(t){return t()}function e(t){return t}function o(n){return function(t){return function(t){if(null===t)return"null";var n=typeof t;return"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(t)===n}}function s(t,n){if(gh(t)){for(var e=0,o=t.length;e<o;++e)if(!0!==n(t[e]))return!1;return!0}return!1}function u(t,n){return yh.call(t,n)}function f(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return!0;return!1}function g(t,n){for(var e=[],o=0;o<t.length;o+=n){var r=bh.call(t,o,o+n);e.push(r)}return e}function y(t,n){for(var e=t.length,o=new Array(e),r=0;r<e;r++){var i=t[r];o[r]=n(i,r)}return o}function x(t,n){for(var e=[],o=0,r=t.length;o<r;o++){var i=t[o];n(i,o)&&e.push(i)}return e}function p(t,n,e){return function(t,n){for(var e=t.length-1;0<=e;e--)n(t[e],e)}(t,function(t){e=n(e,t)}),e}function S(t,n,e){return Sh(t,function(t){e=n(e,t)}),e}function k(t,n){for(var e=0,o=t.length;e<o;e++){var r=t[e];if(n(r,e))return ch.some(r)}return ch.none()}function C(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return ch.some(e);return ch.none()}function R(t){for(var n=[],e=0,o=t.length;e<o;++e){if(!gh(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);xh.apply(n,t[e])}return n}function O(t,n){return R(y(t,n))}function T(t,n){for(var e=0,o=t.length;e<o;++e)if(!0!==n(t[e],e))return!1;return!0}function E(t){var n=bh.call(t,0);return n.reverse(),n}function D(t,n){return x(t,function(t){return!wh(n,t)})}function r(t){return[t]}function B(t){return 0===t.length?ch.none():ch.some(t[t.length-1])}function V(t,e){return Dh(t,function(t,n){return{k:n,v:e(t,n)}})}function A(t,n){for(var e=Oh(t),o=0,r=e.length;o<r;o++){var i=e[o],u=t[i];if(n(u,i,t))return ch.some(u)}return ch.none()}function _(t){return Bh(t,function(t){return t})}function M(t,n){return Ah(t,n)?ch.from(t[n]):ch.none()}function a(u){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var e={},o=0;o<t.length;o++){var r=t[o];for(var i in r)Mh.call(r,i)&&(e[i]=u(e[i],r[i]))}return e}}function F(e){var o,r=!1;return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r||(r=!0,o=e.apply(null,t)),o}}function I(t){return Rh.defaultedThunk(nh(t))}function H(n){return function(t){return Ah(t,n)?ch.from(t[n]):ch.none()}}function N(t,n){return H(n)(t)}function P(t,n){var e={};return e[t]=n,e}function z(t,n){return e=n,o={},Eh(t,function(t,n){wh(e,n)||(o[n]=t)}),o;var e,o}function L(t,n){return e=t,o=n,function(t){return Ah(t,e)?t[e]:o};var e,o}function j(t,n){return P(t,n)}function U(t){return n={},Sh(t,function(t){n[t.key]=t.value}),n;var n}function W(t,n){var e,o,r,i,u,a=(e=[],o=[],Sh(t,function(t){t.fold(function(t){e.push(t)},function(t){o.push(t)})}),{errors:e,values:o});return 0<a.errors.length?(u=a.errors,lh.error(R(u))):(r=a.values,i=n,0===r.length?lh.value(i):lh.value(Fh(i,Ih.apply(undefined,r))))}function G(t,n){return Ah(e=t,o=n)&&e[o]!==undefined&&null!==e[o];var e,o}function X(t,n,e){return t.stype===Zp.Error?n(t.serror):e(t.svalue)}function Y(t){return{stype:Zp.Value,svalue:t}}function q(t){return{stype:Zp.Error,serror:t}}function K(t){return d(fv,R)(t)}function J(t){return mh(t)&&100<Oh(t).length?" removed due to size":JSON.stringify(t,null,2)}function $(t,n){return fv([{path:t,getErrorInfo:n}])}function Z(e,o,r){return N(o,r).fold(function(){return t=r,n=o,$(e,function(){return'Could not find valid *strict* value for "'+t+'" in '+J(n)});var t,n},cv)}function tt(t,n,e){var o=N(t,n).fold(function(){return e(t)},l);return cv(o)}function nt(a,c,t,s){return t.fold(function(r,e,t,o){function i(t){var n=o.extract(a.concat([r]),s,t);return mv(n,function(t){return P(e,s(t))})}function u(t){return t.fold(function(){var t=P(e,s(ch.none()));return cv(t)},function(t){var n=o.extract(a.concat([r]),s,t);return mv(n,function(t){return P(e,s(ch.some(t)))})})}return t.fold(function(){return lv(Z(a,c,r),i)},function(t){return lv(tt(c,r,t),i)},function(){return lv(cv(N(c,r)),u)},function(t){return lv((e=t,o=N(n=c,r).map(function(t){return!0===t?e(n):t}),cv(o)),u);var n,e,o},function(t){var n=t(c),e=mv(tt(c,r,nh({})),function(t){return Fh(n,t)});return lv(e,i)})},function(t,n){var e=n(c);return cv(P(t,s(e)))})}function et(o){return{extract:function(e,t,n){return dv(o(n,t),function(t){return n=t,$(e,function(){return n});var n})},toString:function(){return"val"},toDsl:function(){return vv.itemOf(o)}}}function ot(t){var u=xv(t),a=p(t,function(n,t){return t.fold(function(t){return Fh(n,j(t,!0))},nh(n))},{});return{extract:function(t,n,e){var o,r,i=x(ph(e)?[]:x(Oh(o=e),function(t){return G(o,t)}),function(t){return!G(a,t)});return 0===i.length?u.extract(t,n,e):(r=i,$(t,function(){return"There are unsupported fields: ["+r.join(", ")+"] specified"}))},toString:u.toString,toDsl:u.toDsl}}function rt(r){return{extract:function(e,o,t){var n=y(t,function(t,n){return r.extract(e.concat(["["+n+"]"]),o,t)});return hv(n)},toString:function(){return"array("+r.toString()+")"},toDsl:function(){return vv.arrOf(r)}}}function it(a,c){return{extract:function(e,o,r){var t,n,i=Oh(r),u=(t=e,n=i,rt(et(a)).extract(t,l,n));return lv(u,function(t){var n=y(t,function(t){return yv.field(t,t,Vh(),c)});return xv(n).extract(e,o,r)})},toString:function(){return"setOf("+c.toString()+")"},toDsl:function(){return vv.setOf(a,c)}}}function ut(e,n,o,r,i){return Lh(r,i).fold(function(){return t=r,n=i,$(e,function(){return'The chosen schema: "'+n+'" did not exist in branches: '+J(t)});var t,n},function(t){return t.extract(e.concat(["branch: "+i]),n,o)})}function at(r,i){return{extract:function(n,e,o){return Lh(o,r).fold(function(){return t=r,$(n,function(){return'Choice schema did not contain choice key: "'+t+'"'});var t},function(t){return ut(n,e,o,i,t)})},toString:function(){return"chooseOn("+r+"). Possible values: "+Oh(i)},toDsl:function(){return vv.choiceOf(r,i)}}}function ct(n){return et(function(t){return n(t).fold(fv,cv)})}function st(n,t){return it(function(t){return uv(n(t))},t)}function ft(t,n,e){return av((o=t,r=l,i=e,u=n.extract([o],r,i),gv(u,function(t){return{input:i,errors:t}})));var o,r,i,u}function lt(t){return t.fold(function(t){throw new Error(Ev(t))},l)}function dt(t,n,e){return lt(ft(t,n,e))}function mt(t,n){return at(t,n)}function gt(t,n){return at(t,V(n,xv))}function pt(e,o){return et(function(t){var n=typeof t;return e(t)?cv(t):fv("Expected type: "+o+" but got: "+n)})}function ht(n){return ct(function(t){return wh(n,t)?lh.value(t):lh.error('Unsupported value: "'+t+'", choose one of "'+n.join(", ")+'".')})}function vt(t){return Cv(t,t,Vh(),wv())}function bt(t,n){return Cv(t,t,Vh(),n)}function yt(t){return bt(t,Av)}function xt(t,n){return Cv(t,t,Vh(),ht(n))}function wt(t){return bt(t,Mv)}function St(t,n){return Cv(t,t,Vh(),xv(n))}function kt(t,n){return Cv(t,t,Vh(),Sv(n))}function Ct(t,n){return Cv(t,t,Vh(),rt(n))}function Ot(t){return Cv(t,t,Hh(),wv())}function Tt(t,n){return Cv(t,t,Hh(),n)}function Et(t){return Tt(t,Bv)}function Dt(t){return Tt(t,Av)}function Bt(t){return Tt(t,Mv)}function At(t,n){return Tt(t,xv(n))}function _t(t,n){return Cv(t,t,I(n),wv())}function Mt(t,n,e){return Cv(t,t,I(n),e)}function Ft(t,n){return Mt(t,n,Bv)}function It(t,n){return Mt(t,n,Av)}function Rt(t,n,e){return Mt(t,n,ht(e))}function Vt(t,n){return Mt(t,n,_v)}function Ht(t,n){return Mt(t,n,Mv)}function Nt(t,n,e){return Mt(t,n,xv(e))}function Pt(t,n){return kv(t,n)}function zt(t,n,e){return 0!=(t.compareDocumentPosition(n)&e)}function Lt(t,n){function e(t){return Number(n.replace(o,"$"+t))}var o=function(t,n){for(var e=0;e<t.length;e++){var o=t[e];if(o.test(n))return o}return undefined}(t,n);return o?zv(e(1),e(2)):{major:0,minor:0}}function jt(t,n){return function(){return n===t}}function Ut(t,n){return function(){return n===t}}function Wt(t,n){var e=String(n).toLowerCase();return k(t,function(t){return t.search(e)})}function Gt(t,n){return-1!==t.indexOf(n)}function Xt(n){return function(t){return Gt(t,n)}}function Yt(){return ob.get()}function qt(t,n){var e=t.dom();if(e.nodeType!==ab)return!1;var o=e;if(o.matches!==undefined)return o.matches(n);if(o.msMatchesSelector!==undefined)return o.msMatchesSelector(n);if(o.webkitMatchesSelector!==undefined)return o.webkitMatchesSelector(n);if(o.mozMatchesSelector!==undefined)return o.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function Kt(t){return t.nodeType!==ab&&t.nodeType!==cb||0===t.childElementCount}function Jt(t,n){var e=n===undefined?w.document:n.dom();return Kt(e)?[]:y(e.querySelectorAll(t),Hv.fromDom)}function $t(t,n){return t.dom()===n.dom()}function Qt(t,n){return $t(t.element(),n.event().target())}function Zt(t){if(!G(t,"can")&&!G(t,"abort")&&!G(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return dt("Extracting event.handler",ot([_t("can",nh(!0)),_t("abort",nh(!1)),_t("run",Q)]),t)}function tn(e){var n,o,r,i;return Zt({can:(r=e,i=function(t){return t.can},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return S(r,function(t,n){return t&&i(n).apply(undefined,e)},!0)}),abort:(n=e,o=function(t){return t.abort},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return S(n,function(t,n){return t||o(n).apply(undefined,e)},!1)}),run:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];Sh(e,function(t){t.run.apply(undefined,n)})}})}function nn(){return Yt().deviceType.isTouch()?Db.tap():Ob()}function en(t,n){ty(t,t.element(),n,{})}function on(t,n,e){ty(t,t.element(),n,e)}function rn(t){en(t,Fb())}function un(t,n,e){ty(t,n,e,{})}function an(t,n,e,o){t.getSystem().triggerEvent(e,n,o.event())}function cn(t,n,e,o,r){return t(e,o)?ch.some(e):hh(r)&&r(e)?ch.none():n(e,o,r)}function sn(t){return t.dom().nodeName.toLowerCase()}function fn(n){return function(t){return t.dom().nodeType===n}}function ln(t){var n=ay(t)?t.dom().parentNode:t.dom();return n!==undefined&&null!==n&&n.ownerDocument.body.contains(n)}function dn(t,n,e){for(var o=t.dom(),r=hh(e)?e:nh(!1);o.parentNode;){o=o.parentNode;var i=Hv.fromDom(o);if(n(i))return ch.some(i);if(r(i))break}return ch.none()}function mn(t,n,e){return cn(function(t,n){return n(t)},dn,t,n,e)}function gn(t,r){var i=function(t){for(var n=0;n<t.childNodes.length;n++){var e=Hv.fromDom(t.childNodes[n]);if(r(e))return ch.some(e);var o=i(t.childNodes[n]);if(o.isSome())return o}return ch.none()};return i(t.dom())}function pn(t){return U(t)}function hn(t,n){return{key:t,value:Zt({abort:n})}}function vn(t){return{key:t,value:Zt({run:function(t,n){n.event().prevent()}})}}function bn(t,n){return{key:t,value:Zt({run:n})}}function yn(t,n,e){return{key:t,value:Zt({run:function(t){n.apply(undefined,[t].concat(e))}})}}function xn(t){return function(e){return{key:t,value:Zt({run:function(t,n){Qt(t,n)&&e(t,n)}})}}}function wn(t,n,e){return o=t,r=n.partUids[e],bn(o,function(t,n){t.getSystem().getByUid(r).each(function(t){an(t,t.element(),o,n)})});var o,r}function Sn(t,r){return bn(t,function(n,t){var e=t.event(),o=n.getSystem().getByDom(e.target()).fold(function(){return fy(e.target(),function(t){return n.getSystem().getByDom(t).toOption()},nh(!1)).getOr(n)},function(t){return t});r(n,o,t)})}function kn(t){return bn(t,function(t,n){n.cut()})}function Cn(t,n){return xn(t)(n)}function On(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(n.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+e.length+" arguments");var o={};return Sh(n,function(t,n){o[t]=nh(e[n])}),o}}function Tn(t){return t.slice(0).sort()}function En(n,t){if(!gh(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");Sh(t,function(t){if(!dh(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.")})}function Dn(r,i){var e,u=r.concat(i);if(0===u.length)throw new Error("You must specify at least one required or optional field.");return En("required",r),En("optional",i),k(e=Tn(u),function(t,n){return n<e.length-1&&t===e[n+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}),function(n){var e=Oh(n);T(r,function(t){return wh(e,t)})||function(t,n){throw new Error("All required keys ("+Tn(r).join(", ")+") were not specified. Specified keys were: "+Tn(n).join(", ")+".")}(0,e);var t=x(e,function(t){return!wh(u,t)});0<t.length&&function(){throw new Error("Unsupported keys for object: "+Tn(t).join(", "))}();var o={};return Sh(r,function(t){o[t]=nh(n[t])}),Sh(i,function(t){o[t]=nh(Object.prototype.hasOwnProperty.call(n,t)?ch.some(n[t]):ch.none())}),o}}function Bn(t){return Hv.fromDom(t.dom().ownerDocument)}function An(t){return Hv.fromDom(t.dom().ownerDocument.documentElement)}function _n(t){return Hv.fromDom(t.dom().ownerDocument.defaultView)}function Mn(t){return ch.from(t.dom().parentNode).map(Hv.fromDom)}function Fn(t){return ch.from(t.dom().offsetParent).map(Hv.fromDom)}function In(t){return y(t.dom().childNodes,Hv.fromDom)}function Rn(t,n){var e=t.dom().childNodes;return ch.from(e[n]).map(Hv.fromDom)}function Vn(n,e){Mn(n).each(function(t){t.dom().insertBefore(e.dom(),n.dom())})}function Hn(t,n){var e;(e=t,ch.from(e.dom().nextSibling).map(Hv.fromDom)).fold(function(){Mn(t).each(function(t){py(t,n)})},function(t){Vn(t,n)})}function Nn(n,e){Rn(n,0).fold(function(){py(n,e)},function(t){n.dom().insertBefore(e.dom(),t.dom())})}function Pn(n,t){Sh(t,function(t){py(n,t)})}function zn(t){t.dom().textContent="",Sh(In(t),function(t){hy(t)})}function Ln(t){var n,e=In(t);0<e.length&&(n=t,Sh(e,function(t){Vn(n,t)})),hy(t)}function jn(t){return t.dom().innerHTML}function Un(t,n){var e,o,r=Bn(t).dom(),i=Hv.fromDom(r.createDocumentFragment());Pn(i,(e=n,(o=(r||w.document).createElement("div")).innerHTML=e,In(Hv.fromDom(o)))),zn(t),py(t,i)}function Wn(t,n,e){if(!(dh(e)||ph(e)||vh(e)))throw w.console.error("Invalid call to Attr.set. Key ",n,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,e+"")}function Gn(t,n,e){Wn(t.dom(),n,e)}function Xn(t,n){var e=t.dom().getAttribute(n);return null===e?undefined:e}function Yn(t,n){var e=t.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(n)}function qn(t,n){t.dom().removeAttribute(n)}function Kn(t){return n=t,e=!1,Hv.fromDom(n.dom().cloneNode(e));var n,e}function Jn(t){return n=Kn(t),e=Hv.fromTag("div"),o=Hv.fromDom(n.dom().cloneNode(!0)),py(e,o),jn(e);var n,e,o}function $n(t){return Jn(t)}function Qn(t){var n=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++yy+String(n)}function Zn(t){return Qn(t)}function te(n){function t(t){return function(){throw new Error("The component must be in a context to send: "+t+"\n"+$n(n().element())+" is not in context.")}}return{debugInfo:nh("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:nh(!1)}}function ne(t,n){var e=t.toString(),o=e.indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:n,parameters:Dy(i)}},t}function ee(t){return j(By,t)}function oe(o){return t=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return o.apply(undefined,[t.getApis()].concat([t].concat(n)))},n=o.toString(),e=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,e-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Dy(i.slice(1))}},t;var t,n,e,r,i}function re(t,r){var i={};return Eh(t,function(t,o){Eh(t,function(t,n){var e=L(n,[])(i);i[n]=e.concat([r(o,t)])})}),i}function ie(t){return{classes:t.classes!==undefined?t.classes:[],attributes:t.attributes!==undefined?t.attributes:{},styles:t.styles!==undefined?t.styles:{}}}function ue(t){return t.cHandler}function ae(t,n){return{name:nh(t),handler:nh(n)}}function ce(t,n,e){var o,r;return re(ih(ih({},e),(o=t,r={},Sh(n,function(t){r[t.name()]=t.handlers(o)}),r)),ae)}function se(t){var n,i=hh(n=t)?{can:nh(!0),abort:nh(!1),run:n}:n;return function(t,n){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];var r=[t,n].concat(e);i.abort.apply(undefined,r)?n.stop():i.can.apply(undefined,r)&&i.run.apply(undefined,r)}}function fe(o,t,n){var e,r,i=t[n];return i?function(u,a,t,c){var n=o.slice(0);try{var e=n.sort(function(t,n){var e=t[a](),o=n[a](),r=c.indexOf(e),i=c.indexOf(o);if(-1===r)throw new Error("The ordering for "+u+" does not have an entry for "+e+".\nOrder specified: "+JSON.stringify(c,null,2));if(-1===i)throw new Error("The ordering for "+u+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(c,null,2));return r<i?-1:i<r?1:0});return lh.value(e)}catch(i){return lh.error([i])}}("Event: "+n,"name",0,i).map(function(t){return tn(y(t,function(t){return t.handler()}))}):(e=n,r=o,lh.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(y(r,function(t){return t.name()}),null,2)]))}function le(t){return ft("custom.definition",xv([Cv("dom","dom",Vh(),xv([vt("tag"),_t("styles",{}),_t("classes",[]),_t("attributes",{}),Ot("value"),Ot("innerHtml")])),vt("components"),vt("uid"),_t("events",{}),_t("apis",{}),Cv("eventOrder","eventOrder",(n={"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing","item-events","tooltipping"],mousedown:["focusing","alloy.base.behaviour","item-type-events"],touchstart:["focusing","alloy.base.behaviour","item-type-events"],mouseover:["item-type-events","tooltipping"]},Rh.mergeWithThunk(nh(n))),Dv()),Ot("domModification")]),t);var n}function de(t,n){var e=Xn(t,n);return e===undefined||""===e?[]:e.split(" ")}function me(t){return t.dom().classList!==undefined}function ge(t,n){return o=n,Gn(t,e="class",de(t,e).concat([o]).join(" ")),!0;var e,o}function pe(t,n){return r=n,0<(i=x(de(e=t,o="class"),function(t){return t!==r})).length?Gn(e,o,i.join(" ")):qn(e,o),!1;var e,o,r,i}function he(t,n){me(t)?t.dom().classList.add(n):ge(t,n)}function ve(t){0===(me(t)?t.dom().classList:de(t,"class")).length&&qn(t,"class")}function be(t,n){me(t)?t.dom().classList.remove(n):pe(t,n),ve(t)}function ye(t,n){return me(t)&&t.dom().classList.contains(n)}function xe(n,t){Sh(t,function(t){he(n,t)})}function we(n,t){Sh(t,function(t){be(n,t)})}function Se(t){return t.style!==undefined&&hh(t.style.getPropertyValue)}function ke(t,n,e){if(!dh(e))throw w.console.error("Invalid call to CSS.set. Property ",n,":: Value ",e,":: Element ",t),new Error("CSS value must be a string: "+e);Se(t)&&t.style.setProperty(n,e)}function Ce(t,n){Se(t)&&t.style.removeProperty(n)}function Oe(t,n,e){ke(t.dom(),n,e)}function Te(t,n){var e=t.dom();Eh(n,function(t,n){ke(e,n,t)})}function Ee(t,n){var e=t.dom(),o=w.window.getComputedStyle(e).getPropertyValue(n),r=""!==o||ln(t)?o:Iy(e,n);return null===r?undefined:r}function De(t,n){var e=t.dom(),o=Iy(e,n);return ch.from(o).filter(function(t){return 0<t.length})}function Be(t,n,e){var o=Hv.fromTag(t);return Oe(o,n,e),De(o,n).isSome()}function Ae(t,n){Ce(t.dom(),n),Yn(t,"style")&&""===Xn(t,"style").replace(/^\s+|\s+$/g,"")&&qn(t,"style")}function _e(t){return t.dom().offsetWidth}function Me(t){return t.dom().value}function Fe(t,n){if(n===undefined)throw new Error("Value.set was undefined");t.dom().value=n}function Ie(t){var n,e,o,r=Hv.fromTag(t.tag);n=r,e=t.attributes,o=n.dom(),Eh(e,function(t,n){Wn(o,n,t)}),xe(r,t.classes),Te(r,t.styles),t.innerHtml.each(function(t){return Un(r,t)});var i=t.domChildren;return Pn(r,i),t.value.each(function(t){Fe(r,t)}),t.uid,Cy(r,t.uid),r}function Re(t,n){return e=t,r=y(o=n,function(t){return At(t.name(),[vt("config"),_t("state",Ay)])}),{list:o,data:V(ft("component.behaviours",xv(r),e.behaviours).fold(function(t){throw new Error(Ev(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))},function(t){return t}),function(t){var n=t.map(function(t){return{config:t.config,state:t.state.init(t.config)}});return function(){return n}})};var e,o,r}function Ve(t){var n,e;return Re(t,(n=t,e=L("behaviours",{})(n),y(x(Oh(e),function(t){return e[t]!==undefined}),function(t){return e[t].me})))}function He(t,n,e){var o,r,i,u=ih(ih({},(o=t).dom),{uid:o.uid,domChildren:y(o.components,function(t){return t.element()})}),a=t.domModification.fold(function(){return ie({})},ie),c={"alloy.base.modification":a};return r=u,i=0<n.length?function(n,t,e,o){function r(t){return p(t,function(t,n){return ih(ih({},n.modification),t)},{})}var i=ih({},c);Sh(e,function(t){i[t.name()]=t.exhibit(n,o)});var u=re(i,function(t,n){return{name:t,modification:n}});return ie({classes:p(u.classes,function(t,n){return n.modification.concat(t)},[]),attributes:r(u.attributes),styles:r(u.styles)})}(e,0,n,u):a,ih(ih({},r),{attributes:ih(ih({},r.attributes),i.attributes),styles:ih(ih({},r.styles),i.styles),classes:r.classes.concat(i.classes)})}function Ne(t,n,e){var o,r,i,u={"alloy.base.behaviour":t.events};return(o=e,r=t.eventOrder,i=ce(o,n,u),Fy(i,r)).getOrDie()}function Pe(t){var n,e=Ty(t),o=e.events,r=h(e,["events"]),i=(n=r,y(L("components",[])(n),Hy)),u=ih(ih({},r),{events:ih(ih({},by),o),components:i});return lh.value(function(e){function t(){return f}var n=Rv(Ey),o=lt(le(e)),r=Ve(e),i=r.list,u=r.data,a=Ie(He(o,i,u)),c=Ne(o,i,u),s=Rv(o.components),f={getSystem:n.get,config:function(t){var n=u;return(hh(n[t.name()])?n[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:function(t){return hh(u[t.name()])},spec:nh(e),readState:function(t){return u[t]().map(function(t){return t.state.readState()}).getOr("not enabled")},getApis:function(){return o.apis},connect:function(t){n.set(t)},disconnect:function(){n.set(te(t))},element:nh(a),syncComponents:function(){var t=O(In(a),function(t){return n.get().getByDom(t).fold(function(){return[]},function(t){return[t]})});s.set(t)},components:s.get,events:nh(c)};return f}(u))}function ze(t){var n=Hv.fromText(t);return Ry({element:n})}function Le(o,r){function t(t){var n=r(t);if(n<=0||null===n){var e=Ee(t,o);return parseFloat(e)||0}return n}function i(r,t){return S(t,function(t,n){var e=Ee(r,n),o=e===undefined?0:parseInt(e,10);return isNaN(o)?t:t+o},0)}return{set:function(t,n){if(!vh(n)&&!n.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+n);var e=t.dom();Se(e)&&(e.style[o]=n+"px")},get:t,getOuter:t,aggregate:i,max:function(t,n,e){var o=i(t,e);return o<n?n-o:0}}}function je(t){return Py.get(t)}function Ue(t){return Py.getOuter(t)}function We(t,n){return t!==undefined?t:n!==undefined?n:0}function Ge(t){var n=t.dom().ownerDocument,e=n.body,o=n.defaultView,r=n.documentElement;if(e===t.dom())return Ly(e.offsetLeft,e.offsetTop);var i=We(o.pageYOffset,r.scrollTop),u=We(o.pageXOffset,r.scrollLeft),a=We(r.clientTop,e.clientTop),c=We(r.clientLeft,e.clientLeft);return jy(t).translate(u-c,i-a)}function Xe(t){return Uy.get(t)}function Ye(t){return Uy.getOuter(t)}function qe(t){var n=t!==undefined?t.dom():w.document,e=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop;return Ly(e,o)}function Ke(t,n,e,o){return{x:nh(t),y:nh(n),width:nh(e),height:nh(o),right:nh(t+e),bottom:nh(n+o)}}function Je(t){var n=t===undefined?w.window:t,e=n.document,o=qe(Hv.fromDom(e)),r=n.visualViewport;if(r!==undefined)return Ke(Math.max(r.pageLeft,o.left()),Math.max(r.pageTop,o.top()),r.width,r.height);var i=e.documentElement,u=i.clientWidth,a=i.clientHeight;return Ke(o.left(),o.top(),u,a)}function $e(o){var t,n,e,r,i=qe(Hv.fromDom(w.document));return(t=o,n=Gy,e=n.owner(t),r=Wy(n,e),ch.some(r)).fold(m(Ge,o),function(t){var n=jy(o),e=p(t,function(t,n){var e=jy(n);return{left:t.left+e.left(),top:t.top+e.top()}},{left:0,top:0});return Ly(e.left+n.left()+i.left(),e.top+n.top()+i.top())})}function Qe(t,n,e,o){return{x:nh(t),y:nh(n),width:nh(e),height:nh(o),right:nh(t+e),bottom:nh(n+o)}}function Ze(t){var n=Ge(t),e=Ye(t),o=Ue(t);return Qe(n.left(),n.top(),e,o)}function to(t){var n=$e(t),e=Ye(t),o=Ue(t);return Qe(n.left(),n.top(),e,o)}function no(){return Je(w.window)}function eo(t,n,e){return dn(t,function(t){return qt(t,n)},e)}function oo(t,n){return e=n,Kt(r=(o=t)===undefined?w.document:o.dom())?ch.none():ch.from(r.querySelector(e)).map(Hv.fromDom);var e,o,r}function ro(t,n,e){return cn(qt,eo,t,n,e)}function io(){var n=Qn("aria-owns");return{id:nh(n),link:function(t){Gn(t,"aria-owns",n)},unlink:function(t){qn(t,"aria-owns")}}}function uo(n,t){return mn(t,function(t){if(!uy(t))return!1;var n=Xn(t,"id");return n!==undefined&&-1<n.indexOf("aria-owns")}).bind(function(t){var n=Xn(t,"id");return oo(Bn(t),'[aria-owns="'+n+'"]')}).exists(function(t){return qy(n,t)})}function ao(t){for(var n=[],e=function(t){n.push(t)},o=0;o<t.length;o++)t[o].each(e);return n}function co(t,n){for(var e=0;e<t.length;e++){var o=n(t[e],e);if(o.isSome())return o}return ch.none()}function so(n,t,e){switch(Lh(Qy.get(),n).orThunk(function(){return co(Oh(Qy.get()),function(t){return-1<n.indexOf(t)?ch.some(Qy.get()[t]):ch.none()})}).getOr(ry.NORMAL)){case ry.NORMAL:return e(tx());case ry.LOGGING:var o=(i=n,u=t,a=[],c=(new Date).getTime(),{logEventCut:function(t,n,e){a.push({outcome:"cut",target:n,purpose:e})},logEventStopped:function(t,n,e){a.push({outcome:"stopped",target:n,purpose:e})},logNoParent:function(t,n,e){a.push({outcome:"no-parent",target:n,purpose:e})},logEventNoHandlers:function(t,n){a.push({outcome:"no-handlers-left",target:n})},logEventResponse:function(t,n,e){a.push({outcome:"response",purpose:e,target:n})},write:function(){var t=(new Date).getTime();wh(["mousemove","mouseover","mouseout",Pb()],i)||w.console.log(i,{event:i,time:t-c,target:u.dom(),sequence:y(a,function(t){return wh(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+$n(t.target)+")":t.outcome})})}}),r=e(o);return o.write(),r;case ry.STOP:return!0}var i,u,a,c}function fo(t,n,e){return so(t,n,e)}function lo(){return St("markers",[vt("backgroundMenu")].concat(nx()).concat(ex()))}function mo(t){return St("markers",y(t,vt))}function go(t,n,e){return(o=new Error).stack!==undefined&&k(o.stack.split("\n"),function(n){return 0<n.indexOf("alloy")&&!f(Zy,function(t){return-1<n.indexOf(t)})}).getOr(Ky),Cv(n,n,e,ct(function(e){return lh.value(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(undefined,t)})}));var o}function po(t){return go(0,t,I(Q))}function ho(t){return go(0,t,I(ch.none))}function vo(t){return go(0,t,Vh())}function bo(t){return go(0,t,Vh())}function yo(t,n){return Pt(t,nh(n))}function xo(t){return Pt(t,l)}function wo(t){return t.x()}function So(t,n){return t.x()+t.width()/2-n.width()/2}function ko(t,n){return t.x()+t.width()-n.width()}function Co(t,n){return t.y()-n.height()}function Oo(t){return t.y()+t.height()}function To(t,n){return t.y()+t.height()/2-n.height()/2}function Eo(t,n,e){return ux(wo(t),Oo(t),e.southeast(),cx(),"layout-se")}function Do(t,n,e){return ux(ko(t,n),Oo(t),e.southwest(),sx(),"layout-sw")}function Bo(t,n,e){return ux(wo(t),Co(t,n),e.northeast(),fx(),"layout-ne")}function Ao(t,n,e){return ux(ko(t,n),Co(t,n),e.northwest(),lx(),"layout-nw")}function _o(t,n,e){return ux((o=t).x()+o.width(),To(t,n),e.east(),gx(),"layout-e");var o}function Mo(t,n,e){return ux((o=n,t.x()-o.width()),To(t,n),e.west(),px(),"layout-w");var o}function Fo(){return[Eo,Do,Bo,Ao,vx,hx]}function Io(){return[Do,Eo,Ao,Bo,vx,hx]}function Ro(n,e,o){return my(function(t){o(t,n,e)})}function Vo(t,n,e,o,r,i){var u=ot(t),a=At(n,[Tt("config",ot(t))]);return bx(u,a,n,e,o,r,i)}function Ho(r,i,u){return t=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=[e].concat(t);return e.config({name:nh(r)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+u)},function(t){var n=Array.prototype.slice.call(o,1);return i.apply(undefined,[e,t.config,t.state].concat(n))})},n=u,e=i.toString(),o=e.indexOf(")")+1,a=e.indexOf("("),c=e.substring(a+1,o-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:n,parameters:Dy(c.slice(0,1).concat(c.slice(3)))}},t;var t,n,e,o,a,c}function No(t){return{key:t,value:undefined}}function Po(t){return U(t)}function zo(t){var n=dt("Creating behaviour: "+t.name,yx,t);return Vo(n.fields,n.name,n.active,n.apis,n.extra,n.state)}function Lo(t){var n,e,o,r,i,u,a,c,s=dt("Creating behaviour: "+t.name,xx,t);return n=gt(s.branchKey,s.branches),e=s.name,o=s.active,r=s.apis,i=s.extra,u=s.state,c=At(e,[Tt("config",a=n)]),bx(a,c,e,o,r,i,u)}function jo(t){t.dom().focus()}function Uo(t){var n=t!==undefined?t.dom():w.document;return ch.from(n.activeElement).map(Hv.fromDom)}function Wo(n){return Uo(Bn(n)).filter(function(t){return n.dom().contains(t.dom())})}function Go(t,e){var o=Bn(e),n=Uo(o).bind(function(n){function t(t){return $t(n,t)}return t(e)?ch.some(e):gn(e,t)}),r=t(e);return n.each(function(n){Uo(o).filter(function(t){return $t(t,n)}).fold(function(){jo(n)},Q)}),r}function Xo(t,n,e){function r(t){return Lh(e,t).getOr([])}function o(t,n,e){var o=D(Ox,e);return{offset:function(){return Ly(t,n)},classesOn:function(){return O(e,r)},classesOff:function(){return O(o,r)}}}return{southeast:function(){return o(-t,n,["top","alignLeft"])},southwest:function(){return o(t,n,["top","alignRight"])},south:function(){return o(-t/2,n,["top","alignCentre"])},northeast:function(){return o(-t,-n,["bottom","alignLeft"])},northwest:function(){return o(t,-n,["bottom","alignRight"])},north:function(){return o(-t/2,-n,["bottom","alignCentre"])},east:function(){return o(t,-n/2,["valignCentre","left"])},west:function(){return o(-t,-n/2,["valignCentre","right"])},innerNorthwest:function(){return o(-t,n,["top","alignRight"])},innerNortheast:function(){return o(t,n,["top","alignLeft"])},innerNorth:function(){return o(-t/2,n,["top","alignCentre"])},innerSouthwest:function(){return o(-t,-n,["bottom","alignRight"])},innerSoutheast:function(){return o(t,-n,["bottom","alignLeft"])},innerSouth:function(){return o(-t/2,-n,["bottom","alignCentre"])},innerWest:function(){return o(t,-n/2,["valignCentre","right"])},innerEast:function(){return o(-t,-n/2,["valignCentre","left"])}}}function Yo(){return Xo(0,0,{})}function qo(t,n,e,o,r,i){var u,a,c,s,f,l,d,m,g=n.x()-e,p=n.y()-o,h=r-(g+n.width()),v=i-(p+n.height()),b=ch.some(g),y=ch.some(p),x=ch.some(h),w=ch.some(v),S=ch.none();return u=function(){return Ex(t,b,y,S,S)},a=function(){return Ex(t,S,y,x,S)},c=function(){return Ex(t,b,S,S,w)},s=function(){return Ex(t,S,S,x,w)},f=function(){return Ex(t,b,y,S,S)},l=function(){return Ex(t,b,S,S,w)},d=function(){return Ex(t,b,y,S,S)},m=function(){return Ex(t,S,y,x,S)},n.direction().fold(u,a,c,s,f,l,d,m)}function Ko(t,n){var e=m($e,n),o=t.fold(e,e,function(){var t=qe()
;return $e(n).translate(-t.left(),-t.top())}),r=Ye(n),i=Ue(n);return Qe(o.left(),o.top(),r,i)}function Jo(t){return t}function $o(n,e){return function(t){return"rtl"===Mx(t)?e:n}}function Qo(){return At("layouts",[vt("onLtr"),vt("onRtl")])}function Zo(n,t,e,o){return $o(t.layouts.map(function(t){return t.onLtr(n)}).getOr(e),t.layouts.map(function(t){return t.onRtl(n)}).getOr(o))(n)}function tr(t,n,e){var o,r,i=t.document.createRange();return r=i,n.fold(function(t){r.setStartBefore(t.dom())},function(t,n){r.setStart(t.dom(),n)},function(t){r.setStartAfter(t.dom())}),o=i,e.fold(function(t){o.setEndBefore(t.dom())},function(t,n){o.setEnd(t.dom(),n)},function(t){o.setEndAfter(t.dom())}),i}function nr(t,n,e,o,r){var i=t.document.createRange();return i.setStart(n.dom(),e),i.setEnd(o.dom(),r),i}function er(t){return{left:nh(t.left),top:nh(t.top),right:nh(t.right),bottom:nh(t.bottom),width:nh(t.width),height:nh(t.height)}}function or(t,n,e){return n(Hv.fromDom(e.startContainer),e.startOffset,Hv.fromDom(e.endContainer),e.endOffset)}function rr(t,n){return r=t,e=n.match({domRange:function(t){return{ltr:nh(t),rtl:ch.none}},relative:function(t,n){return{ltr:F(function(){return tr(r,t,n)}),rtl:F(function(){return ch.some(tr(r,n,t))})}},exact:function(t,n,e,o){return{ltr:F(function(){return nr(r,t,n,e,o)}),rtl:F(function(){return ch.some(nr(r,e,o,t,n))})}}}),(o=e.ltr()).collapsed?e.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return zx.rtl(Hv.fromDom(t.endContainer),t.endOffset,Hv.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return or(0,zx.ltr,o)}):or(0,zx.ltr,o);var e,o,r}function ir(t){return Lx.get(t)}function ur(t){return Lx.getOption(t)}function ar(t){return ur(t).filter(function(t){return 0!==t.trim().length||-1<t.indexOf("\xa0")}).isSome()||wh(jx,sn(t))}function cr(t){return Ux(t,ar)}function sr(t,n){return Jt(n,t)}function fr(t,n,e,o){var r,i,u,a,c,s=(i=n,u=e,a=o,(c=Bn(r=t).dom().createRange()).setStart(r.dom(),i),c.setEnd(u.dom(),a),c),f=$t(t,e)&&n===o;return s.collapsed&&!f}function lr(t){var n=Hv.fromDom(t.anchorNode),e=Hv.fromDom(t.focusNode);return fr(n,t.anchorOffset,e,t.focusOffset)?ch.some(Rx.create(n,t.anchorOffset,e,t.focusOffset)):function(t){if(0<t.rangeCount){var n=t.getRangeAt(0),e=t.getRangeAt(t.rangeCount-1);return ch.some(Rx.create(Hv.fromDom(n.startContainer),n.startOffset,Hv.fromDom(e.endContainer),e.endOffset))}return ch.none()}(t)}function dr(t,n){return e=rr(i=t,n).match({ltr:function(t,n,e,o){var r=i.document.createRange();return r.setStart(t.dom(),n),r.setEnd(e.dom(),o),r},rtl:function(t,n,e,o){var r=i.document.createRange();return r.setStart(e.dom(),o),r.setEnd(t.dom(),n),r}}),o=e.getClientRects(),0<(r=0<o.length?o[0]:e.getBoundingClientRect()).width||0<r.height?ch.some(r).map(er):ch.none();var e,o,r,i}function mr(t){return t.fold(function(t){return t},function(t,n,e){return t.translate(-n,-e)})}function gr(t){return t.fold(function(t){return t},function(t){return t})}function pr(t){return S(t,function(t,n){return t.translate(n.left(),n.top())},Ly(0,0))}function hr(t){return pr(y(t,gr))}function vr(t,n,e){var o,r,i=qe(Bn(t.element())),u=(o=t,r=_n(e.root).dom(),ch.from(r.frameElement).map(Hv.fromDom).filter(function(t){return $t(Bn(t),Bn(o.element()))}).map(Ge)).getOr(i);return Yx(u,i.left(),i.top())}function br(t,n){return ay(t)?Jx(t,n):function(t,n){var e=In(t);if(0===e.length)return Wx(t,n);if(n<e.length)return Wx(e[n],0);var o=e[e.length-1],r=ay(o)?ir(o).length:In(o).length;return Wx(o,r)}(t,n)}function yr(n,t){return t.getSelection.getOrThunk(function(){return function(){return t=n,ch.from(t.getSelection()).filter(function(t){return 0<t.rangeCount}).bind(lr);var t}})().map(function(t){var n=br(t.start(),t.soffset()),e=br(t.finish(),t.foffset());return Px.range(n.element(),n.offset(),e.element(),e.offset())})}function xr(t){return t.x()+t.width()}function wr(t,n){return t.x()-n.width()}function Sr(t,n){return t.y()-n.height()+t.height()}function kr(t){return t.y()}function Cr(t,n,e){return ux(xr(t),kr(t),e.southeast(),cx(),"link-layout-se")}function Or(t,n,e){return ux(wr(t,n),kr(t),e.southwest(),sx(),"link-layout-sw")}function Tr(t,n,e){return ux(xr(t),Sr(t,n),e.northeast(),fx(),"link-layout-ne")}function Er(t,n,e){return ux(wr(t,n),Sr(t,n),e.northwest(),lx(),"link-layout-nw")}function Dr(t,n,e,o){var r=t+n;return o<r?e:r<e?o:r}function Br(t,n,e){return t<=n?n:e<=t?e:t}function Ar(t,n,e,o){var r,i,u,a,c,s,f,l,d,m,g,p,h,v,b,y,x,w,S,k,C,O,T,E=t.x(),D=t.y(),B=t.bubble().offset().left(),A=t.bubble().offset().top(),_=o.y(),M=o.bottom(),F=o.x(),I=o.right(),R=D+A,V=(d=E+B,m=R,g=n,p=e,v=(h=o).x(),b=h.y(),y=h.width(),x=h.height(),S=b<=m,k=(w=v<=d)&&S,C=d+g<=v+y&&m+p<=b+x,O=Math.abs(Math.min(g,w?v+y-d:v-(d+g))),T=Math.abs(Math.min(p,S?b+x-m:b-(m+p))),{originInBounds:k,sizeInBounds:C,limitX:Br(d,h.x(),h.right()),limitY:Br(m,h.y(),h.bottom()),deltaW:O,deltaH:T}),H=V.originInBounds,N=V.sizeInBounds,P=V.limitX,z=V.limitY,L=V.deltaW,j=V.deltaH,U=nh(z+j-_),W=nh(M-z),G=(c=t.direction(),f=s=W,l=U,c.fold(s,s,l,l,s,l,f,f)),X=nh(P+L-F),Y=nh(I-P),q=(r=t.direction(),u=i=Y,a=X,r.fold(i,a,i,a,u,u,i,a)),K=Tx({x:P,y:z,width:L,height:j,maxHeight:G,maxWidth:q,direction:t.direction(),classes:{on:t.bubble().classesOn(),off:t.bubble().classesOff()},label:t.label(),candidateYforTest:R});return H&&N?Zx.fit(K):Zx.nofit(K,L,j)}function _r(t,n,e,o){Ae(n,"max-height"),Ae(n,"max-width");var r,i={width:nh(Ye(r=n)),height:nh(Ue(r))};return function(t,n,e,u,a){function o(t,o,r,i){return Ar(t(n,e,u),c,s,a).fold(Zx.fit,function(t,n,e){return i<e||r<n?Zx.nofit(t,n,e):Zx.nofit(o,r,i)})}var c=e.width(),s=e.height();return S(t,function(t,n){var e=m(o,n);return t.fold(Zx.fit,e)},Zx.nofit(Tx({x:n.x(),y:n.y(),width:e.width(),height:e.height(),maxHeight:e.height(),maxWidth:e.width(),direction:cx(),classes:{on:[],off:[]},label:"none",candidateYforTest:n.y()}),-1,-1)).fold(l,l)}(o.preference(),t,i,e,o.bounds())}function Mr(t,n,e){function o(t){return t+"px"}var r,i,u,a,c,s=(r=e.origin(),i=n,r.fold(function(){return Ex("absolute",ch.some(i.x()),ch.some(i.y()),ch.none(),ch.none())},function(t,n,e,o){return qo("absolute",i,t,n,e,o)},function(t,n,e,o){return qo("fixed",i,t,n,e,o)}));u=t,a={position:ch.some(s.position()),left:s.left().map(o),top:s.top().map(o),right:s.right().map(o),bottom:s.bottom().map(o)},c=u.dom(),Eh(a,function(t,n){t.fold(function(){Ce(c,n)},function(t){ke(c,n,t)})})}function Fr(t,n){var e,o;e=t,o=Math.floor(n),Oe(e,"max-height",Py.max(e,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"])+"px")}function Ir(t,n,e){return t[n]===undefined?e:t[n]}function Rr(t,n,e,o,r,i){var u,a=Ir(i,"maxHeightFunction",tw()),c=Ir(i,"maxWidthFunction",Q),s=t.anchorBox(),f=t.origin(),l=ew({bounds:(u=f,r.fold(function(){return u.fold(no,no,Qe)},function(e){return u.fold(e,e,function(){var t=e(),n=Bx(u,t.x(),t.y());return Qe(n.left(),n.top(),t.width(),t.height())})})),origin:f,preference:o,maxHeightFunction:a,maxWidthFunction:c});ow(s,n,e,l)}function Vr(t,n,e,o,r){var i;Rr((i=e.anchorBox,Qx(i,n)),r.element(),e.bubble,e.layouts,o,e.overrides)}function Hr(t,n){py(t.element(),n.element())}function Nr(n,t){var e,o=n.components();Sh((e=n).components(),function(t){return hy(t.element())}),zn(e.element()),e.syncComponents();var r=D(o,t);Sh(r,function(t){cw(t),n.getSystem().removeFromWorld(t)}),Sh(t,function(t){t.getSystem().isConnected()?Hr(n,t):(n.getSystem().addToWorld(t),Hr(n,t),ln(n.element())&&sw(t)),n.syncComponents()})}function Pr(t,n){fw(t,n,py)}function zr(t){cw(t),hy(t.element()),t.getSystem().removeFromWorld(t)}function Lr(n){var t=Mn(n.element()).bind(function(t){return n.getSystem().getByDom(t).toOption()});zr(n),t.each(function(t){t.syncComponents()})}function jr(t){var n=t.components();Sh(n,zr),zn(t.element()),t.syncComponents()}function Ur(t,n){lw(t,n,py)}function Wr(n){var t=In(n.element());Sh(t,function(t){n.getByDom(t).each(cw)}),hy(n.element())}function Gr(t,n,e,o){e.get().each(function(){jr(t)}),Pr(n.getAttachPoint(t),t);var r=t.getSystem().build(o);return Pr(t,r),e.set(r),r}function Xr(t,n,e,o){var r=Gr(t,n,e,o);return n.onOpen(t,r),r}function Yr(n,e,o){o.get().each(function(t){jr(n),Lr(n),e.onClose(n,t),o.clear()})}function qr(t,n,e){return e.isOpen()}function Kr(t){var n,e=dt("Dismissal",xw,t);return(n={})[vw()]={schema:ot([vt("target")]),onReceive:function(n,t){hw.isOpen(n)&&(hw.isPartOf(n,t.target)||e.isExtraPart(n,t.target)||e.fireEventInstead.fold(function(){return hw.close(n)},function(t){return en(n,t.event)}))}},n}function Jr(t){var n,e=dt("Reposition",ww,t);return(n={})[bw()]={onReceive:function(n){hw.isOpen(n)&&e.fireEventInstead.fold(function(){return e.doReposition(n)},function(t){return en(n,t.event)})}},n}function $r(t,n,e){n.store.manager.onLoad(t,n,e)}function Qr(t,n,e){n.store.manager.onUnload(t,n,e)}function Zr(){var t=Rv(null);return _y({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})}function ti(){var i=Rv({}),u=Rv({});return _y({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:u.get()}},lookup:function(t){return Lh(i.get(),t).orThunk(function(){return Lh(u.get(),t)})},update:function(t){var n=i.get(),e=u.get(),o={},r={};Sh(t,function(n){o[n.value]=n,Lh(n,"meta").each(function(t){Lh(t,"text").each(function(t){r[t]=n})})}),i.set(ih(ih({},n),o)),u.set(ih(ih({},e),r))},clear:function(){i.set({}),u.set({})}})}function ni(t,n,e,o){var r=n.store;e.update([o]),r.setValue(t,o),n.onSetValue(t,o)}function ei(o,t){return Nt(o,{},y(t,function(t){return n=t.name(),e="Cannot configure "+t.name()+" for "+o,Cv(n,n,Hh(),et(function(){return fv("The field: "+n+" is forbidden. "+e)}));var n,e}).concat([Pt("dump",l)]))}function oi(t){return t.dump}function ri(t,n){return ih(ih({},t.dump),Po(n))}function ii(t,n,e,o){return e.uiType===Aw?(i=e,u=o,(r=t).exists(function(t){return t!==i.owner})?_w.single(!0,nh(i)):Lh(u,i.name).fold(function(){throw new Error("Unknown placeholder component: "+i.name+"\nKnown: ["+Oh(u)+"]\nNamespace: "+r.getOr("none")+"\nSpec: "+JSON.stringify(i,null,2))},function(t){return t.replace()})):_w.single(!1,nh(e));var r,i,u}function ui(n,e,t,o){var r,i,u,a=V(o,function(t,n){return o=t,r=!1,{name:nh(e=n),required:function(){return o.fold(function(t){return t},function(t){return t})},used:function(){return r},replace:function(){if(!0===r)throw new Error("Trying to use the same placeholder more than once: "+e);return r=!0,o}};var e,o,r}),c=(r=n,i=e,u=a,O(t,function(t){return Mw(r,i,t,u)}));return Eh(a,function(t){if(!1===t.used()&&t.required())throw new Error("Placeholder: "+t.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))}),c}function ai(t){return t.fold(ch.some,ch.none,ch.some,ch.some)}function ci(t){function n(t){return t.name}return t.fold(n,n,n,n)}function si(e,o){return function(t){var n=dt("Converting part type",o,t);return e(n)}}function fi(t,n,e,o){return Fh(n.defaults(t,e,o),e,{uid:t.partUids[n.name]},n.overrides(t,e,o))}function li(r,t){var n={};return Sh(t,function(t){ai(t).each(function(e){var o=tS(r,e.pname);n[e.name]=function(t){var n=dt("Part: "+e.name+" in "+r,xv(e.schema),t);return ih(ih({},o),{config:t,validated:n})}})}),n}function di(t,n,e){return{uiType:Rw(),owner:t,name:n,config:e,validated:{}}}function mi(t){return O(t,function(t){return t.fold(ch.none,ch.some,ch.none,ch.none).map(function(t){return St(t.name,t.schema.concat([xo(Qw())]))}).toArray()})}function gi(t){return y(t,ci)}function pi(t,n,e){return o=n,r={},i={},Sh(e,function(t){t.fold(function(o){r[o.pname]=Fw(!0,function(t,n,e){return o.factory.sketch(fi(t,o,n,e))})},function(t){var n=o.parts[t.name];i[t.name]=nh(t.factory.sketch(fi(o,t,n[Qw()]),n))},function(o){r[o.pname]=Fw(!1,function(t,n,e){return o.factory.sketch(fi(t,o,n,e))})},function(o){r[o.pname]=Iw(!0,function(n,t,e){return y(n[o.name],function(t){return o.factory.sketch(Fh(o.defaults(n,t,e),t,o.overrides(n,t)))})})})}),{internals:nh(r),externals:nh(i)};var o,r,i}function hi(t,n,e){return ui(ch.some(t),n,n.components,e)}function vi(t,n,e){var o=n.partUids[e];return t.getSystem().getByUid(o).toOption()}function bi(t,n,e){return vi(t,n,e).getOrDie("Could not find part: "+e)}function yi(t,n,e){var o={},r=n.partUids,i=t.getSystem();return Sh(e,function(t){o[t]=nh(i.getByUid(r[t]))}),o}function xi(t,n){var e=t.getSystem();return V(n.partUids,function(t){return nh(e.getByUid(t))})}function wi(t){return Oh(t.partUids)}function Si(t,n,e){var o={},r=n.partUids,i=t.getSystem();return Sh(e,function(t){o[t]=nh(i.getByUid(r[t]).getOrDie())}),o}function ki(n,t){return U(y(gi(t),function(t){return{key:t,value:n+"-"+t}}))}function Ci(n){return Cv("partUids","partUids",Ph(function(t){return ki(t.uid,n)}),Dv())}function Oi(t,n,e,o,r){var i,u;return dt(t+" [SpecSchema]",ot((u=r,(0<(i=o).length?[St("parts",i)]:[]).concat([vt("uid"),_t("dom",{}),_t("components",[]),xo("originalSpec"),_t("debug.sketcher",{})]).concat(u)).concat(n)),e)}function Ti(t,n,e,o,r){var i=eS(r),u=Oi(t,n,i,mi(e),[Ci(e)]),a=pi(0,u,e);return o(u,hi(t,u,a.internals()),i,a.externals())}function Ei(t){var i=dt("Sketcher for "+t.name,oS,t),n=V(i.apis,oe),e=V(i.extraApis,function(t,n){return ne(t,n)});return ih(ih({name:nh(i.name),partFields:nh([]),configFields:nh(i.configFields),sketch:function(t){return n=i.name,e=i.configFields,o=i.factory,r=eS(t),o(Oi(n,e,r,[],[]),r);var n,e,o,r}},n),e)}function Di(t){var n=dt("Sketcher for "+t.name,rS,t),e=li(n.name,n.partFields),o=V(n.apis,oe),r=V(n.extraApis,function(t,n){return ne(t,n)});return ih(ih({name:nh(n.name),partFields:nh(n.partFields),configFields:nh(n.configFields),sketch:function(t){return Ti(n.name,n.configFields,n.partFields,n.factory,t)},parts:nh(e)},o),r)}function Bi(t){return"input"===sn(t)&&"radio"!==Xn(t,"type")||"textarea"===sn(t)}function Ai(e,o,t,r){var n=sr(e.element(),"."+o.highlightClass);Sh(n,function(n){f(r,function(t){return t.element()===n})||(be(n,o.highlightClass),e.getSystem().getByDom(n).each(function(t){o.onDehighlight(e,t),en(t,Zb())}))})}function _i(t,n,e,o){Ai(t,n,0,[o]),aS(t,n,e,o)||(he(o.element(),n.highlightClass),n.onHighlight(t,o),en(o,Qb()))}function Mi(e,n,t,o){var r=sr(e.element(),"."+n.itemClass);return C(r,function(t){return ye(t,n.highlightClass)}).bind(function(t){var n=Dr(t,o,0,r.length-1);return e.getSystem().getByDom(r[n]).toOption()})}function Fi(t,n,e){var o=E(t.slice(0,n)),r=E(t.slice(n+1));return k(o.concat(r),e)}function Ii(t,n,e){return k(E(t.slice(0,n)),e)}function Ri(t,n,e){var o=t.slice(0,n);return k(t.slice(n+1).concat(o),e)}function Vi(t,n,e){return k(t.slice(n+1),e)}function Hi(e){return function(t){var n=t.raw();return wh(e,n.which)}}function Ni(t){return function(n){return T(t,function(t){return t(n)})}}function Pi(t){return!0===t.raw().shiftKey}function zi(t){return!0===t.raw().ctrlKey}function Li(t,n){return{matches:t,classification:n}}function ji(t,n,e){n.exists(function(n){return e.exists(function(t){return $t(t,n)})})||on(t,qb(),{prevFocus:n,newFocus:e})}function Ui(){function o(t){return Wo(t.element())}return{get:o,set:function(t,n){var e=o(t);t.getSystem().triggerFocus(n,t.element()),ji(t,e,o(t))}}}function Wi(){function r(t){return mS.getHighlighted(t).map(function(t){return t.element()})}return{get:r,set:function(n,t){var e=r(n);n.getSystem().getByDom(t).fold(Q,function(t){mS.highlight(n,t)});var o=r(n);ji(n,e,o)}}}function Gi(t,n,e,o,a){function c(n,e,t,o,r){return(i=t(n,e,o,r),u=e.event(),k(i,function(t){return t.matches(u)}).map(function(t){return t.classification})).bind(function(t){return t(n,e,o,r)});var i,u}var r={schema:function(){return t.concat([_t("focusManager",Ui()),Mt("focusInside","onFocus",ct(function(t){return wh(["onFocus","onEnterOrSpace","onApi"],t)?lh.value(t):lh.error("Invalid value for focusInside")})),yo("handler",r),yo("state",n),yo("sendFocusIn",a)])},processKey:c,toEvents:function(i,u){return pn((i.focusInside!==Jy.OnFocusMode?ch.none():a(i).map(function(e){return bn(Bb(),function(t,n){e(t,i,u),n.stop()})})).toArray().concat([bn(wb(),function(o,r){c(o,r,e,i,u).fold(function(){var n,e,t;n=o,e=r,t=Hi([32].concat([13]))(e.event()),i.focusInside===Jy.OnEnterOrSpaceMode&&t&&Qt(n,e)&&a(i).each(function(t){t(n,i,u),e.stop()})},function(){r.stop()})}),bn(Sb(),function(t,n){c(t,n,o,i,u).each(function(){n.stop()})})]))}};return r}function Xi(t){function i(t,n){return 0<je(t.visibilitySelector.bind(function(t){return ro(n,t)}).getOr(n))}function n(n,e){var o,t;(o=e,t=x(sr(n.element(),o.selector),function(t){return i(o,t)}),ch.from(t[o.firstTabstop])).each(function(t){e.focusManager.set(n,t)})}function a(n,t,e,o,r){return r(t,e,function(t){return i(n=o,e=t)&&n.useTabstopAt(e);var n,e}).fold(function(){return o.cyclic?ch.some(!0):ch.none()},function(t){return o.focusManager.set(n,t),ch.some(!0)})}function o(n,t,e,o){var r,i,u=sr(n.element(),e.selector);return(r=n,i=e,i.focusManager.get(r).bind(function(t){return ro(t,i.selector)})).bind(function(t){return C(u,m($t,t)).bind(function(t){return a(n,u,t,e,o)})})}var e=[Ot("onEscape"),Ot("onEnter"),_t("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),_t("firstTabstop",0),_t("useTabstopAt",nh(!0)),Ot("visibilitySelector")].concat([t]),r=nh([Li(Ni([Pi,Hi([9])]),function(t,n,e){return o(t,0,e,e.cyclic?Fi:Ii)}),Li(Hi([9]),function(t,n,e){return o(t,0,e,e.cyclic?Ri:Vi)}),Li(Hi([27]),function(n,e,t){return t.onEscape.bind(function(t){return t(n,e)})}),Li(Ni([gS,Hi([13])]),function(n,e,t){return t.onEnter.bind(function(t){return t(n,e)})})]),u=nh([]);return Gi(e,Ay.init,r,u,function(){return ch.some(n)})}function Yi(t,n,e){return Bi(e)&&Hi([32])(n.event())?ch.none():(un(t,e,Fb()),ch.some(!0))}function qi(){return ch.some(!0)}function Ki(t,n,e){return e.execute(t,n,t.element())}function Ji(){var e=Rv(ch.none());return _y({readState:function(){return e.get().map(function(t){return{numRows:t.numRows(),numColumns:t.numColumns()}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,n){e.set(ch.some({numRows:nh(t),numColumns:nh(n)}))},getNumRows:function(){return e.get().map(function(t){return t.numRows()})},getNumColumns:function(){return e.get().map(function(t){return t.numColumns()})}})}function $i(i){return function(t,n,e,o){var r=i(t.element());return SS(r,t,n,e,o)}}function Qi(t,n){return $i($o(t,n))}function Zi(t,n){return $i($o(n,t))}function tu(r){return function(t,n,e,o){return SS(r,t,n,e,o)}}function nu(t){return!((n=t.dom()).offsetWidth<=0&&n.offsetHeight<=0);var n}function eu(t,n,e){var o,r=m($t,n),i=sr(t,e);return C(o=x(i,nu),r).map(function(t){return TS({index:t,candidates:o})})}function ou(t,n){return C(t,function(t){return $t(n,t)})}function ru(e,t,o,n){return n(Math.floor(t/o),t%o).bind(function(t){var n=t.row()*o+t.column();return 0<=n&&n<e.length?ch.some(e[n]):ch.none()})}function iu(r,t,i,u,a){return ru(r,t,u,function(t,n){var e=t===i-1?r.length-t*u:u,o=Dr(n,a,0,e-1);return ch.some({row:nh(t),column:nh(o)})})}function uu(r,t,i,u,a){return ru(r,t,u,function(t,n){var e=Dr(t,a,0,i-1),o=Br(n,0,(e===i-1?r.length-e*u:u)-1);return ch.some({row:nh(e),column:nh(o)})})}function au(n,e){oo(n.element(),e.selector).each(function(t){e.focusManager.set(n,t)})}function cu(r){return function(t,n,e,o){return eu(t,n,e.selector).bind(function(t){return r(t.candidates(),t.index(),o.getNumRows().getOr(e.initSize.numRows),o.getNumColumns().getOr(e.initSize.numColumns))})}}function su(t,n,e){return e.captureTab?ch.some(!0):ch.none()}function fu(t,n,e,i){var u=function(t,n,e){var o,r=Dr(n,i,0,e.length-1);return r===t?ch.none():"button"===sn(o=e[r])&&"disabled"===Xn(o,"disabled")?u(t,r,e):ch.from(e[r])};return eu(t,e,n).bind(function(t){var n=t.index(),e=t.candidates();return u(n,n,e)})}function lu(n,e,o){return(t=n,r=o,r.focusManager.get(t).bind(function(t){return ro(t,r.selector)})).bind(function(t){return o.execute(n,e,t)});var t,r}function du(n,e){e.getInitial(n).orThunk(function(){return oo(n.element(),e.selector)}).each(function(t){e.focusManager.set(n,t)})}function mu(t,n,e){return fu(t,e.selector,n,-1)}function gu(t,n,e){return fu(t,e.selector,n,1)}function pu(o){return function(t,n,e){return o(t,n,e).bind(function(){return e.executeOnMove?lu(t,n,e):ch.some(!0)})}}function hu(t,n,e){return e.onEscape(t,n)}function vu(t,n,e){return ch.from(t[n]).bind(function(t){return ch.from(t[e]).map(function(t){return VS({rowIndex:n,columnIndex:e,cell:t})})})}function bu(t,n,e,o){return vu(t,n,Dr(e,o,0,t[n].length-1))}function yu(t,n,e,o){var r=Dr(e,o,0,t.length-1);return vu(t,r,Br(n,0,t[r].length-1))}function xu(t,n,e,o){return vu(t,n,Br(e+o,0,t[n].length-1))}function wu(t,n,e,o){var r=Br(e+o,0,t.length-1);return vu(t,r,Br(n,0,t[r].length-1))}function Su(n,e){e.previousSelector(n).orThunk(function(){var t=e.selectors;return oo(n.element(),t.cell)}).each(function(t){e.focusManager.set(n,t)})}function ku(t,o){return function(n,e,i){var u=i.cycles?t:o;return ro(e,i.selectors.row).bind(function(t){return ou(sr(t,i.selectors.cell),e).bind(function(o){var r=sr(n,i.selectors.row);return ou(r,t).bind(function(t){var n,e=(n=i,y(r,function(t){return sr(t,n.selectors.cell)}));return u(e,t,o).map(function(t){return t.cell()})})})})}}function Cu(n,e,o){return o.focusManager.get(n).bind(function(t){return o.execute(n,e,t)})}function Ou(n,e){oo(n.element(),e.selector).each(function(t){e.focusManager.set(n,t)})}function Tu(t,n,e){return fu(t,e.selector,n,-1)}function Eu(t,n,e){return fu(t,e.selector,n,1)}function Du(t,n,e,o){var r=t.getSystem().build(o);fw(t,r,e)}function Bu(t,n,e,o){k(ik(t),function(t){return $t(o.element(),t.element())}).each(Lr)}function Au(n,t,e,r,o){var i=ik(n);return ch.from(i[r]).map(function(t){return Bu(n,0,0,t),o.each(function(t){Du(n,0,function(t,n){var e,o;o=n,Rn(e=t,r).fold(function(){py(e,o)},function(t){Vn(t,o)})},t)}),t})}function _u(t,n){return{key:t,value:{config:{},me:(e=t,o=pn(n),zo({fields:[vt("enabled")],name:e,active:{events:nh(o)}})),configAsRaw:nh({}),initialConfig:{},state:Ay}};var e,o}function Mu(t,n){n.ignore||(jo(t.element()),n.onFocus(t))}function Fu(t,n,e){var o=n.aria;o.update(t,o,e.get())}function Iu(n,t,e){t.toggleClass.each(function(t){e.get()?he(n.element(),t):be(n.element(),t)})}function Ru(t,n,e){fk(t,n,e,!e.get())}function Vu(t,n,e){e.set(!0),Iu(t,n,e),Fu(t,n,e)}function Hu(t,n,e){e.set(!1),Iu(t,n,e),Fu(t,n,e)}function Nu(t,n,e){fk(t,n,e,n.selected)}function Pu(){return[bn(nn(),function(t,n){n.stop(),rn(t)}),kn(Yt().deviceType.isTouch()?fb():gb())]}function zu(t){return pn(R([t.map(function(e){return gy(function(t,n){e(t),n.stop()})}).toArray(),Pu()]))}function Lu(t){(Wo(t.element()).isNone()||sk.isFocused(t))&&(sk.isFocused(t)||sk.focus(t),on(t,pk,{item:t}))}function ju(t){on(t,hk,{item:t})}function Uu(t,n){var e={};Eh(t,function(t,n){Sh(t,function(t){e[t]=n})});var o=n,r=Dh(n,function(t,n){return{k:t,v:n}}),i=V(r,function(t,n){return[n].concat(Ek(e,o,r,n))});return V(e,function(t){return Lh(i,t).getOr([t])})}function Wu(t){return t.x()}function Gu(t,n){return t.x()+t.width()/2-n.width()/2}function Xu(t,n){return t.x()+t.width()-n.width()}function Yu(t){return t.y()}function qu(t,n){return t.y()+t.height()-n.height()}function Ku(t,n,e){return ux(Wu(t),qu(t,n),e.innerSoutheast(),cx(),"layout-se")}function Ju(t,n,e){return ux(Xu(t,n),qu(t,n),e.innerSouthwest(),sx(),"layout-sw")}function $u(t,n,e){return ux(Wu(t),Yu(t),e.innerNortheast(),fx(),"layout-ne")}function Qu(t,n,e){return ux(Xu(t,n),Yu(t),e.innerNorthwest(),lx(),"layout-nw")}function Zu(t){var n=function Qp(n){return n.uid!==undefined}(t)&&G(t,"uid")?t.uid:Zn("memento");return{get:function(t){return t.getSystem().getByUid(n).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(n).toOption()},asSpec:function(){return ih(ih({},t),{uid:n})}}}function ta(t){return ch.from(t()["temporary-placeholder"]).getOr("!not found!")}function na(t,n){return ch.from(n()[t]).getOrThunk(function(){return ta(n)})}function ea(t,u,o){var a=u.backstage;return{open:function(t,n){function e(){n(),Mk.hide(i)}var r=Hy(Hk.sketch({text:t.text,level:wh(["success","error","warning","warn","info"],t.type)?t.type:undefined,progress:!0===t.progressBar,icon:ch.from(t.icon),onAction:e,iconProvider:a.shared.providers.icons,translationProvider:a.shared.providers.translate})),i=Hy(Mk.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:u.backstage.shared.getSink,fireDismissalEventInstead:{}}));return o.add(i),0<t.timeout&&Nk.setTimeout(function(){e()},t.timeout),{close:e,moveTo:function(t,n){Mk.showAt(i,{anchor:"makeshift",x:t,y:n},Ny(r))},moveRel:function(t,n){if("banner"!==n){var e=function(){switch(n){case"bc-bc":return Ik;case"tc-tc":return Fk;case"tc-bc":return hx;case"bc-tc":default:return vx}}(),o={anchor:"node",root:cy(),node:ch.some(Hv.fromDom(t)),layouts:{onRtl:function(){return[e]},onLtr:function(){return[e]}}};Mk.showAt(i,o,Ny(r))}else Mk.showAt(i,u.backstage.shared.anchors.banner(),Ny(r))},text:function(t){Hk.updateText(r,t)},settings:t,getEl:function(){return r.element().dom()},progressBar:{value:function(t){Hk.updateProgress(r,t)}}}},close:function(t){t.close()},reposition:function(t){var e;Sh(t,function(t){return t.moveTo(0,0)}),0<(e=t).length&&(kh(e).each(function(t){return t.moveRel(null,"banner")}),Sh(e,function(t,n){0<n&&t.moveRel(e[n-1].getEl(),"bc-tc")}))},getArgs:function(t){return t.settings}}}function oa(e,o){var r=null;return{cancel:function(){null!==r&&(w.clearTimeout(r),r=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==r&&w.clearTimeout(r),r=w.setTimeout(function(){e.apply(null,t),r=null},o)}}}function ra(t,n,e,o,r){var i=new Pk(n,r||t.getRoot());return jk(t,n,ch.some(e),o,i.prev,ch.none())}function ia(e,n){return Uk(Hv.fromDom(e.selection.getNode())).getOrThunk(function(){var t=Hv.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());return py(t,Hv.fromDom(n.extractContents())),n.insertNode(t.dom()),Mn(t).each(function(t){return t.dom().normalize()}),cr(t).map(function(t){var n;e.selection.setCursorLocation(t.dom(),"img"===sn(n=t)?1:ur(n).fold(function(){return In(n).length},function(t){return t.length}))}),t})}function ua(t,n){return t.toString().substring(n.length).replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function aa(t,u,a,c){return void 0===c&&(c=0),(n=u).collapsed&&3===n.startContainer.nodeType?ra(t,u.startContainer,u.startOffset,function(e,o,r,t){var i=t.getOr(r.length);return function(t,n,e,o){var r;for(r=n-1;0<=r;r--){var i=t.charAt(r);if(Wk.test(i))return ch.none();if(i===e)break}return-1===r||n-r<o?ch.none():ch.some(t.substring(r+1,n))}(r,i,a,1).fold(function(){return r.match(Wk)?e.abort():e.kontinue()},function(t){var n=u.cloneRange();return n.setStart(o,i-t.length-1),n.setEnd(u.endContainer,u.endOffset),r.length<c?e.abort():e.finish({text:ua(n,a),range:n,triggerChar:a})})}).fold(ch.none,ch.none,ch.some):ch.none();var n}function ca(e,t,o,n){return void 0===n&&(n=0),Uk(Hv.fromDom(t.startContainer)).fold(function(){return aa(e,t,o,n)},function(t){var n=e.createRng();return n.selectNode(t.dom()),ch.some({range:n,text:ua(n,o),triggerChar:o})})}function sa(t,n){return{element:t,offset:n}}function fa(n,e){var o,r,t=e(),i=n.selection.getRng();return(o=n.dom,r=i,co(t.triggerChars,function(t){return ca(o,r,t)})).bind(function(t){return Kk(n,e,t)})}function la(t){var n,e,o=V(t.ui.registry.getAll().popups,function(t){return ft("Autocompleter",Qk,t).fold(function(t){throw new Error(Ev(t))},function(t){return t})}),r=(n=Bh(o,function(t){return t.ch}),e={},Sh(n,function(t){e[t]={}}),Oh(e)),i=_(o);return{dataset:o,triggerChars:r,lookupByChar:function(n){return x(i,function(t){return t.ch===n})}}}function da(t,o,n){var r=sr(t.element(),"."+n);if(0<r.length){var e=C(r,function(t){var n=t.dom().getBoundingClientRect().top,e=r[0].dom().getBoundingClientRect().top;return Math.abs(n-e)>o}).getOr(r.length);return ch.some({numColumns:e,numRows:Math.ceil(r.length/e)})}return ch.none()}function ma(t,n){return Po([_u(t,n)])}function ga(t){t.getSystem().broadcastOn([cC],{})}function pa(t){var n,e,o=Hv.fromHtml(t),r=In(o),i=S((e=o).dom().attributes!==undefined?e.dom().attributes:[],function(t,n){var e;return"class"===n.name?t:ih(ih({},t),((e={})[n.name]=n.value,e))},{}),u=(n=o,Array.prototype.slice.call(n.dom().classList,0)),a=0===r.length?{}:{innerHtml:jn(o)};return ih({tag:sn(o),classes:u,attributes:i},a)}function ha(t){return Lh(vC,t).getOr(gC)}function va(t){return{dom:{tag:"div",classes:[yC],innerHtml:t}}}function ba(t){return{dom:{tag:"div",classes:[xC]},components:[ze(mC.translate(t))]}}function ya(t,n){return{dom:{tag:"div",classes:[xC]},components:[{dom:{tag:t.tag,attributes:{style:t.styleAttr}},components:[ze(mC.translate(n))]}]}}function xa(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:CC(t)}}}function wa(t){return{dom:{tag:"div",classes:[yC,"tox-collection__item-checkmark"],innerHtml:na("checkmark",t)}}}function Sa(t,n,e,o,r){var i=e?t.checkMark.orThunk(function(){return n.or(ch.some("")).map(va)}):ch.none(),u=t.ariaLabel.map(function(t){return{attributes:{title:mC.translate(t)}}}).getOr({});return{dom:Ih({tag:"div",classes:[gC,pC].concat(r?["tox-collection__item-icon-rtl"]:[])},u),optComponents:[i,t.htmlContent.fold(function(){return t.textContent.map(o)},function(t){return ch.some({dom:{tag:"div",classes:[xC],innerHtml:t}})}),t.shortcutContent.map(xa),t.caret]}}function ka(t,r,n,i){void 0===i&&(i=ch.none());var e,o,u,a,c,s,f=mC.isRtl()&&t.iconContent.exists(function(t){return wh(TC,t)}),l=t.iconContent.map(function(t){return mC.isRtl()&&wh(OC,t)?t+"-rtl":t}).map(function(t){return n=t,e=r.icons,o=i,ch.from(e()[n]).or(o).getOrThunk(function(){return ta(e)});var n,e,o}),d=ch.from(t.meta).fold(function(){return ba},function(t){return Ah(t,"style")?m(ya,t.style):ba});return"color"===t.presets?(e=t.ariaLabel,o=t.value,u=r,{dom:(a=hC,c=l.getOr(""),s=e.map(function(t){return' title="'+u.translate(t)+'"'}).getOr(""),pa("custom"===o?'<button class="'+a+' tox-swatches__picker-btn"'+s+">"+c+"</button>":"remove"===o?'<div class="'+a+' tox-swatch--remove"'+s+">"+c+"</div>":'<div class="'+a+'" style="background-color: '+o+'" data-mce-color="'+o+'"'+s+"></div>")),optComponents:[]}):Sa(t,l,n,d,f)}function Ca(t,n){n.disabled&&DC(t,n)}function Oa(t,n){return!0===n.useNative&&wh(EC,sn(t.element()))}function Ta(t){Gn(t.element(),"disabled","disabled")}function Ea(t){qn(t.element(),"disabled")}function Da(t){Gn(t.element(),"aria-disabled","true")}function Ba(t){Gn(t.element(),"aria-disabled","false")}function Aa(n,t){t.disableClass.each(function(t){be(n.element(),t)}),(Oa(n,t)?Ea:Ba)(n),t.onEnabled(n)}function _a(t,n){return Oa(t,n)?Yn(t.element(),"disabled"):"true"===Xn(t.element(),"aria-disabled")}function Ma(t,n){var e=t.getApi(n);return function(t){t(e)}}function Fa(e,o){return ly(function(t){Ma(e,t)(function(t){var n=e.onSetup(t);null!==n&&n!==undefined&&o.set(n)})})}function Ia(n,e){return dy(function(t){return Ma(n,t)(e.get())})}function Ra(t){return O(t,function(t){return t.toArray()})}function Va(t,n,e){var o,r,i=Rv(Q);return{type:"item",dom:n.dom,components:Ra(n.optComponents),data:t.data,eventOrder:PC,hasSubmenu:t.triggersSubmenu,itemBehaviours:Po([_u("item-events",[(o=t,r=e,gy(function(t,n){Ma(o,t)(o.onAction),o.triggersSubmenu||r!==NC.CLOSE_ON_EXECUTE||(en(t,Hb()),n.stop())})),Fa(t,i),Ia(t,i)]),MC(t.disabled),uk.config({})].concat(t.itemBehaviours))}}function Ha(t){return{value:t.value,meta:Ih({text:t.text.getOr("")},t.meta)}}function Na(t,n){var e,o=(e=mC.translate(t),zC.DOM.encode(e));if(0<n.length){var r=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return o.replace(r,function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"})}return o}function Pa(n,e,t){function o(t){return on(t,UC,{row:n,col:e})}var r;return Hy({dom:{tag:"div",attributes:(r={role:"button"},r["aria-labelledby"]=t,r)},behaviours:Po([_u("insert-table-picker-cell",[bn(bb(),sk.focus),bn(Fb(),o),bn(nn(),function(t,n){n.stop(),o(t)})]),gk.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),sk.config({onFocus:function(t){return on(t,jC,{row:n,col:e})}})])})}function za(t){return{value:nh(t)}}function La(t){return WC.test(t)||GC.test(t)}function ja(t){var n,e=(n=t.value().replace(WC,function(t,n,e,o){return n+n+e+e+o+o}),{value:nh(n)}),o=GC.exec(e.value());return null===o?["FFFFFF","FF","FF","FF"]:o}function Ua(t){var n=t.toString(16);return 1===n.length?"0"+n:n}function Wa(t){return za(Ua(t.red())+Ua(t.green())+Ua(t.blue()))}function Ga(t,n,e,o){return{red:nh(t),green:nh(n),blue:nh(e),alpha:nh(o)}}function Xa(t){var n=parseInt(t,10);return n.toString(
)===t&&0<=n&&n<=255}function Ya(t){var n,e,o,r=(t.hue()||0)%360,i=t.saturation()/100,u=t.value()/100;if(i=YC(0,XC(i,1)),u=YC(0,XC(u,1)),0===i)return Ga(n=e=o=qC(255*u),e,o,1);var a=r/60,c=u*i,s=c*(1-Math.abs(a%2-1)),f=u-c;switch(Math.floor(a)){case 0:n=c,e=s,o=0;break;case 1:n=s,e=c,o=0;break;case 2:n=0,e=c,o=s;break;case 3:n=0,e=s,o=c;break;case 4:n=s,e=0,o=c;break;case 5:n=c,e=0,o=s;break;default:n=e=o=0}return Ga(n=qC(255*(n+f)),e=qC(255*(e+f)),o=qC(255*(o+f)),1)}function qa(t){var n=ja(t);return Ga(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),1)}function Ka(t,n,e,o){return Ga(parseInt(t,10),parseInt(n,10),parseInt(e,10),parseFloat(o))}function Ja(t){return"rgba("+t.red()+","+t.green()+","+t.blue()+","+t.alpha()+")"}function $a(t){var n=[],u=w.document.createElement("canvas");u.height=1,u.width=1;for(var a=u.getContext("2d"),c=function(t,n){var e=n/255;return("0"+Math.round(t*e+255*(1-e)).toString(16)).slice(-2).toUpperCase()},e=function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();a.clearRect(0,0,u.width,u.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);var n=a.getImageData(0,0,1,1).data,e=n[0],o=n[1],r=n[2],i=n[3];return"#"+c(e,i)+c(o,i)+c(r,i)},o=0;o<t.length;o+=2)n.push({text:t[o+1],value:e(t[o]),type:"choiceitem"});return n}function Qa(t){return t.getParam("color_map")}function Za(t,e){var o;return t.dom.getParents(t.selection.getStart(),function(t){var n;(n=t.style["forecolor"===e?"color":"background-color"])&&(o=o||n)}),o}function tc(t){return Math.max(5,Math.ceil(Math.sqrt(t)))}function nc(t){var n=tc(iO(t).length);return oO(t,n)}function ec(n,e,t,o){"custom"===t?mO(n)(function(t){t.each(function(t){aO(t),n.execCommand("mceApplyTextcolor",e,t),o(t)})},"#000000"):"remove"===t?(o(""),n.execCommand("mceRemoveTextcolor",e)):(o(t),n.execCommand("mceApplyTextcolor",e,t))}function oc(t,n){return t.concat(uO().concat((o={type:e="choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},n?[o,{type:e,text:"Custom color",icon:"color-picker",value:"custom"}]:[o])));var e,o}function rc(n,e){return function(t){t(oc(n,e))}}function ic(t,n,e){var o,r;o="forecolor"===n?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",r=e,t.setIconFill(o,r),t.setIconStroke(o,r)}function uc(o,e,r,t,i){o.ui.registry.addSplitButton(e,{tooltip:t,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){return ch.from(Za(o,r)).bind(function(t){return function(t){if("transparent"===t)return ch.some(Ga(0,0,0,0));var n=KC.exec(t);if(null!==n)return ch.some(Ka(n[1],n[2],n[3],"1"));var e=JC.exec(t);return null!==e?ch.some(Ka(e[1],e[2],e[3],e[4])):ch.none()}(t).map(function(t){var n=Wa(t).value();return Gt(e.toLowerCase(),n)})}).getOr(!1)},columns:nc(o),fetch:rc(iO(o),rO(o)),onAction:function(){null!==i.get()&&ec(o,r,i.get(),function(){})},onItemAction:function(t,n){ec(o,r,n,function(t){i.set(t),dO(o,{name:e,color:t})})},onSetup:function(n){function t(t){t.name===e&&ic(n,t.name,t.color)}return null!==i.get()&&ic(n,e,i.get()),o.on("TextColorChange",t),function(){o.off("TextColorChange",t)}}})}function ac(n,t,e,o){n.ui.registry.addNestedMenuItem(t,{text:o,icon:"forecolor"===t?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(t){ec(n,e,t.value,Q)}}]}})}function cc(n,e){return function(t){return y(g(t,e),function(t){return{dom:n,components:t}})}}function sc(t,e){var o=[],r=[];return Sh(t,function(t,n){e(t,n)?(0<r.length&&o.push(r),r=[],Ah(t.dom,"innerHtml")&&r.push(t)):r.push(t)}),0<r.length&&o.push(r),y(o,function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}})}function fc(n,e){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===n?["tox-collection--list"]:["tox-collection--grid"])},components:[Tk.parts().items({preprocess:function(t){return"auto"!==n&&1<n?cc({tag:"div",classes:["tox-collection__group"]},n)(t):sc(t,function(t,n){return"separator"===e[n].type})}})]}}function lc(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}}function dc(t){var n=lc(t);return{backgroundMenu:n.backgroundMenu,selectedMenu:n.selectedMenu,menu:n.menu,selectedItem:n.selectedItem,item:ha(t)}}function mc(t,n,e){return{dom:{tag:"div",classes:R([[lc(e).tieredMenu]])},markers:dc(e)}}function gc(t){return t.icon!==undefined||"togglemenuitem"===t.type||"choicemenuitem"===t.type}function pc(t){return w.console.error(Ev(t)),w.console.log(t),ch.none()}function hc(t,n,e){var o,r=(o=e,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Tk.parts().items({preprocess:function(t){return sc(t,function(t,n){return"separator"===o[n].type})}})]});return{value:t,dom:r.dom,components:r.components,items:e}}function vc(t,n,e,o,r){var i,u,a,c,s,f;return"color"===r?{value:t,dom:(f=o,i={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Tk.parts().items({preprocess:"auto"!==f?cc({tag:"div",classes:["tox-swatches__row"]},f):l})]}]}).dom,components:i.components,items:e}:"normal"===r&&"auto"===o?{value:t,dom:(i=fc(o,e)).dom,components:i.components,items:e}:"normal"===r&&1===o?{value:t,dom:(i=fc(1,e)).dom,components:i.components,items:e}:"normal"===r?{value:t,dom:(i=fc(o,e)).dom,components:i.components,items:e}:"listpreview"!==r||"auto"===o?{value:t,dom:(a=n,c=o,s=lc(r),{tag:"div",classes:R([[s.menu,"tox-menu-"+c+"-column"],a?[s.hasIcons]:[]])}),components:pO,items:e}:{value:t,dom:(u=o,i={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Tk.parts().items({preprocess:cc({tag:"div",classes:["tox-collection__group"]},u)})]}).dom,components:i.components,items:e}}function bc(t,n,e,o,r,i,u,a){return vc(t,f(n,gc),hO(n,e,o,"color"!==r?"normal":"color",i,u,a),o,r)}function yc(t,n){var e=dc(n);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+e.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===n?"tox-swatches__row":"tox-collection__group")}}function xc(t){return t.icon!==undefined||"togglemenuitem"===t.type||"choicemenuitem"===t.type}function wc(t){return f(t,xc)}function Sc(t,n,e,o,r){function i(t){return r?ih(ih({},t),{shortcut:ch.none(),icon:t.text.isSome()?ch.none():t.icon}):t}var u=e.shared.providers;switch(t.type){case"menuitem":return ft("menuitem",tC,t).fold(pc,function(t){return ch.some(xO(i(t),n,u,o))});case"nestedmenuitem":return ft("nestedmenuitem",nC,t).fold(pc,function(t){return ch.some(wO(i(t),n,u,o,r))});case"togglemenuitem":return ft("togglemenuitem",eC,t).fold(pc,function(t){return ch.some(SO(i(t),n,u))});case"separator":return ft("separatormenuitem",Jk,t).fold(pc,function(t){return ch.some(yO(t))});case"fancymenuitem":return ft("fancymenuitem",rC,t).fold(pc,function(t){return kO(i(t),e)});default:return w.console.error("Unknown item in general menu",t),ch.none()}}function kc(t,n,e,o,r,i){var u=1===o,a=!u||wc(t);return ao(y(t,function(t){return"separator"===t.type?ft("Autocompleter.Separator",Jk,t).fold(pc,function(t){return ch.some(yO(t))}):ft("Autocompleter.Item",$k,t).fold(pc,function(t){return ch.some(bO(t,n,u,"normal",e,r,i,a))})}))}function Cc(t,n,e,o,r){var i=wc(n),u=ao(y(n,function(t){function n(t){return Sc(t,e,o,r?!t.hasOwnProperty("text"):i,r)}return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?n(Ih(t,{disabled:!0})):n(t)}));return(r?hc:vc)(t,i,u,1,"normal")}function Oc(t){return _k.singleData(t.value,t)}function Tc(t){function n(){t.stopPropagation()}function e(){t.preventDefault()}var o,r,i,u,a,c,s,f=Hv.fromDom(t.target),l=d(e,n);return o=f,r=t.clientX,i=t.clientY,u=n,a=e,c=l,s=t,{target:nh(o),x:nh(r),y:nh(i),stop:u,prevent:a,kill:c,raw:nh(s)}}function Ec(t,n,e,o,r){var i,u,a=(i=e,u=o,function(t){i(t)&&u(Tc(t))});return t.dom().addEventListener(n,a,r),{unbind:m(EO,t,n,a,r)}}function Dc(t,n,e){return Ec(t,n,DO,e,!1)}function Bc(t,n,e){return Ec(t,n,DO,e,!0)}function Ac(t,n,e){return ro(t,n,e).isSome()}function _c(e,o){var r=null;return{cancel:function(){null!==r&&(w.clearTimeout(r),r=null)},schedule:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r=w.setTimeout(function(){e.apply(null,t),r=null},o)}}}function Mc(t){var n=t.raw();return n.touches===undefined||1!==n.touches.length?ch.none():ch.some(n.touches[0])}function Fc(e){var u=Rv(ch.none()),o=Rv(!1),r=_c(function(t){e.triggerEvent(Vb(),t),o.set(!0)},400),i=U([{key:fb(),value:function(e){return Mc(e).each(function(t){r.cancel();var n={x:nh(t.clientX),y:nh(t.clientY),target:e.target};r.schedule(e),o.set(!1),u.set(ch.some(n))}),ch.none()}},{key:lb(),value:function(t){return r.cancel(),Mc(t).each(function(i){u.get().each(function(t){var n,e,o,r;n=i,e=t,o=Math.abs(n.clientX-e.x()),r=Math.abs(n.clientY-e.y()),!(5<o||5<r)||u.set(ch.none())})}),ch.none()}},{key:db(),value:function(n){return r.cancel(),u.get().filter(function(t){return $t(t.target(),n.target())}).map(function(){return o.get()?(n.prevent(),!1):e.triggerEvent(Rb(),n)})}}]);return{fireIfReady:function(n,t){return Lh(i,t).bind(function(t){return t(n)})}}}function Ic(n,t){var e,o,r,i,u=dt("Getting GUI events settings",_O,t),a=Yt().deviceType.isTouch()?["touchstart","touchmove","touchend","touchcancel","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],c=Fc(u),s=y(a.concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(t){return Dc(n,t,function(n){c.fireIfReady(n,t).each(function(t){t&&n.kill()}),u.triggerEvent(t,n)&&n.kill()})}),f=Rv(ch.none()),l=Dc(n,"paste",function(n){c.fireIfReady(n,"paste").each(function(t){t&&n.kill()}),u.triggerEvent("paste",n)&&n.kill(),f.set(ch.some(w.setTimeout(function(){u.triggerEvent(_b(),n)},0)))}),d=Dc(n,"keydown",function(t){var n;u.triggerEvent("keydown",t)?t.kill():!0===u.stopBackspace&&(8===(n=t).raw().which&&!wh(["input","textarea"],sn(n.target()))&&!Ac(n.target(),'[contenteditable="true"]'))&&t.prevent()}),m=(r=n,i=function(t){u.triggerEvent("focusin",t)&&t.kill()},AO?Bc(r,"focus",i):Dc(r,"focusin",i)),g=Rv(ch.none()),p=(e=n,o=function(t){u.triggerEvent("focusout",t)&&t.kill(),g.set(ch.some(w.setTimeout(function(){u.triggerEvent(Ab(),t)},0)))},AO?Bc(e,"blur",o):Dc(e,"focusout",o));return{unbind:function(){Sh(s,function(t){t.unbind()}),d.unbind(),m.unbind(),p.unbind(),l.unbind(),f.get().each(w.clearTimeout),g.get().each(w.clearTimeout)}}}function Rc(t,n){var e=Lh(t,"target").map(function(t){return t()}).getOr(n);return Rv(e)}function Vc(t,o,n,e,r,i){var u,a,c,s,f=t(o,e),l=(u=n,a=r,c=Rv(!1),s=Rv(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:nh(u),setSource:a.set,getSource:a.get});return f.fold(function(){return i.logEventNoHandlers(o,e),MO.complete()},function(n){var e=n.descHandler();return ue(e)(l),l.isStopped()?(i.logEventStopped(o,n.element(),e.purpose()),MO.stopped()):l.isCut()?(i.logEventCut(o,n.element(),e.purpose()),MO.complete()):Mn(n.element()).fold(function(){return i.logNoParent(o,n.element(),e.purpose()),MO.complete()},function(t){return i.logEventResponse(o,n.element(),e.purpose()),MO.resume(t)})})}function Hc(t,n){var e,o,r=(e=n,{stop:function(){o.set(!0)},cut:Q,isStopped:(o=Rv(!1)).get,isCut:nh(!1),event:nh(e),setSource:i("Cannot set source of a broadcasted event"),getSource:i("Cannot get source of a broadcasted event")});return Sh(t,function(t){ue(t.descHandler())(r)}),r.isStopped()}function Nc(){var i={};return{registerId:function(o,r,t){Eh(t,function(t,n){var e=i[n]!==undefined?i[n]:{};e[r]=My(t,o),i[n]=e})},unregisterId:function(n){Eh(i,function(t){t.hasOwnProperty(n)&&delete t[n]})},filterByType:function(t){return Lh(i,t).map(function(t){return Bh(t,function(t,n){return VO(n,t)})}).getOr([])},find:function(t,n,e){var r=zh(n)(i);return fy(e,function(t){return e=r,Oy(o=t).fold(function(){return ch.none()},function(t){var n=zh(t);return e.bind(n).map(function(t){return RO(o,t)})});var e,o},t)}}}function Pc(){function o(o){var t=o.element();return Oy(t).fold(function(){return t="uid-",n=o.element(),e=Qn(Sy+t),Cy(n,e),e;var t,n,e},function(t){return t})}var r=Nc(),i={},u=function(t){Oy(t.element()).each(function(t){delete i[t],r.unregisterId(t)})};return{find:function(t,n,e){return r.find(t,n,e)},filter:function(t){return r.filterByType(t)},register:function(t){var n=o(t);G(i,n)&&function(t,n){var e=i[n];if(e!==t)throw new Error('The tagId "'+n+'" is already used by: '+$n(e.element())+"\nCannot use it for: "+$n(t.element())+"\nThe conflicting element is"+(ln(e.element())?" ":" not ")+"already in the DOM");u(t)}(t,n);var e=[t];r.registerId(e,n,t.events()),i[n]=t},unregister:u,getById:function(t){return zh(t)(i)}}}function zc(e){function o(n){return Mn(e.element()).fold(function(){return!0},function(t){return $t(n,t)})}function c(t,n){return i.find(o,t,n)}function r(n){var t=i.filter(Mb());Sh(t,function(t){ue(t.descHandler())(n)})}var i=Pc(),t=Ic(e.element(),{triggerEvent:function(u,a){return fo(u,a.target(),function(t){return n=c,e=u,r=t,i=(o=a).target(),IO(n,e,o,i,r);var n,e,o,r,i})}}),u={debugInfo:nh("real"),triggerEvent:function(n,e,o){fo(n,e,function(t){IO(c,n,o,e,t)})},triggerFocus:function(i,u){Oy(i).fold(function(){jo(i)},function(){fo(Bb(),i,function(t){var n,e,o,r;n=c,e=Bb(),o={originator:nh(u),kill:Q,prevent:Q,target:nh(i)},r=t,Vc(n,e,o,i,Rc(o,i),r)})})},triggerEscape:function(t,n){u.triggerEvent("keydown",t.element(),n.event())},getByUid:function(t){return g(t)},getByDom:function(t){return p(t)},build:Hy,addToGui:function(t){s(t)},removeFromGui:function(t){f(t)},addToWorld:function(t){n(t)},removeFromWorld:function(t){a(t)},broadcast:function(t){l(t)},broadcastOn:function(t,n){d(t,n)},broadcastEvent:function(t,n){m(t,n)},isConnected:nh(!0)},n=function(t){t.connect(u),ay(t.element())||(i.register(t),Sh(t.components(),n),u.triggerEvent(Pb(),t.element(),{target:nh(t.element())}))},a=function(t){ay(t.element())||(Sh(t.components(),a),i.unregister(t)),t.disconnect()},s=function(t){Pr(e,t)},f=function(t){Lr(t)},l=function(t){r({universal:nh(!0),data:nh(t)})},d=function(t,n){r({universal:nh(!1),channels:nh(t),data:nh(n)})},m=function(t,n){return Hc(i.filter(t),n)},g=function(t){return i.getById(t).fold(function(){return lh.error(new Error('Could not find component with uid: "'+t+'" in system.'))},lh.value)},p=function(t){var n=Oy(t).getOr("not found");return g(n)};return n(e),{root:nh(e),element:e.element,destroy:function(){t.unbind(),hy(e.element())},add:s,remove:f,getByUid:g,getByDom:p,addToWorld:n,removeFromWorld:a,broadcast:l,broadcastOn:d,broadcastEvent:m}}function Lc(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))}function jc(t){return t.getParam("width",zC.DOM.getStyle(t.getElement(),"width"))}function Uc(t){return ch.from(t.settings.min_width).filter(vh)}function Wc(t){return ch.from(t.settings.min_height).filter(vh)}function Gc(t){return ch.from(t.getParam("max_width")).filter(vh)}function Xc(t){return ch.from(t.getParam("max_height")).filter(vh)}function Yc(t){return!1!==t.getParam("menubar",!0,"boolean")}function qc(t){var n=t.getParam("toolbar",!0),e=!0===n,o=dh(n),r=gh(n)&&0<n.length;return!PO(t)&&(r||o||e)}function Kc(n){var t=x(y(x(Oh(n.settings),function(t){return/^toolbar([1-9])$/.test(t)}),function(t){return n.getParam(t,!1,"string")}),function(t){return"string"==typeof t});return 0<t.length?ch.some(t):ch.none()}function Jc(t){return t.getParam("toolbar_drawer","","string")}function $c(t){var n=t.getParam("fixed_toolbar_container","","string");return 0<n.length&&t.inline?oo(cy(),n):ch.none()}function Qc(t){return t.inline&&$c(t).isSome()}function Zc(t){return t.inline&&!Yc(t)&&!qc(t)&&!PO(t)}function ts(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Qc(t)&&!Zc(t)}function ns(t){return t.touches===undefined||1!==t.touches.length?ch.none():ch.some(t.touches[0])}function es(t){return Po([sk.config({onFocus:!1===t.selectOnFocus?Q:function(t){var n=t.element(),e=Me(n);n.dom().setSelectionRange(0,e.length)}})])}function os(t){return{tag:t.tag,attributes:ih({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}}function rs(t){w.setTimeout(function(){throw t},0)}function is(t){var n=sn(t);return wh(pT,n)}function us(t,n){be(n.getRoot(t).getOr(t.element()),n.invalidClass),n.notify.each(function(n){is(t.element())&&Gn(t.element(),"aria-invalid",!1),n.getContainer(t).each(function(t){Un(t,n.validHtml)}),n.onValid(t)})}function as(n,t,e,o){he(t.getRoot(n).getOr(n.element()),t.invalidClass),t.notify.each(function(t){is(n.element())&&Gn(n.element(),"aria-invalid",!0),t.getContainer(n).each(function(t){Un(t,o)}),t.onInvalid(n,o)})}function cs(n,t){return t.validator.fold(function(){return gT(lh.value(!0))},function(t){return t.validate(n)})}function ss(n,e){return e.notify.each(function(t){t.onValidate(n)}),cs(n,e).map(function(t){return n.getSystem().isConnected()?t.fold(function(t){return as(n,e,0,t),lh.error(t)},function(t){return us(n,e),lh.value(t)}):lh.error("No longer in system")})}function fs(t,n,e,o){var r=wT(t,n,e,o);return eT.sketch(r)}function ls(t,n){return eT.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}})}function ds(t,n){var e=t.getHotspot(n).getOr(n),o=t.getAnchorOverrides();return t.layouts.fold(function(){return{anchor:"hotspot",hotspot:e,overrides:o}},function(t){return{anchor:"hotspot",hotspot:e,overrides:o,layouts:t}})}function ms(t,n,e,o,r,i,u){return(a=t,c=n,s=ds(t,e),f=e,l=o,d=r,m=u,g=c,p=f,h=(0,a.fetch)(p).map(g),v=FT(f,a),h.map(function(t){return t.bind(function(t){return ch.from(_k.sketch(ih(ih({},d.menu()),{uid:Zn(""),data:t,highlightImmediately:m===aT.HighlightFirst,onOpenMenu:function(t,n){var e=v().getOrDie();aw.position(e,s,n),hw.decloak(l)},onOpenSubmenu:function(t,n,e){var o=v().getOrDie();aw.position(o,{anchor:"submenu",item:n},e),hw.decloak(l)},onRepositionMenu:function(t,n,e){var o=v().getOrDie();aw.position(o,s,n),Sh(e,function(t){aw.position(o,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)})},onEscape:function(){return sk.focus(f),hw.close(l),ch.some(!0)}})))})})).map(function(t){return t.fold(function(){hw.isOpen(o)&&hw.close(o)},function(t){hw.cloak(o),hw.open(o,t),i(o)}),o});var a,c,s,f,l,d,m,g,p,h,v}function gs(t,n,e,o){return hw.close(o),gT(o)}function ps(t,n,e,o,r,i){var u=CT.getCoupled(e,"sandbox");return(hw.isOpen(u)?gs:ms)(t,n,e,u,o,r,i)}function hs(t,n,e){var o,r,i=uS.getCurrent(n).getOr(n),u=Xe(t.element());e?Oe(i.element(),"min-width",u+"px"):(o=i.element(),r=u,Uy.set(o,r))}function vs(t){hw.getState(t).each(function(t){_k.repositionMenus(t)})}function bs(o,r,i){var u=io(),t=FT(r,o);return{dom:{tag:"div",classes:o.sandboxClasses,attributes:{id:u.id(),role:"listbox"}},behaviours:Bw(o.sandboxBehaviours,[Ew.config({store:{mode:"memory",initialValue:r}}),hw.config({onOpen:function(t,n){var e=ds(o,r);u.link(r.element()),o.matchWidth&&hs(e.hotspot,n,o.useMinWidth),o.onOpen(e,t,n),i!==undefined&&i.onOpen!==undefined&&i.onOpen(t,n)},onClose:function(t,n){u.unlink(r.element()),i!==undefined&&i.onClose!==undefined&&i.onClose(t,n)},isPartOf:function(t,n,e){return qy(n,e)||qy(r,e)},getAttachPoint:function(){return t().getOrDie()}}),uS.config({find:function(t){return hw.getState(t).bind(function(t){return uS.getCurrent(t)})}}),kx.config({channels:ih(ih({},Kr({isExtraPart:nh(!1)})),Jr({isExtraPart:nh(!1),doReposition:vs}))})])}}function ys(t){vs(CT.getCoupled(t,"sandbox"))}function xs(){return[_t("sandboxClasses",[]),Dw("sandboxBehaviours",[uS,kx,hw,Ew])]}function ws(e,n,o){function r(t,n){on(t,PT,{value:n})}var i,u,t=eT.parts().field({factory:rT,inputClasses:["tox-textfield"],onSetValue:function(t){return bT.run(t).get(function(){})},inputBehaviours:Po([xT.config({}),bT.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return Mn(t.element())},notify:{onValid:function(t){var n=Ew.getValue(t);on(t,NT,{color:n})}},validator:{validateOnLoad:!1,validate:function(t){var n=Ew.getValue(t);if(0===n.length)return gT(lh.value(!0));var e=Hv.fromTag("span");Oe(e,"background-color",n);var o=De(e,"background-color").fold(function(){return lh.error("blah")},function(){return lh.value(n)});return gT(o)}}})]),selectOnFocus:!1}),a=e.label.map(function(t){return ls(t,n.providers)}),c=Zu((i={dom:{tag:"span",attributes:{"aria-label":n.providers.translate("Color swatch")}},layouts:ch.some({onRtl:function(){return[Eo]},onLtr:function(){return[Do]}}),components:[],fetch:gO.getFetch(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(t,e){c.getOpt(t).each(function(n){"custom"===e?o.colorPicker(function(t){t.fold(function(){return en(n,zT)},function(t){r(n,t),aO(t)})},"#ffffff"):r(n,"remove"===e?"":e)})}},u=n,VT.sketch({dom:i.dom,components:i.components,toggleClass:"mce-active",dropdownBehaviours:Po([HT.config({}),xT.config({})]),layouts:i.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:u.getSink,fetch:function(n){return mT(function(t){return i.fetch(t)}).map(function(t){return ch.from(Oc(Fh(bc(Qn("menu-value"),t,function(t){i.onItemAction(n,t)},i.columns,i.presets,NC.CLOSE_ON_EXECUTE,function(){return!1},u.providers),{movement:yc(i.columns,i.presets)})))})},parts:{menu:mc(0,0,i.presets)}})));return eT.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[t,c.asSpec()]}]),fieldBehaviours:Po([_u("form-field-events",[bn(NT,function(t,n){c.getOpt(t).each(function(t){Oe(t.element(),"background-color",n.event().color())}),on(t,GO,{name:e.name})}),bn(PT,function(n,e){eT.getField(n).each(function(t){Ew.setValue(t,e.event().value()),uS.getCurrent(n).each(sk.focus)})}),bn(zT,function(t){eT.getField(t).each(function(){uS.getCurrent(t).each(sk.focus)})})])])})}function Ss(t,n,e){return{hue:nh(t),saturation:nh(n),value:nh(e)}}function ks(t){return Jw({name:t+"-edge",overrides:function(o){return o.model.manager.edgeActions[t].fold(function(){return{}},function(e){var t=pn([yn(fb(),e,[o])]),n=pn([yn(gb(),e,[o]),yn(pb(),function(t,n){n.mouseIsDown.get()&&e(t,n)},[o])]);return{events:WT?t:n}})}})}function Cs(t){var n=t.event().raw();if(tE){var e=n;return e.touches!==undefined&&1===e.touches.length?ch.some(e.touches[0]).map(function(t){return Ly(t.clientX,t.clientY)}):ch.none()}var o=n;return o.clientX!==undefined?ch.some(o).map(function(t){return Ly(t.clientX,t.clientY)}):ch.none()}function Os(t){return t.model.minX}function Ts(t){return t.model.minY}function Es(t){return t.model.minX-1}function Ds(t){return t.model.minY-1}function Bs(t){return t.model.maxX}function As(t){return t.model.maxY}function _s(t){return t.model.maxX+1}function Ms(t){return t.model.maxY+1}function Fs(t,n,e){return n(t)-e(t)}function Is(t){return Fs(t,Bs,Os)}function Rs(t){return Fs(t,As,Ts)}function Vs(t){return Is(t)/2}function Hs(t){return Rs(t)/2}function Ns(t){return t.stepSize}function Ps(t){return t.snapToGrid}function zs(t){return t.snapStart}function Ls(t){return t.rounded}function js(t,n){return t[n+"-edge"]!==undefined}function Us(t){return js(t,"left")}function Ws(t){return js(t,"right")}function Gs(t){return js(t,"top")}function Xs(t){return js(t,"bottom")}function Ys(t){return t.model.value.get()}function qs(t){return{x:nh(t)}}function Ks(t){return{y:nh(t)}}function Js(t,n){return{x:nh(t),y:nh(n)}}function $s(t,n){on(t,nE(),{value:n})}function Qs(t,n,e,o){return t<n?t:e<t?e:t===n?n-1:Math.max(n,t-o)}function Zs(t,n,e,o){return e<t?t:t<n?n:t===e?e+1:Math.min(e,t+o)}function tf(t,n,e){return Math.max(n,Math.min(e,t))}function nf(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.step,u=t.snap,a=t.snapStart,c=t.rounded,s=t.hasMinEdge,f=t.hasMaxEdge,l=t.minBound,d=t.maxBound,m=t.screenRange,g=s?n-1:n,p=f?e+1:e;if(r<l)return g;if(d<r)return p;var h,v,b,y,x,w,S,k=tf((h=r,v=l,b=d,Math.min(b,Math.max(h,v))-v)/m*o+n,g,p);return u&&n<=k&&k<=e?(y=k,x=n,w=e,S=i,a.fold(function(){var t=y-x,n=Math.round(t/S)*S;return tf(x+n,x-1,w+1)},function(t){var n=(y-t)%S,e=Math.round(n/S),o=Math.floor((y-t)/S),r=Math.floor((w-t)/S),i=t+Math.min(r,o+e)*S;return Math.max(t,i)})):c?Math.round(k):k}function ef(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.hasMinEdge,u=t.hasMaxEdge,a=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,f=t.centerMaxEdge;return r<n?i?0:s:e<r?u?a:f:(r-n)/o*c}function of(t){return t.element().dom().getBoundingClientRect()}function rf(t,n){return t[n]}function uf(t){return rf(of(t),eE)}function af(t){return rf(of(t),"right")}function cf(t){return rf(of(t),"top")}function sf(t){return rf(of(t),"bottom")}function ff(t){return rf(of(t),"width")}function lf(t){return rf(of(t),"height")}function df(t,n,e){return(t+n)/2-e}function mf(t,n){var e=of(t),o=of(n);return df(rf(e,eE),rf(e,"right"),rf(o,eE))}function gf(t,n){var e=of(t),o=of(n);return df(rf(e,"top"),rf(e,"bottom"),rf(o,"top"))}function pf(t,n){on(t,nE(),{value:n})}function hf(t){return{x:nh(t)}}function vf(t,n,e){return nf({min:Os(n),max:Bs(n),range:Is(n),value:e,step:Ns(n),snap:Ps(n),snapStart:zs(n),rounded:Ls(n),hasMinEdge:Us(n),hasMaxEdge:Ws(n),minBound:uf(t),maxBound:af(t),screenRange:ff(t)})}function bf(i){return function(t,n){return(e=t,o=n,r=(0<i?Zs:Qs)(Ys(o).x(),Os(o),Bs(o),Ns(o)),pf(e,hf(r)),ch.some(r)).map(function(){return!0});var e,o,r}}function yf(t,n,e,o,r,i){var u,a,c,s,f,l,d,m,g=(a=i,c=e,s=o,f=r,l=ff(u=n),d=s.bind(function(t){return ch.some(mf(t,u))}).getOr(0),m=f.bind(function(t){return ch.some(mf(t,u))}).getOr(l),ef({min:Os(a),max:Bs(a),range:Is(a),value:c,hasMinEdge:Us(a),hasMaxEdge:Ws(a),minBound:uf(u),minOffset:0,maxBound:af(u),maxOffset:l,centerMinEdge:d,centerMaxEdge:m}));return uf(n)-uf(t)+g}function xf(t,n){on(t,nE(),{value:n})}function wf(t){return{y:nh(t)}}function Sf(t,n,e){return nf({min:Ts(n),max:As(n),range:Rs(n),value:e,step:Ns(n),snap:Ps(n),snapStart:zs(n),rounded:Ls(n),hasMinEdge:Gs(n),hasMaxEdge:Xs(n),minBound:cf(t),maxBound:sf(t),screenRange:lf(t)})}function kf(i){return function(t,n){return(e=t,o=n,r=(0<i?Zs:Qs)(Ys(o).y(),Ts(o),As(o),Ns(o)),xf(e,wf(r)),ch.some(r)).map(function(){return!0});var e,o,r}}function Cf(t,n,e,o,r,i){var u,a,c,s,f,l,d,m,g=(a=i,c=e,s=o,f=r,l=lf(u=n),d=s.bind(function(t){return ch.some(gf(t,u))}).getOr(0),m=f.bind(function(t){return ch.some(gf(t,u))}).getOr(l),ef({min:Ts(a),max:As(a),range:Rs(a),value:c,hasMinEdge:Gs(a),hasMaxEdge:Xs(a),minBound:cf(u),minOffset:0,maxBound:sf(u),maxOffset:l,centerMinEdge:d,centerMaxEdge:m}));return cf(n)-cf(t)+g}function Of(t,n){on(t,nE(),{value:n})}function Tf(t,n){return{x:nh(t),y:nh(n)}}function Ef(a,c){return function(t,n){return(e=c,o=t,r=n,i=0<a?Zs:Qs,u=e?Ys(r).x():i(Ys(r).x(),Os(r),Bs(r),Ns(r)),Of(o,Tf(u,e?i(Ys(r).y(),Ts(r),As(r),Ns(r)):Ys(r).y())),ch.some(u)).map(function(){return!0});var e,o,r,i,u}}function Df(t){return"<alloy.field."+t+">"}function Bf(t){return PE[t]}function Af(t,n,e){return Ew.config(Fh({store:{mode:"manual",getValue:n,setValue:e}},t.map(function(t){return{store:{initialValue:t}}}).getOr({})))}function _f(t,n,e){return Af(t,function(t){return n(t.element())},function(t,n){return e(t.element(),n)})}function Mf(r,n){function e(t,n){n.stop()}function o(t){return function(n,e){Sh(t,function(t){t(n,e)})}}function i(t,n){if(!_C.isDisabled(t)){var e=n.event().raw();a(t,e.dataTransfer.files)}}function u(t,n){var e=n.event().raw().target.files;a(t,e)}var a=function(t,n){var e,o;Ew.setValue(t,(e=n,o=new RegExp("("+".jpg,.jpeg,.png,.gif".split(/\s*,\s*/).join("|")+")$","i"),x(Ch(e),function(t){return o.test(t.name)}))),on(t,GO,{name:r.name})},c=Zu({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Po([_u("input-file-events",[kn(nn())])])});return fs(r.label.map(function(t){return ls(t,n)}),eT.parts().field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Po([GE([]),VE(),_C.config({}),gk.config({toggleClass:"dragenter",toggleOnExecute:!1}),_u("dropzone-events",[bn("dragenter",o([e,gk.toggle])),bn("dragleave",o([e,gk.toggle])),bn("dragover",e),bn("drop",o([e,i])),bn(Cb(),u)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:n.translate("Drop an image here")}},Rk.sketch({dom:{tag:"button",innerHtml:n.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[c.asSpec()],action:function(t){c.get(t).element().dom().click()},buttonBehaviours:Po([xT.config({})])})]}]}}}}),["tox-form__group--stretched"],[])}function Ff(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Po([sk.config({ignore:!0}),xT.config({})])}}function If(t,n){on(t,wb(),{raw:{which:9,shiftKey:n}})}function Rf(t,n){var o,r,e=$E&&t.sandboxed,i=ih(ih({},t.label.map(function(t){return{title:t}}).getOr({})),e?{sandbox:"allow-scripts allow-same-origin"}:{}),u=(o=e,r=Rv(""),{getValue:function(){return r.get()},setValue:function(t,n){if(o)Gn(t.element(),"srcdoc",n);else{Gn(t.element(),"src","javascript:''");var e=t.element().dom().contentWindow.document;e.open(),e.write(n),e.close()}r.set(n)}});return fs(t.label.map(function(t){return ls(t,n)}),eT.parts().field({factory:{sketch:function(t){return JE({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:Po([xT.config({}),sk.config({}),UE(ch.none(),u.getValue,u.setValue)])})}}}),["tox-form__group--stretched"],[])}function Vf(t,n){return Pf(w.document.createElement("canvas"),t,n)}function Hf(t){var n=Vf(t.width,t.height);return Nf(n).drawImage(t,0,0),n}function Nf(t){return t.getContext("2d")}function Pf(t,n,e){return t.width=n,t.height=e,t}function zf(t){return t.naturalWidth||t.width}function Lf(t){return t.naturalHeight||t.height}function jf(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],Kf(t,Uf(Gf,this),Uf(Xf,this))}function Uf(t,n){return function(){return t.apply(n,arguments)}}function Wf(e){var o=this;null!==this._state?ET(function(){var t=o._state?e.onFulfilled:e.onRejected;if(null!==t){var n;try{n=t(o._value)}catch(Qp){return void e.reject(Qp)}e.resolve(n)}else(o._state?e.resolve:e.reject)(o._value)}):this._deferreds.push(e)}function Gf(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void Kf(Uf(n,t),Uf(Gf,this),Uf(Xf,this))}this._state=!0,this._value=t,Yf.call(this)}catch(Qp){Xf.call(this,Qp)}}function Xf(t){this._state=!1,this._value=t,Yf.call(this)}function Yf(){for(var t=0,n=this._deferreds;t<n.length;t++){var e=n[t];Wf.call(this,e)}this._deferreds=[]}function qf(t,n,e,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.resolve=e,this.reject=o}function Kf(t,n,e){var o=!1;try{t(function(t){o||(o=!0,n(t))},function(t){o||(o=!0,e(t))})}catch(i){if(o)return;o=!0,e(i)}}function Jf(e){return new QE(function(t,n){(function p(t){var n=t.split(","),e=/data:([^;]+)/.exec(n[0]);if(!e)return ch.none();for(var o=e[1],r=n[1],i=w.atob(r),u=i.length,a=Math.ceil(u/1024),c=new Array(a),s=0;s<a;++s){for(var f=1024*s,l=Math.min(1024+f,u),d=new Array(l-f),m=f,g=0;m<l;++g,++m)d[g]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return ch.some(new w.Blob(c,{type:o}))})(e).fold(function(){n("uri is not base64: "+e)},t)})}function $f(t,o,r){return o=o||"image/png",w.HTMLCanvasElement.prototype.toBlob?new QE(function(n,e){t.toBlob(function(t){t?n(t):e()},o,r)}):Jf(t.toDataURL(o,r))}function Qf(t){return function n(a){return new QE(function(t,n){function e(){u(),t(i)}function o(){u(),n("Unable to load data of type "+a.type+": "+r)}var r=w.URL.createObjectURL(a),i=new w.Image,u=function(){i.removeEventListener("load",e),i.removeEventListener("error",o)};i.addEventListener("load",e),i.addEventListener("error",o),i.src=r,i.complete&&e()})}(t).then(function(t){!function Qp(n){w.URL.revokeObjectURL(n.src)}(t);var n=Vf(zf(t),Lf(t));return Nf(n).drawImage(t,0,0),n})}function Zf(t,n,e){function o(n,e){return t.then(function(t){return function o(t,n,e){return n=n||"image/png",t.toDataURL(n,e)}(t,n,e)})}var r=n.type;return{getType:nh(r),toBlob:function i(){return QE.resolve(n)},toDataURL:function u(){return e},toBase64:function a(){return e.split(",")[1]},toAdjustedBlob:function c(n,e){return t.then(function(t
){return $f(t,n,e)})},toAdjustedDataURL:o,toAdjustedBase64:function s(t,n){return o(t,n).then(function(t){return t.split(",")[1]})},toCanvas:function f(){return t.then(Hf)}}}function tl(n){return function t(e){return new QE(function(t){var n=new w.FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}(n).then(function(t){return Zf(Qf(n),n,t)})}function nl(n,t){return $f(n,t).then(function(t){return Zf(QE.resolve(n),t,n.toDataURL())})}function el(t,n,e){var o="string"==typeof t?parseFloat(t):t;return e<o?o=e:o<n&&(o=n),o}function ol(t,n){for(var e,o=[],r=new Array(25),i=0;i<5;i++){for(var u=0;u<5;u++)o[u]=n[u+5*i];for(u=0;u<5;u++){for(var a=e=0;a<5;a++)e+=t[u+5*a]*o[a];r[u+5*i]=e}}return r}function rl(n,e){return n.toCanvas().then(function(t){return function i(t,n,e){var o=Nf(t),r=function D(t,n){for(var e,o,r,i,u=t.data,a=n[0],c=n[1],s=n[2],f=n[3],l=n[4],d=n[5],m=n[6],g=n[7],p=n[8],h=n[9],v=n[10],b=n[11],y=n[12],x=n[13],w=n[14],S=n[15],k=n[16],C=n[17],O=n[18],T=n[19],E=0;E<u.length;E+=4)e=u[E],o=u[E+1],r=u[E+2],i=u[E+3],u[E]=e*a+o*c+r*s+i*f+l,u[E+1]=e*d+o*m+r*g+i*p+h,u[E+2]=e*v+o*b+r*y+i*x+w,u[E+3]=e*S+o*k+r*C+i*O+T;return t}(o.getImageData(0,0,t.width,t.height),e);return o.putImageData(r,0,0),nl(t,n)}(t,n.getType(),e)})}function il(n,e){return n.toCanvas().then(function(t){return function u(t,n,e){var o=Nf(t),r=o.getImageData(0,0,t.width,t.height),i=o.getImageData(0,0,t.width,t.height);return i=function w(t,n,e){function o(t,n,e){return e<t?t=e:t<n&&(t=n),t}for(var r=Math.round(Math.sqrt(e.length)),i=Math.floor(r/2),u=t.data,a=n.data,c=t.width,s=t.height,f=0;f<s;f++)for(var l=0;l<c;l++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(l+h-i,0,c-1),b=4*(o(f+p-i,0,s-1)*c+v),y=e[p*r+h];d+=u[b]*y,m+=u[1+b]*y,g+=u[2+b]*y}var x=4*(f*c+l);a[x]=o(d,0,255),a[1+x]=o(m,0,255),a[2+x]=o(g,0,255)}return n}(r,i,e),o.putImageData(i,0,0),nl(t,n)}(t,n.getType(),e)})}function ul(e){return function(t,n){return rl(t,e([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}}function al(t,n,e,o){return rl(t,function r(t,n,e,o){return ol(t,[n=el(n,0,2),0,0,0,0,0,e=el(e,0,2),0,0,0,0,0,o=el(o,0,2),0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n,e,o))}function cl(t,n,e){var o=zf(t),r=Lf(t),i=n/o,u=e/r,a=!1;(i<.5||2<i)&&(i=i<.5?.5:2,a=!0),(u<.5||2<u)&&(u=u<.5?.5:2,a=!0);var c=function s(u,a,c){return new QE(function(t){var n=zf(u),e=Lf(u),o=Math.floor(n*a),r=Math.floor(e*c),i=Vf(o,r);Nf(i).drawImage(u,0,0,n,e,0,0,o,r),t(i)})}(t,i,u);return a?c.then(function(t){return cl(t,n,e)}):c}function sl(n,e){return n.toCanvas().then(function(t){return function a(t,n,e){var o=Vf(t.width,t.height),r=Nf(o),i=0,u=0;return 90!==(e=e<0?360+e:e)&&270!==e||Pf(o,o.height,o.width),90!==e&&180!==e||(i=o.width),270!==e&&180!==e||(u=o.height),r.translate(i,u),r.rotate(e*Math.PI/180),r.drawImage(t,0,0),nl(o,n)}(t,n.getType(),e)})}function fl(n,e){return n.toCanvas().then(function(t){return function i(t,n,e){var o=Vf(t.width,t.height),r=Nf(o);return"v"===e?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),nl(o,n)}(t,n.getType(),e)})}function ll(n,e,o,r,i){return n.toCanvas().then(function(t){return function a(t,n,e,o,r,i){var u=Vf(r,i);return Nf(u).drawImage(t,-e,-o),nl(u,n)}(t,n.getType(),e,o,r,i)})}function dl(t){return tD(t)}function ml(t){return oD(t)}function gl(t,n){return rD(t,n)}function pl(t,n){return nD(t,n)}function hl(t,n){return eD(t,n)}function vl(t,n){return fl(t,n)}function bl(t,n,e){return function r(n,e,o){return n.toCanvas().then(function(t){return cl(t,e,o).then(function(t){return nl(t,n.getType())})})}(t,n,e)}function yl(t,n){return sl(t,n)}function xl(t,n){return ih({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},n)}function wl(t,n){return xl(na(t,n),{})}function Sl(t,n){return xl(na(t,n),{behaviours:Po([uk.config({})])})}function kl(t,n,e){return{dom:{tag:"span",innerHtml:e.translate(t),classes:[n+"__select-label"]},behaviours:Po([uk.config({})])}}function Cl(t,n,o){function e(t,n){var e=Ew.getValue(t);return sk.focus(e),on(e,"keydown",{raw:n.event().raw()}),VT.close(e),ch.some(!0)}var r=Rv(Q),i=t.text.map(function(t){return Zu(kl(t,n,o.providers))}),u=t.icon.map(function(t){return Zu(Sl(t,o.providers.icons))}),a=t.role.fold(function(){return{}},function(t){return{role:t}}),c=t.tooltip.fold(function(){return{}},function(t){var n=o.providers.translate(t);return{title:n,"aria-label":n}});return Zu(VT.sketch(ih(ih({},a),{dom:{tag:"button",classes:[n,n+"--select"].concat(y(t.classes,function(t){return n+"--"+t})),attributes:ih({},c)},components:Ra([u.map(function(t){return t.asSpec()}),i.map(function(t){return t.asSpec()}),ch.some({dom:{tag:"div",classes:[n+"__select-chevron"],innerHtml:na("chevron-down",o.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Po(b(t.dropdownBehaviours,[FC(t.disabled),HT.config({}),uk.config({}),_u("dropdown-events",[Fa(t,r),Ia(t,r)]),_u("menubutton-update-display-text",[bn(aD,function(n,e){i.bind(function(t){return t.getOpt(n)}).each(function(t){uk.set(t,[ze(o.providers.translate(e.event().text()))])})}),bn(cD,function(n,e){u.bind(function(t){return t.getOpt(n)}).each(function(t){uk.set(t,[Sl(e.event().icon(),o.providers.icons)])})})])])),eventOrder:Fh(uD,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Po([rk.config({mode:"special",onLeft:e,onRight:e})]),lazySink:o.getSink,toggleClass:n+"--active",parts:{menu:mc(0,t.columns,t.presets)},fetch:function(){return mT(t.fetch)}}))).asSpec()}function Ol(t){return"separator"===t.type}function Tl(t,e){var n=S(t,function(t,n){return dh(n)?""===n?t:"|"===n?0<t.length&&!Ol(t[t.length-1])?t.concat([sD]):t:Ah(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])},[]);return 0<n.length&&Ol(n[n.length-1])&&n.pop(),n}function El(t,n){return Ah(t,"getSubmenuItems")?(o=n,r=(e=t).getSubmenuItems(),i=fD(r,o),{item:e,menus:Fh(i.menus,j(e.value,i.items)),expansions:Fh(i.expansions,j(e.value,e.value))}):{item:t,menus:{},expansions:{}};var e,o,r,i}function Dl(t,e,o,n){var r=Qn("primary-menu"),i=fD(t,o.shared.providers.menuItems());if(0===i.items.length)return ch.none();var u=Cc(r,i.items,e,o,n),a=V(i.menus,function(t,n){return Cc(n,t,e,o,!1)}),c=Fh(a,j(r,u));return ch.from(_k.tieredData(r,c,i.expansions))}function Bl(e){return{isDisabled:function(){return _C.isDisabled(e)},setDisabled:function(t){return _C.set(e,t)},setActive:function(t){var n=e.element();t?(he(n,"tox-tbtn--enabled"),Gn(n,"aria-pressed",!0)):(be(n,"tox-tbtn--enabled"),qn(n,"aria-pressed"))},isActive:function(){return ye(e.element(),"tox-tbtn--enabled")}}}function Al(t,n,e,o){return Cl({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(n){t.fetch(function(t){n(Dl(t,NC.CLOSE_ON_EXECUTE,e,!1))})},onSetup:t.onSetup,getApi:Bl,columns:1,presets:"normal",classes:[],dropdownBehaviours:[xT.config({})]},n,e.shared)}function _l(n,r,i){return function(t){t(y(n,function(t){var n,e,o=t.text.fold(function(){return{}},function(t){return{text:t}});return ih(ih({type:t.type},o),{onAction:(e=t,function(t){var n=!t.isActive();t.setActive(n),e.storage.set(n),i.shared.getSink().each(function(t){r().getOpt(t).each(function(t){jo(t.element()),on(t,qO,{name:e.name,value:e.storage.get()})})})}),onSetup:(n=t,function(t){t.setActive(n.storage.get())})})}))}}function Ml(t,n,e,o,r){void 0===e&&(e=[]);var i=n.fold(function(){return{}},function(t){return{action:t}}),u=ih({buttonBehaviours:Po([FC(t.disabled),xT.config({}),_u("button press",[vn("click"),vn("mousedown")])].concat(e)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},i),a=Fh(u,{dom:o});return Fh(a,{components:r})}function Fl(t,n,e,o){return void 0===o&&(o=[]),Ml(t,n,o,{tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map(function(t){return{"aria-label":e.translate(t),title:e.translate(t)}}).getOr({})},Ra([t.icon.map(function(t){return wl(t,e.icons)})]))}function Il(t,n,e,o){void 0===o&&(o=[]);var r=Fl(t,ch.some(n),e,o);return Rk.sketch(r)}function Rl(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=e.translate(t.text),u=t.icon?t.icon.map(function(t){return wl(t,e.icons)}):ch.none(),a=u.isSome()?Ra([u]):[],c=u.isSome()?{}:{innerHtml:i},s=b(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],u.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],r);return Ml(t,n,o,ih(ih({tag:"button",classes:s},c),{attributes:{title:i}}),a)}function Vl(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=Rl(t,ch.some(n),e,o,r);return Rk.sketch(i)}function Hl(n,e){return function(t){"custom"===e?on(t,qO,{name:n,value:{}}):"submit"===e?en(t,KO):"cancel"===e?en(t,YO):w.console.error("Unknown button type: ",e)}}function Nl(t,n,e){if("menu"===n){var o=t,r=Zu(Al(ih(ih({},t),{fetch:_l(o.items,function(){return r},e)}),"tox-tbtn",e,ch.none()));return r.asSpec()}if("custom"===n||"cancel"===n||"submit"===n){var i=Hl(t.name,n);return Vl(ih(ih({},t),{borderless:!1}),i,e.shared.providers,[])}w.console.error("Unknown footer button type: ",n)}function Pl(t,n){var e=Hl(t.name,"custom");return fs(ch.none(),eT.parts().field(ih({factory:Rk},Rl(t,ch.some(e),n,[GE(""),VE()]))),[],[])}function zl(t,n){return qw({factory:eT,name:t,overrides:function(o){return{fieldBehaviours:Po([_u("coupled-input-behaviour",[bn(kb(),function(e){vi(e,o,n).bind(uS.getCurrent).each(function(n){vi(e,o,"lock").each(function(t){gk.isOn(t)&&o.onLockedChange(e,n,t)})})})])])}}})}function Ll(t){var n=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===n)return lh.error(t);var e=parseFloat(n[1]),o=n[2];return lh.value({value:e,unit:o})}function jl(t,n){function e(t){return Object.prototype.hasOwnProperty.call(o,t)}var o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,"in":1};return t.unit===n?ch.some(t.value):e(t.unit)&&e(n)?o[t.unit]===o[n]?ch.some(t.value):ch.some(t.value/o[t.unit]*o[n]):ch.none()}function Ul(){return ch.none()}function Wl(t,n){return(e=Ll(t).toOption(),o=Ll(n).toOption(),r=function(t,o){return jl(t,o.unit).map(function(t){return o.value/t}).map(function(t){return n=t,e=o.unit,function(t){return jl(t,e).map(function(t){return{value:t*n,unit:e}})};var n,e}).getOr(Ul)},e.isSome()&&o.isSome()?ch.some(r(e.getOrDie(),o.getOrDie())):ch.none()).getOr(Ul);var e,o,r}function Gl(e,n){function t(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}}function o(n){return eT.parts().field({factory:rT,inputClasses:["tox-textfield"],inputBehaviours:Po([_C.config({disabled:e.disabled}),xT.config({}),_u("size-input-events",[bn(yb(),function(t){on(t,i,{isField1:n})}),bn(Cb(),function(t){on(t,GO,{name:e.name})})])]),selectOnFocus:!1})}function r(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}}}var a=Ul,i=Qn("ratio-event"),u=mD.parts().lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:n.translate(e.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:na("lock",n.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:na("unlock",n.icons)}}],buttonBehaviours:Po([FC(e.disabled),xT.config({})])}),c=mD.parts().field1(t([eT.parts().label(r("Width")),o(!0)])),s=mD.parts().field2(t([eT.parts().label(r("Height")),o(!1)]));return mD.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,s,t([r("&nbsp;"),u])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,i){Ll(Ew.getValue(t)).each(function(t){a(t).each(function(t){var n,e,o,r;Ew.setValue(i,(o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,"in":4,"%":4},-1!==(r=(n=t).value.toFixed((e=n.unit)in o?o[e]:1)).indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+n.unit))})})},coupledFieldBehaviours:Po([_C.config({disabled:e.disabled,onDisabled:function(t){mD.getField1(t).bind(eT.getField).each(_C.disable),mD.getField2(t).bind(eT.getField).each(_C.disable),mD.getLock(t).each(_C.disable)},onEnabled:function(t){mD.getField1(t).bind(eT.getField).each(_C.enable),mD.getField2(t).bind(eT.getField).each(_C.enable),mD.getLock(t).each(_C.enable)}}),_u("size-input-events2",[bn(i,function(t,n){var e=n.event().isField1(),o=e?mD.getField1(t):mD.getField2(t),r=e?mD.getField2(t):mD.getField1(t),i=o.map(Ew.getValue).getOr(""),u=r.map(Ew.getValue).getOr("");a=Wl(i,u)})])])})}function Xl(r,c){function t(t,n,e,o){return Zu(Vl({name:t,text:t,disabled:e,primary:o,icon:ch.none(),borderless:!1},n,c))}function n(t,n,e,o){return Zu(Il({name:t,icon:ch.some(t),tooltip:ch.some(n),disabled:o,primary:!1,borderless:!1},e,c))}function u(t,e){t.map(function(t){var n=t.get(e);n.hasConfigured(_C)&&_C.disable(n)})}function a(t,e){t.map(function(t){var n=t.get(e);n.hasConfigured(_C)&&_C.enable(n)})}function i(t,n,e){on(t,n,e)}function s(t){return en(t,bD.disable())}function f(t){return en(t,bD.enable())}function l(t,n){s(t),i(t,gD.transform(),{transform:n}),f(t)}function e(t){return function(){$.getOpt(t).each(function(t){uk.set(t,[J])})}}function d(t,n){s(t),i(t,gD.transformApply(),{transform:n,swap:e(t)}),f(t)}function m(){return t("Back",function(t){return i(t,gD.back(),{swap:e(t)})},!1,!1)}function o(){return Zu({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Po([_C.config({})])})}function g(){return t("Apply",function(t){return i(t,gD.apply(),{swap:e(t)})},!0,!0)}function p(){return function(t){var n=r.getRect();return ll(t,n.x,n.y,n.w,n.h)}}function h(n,e){return function(t){return n(t,e)}}function v(t,n){var e,o;o=n,s(e=t),i(e,gD.tempTransform(),{transform:o}),f(e)}function b(t,n,e,o,r){var i=CE.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:c.translate(t)}}),u=CE.parts().spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),a=CE.parts().thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Zu(CE.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e,maxX:r,getInitialValue:nh({x:nh(o)})},components:[i,u,a],sliderBehaviours:Po([sk.config({})]),onChoose:n}))}function y(t,n,e,o,r){return[m(),(i=n,b(t,function(t,n,e){l(t,h(i,e.x()/100))},e,o,r)),g()];var i}function x(t,n,e,o,r){var i=y(t,n,e,o,r);return HO.sketch({dom:C,components:i.map(function(t){return t.asSpec()}),containerBehaviours:Po([_u("image-tools-filter-panel-buttons-events",[bn(bD.disable(),function(t){u(i,t)}),bn(bD.enable(),function(t){a(i,t)})])])})}function w(n,e,o){return function(t){return al(t,n,e,o)}}function S(t){return b(t,function(r){var t=j.getOpt(r),n=W.getOpt(r),i=U.getOpt(r);t.each(function(o){n.each(function(e){i.each(function(t){var n=w(Ew.getValue(o).x()/100,Ew.getValue(t).x()/100,Ew.getValue(e).x()/100);l(r,n)})})})},0,100,200)}function k(n,e,o){return function(t){i(t,gD.swap(),{transform:e,swap:function(){$.getOpt(t).each(function(t){uk.set(t,[n]),o(t)})}})}}var C={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},O=Q,T=[m(),o(),t("Apply",function(t){d(t,p()),r.hideCrop()},!1,!0)],E=HO.sketch({dom:C,components:T.map(function(t){return t.asSpec()}),containerBehaviours:Po([_u("image-tools-crop-buttons-events",[bn(bD.disable(),function(t){u(T,t)}),bn(bD.enable(),function(t){a(T,t)})])])}),D=Zu(Gl({name:"size",label:ch.none(),constrain:!0,disabled:!1},c)),B=[m(),o(),D,o(),t("Apply",function(i){D.getOpt(i).each(function(t){var n,e,o=Ew.getValue(t),r=(n=parseInt(o.width,10),e=parseInt(o.height,10),function(t){return bl(t,n,e)});d(i,r)})},!1,!0)],A=HO.sketch({dom:C,components:B.map(function(t){return t.asSpec()}),containerBehaviours:Po([_u("image-tools-resize-buttons-events",[bn(bD.disable(),function(t){u(B,t)}),bn(bD.enable(),function(t){a(B,t)})])])}),_=h(vl,"h"),M=h(vl,"v"),F=h(yl,-90),I=h(yl,90),R=[m(),o(),n("flip-horizontally","Flip horizontally",function(t){v(t,_)},!1),n("flip-vertically","Flip vertically",function(t){v(t,M)},!1),n("rotate-left","Rotate counterclockwise",function(t){v(t,F)},!1),n("rotate-right","Rotate clockwise",function(t){v(t,I)},!1),o(),g()],V=HO.sketch({dom:C,components:R.map(function(t){return t.asSpec()}),containerBehaviours:Po([_u("image-tools-fliprotate-buttons-events",[bn(bD.disable(),function(t){u(R,t)}),bn(bD.enable(),function(t){a(R,t)})])])}),H=[m(),o(),g()],N=HO.sketch({dom:C,components:H.map(function(t){return t.asSpec()})}),P=x("Brightness",pl,-100,0,100),z=x("Contrast",hl,-100,0,100),L=x("Gamma",gl,-100,0,100),j=S("R"),U=S("G"),W=S("B"),G=[m(),j,U,W,g()],X=HO.sketch({dom:C,components:G.map(function(t){return t.asSpec()})}),Y=ch.some(ml),q=ch.some(dl),K=[n("crop","Crop",k(E,ch.none(),function(){r.showCrop()}),!1),n("resize","Resize",k(A,ch.none(),function(t){D.getOpt(t).each(function(t){var n=r.getMeasurements(),e=n.width,o=n.height;Ew.setValue(t,{width:e,height:o})})}),!1),n("orientation","Orientation",k(V,ch.none(),O),!1),n("brightness","Brightness",k(P,ch.none(),O),!1),n("sharpen","Sharpen",k(N,Y,O),!1),n("contrast","Contrast",k(z,ch.none(),O),!1),n("color-levels","Color levels",k(X,ch.none(),O),!1),n("gamma","Gamma",k(L,ch.none(),O),!1),n("invert","Invert",k(N,q,O),!1)],J=HO.sketch({dom:C,components:K.map(function(t){return t.asSpec()})}),$=Zu(HO.sketch({dom:{tag:"div"},components:[J],containerBehaviours:Po([uk.config({})])}));return{memContainer:$,getApplyButton:function(t){return $.getOpt(t).map(function(t){var n=t.components()[0];return n.components()[n.components().length-1]})}}}function Yl(t){var n,e;if(t.changedTouches)for(n="screenX screenY pageX pageY clientX clientY".split(" "),e=0;e<n.length;e++)t[n[e]]=t.changedTouches[0][n[e]]}function ql(t,r){var i,u,n,a,c,f,l,d=r.document||w.document;r=r||{};var m=d.getElementById(r.handle||t);n=function(t){var n,e,o=function s(t){var n,e,o,r,i,u,a,c=Math.max;return n=t.documentElement,e=t.body,o=c(n.scrollWidth,e.scrollWidth),r=c(n.clientWidth,e.clientWidth),i=c(n.offsetWidth,e.offsetWidth),u=c(n.scrollHeight,e.scrollHeight),a=c(n.clientHeight,e.clientHeight),{width:o<i?r:o,height:u<c(n.offsetHeight,e.offsetHeight)?a:u}}(d);Yl(t),t.preventDefault(),u=t.button,n=m,f=t.screenX,l=t.screenY,e=w.window.getComputedStyle?w.window.getComputedStyle(n,null).getPropertyValue("cursor"):n.runtimeStyle.cursor,i=yD("<div></div>").css({position:"absolute",top:0,left:0,width:o.width,height:o.height,zIndex:2147483647,opacity:1e-4,cursor:e}).appendTo(d.body),yD(d).on("mousemove touchmove",c).on("mouseup touchend",a),r.start(t)},c=function(t){if(Yl(t),t.button!==u)return a(t);t.deltaX=t.screenX-f,t.deltaY=t.screenY-l,t.preventDefault(),r.drag(t)},a=function(t){Yl(t),yD(d).off("mousemove touchmove",c).off("mouseup touchend",a),i.remove(),r.stop&&r.stop(t)},this.destroy=function(){yD(m).off()},yD(m).on("mousedown touchstart",n)}function Kl(n){function c(t,s){g.getOpt(t).each(function(t){var e=l.get(),o=Xe(t.element()),r=je(t.element()),i=s.dom().naturalWidth*e,u=s.dom().naturalHeight*e,a=Math.max(0,o/2-i/2),c=Math.max(0,r/2-u/2),n={left:a.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:u.toString()+"px",position:"absolute"};Te(s,n),f.getOpt(t).each(function(t){Te(t.element(),n)}),d.get().each(function(t){var n=m.get();t.setRect({x:n.x*e+a,y:n.y*e+c,w:n.w*e,h:n.h*e}),t.setClampRect({x:a,y:c,w:i,h:u}),t.setViewPortRect({x:0,y:0,w:o,h:r})})})}function e(t,n){var e,a=Hv.fromTag("img");return Gn(a,"src",n),(e=a.dom(),new Xk(function(t){var n=function(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)})).then(function(){return g.getOpt(t).map(function(t){var n=Ry({element:a});uk.replaceAt(t,1,ch.some(n));var e=s.get(),o={x:0,y:0,w:a.dom().naturalWidth,h:a.dom().naturalHeight};s.set(o);var r,u,i=xD.inflate(o,-20,-20);return m.set(i),e.w===o.w&&e.h===o.h||(r=t,u=a,g.getOpt(r).each(function(t){var n=Xe(t.element()),e=je(t.element()),o=u.dom().naturalWidth,r=u.dom().naturalHeight,i=Math.min(n/o,e/r);1<=i?l.set(1):l.set(i)})),c(t,a),a})})}var f=Zu({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),l=Rv(1),d=Rv(ch.none()),m=Rv({x:0,y:0,w:1,h:1}),s=Rv({x:0,y:0,w:1,h:1}),g=Zu(HO.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[f.asSpec(),{dom:{tag:"img",attributes:{src:n}}},{dom:{tag:"div"},behaviours:Po([_u("image-panel-crop-events",[ly(function(t){g.getOpt(t).each(function(t){var n=t.element().dom(),e=OD({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},n,function(){});e.toggleVisibility(!1),e.on("updateRect",function(t){var n=t.rect,e=l.get(),o={x:Math.round(n.x/e),y:Math.round(n.y/e),w:Math.round(n.w/e),h:Math.round(n.h/e)};m.set(o)}),d.set(ch.some(e))})})])])}],containerBehaviours:Po([uk.config({}),_u("image-panel-events",[ly(function(t){e(t,n)})])])}));return{memContainer:g,updateSrc:e,zoom:function(t,n){var e=l.get(),o=0<n?Math.min(2,e+.1):Math.max(.1,e-.1);l.set(o),g.getOpt(t).each(function(t){c(t,t.components()[1].element())})},showCrop:function(){d.get().each(function(t){t.toggleVisibility(!0)})},hideCrop:function(){d.get().each(function(t){t.toggleVisibility(!1)})},getRect:function(){return m.get()},getMeasurements:function(){var t=s.get();return{width:t.w,height:t.h}}}}function Jl(t,n,e,o,r){return Il({name:t,icon:ch.some(n),disabled:e,tooltip:ch.some(t),primary:!1,borderless:!1},o,r)}function $l(t,n){n?_C.enable(t):_C.disable(t)}function Ql(t){function o(t){n.set(t)}function r(t){w.URL.revokeObjectURL(t.url)}function e(t){var n,e=a(t);return o(e),n=u.add(e).removed,SD.each(n,r),e.url}var n=Rv(t),i=Rv(ch.none()),u=function s(){function t(){return 0<o}function n(){return-1!==o&&o<e.length-1}var e=[],o=-1;return{data:e,add:function r(t){var n;return n=e.splice(++o),e.push(t),{state:t,removed:n}},undo:function i(){if(t())return e[--o]},redo:function u(){if(n())return e[++o]},canUndo:t,canRedo:n}}();u.add(t);var a=function(t){return{blob:t,url:w.URL.createObjectURL(t)}},c=function(){i.get().each(r),i.set(ch.none())};return{getBlobState:function(){return n.get()},setBlobState:o,addBlobState:e,getTempState:function(){return i.get().fold(function(){return n.get()},function(t){return t})},updateTempState:function(t){var n=a(t);return c(),i.set(ch.some(n)),n.url},addTempState:function(t){var n=a(t);return i.set(ch.some(n)),n.url},applyTempState:function(n){return i.get().fold(function(){},function(t){e(t.blob),n()})},destroyTempState:c,undo:function(){var t=u.undo();return o(t),t.url},redo:function(){var t=u.redo();return o(t),t.url},getHistoryStates:function(){return{undoEnabled:u.canUndo(),redoEnabled:u.canRedo()}}}}function Zl(t,n){function i(t){var n=f.getHistoryStates();p.updateButtonUndoStates(t,n.undoEnabled,n.redoEnabled),on(t,bD.formActionEvent,{name:bD.saveState(),value:n.undoEnabled})}function u(t){return t.toBlob()}function a(t){on(t,bD.formActionEvent,{name:bD.disable(),value:{}})}function c(n,t,e,o,r){return a(n),tl(t).then(e).then(u).then(o).then(function(t){return d(n,t).then(function(t){return i(n),r(),l(n),t})})["catch"](function(t){return w.console.log(t),l(n),t})}function s(t,n,e){c(t,f.getBlobState().blob,n,function(t){return f.updateTempState(t)},e)}var e,o,r,f=Ql(t.currentState),l=function(t){h.getApplyButton(t).each(function(t){_C.enable(t)}),on(t,bD.formActionEvent,{name:bD.enable(),value:{}})},d=function(t,n){return a(t),g.updateSrc(t,n)},m=function(t){var n=f.getBlobState().url;return f.destroyTempState(),i(t),n},g=Kl(t.currentState.url),p=(o=Zu(Jl("Undo","undo",!0,function(t){on(t,gD.undo(),{direction:1})},e=n)),r=Zu(Jl("Redo","redo",!0,function(t){on(t,gD.redo(),{direction:1})},e)),{container:HO.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),r.asSpec(),Jl("Zoom in","zoom-in",!1,function(t){on(t,gD.zoom(),{direction:1})},e),Jl("Zoom out","zoom-out",!1,function(t){on(t,gD.zoom(),{direction:-1})},e)]}),updateButtonUndoStates:function(t,n,e){o.getOpt(t).each(function(t){$l(t,n)}),r.getOpt(t).each(function(t){$l(t,e)})}}),h=Xl(g,n);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[h.memContainer.asSpec(),g.memContainer.asSpec(),p.container],behaviours:Po([Ew.config({store:{mode:"manual",getValue:function(){return f.getBlobState()}}}),_u("image-tools-events",[bn(gD.undo(),function(t){var n=f.undo();d(t,n).then(function(){l(t),i(t)})}),bn(gD.redo(),function(t){var n=f.redo();d(t,n).then(function(){l(t),i(t)})}),bn(gD.zoom(),function(t,n){var e=n.event().direction();g.zoom(t,e)}),bn(gD.back(),function(t,n){var e,o;o=m(e=t),d(e,o).then(function(){l(e)}),n.event().swap()(),g.hideCrop()}),bn(gD.apply(),function(t,n){f.applyTempState(function(){m(t),n.event().swap()()})}),bn(gD.transform(),function(t,n){return s(t,n.event().transform(),Q)}),bn(gD.tempTransform(),function(t,n){return e=t,o=n.event().transform(),void c(e,f.getTempState().blob,o,function(t){return f.addTempState(t)},Q);var e,o}),bn(gD.transformApply(),function(t,n){return e=t,o=n.event().transform(),r=n.event().swap(),i=f.getBlobState().blob,void c(e,i,o,function(t){var n=f.addBlobState(t);return m(e),n},r);var e,o,r,i}),bn(gD.swap(),function(n,t){var e;e=n,p.updateButtonUndoStates(e,!1,!1);var o=t.event().transform(),r=t.event().swap();o.fold(function(){r()},function(t){s(n,t,r)})})]),VE()])}}function td(n,e){var t=n.label.map(function(t){return ls(t,e)}),o=[_C.config({disabled:n.disabled}),rk.config({mode:"execution",useEnter:!0!==n.multiline,useControlEnter:!0===n.multiline,execute:function(t){return en(t,KO),ch.some(!0)}}),_u("textfield-change",[bn(kb(),function(t){on(t,GO,{name:n.name})}),bn(_b(),function(t){on(t,GO,{name:n.name})})]),xT.config({})],r=n.validation.map(function(o){return bT.config({getRoot:function(t){return Mn(t.element())},invalidClass:"tox-invalid",validator:{validate:function(t){var n=Ew.getValue(t),e=o.validator(n);return gT(!0===e?lh.value(n):lh.error(e))},validateOnLoad:o.validateOnLoad}})}).toArray(),i=n.placeholder.fold(nh({}),function(t){return{placeholder:e.translate(t)}}),u=n.inputMode.fold(nh({}),function(t){return{inputmode:t}}),a=ih(ih({},i),u);return fs(t,eT.parts().field({tag:!0===n.multiline?"textarea":"input",inputAttributes:a,inputClasses:[n.classname],inputBehaviours:Po(R([o,r])),selectOnFocus:!1,factory:rT}),(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),[_C.config({disabled:n.disabled,onDisabled:function(t){eT.getField(t).each(_C.disable)},onEnabled:function(t){eT.getField(t).each(_C.enable)}})])}function nd(){var n=Rv(null);return _y({readState:function(){return{timer:null!==n.get()?"set":"unset"}},setTimer:function(t){n.set(t)},cancel:function(){var t=n.get();null!==t&&t.cancel()}})}function ed(t,n,e){var o=Ew.getValue(e);Ew.setValue(n,o),AD(n)}function od(t,n){var e=t.element(),o=Me(e),r=e.dom();"number"!==Xn(e,"type")&&n(r,o)}function rd(t,n,o){if(t.selectsOver){var e=Ew.getValue(n),r=t.getDisplayText(e),i=Ew.getValue(o);return 0===t.getDisplayText(i).indexOf(r)?ch.some(function(){var t,e;ed(0,n,o),t=n,e=r.length,od(t,function(t,n){return t.setSelectionRange(e,n.length)})}):ch.none()}return ch.none()}function id(t){return RD(mT(t))}function ud(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:function(){}}}function ad(t,n){return{type:"menuitem",value:n,text:t,meta:{attach:undefined},onAction:function(){}}}function cd(t,n){return y((e=t,x(n,function(t){return t.type===e})),ud);var e}function sd(t,n){var e=t.toLowerCase();return x(n,function(t){return Gt((t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.text).toLowerCase(),e)||Gt(t.value.toLowerCase(),e)})}function fd(u,t,a){var n=Ew.getValue(t),c=n.meta.text!==undefined?n.meta.text:n.value;return a.getLinkInformation().fold(function(){return[]},function(t){var n,e,o,r,i=sd(c,y(a.getHistory(u),function(t){return ad(t,t)}));return"file"===u?S([i,sd(c,(r=t,cd("header",r.targets))),sd(c,R([(o=t,ch.from(o.anchorTop).map(function(t){return ad("<top>",t)}).toArray()),(e=t,cd("anchor",e.targets)),(n=t,ch.from(n.anchorBottom).map(function(t){return ad("<bottom>",t)}).toArray())]))],function(t,n){return 0===t.length||0===n.length?t.concat(n):t.concat(HD,n)},[]):i})}function ld(r,e,o){function n(t){var n=Ew.getValue(t);o.addToHistory(n.value,r.filetype)}var t,i,u,a,c,s=e.shared.providers,f=eT.parts().field({factory:ID,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":ND,type:"url"},minChars:0,responseTime:0,fetch:function(t){var n=Dl(fd(r.filetype,t,o),NC.BUBBLE_TO_SANDBOX,e,!1);return gT(n)},getHotspot:function(t){return h.getOpt(t)},onSetValue:function(t){t.hasConfigured(bT)&&bT.run(t).get(Q)},typeaheadBehaviours:Po(R([o.getValidationHandler().map(function(e){return bT.config({getRoot:function(t){return Mn(t.element())},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,n){d.getOpt(t).each(function(t){Gn(t.element(),"title",s.translate(n))})}},validator:{validate:function(t){var n=Ew.getValue(t);return VD(function(o){e({type:r.filetype,url:n.value},function(t){if("invalid"===t.status){var n=lh.error(t.message);o(n)}else{var e=lh.value(t.message);o(e)}})})},validateOnLoad:!1}})}).toArray(),[_C.config({disabled:r.disabled}),xT.config({}),_u("urlinput-events",R(["file"===r.filetype?[bn(kb(),function(t){on(t,GO,{name:r.name})})]:[],[bn(Cb(),function(t){on(t,GO,{name:r.name}),n(t)}),bn(_b(),function(t){on(t,GO,{name:r.name}),n(t)})]]))]])),eventOrder:(t={},t[kb()]=["streaming","urlinput-events","invalidating"],t),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:mc(0,0,"normal")},onExecute:function(t,n){on(n,KO,{})},onItemExecute:function(t){n(t),on(t,GO,{name:r.name})}}),l=r.label.map(function(t){return ls(t,s)}),d=Zu((i="invalid",u=ch.some(ND),void 0===(a="warning")&&(a=i),void 0===c&&(c=i),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+i],innerHtml:na(a,s.icons),attributes:ih({title:s.translate(c),"aria-live":"polite"},u.fold(function(){return{}},function(t){return{id:t}}))}})),m=Zu({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[d.asSpec()]}),g=o.getUrlPicker(r.filetype),p=Qn("browser.url.event"),h=Zu({dom:{tag:"div",classes:["tox-control-wrap"]},components:[f,m.asSpec()],behaviours:Po([_C.config({disabled:r.disabled})])}),v=Zu(Vl({name:r.name,icon:ch.some("browse"),text:r.label.getOr(""),disabled:r.disabled,primary:!1,borderless:!0},function(t){return en(t,p)},s,[],["tox-browse-url"]));return eT.sketch({dom:ST([]),components:l.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:R([[h.asSpec()],g.map(function(){return v.asSpec()}).toArray()])}]),fieldBehaviours:Po([_C.config({disabled:r.disabled,onDisabled:function(t){eT.getField(t).each(_C.disable),v.getOpt(t).each(_C.disable)},onEnabled:function(t){eT.getField(t).each(_C.enable),v.getOpt(t).each(_C.enable)}}),_u("url-input-events",[bn(p,function(o){uS.getCurrent(o).each(function(n){var e=Ew.getValue(n);g.each(function(t){t(e).get(function(t){Ew.setValue(n,t),on(o,GO,{name:r.name})})})})})])])})}function dd(a,n){function t(o){return function(n,e){ro(e.event().target(),"[data-collection-item-value]").each(function(t){o(n,e,t,Xn(t,"data-collection-item-value"))})}}var e,o,r=a.label.map(function(t){return ls(t,n)}),i=[bn(bb(),t(function(t,n,e){jo(e)})),bn(nn(),t(function(t,n,e,o){n.stop(),on(t,qO,{name:a.name,value:o})})),bn(yb(),t(function(t,n,e){oo(t.element(),"."+SC).each(function(t){be(t,SC)}),he(e,SC)})),bn(xb(),t(function(t){oo(t.element(),"."+SC).each(function(t){be(t,SC)})})),gy(t(function(t,n,e,o){on(t,qO,{name:a.name,value:o})}))];return fs(r,eT.parts().field({dom:{tag:"div",classes:["tox-collection"].concat(1!==a.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:l},behaviours:Po([uk.config({}),Ew.config({store:{mode:"memory",initialValue:[]},onSetValue:function(o,t){var n,e,r;n=o,e=y(t,function(t){var n,e=mC.translate(t.text),o=1===a.columns?'<div class="tox-collection__item-label">'+e+"</div>":"",r='<div class="tox-collection__item-icon">'+t.icon+"</div>",i={_:" "," - ":" ","-":" "},u=e.replace(/\_| \- |\-/g,function(t){return i[t]});return'<div class="tox-collection__item" tabindex="-1" data-collection-item-value="'+('"'===(n=t.value)?"&quot;":n)+'" title="'+u+'" aria-label="'+u+'">'+r+o+"</div>"}),r=y(1<a.columns&&"auto"!==a.columns?g(e,a.columns):[e],function(t){
return'<div class="tox-collection__group">'+t.join("")+"</div>"}),Un(n.element(),r.join("")),"auto"===a.columns&&da(o,5,"tox-collection__item").each(function(t){var n=t.numRows,e=t.numColumns;rk.setGridSize(o,n,e)}),en(o,ZO)}}),xT.config({}),rk.config((e=a.columns,o="normal",1===e?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===o?".tox-swatches__row":".tox-collection__group",cell:"color"===o?"."+hC:"."+pC}})),_u("collection-events",i)])}),["tox-form__group--collection"],[])}function md(r){return function(n,e,o){return Lh(e,"name").fold(function(){return r(e,o)},function(t){return n.field(t,r(e,o))})}}function gd(n,t,e){var o=Fh(e,{shared:{interpreter:function(t){return LD(n,t,o)}}});return LD(n,t,o)}function pd(t){return{colorPicker:(r=t,function(t,n){gO.colorPickerDialog(r)(t,n)}),hasCustomColors:(o=t,function(){return rO(o)}),getColors:(e=t,function(){return iO(e)}),getColorCols:(n=t,function(){return gO.getColorCols(n)})};var n,e,o,r}function hd(n){return(t=n,ch.from(t.getParam("style_formats")).filter(gh)).map(function(o){var t=function(n){function t(t){Sh(t,function(t){n.formatter.has(t.name)||n.formatter.register(t.name,t.format)})}var e=XD(o);return n.formatter?t(e.customFormats):n.on("init",function(){t(e.customFormats)}),e.formats}(n);return n.getParam("style_formats_merge",!1,"boolean")?GD.concat(t):t}).getOr(GD);var t}function vd(t,n,e){var o={type:"formatter",isSelected:n(t.format),getStylePreview:e(t.format)};return Fh(t,o)}function bd(s,t,f,l){var d=function(t){return y(t,function(t){var n,e,o,r,i,u,a=Oh(t);if(G(t,"items")){var c=d(t.items);return Fh((n=t,e={type:"submenu",isSelected:nh(!1),getStylePreview:function(){return ch.none()}},Fh(n,e)),{getStyleItems:function(){return c}})}return G(t,"format")?vd(t,f,l):1===a.length&&wh(a,"title")?Fh(t,{type:"separator"}):(r=Qn((o=t).title),i={type:"formatter",format:r,isSelected:f(r),getStylePreview:l(r)},u=Fh(o,i),s.formatter.register(r,u),u)})};return d(t)}function yd(n){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===n)return!0;if(t.getAttribute("data-mce-contenteditable")===n)return!0}return!1}}function xd(t,n,e,o,r){return{type:t,title:n,url:e,level:o,attach:r}}function wd(t){return t.innerText||t.textContent}function Sd(t){return(n=t)&&"A"===n.nodeName&&(n.id||n.name)!==undefined&&JD(t);var n}function kd(t){return t&&/^(H[1-6])$/.test(t.nodeName)}function Cd(t){return kd(t)&&JD(t)}function Od(t){var n,e,o=(n=t).id?n.id:Qn("h");return xd("header",wd(t),"#"+o,kd(e=t)?parseInt(e.nodeName.substr(1),10):0,function(){t.id=o})}function Td(t){var n=t.id||t.name;return xd("anchor",wd(t)||"#"+n,"#"+n,0,Q)}function Ed(t){return n="h1,h2,h3,h4,h5,h6,a:not([href])",e=t,y(sr(Hv.fromDom(e),n),function(t){return t.dom()});var n,e}function Dd(t){return 0<YD(t.title).length}function Bd(t){return dh(t)&&/^https?/.test(t)}function Ad(t){return mh(t)&&A(t,function(t){return!(gh(n=t)&&n.length<=5&&T(n,Bd));var n}).isNone()}function _d(){var t,n=w.localStorage.getItem(QD);if(null===n)return{};try{t=JSON.parse(n)}catch(Qp){if(Qp instanceof SyntaxError)return w.console.log("Local storage "+QD+" was not valid JSON",Qp),{};throw Qp}return Ad(t)?t:(w.console.log("Local storage "+QD+" was not valid format",t),{})}function Md(t){var n=_d();return Object.prototype.hasOwnProperty.call(n,t)?n[t]:[]}function Fd(n,t){if(Bd(n)){var e=_d(),o=x(Object.prototype.hasOwnProperty.call(e,t)?e[t]:[],function(t){return t!==n});e[t]=[n].concat(o).slice(0,5),function(t){if(!Ad(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));w.localStorage.setItem(QD,JSON.stringify(t))}(e)}}function Id(t){return!!t}function Rd(t){return V(SD.makeMap(t,/[, ]/),Id)}function Vd(t,n,e){var o,r,i=(o=t,r=n,ZD.call(o,r)?ch.some(o[r]):ch.none()).getOr(e);return dh(i)?ch.some(i):ch.none()}function Hd(t){return ch.some(t.file_picker_callback).filter(hh)}function Nd(t,n){var e,o,r,i,u=(e=t,o=ch.some(e.file_picker_types).filter(Id),r=ch.some(e.file_browser_callback_types).filter(Id),i=o.or(r).map(Rd),Hd(e).fold(function(){return!1},function(){return i.fold(function(){return!0},function(t){return 0<Oh(t).length&&t})}));return ph(u)?u?Hd(t):ch.none():u[n]?Hd(t):ch.none()}function Pd(n){return{getHistory:Md,addToHistory:Fd,getLinkInformation:function(){return!1===(t=n).settings.typeahead_urls?ch.none():ch.some({targets:$D(t.getBody()),anchorTop:Vd(t.settings,"anchor_top","#top").getOrUndefined(),anchorBottom:Vd(t.settings,"anchor_bottom","#bottom").getOrUndefined()});var t},getValidationHandler:function(){return t=n,ch.from(t.settings.file_picker_validator_handler).filter(hh).orThunk(function(){return ch.from(t.settings.filepicker_validator_handler).filter(hh)});var t},getUrlPicker:function(t){return i=t,Nd((r=n).settings,i).map(function(o){return function(n){return mT(function(e){var t=SD.extend({filetype:i},ch.from(n.meta).getOr({}));o.call(r,function(t,n){if(!dh(t))throw new Error("Expected value to be string");if(n!==undefined&&!mh(n))throw new Error("Expected meta to be a object");e({value:t,meta:n})},n.value,t)})}});var r,i}}}function zd(t,n,e,o){var r,i=Rv(!1),u={shared:{providers:{icons:function(){return n.ui.registry.getAll().icons},menuItems:function(){return n.ui.registry.getAll().menuItems},translate:mC.translate},interpreter:function(t){return LD(zD,t,u)},anchors:WD(n,e,o),getSink:function(){return lh.value(t)}},urlinput:Pd(n),styleselect:function(e){function o(t){return function(){return e.formatter.match(t)}}function r(n){return function(){var t=e.formatter.get(n);return t!==undefined?ch.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styleAttr:e.formatter.getCssText(n)}):ch.none()}}var i=function(t){var n=t.items;return n!==undefined&&0<n.length?O(n,i):[t.format]},u=Rv([]),a=Rv([]),c=Rv([]),s=Rv([]),f=Rv(!1);return e.on("init",function(){var t=hd(e),n=bd(e,t,o,r);u.set(n),a.set(O(n,i))}),e.on("addStyleModifications",function(t){var n=bd(e,t.items,o,r);c.set(n),f.set(t.replace),s.set(O(n,i))}),{getData:function(){var t=f.get()?[]:u.get(),n=c.get();return t.concat(n)},getFlattenedKeys:function(){var t=f.get()?[]:a.get(),n=s.get();return t.concat(n)}}}(n),colorinput:pd(n),dialog:{isDraggableModal:(r=n,function(){return r.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return i.get()},setContextMenuState:function(t){return i.set(t)}};return u}function Ld(t,n,o){var e,r=(e=function(t,n){var e=o(t);return ch.some({element:nh(t),start:nh(n),finish:nh(n+e),width:nh(e)})},S(t,function(n,t){return e(t,n.len).fold(nh(n),function(t){return{len:t.finish(),list:n.list.concat([t])}})},{len:0,list:[]}).list),i=x(r,function(t){return t.finish()<=n}),u=p(i,function(t,n){return t+n.width()},0),a=r.slice(i.length);return{within:nh(i),extra:nh(a),withinWidth:nh(u)}}function jd(t){return y(t,function(t){return t.element()})}function Ud(t,n,e,o){var r,i,u,a,c,s,f,l,d,m=(r=Ld(n,t,e),0===r.extra().length?ch.some(r):ch.none()).getOrThunk(function(){return Ld(n,t-e(o),e)}),g=m.within(),p=m.extra(),h=m.withinWidth();return 1===p.length&&p[0].width()<=e(o)?(f=p,l=h,d=jd(g.concat(f)),rB(d,[],l)):1<=p.length?(u=p,a=o,c=h,s=jd(g).concat([a]),rB(s,jd(u),c)):(i=h,rB(jd(g),[],i))}function Wd(t,n){var e=y(n,function(t){return Ny(t)});oB.setGroups(t,e)}function Gd(t,n,e,o){var r=bi(t,n,"primary"),i=vi(t,n,"overflow-button"),u=CT.getCoupled(t,"overflowGroup");Oe(r.element(),"visibility","hidden");var a,c=(a=i,e.bind(function(n){return Wo(n.element()).bind(function(t){return n.getSystem().getByDom(t).toOption()})}).orThunk(function(){return a.filter(sk.isFocused)}));e.each(function(t){oB.setGroups(t,[])});var s=n.builtGroups.get();Wd(r,s.concat([u]));var f=Ud(Xe(r.element()),s,function(t){return Xe(t.element())},u);0===f.extra().length?(uk.remove(r,u),e.each(function(t){oB.setGroups(t,[])})):(Wd(r,f.within()),e.each(function(t){Wd(t,f.extra())})),Ae(r.element(),"visibility"),_e(r.element()),e.each(function(n){i.each(function(t){return gk.set(t,o(n))}),c.each(sk.focus)})}function Xd(o,t,n,e,r){var i="alloy.toolbar.toggle";return{uid:o.uid,dom:o.dom,components:t,behaviours:ri(o.splitToolbarBehaviours,[CT.config({others:ih(ih({},r.coupling),{overflowGroup:function(t){return aB.sketch(ih(ih({},e["overflow-group"]()),{items:[Rk.sketch(ih(ih({},e["overflow-button"]()),{action:function(){en(t,i)}}))]}))}})}),_u("toolbar-toggle-events",[bn(i,function(t){r.apis.toggle(t)})])]),apis:ih({setGroups:function(t,n){var e;e=y(n,t.getSystem().build),o.builtGroups.set(e),r.apis.refresh(t)},getMoreButton:function(t){return vi(t,o,"overflow-button")}},r.apis),domModification:{attributes:{role:"group"}}}}function Yd(t){return t.getSystem().isConnected()}function qd(t,n,e){var o=n.lazySink(t).getOrDie(),r=n.getAnchor(t),i=n.getOverflowBounds.map(function(t){return t()});aw.positionWithinBounds(o,r,e,i)}function Kd(n,e){var t=hw.getState(CT.getCoupled(n,"sandbox"));Gd(n,e,t,Yd),t.each(function(t){return qd(n,e,t)})}function Jd(n,e){hw.getState(CT.getCoupled(n,"sandbox")).each(function(t){return qd(n,e,t)})}function $d(n,t){return t.getAnimationRoot.fold(function(){return n.element()},function(t){return t(n)})}function Qd(t){return t.dimension.property}function Zd(t,n){return t.dimension.getDimension(n)}function tm(t,n){we($d(t,n),[n.shrinkingClass,n.growingClass])}function nm(t,n){be(t.element(),n.openClass),he(t.element(),n.closedClass),Oe(t.element(),Qd(n),"0px"),_e(t.element())}function em(t,n){be(t.element(),n.closedClass),he(t.element(),n.openClass),Ae(t.element(),Qd(n))}function om(t,n,e){e.setCollapsed(),Oe(t.element(),Qd(n),Zd(n,t.element())),_e(t.element()),tm(t,n),nm(t,n),n.onStartShrink(t),n.onShrunk(t)}function rm(t,n,e,o){var r=o.getOrThunk(function(){return Zd(n,t.element())});e.setCollapsed(),Oe(t.element(),Qd(n),r),_e(t.element());var i=$d(t,n);be(i,n.growingClass),he(i,n.shrinkingClass),nm(t,n),n.onStartShrink(t)}function im(t,n,e){var o=Zd(n,t.element());("0px"===o?om:rm)(t,n,e,ch.some(o))}function um(t,n,e){var o=$d(t,n),r=ye(o,n.shrinkingClass),i=Zd(n,t.element());em(t,n);var u=Zd(n,t.element());(r?function(){Oe(t.element(),Qd(n),i),_e(t.element())}:function(){nm(t,n)})(),be(o,n.shrinkingClass),he(o,n.growingClass),em(t,n),Oe(t.element(),Qd(n),u),e.setExpanded(),n.onStartGrow(t)}function am(t,n){return!0===ye($d(t,n),n.growingClass)}function cm(t,n){return!0===ye($d(t,n),n.shrinkingClass)}function sm(t){return gB.hasGrown(t)}function fm(t,n){var e,o,r,i=t.outerContainer;o=n,r=(e=t).outerContainer.element(),o&&(e.mothership.broadcastOn([vw()],{target:r}),e.uiMothership.broadcastOn([vw()],{target:r})),e.mothership.broadcastOn([xB],{readonly:o}),e.uiMothership.broadcastOn([xB],{readonly:o}),Jt("*",i.element()).forEach(function(t){i.getSystem().getByDom(t).each(function(t){t.hasConfigured(_C)&&_C.set(t,n)})})}function lm(t,n){t.on("init",function(){t.readonly&&fm(n,!0)}),t.on("SwitchMode",function(){return fm(n,t.readonly)}),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")}function dm(n){var t;return kx.config({channels:(t={},t[xB]={schema:wB,onReceive:function(t,o){n(t).each(function(t){var n,e;n=t,e=o.readonly,Jt("*",n.element()).forEach(function(t){n.getSystem().getByDom(t).each(function(t){t.hasConfigured(_C)&&_C.set(t,e)})})})}},t)})}function mm(t){var n=t.title.fold(function(){return{}},function(t){return{attributes:{title:t}}});return{dom:ih({tag:"div",classes:["tox-toolbar__group"]},n),components:[aB.parts().items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Po([xT.config({}),sk.config({})])}}function gm(t){return aB.sketch(mm(t))}function pm(e,t,n){var o=ly(function(t){var n=y(e.initGroups,gm);oB.setGroups(t,n)});return Po([rk.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),_u("toolbar-events",[o]),dm(n)])}function hm(t,n){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":mm({title:ch.none(),items:[]}),"overflow-button":Fl({name:"more",icon:ch.some("more-drawer"),disabled:!1,tooltip:ch.some("More..."),primary:!1,borderless:!1},ch.none(),t.backstage.shared.providers)},splitToolbarBehaviours:pm(t,e,n)}}function vm(o){var t=hm(o,lB.getOverflow),n=lB.parts().primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return lB.sketch(ih(ih({},t),{lazySink:o.getSink,getAnchor:function(){return o.backstage.shared.anchors.toolbarOverflow()},getOverflowBounds:function(){var t=o.moreDrawerData.lazyHeader().element(),n=to(t),e=to(An(t));return Qe(n.x()+4,e.y(),n.width()-8,e.height())},parts:ih(ih({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"]}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}function bm(t){var n=bB.parts().primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),e=bB.parts().overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=hm(t,bB.getOverflow);return bB.sketch(ih(ih({},o),{components:[n,e],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([yB()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([yB()],{type:"closed"})}}))}function ym(t){var n=t.cyclicKeying?"cyclic":"acyclic";return oB.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===CO.scrolling?["tox-toolbar--scrolling"]:[])},components:[oB.parts().groups({})],toolbarBehaviours:pm(t,n,nh(ch.none()))})}function xm(t){return ft("toolbarbutton",kB,t)}function wm(t){return ft("menubutton",OB,t)}function Sm(t){return ft("ToggleButton",DB,t)}function km(n){return{isDisabled:function(){return _C.isDisabled(n)},setDisabled:function(t){return _C.set(n,t)}}}function Cm(n){return{setActive:function(t){gk.set(n,t)},isActive:function(){return gk.isOn(n)},isDisabled:function(){return _C.isDisabled(n)},setDisabled:function(t){return _C.set(n,t)}}}function Om(t,n){return t.map(function(t){return{"aria-label":n.translate(t),title:n.translate(t)}}).getOr({})}function Tm(n,e,t,o,r,i){function u(t){return mC.isRtl()&&wh(YB,t)?t+"-rtl":t}var a,c=mC.isRtl()&&n.exists(function(t){return wh(qB,t)});return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:Om(t,i)},components:Ra([n.map(function(t){return wl(u(t),i.icons)}),e.map(function(t){return kl(t,"tox-tbtn",i)})]),eventOrder:(a={},a[gb()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:Po([_u("common-button-display-events",[bn(gb(),function(t,n){n.event().prevent(),en(t,XB)})])].concat(o.map(function(t){return zB.config({channel:t,initialData:{icon:n,text:e},renderComponents:function(t){return Ra([t.icon.map(function(t){return wl(u(t),i.icons)}),t.text.map(function(t){return kl(t,"tox-tbtn",i)})])}})}).toArray()).concat(r.getOr([])))}}function Em(t,n,e){var o,r=Rv(Q),i=Tm(t.icon,t.text,t.tooltip,ch.none(),ch.none(),e);return Rk.sketch({dom:i.dom,components:i.components,eventOrder:uD,buttonBehaviours:Po([_u("toolbar-button-events",[(o={onAction:t.onAction,getApi:n.getApi},gy(function(n){Ma(o,n)(function(t){on(n,iD,{buttonApi:t}),o.onAction(t)})})),Fa(n,r),Ia(n,r)]),RC(t.disabled)].concat(n.toolbarButtonBehaviours))})}function Dm(n,t){function e(e){return{isDisabled:function(){return _C.isDisabled(e)},setDisabled:function(t){return _C.set(e,t)},setIconFill:function(t,n){oo(e.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Gn(t,"fill",n)})},setIconStroke:function(t,n){oo(e.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Gn(t,"stroke",n)})},setActive:function(n){Gn(e.element(),"aria-pressed",n),oo(e.element(),"span").each(function(t){e.getSystem().getByDom(t).each(function(t){return gk.set(t,n)})})},isActive:function(){return oo(e.element(),"span").exists(function(t){return e.getSystem().getByDom(t).exists(gk.isOn)})}}}var o,r,i,u,a=Qn("channel-update-split-dropdown-display"),c=Rv(Q),s={getApi:e,onSetup:n.onSetup};return GB.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:Ih({"aria-pressed":!1},Om(n.tooltip,t.providers))},onExecute:function(t){n.onAction(e(t))},onItemExecute:function(){},splitDropdownBehaviours:Po([IC(!1),_u("split-dropdown-events",[bn(XB,sk.focus),Fa(s,c),Ia(s,c)]),HT.config({})]),eventOrder:(o={},o[Wb()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:(r=e,i=n,u=t.providers,function(n){return mT(function(t){return i.fetch(t)}).map(function(t){return ch.from(Oc(Fh(bc(Qn("menu-value"),t,function(t){i.onItemAction(r(n),t)},i.columns,i.presets,NC.CLOSE_ON_EXECUTE,i.select.getOr(function(){return!1}),u),{movement:yc(i.columns,i.presets),menuBehaviours:iC("auto"!==i.columns?[]:[ly(function(o){da(o,4,ha(i.presets)).each(function(t){var n=t.numRows,e=t.numColumns;rk.setGridSize(o,n,e)})})])})))})}),parts:{menu:mc(0,n.columns,n.presets)},components:[GB.parts().button(Tm(n.icon,n.text,ch.none(),ch.some(a),ch.some([gk.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),GB.parts().arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:na("chevron-down",t.providers.icons)}}),GB.parts()["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})}function Bm(r,i){return bn(iD,function(t,n){var e,o=(e=r.get(t),{hide:function(){return en(e,Hb())},getValue:function(){return Ew.getValue(e)}});i.onAction(o,n.event().buttonApi())})}function Am(t,n,e){var o,r,i,u,a,c,s,f,l,d,m,g,p={backstage:{shared:{providers:e}}};return"contextformtogglebutton"===n.type?(s=t,l=p,(d=(f=n).original).primary,m=h(d,["primary"]),g=lt(Sm(ih(ih({},m),{type:"togglebutton",onAction:function(){}}))),JB(g,l.backstage.shared.providers,[Bm(s,f)])):(o=t,i=p,(u=(r=n).original).primary,a=h(u,["primary"]),c=lt(xm(ih(ih({},a),{type:"button",onAction:function(){}}))),KB(c,i.backstage.shared.providers,[Bm(o,r)]))}function _m(t,n){var e=Math.max(n.x(),t.x()),o=t.right()-e,r=n.width()-(e-n.x());return{x:e,width:Math.min(o,r)}}function Mm(t){var n,e,o,r,i,u,a,c,s,f,l,d,m,g,p,h,v,b=Yc(t)||qc(t)||PO(t),y=Je(w.window),x=Ze(Hv.fromDom(t.getContentAreaContainer()));return t.inline&&!b?(p=_m(x,g=y),h=p.x,v=p.width,Qe(h,g.y(),v,g.height())):t.inline?function(t,n,e){var o=_m(n,e),r=o.x,i=o.width,u=Hv.fromDom(t.getContainer()),a=Ze(oo(u,".tox-editor-header").getOr(u)),c=e.height(),s=e.y();if(a.y()>=n.bottom())return Qe(r,s,i,Math.min(c+s,a.y())-s);var f=Math.max(s,a.bottom());return Qe(r,f,i,c-(f-s))}(t,x,y):(n=t,r=_m(e=x,o=y),i=r.x,u=r.width,a=Hv.fromDom(n.getContainer()),c=oo(a,".tox-editor-header").getOr(a),s=Ze(a),f=Ze(c),l=Math.max(o.y(),e.y(),f.bottom()),d=s.bottom()-l,m=o.height()-(l-o.y()),Qe(i,l,u,Math.min(d,m)))}function Fm(n,t){return co(t,function(t){return t.predicate(n.dom())?ch.some({toolbarApi:t,elem:n}):ch.none()})}function Im(o,r){return function(n){function t(){n.setActive(o.formatter.match(r));var t=o.formatter.formatChanged(r,n.setActive).unbind;e.set(ch.some(t))}var e=Rv(ch.none());return o.initialized?t():o.on("init",t),function(){return e.get().each(function(t){return t()})}}}function Rm(n){return function(t){return function(){n.undoManager.transact(function(){n.focus(),n.execCommand("mceToggleFormat",!1,t.format)})}}}function Vm(t,n,e){var o=e.dataset,r="basic"===o.type?function(){return y(o.data,function(t){return vd(t,e.isSelectedFor,e.getPreviewFor)})}:o.getData;return{items:function(t,u,a){function r(t,n,e,o){var r=u.shared.providers.translate(t.title);if("separator"===t.type)return ch.some({type:"separator",text:r});if("submenu"!==t.type)return ch.some(ih({type:"togglemenuitem",text:r,active:t.isSelected(o),disabled:e,onAction:a.onAction(t)},t.getStylePreview().fold(function(){return{}},function(t){return{meta:{style:t}}})));var i=O(t.getStyleItems(),function(t){return c(t,n,o)});return 0===n&&i.length<=0?ch.none():ch.some({type:"nestedmenuitem",text:r,disabled:i.length<=0,getSubmenuItems:function(){return O(t.getStyleItems(),function(t){return c(t,n,o)})}})}function o(t){var n=a.getCurrentValue(),e=a.shouldHide?0:1;return O(t,function(t){return c(t,e,n)})}var c=function(t,n,e){var o="formatter"===t.type&&a.isInvalid(t);return 0===n?o?[]:r(t,n,!1,e).toArray():r(t,n,o,e).toArray()};return{validateItems:o,getFetch:function(n,e){return function(t){t(Dl(o(e()),NC.CLOSE_ON_EXECUTE,n,!1))}}}}(0,n,e),getStyleItems:r}}function Hm(o,t,n){var e=Vm(0,t,n),r=e.items,i=e.getStyleItems;return Cl({text:n.icon.isSome()?ch.none():ch.some(""),icon:n.icon,tooltip:ch.from(n.tooltip),role:ch.none(),fetch:r.getFetch(t,i),onSetup:function(e){return n.setInitialValue.each(function(t){return t(e.getComponent())}),n.nodeChangeHandler.map(function(t){var n=t(e.getComponent());return o.on("NodeChange",n),function(){o.off("NodeChange",n)}}).getOr(Q)},getApi:function(t){return{getComponent:function(){return t}}},columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)}function Nm(t,n,e,o){return{type:"basic",data:y((r=Lh(t.settings,n).getOr(e),i=o,i===_T.SemiColon?r.replace(/;$/,"").split(";"):r.split(" ")),function(t){var n=t,e=t,o=t.split("=");return 1<o.length&&(n=o[0],e=o[1]),{title:n,format:e}})};var r,i}function Pm(e){function n(t){var n=k(sA,function(t){return e.formatter.match(t.format)}).fold(function(){return"left"},function(t){return t.title.toLowerCase()});on(t,cD,{icon:"align-"+n})}var t=ch.some(function(t){return function(){return n(t)}}),o=ch.some(function(t){return n(t)}),r={type:"basic",data:sA};return{tooltip:"Align",icon:ch.some("align-left"),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:nh(ch.none()),getPreviewFor:function(){return function(){return ch.none()}},onAction:Rm(e),setInitialValue:o,nodeChangeHandler:t,dataset:r,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}}function zm(t){return y(t.split(/\s*,\s*/),function(t){return t.replace(/^['"]+|['"]+$/g,"")})}function Lm(r){function i(){function e(t){return t?zm(t)[0]:""}var t=r.queryCommandValue("FontName"),n=u.data,o=t?t.toLowerCase():"";return{matchOpt:k(n,function(t){var n=t.format;return n.toLowerCase()===o||e(n).toLowerCase()===e(o).toLowerCase()}).orThunk(function(){return 0===(t=o).indexOf("-apple-system")&&(n=zm(t.toLowerCase()),T(fA,function(t){return-1<n.indexOf(t.toLowerCase())}))?ch.from({title:"System Font",format:o}):ch.none();var t,n}),font:t}}function n(t){var n=i(),e=n.matchOpt,o=n.font,r=e.fold(function(){return o},function(t){return t.title});on(t,aD,{text:r})}var t=ch.some(function(t){return function(){return n(t)}}),e=ch.some(function(t){return n(t)}),u=Nm(r,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",_T.SemiColon);return{tooltip:"Fonts",icon:ch.none(),isSelectedFor:function(n){return function(t){return t.exists(function(t){return t.format===n})}},getCurrentValue:function(){return i().matchOpt},getPreviewFor:function(t){return function(){return ch.some({tag:"div",styleAttr:-1===t.indexOf("dings")?"font-family:"+t:""})}},onAction:function(t){return function(){r.undoManager.transact(function(){r.focus(),r.execCommand("FontName",!1,t.format)})}},setInitialValue:e,nodeChangeHandler:t,dataset:u,shouldHide:!1,isInvalid:function(){return!1}}}function jm(t,n){return/[0-9.]+px$/.test(t)?(e=72*parseInt(t,10)/96,o=n||0,r=Math.pow(10,o),Math.round(e*r)/r+"pt"):t;var e,o,r}function Um(e){function i(){var o=ch.none(),r=u.data,i=e.queryCommandValue("FontSize");if(i)for(var t=function(t){var n=jm(i,t),e=M(lA,n).getOr("");o=k(r,function(t){return t.format===i||t.format===n||t.format===e})},n=3;o.isNone()&&0<=n;n--)t(n);return{matchOpt:o,px:i}}function n(t){var n=i(),e=n.matchOpt,o=n.px,r=e.fold(function(){return o},function(t){return t.title});on(t,aD,{text:r})}var t=nh(nh(ch.none())),o=ch.some(function(t){return function(){return n(t)}}),r=ch.some(function(t){return n(t)}),u=Nm(e,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",_T.Space);return{tooltip:"Font sizes",icon:ch.none(),isSelectedFor:function(n){return function(t){return t.exists(function(t){return t.format===n})}},getPreviewFor:t,getCurrentValue:function(){return i().matchOpt},onAction:function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("FontSize",!1,t.format)})}},setInitialValue:r,nodeChangeHandler:o,dataset:u,shouldHide:!1,isInvalid:function(){return!1}}}function Wm(e,t,n){var o=t();return co(n,function(n){return k(o,function(t){return e.formatter.matchNode(n,t.format)})}).orThunk(function(){return e.formatter.match("p")?ch.some({title:"Paragraph",format:"p"}):ch.none()})}function Gm(t){var n=t.selection.getStart(!0)||t.getBody();return t.dom.getParents(n,function(){return!0},t.getBody())}function Xm(o){function e(t,n){var e=Wm(o,function(){return r.data},t).fold(function(){return"Paragraph"},function(t){return t.title});on(n,aD,{text:e})}var t=ch.some(function(n){return function(t){return e(t.parents,n)}}),n=ch.some(function(t){e(Gm(o),t)}),r=Nm(o,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",_T.SemiColon);return{tooltip:"Blocks",icon:ch.none(),isSelectedFor:function(t){return function(){return o.formatter.match(t)}},getCurrentValue:nh(ch.none()),getPreviewFor:function(n){return function(){var t=o.formatter.get(n);return ch.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styleAttr:o.formatter.getCssText(n)})}},onAction:Rm(o),setInitialValue:n,nodeChangeHandler:t,dataset:r,shouldHide:!1,isInvalid:function(t){return!o.formatter.canApply(t.format)}}}function Ym(i,t){function e(t,n){var e=function(t){var n=t.items;return n!==undefined&&0<n.length?O(n,e):[{title:t.title,format:t.format}]},o=O(hd(i),e),r=Wm(i,function(){return o},t).fold(function(){return"Paragraph"},function(t){return t.title});on(n,aD,{text:r})}var n=ch.some(function(n){return function(t){return e(t.parents,n)}}),o=ch.some(function(t){e(Gm(i),t)});return{tooltip:"Formats",icon:ch.none(),isSelectedFor:function(t){return function(){return i.formatter.match(t)}},getCurrentValue:nh(ch.none()),getPreviewFor:function(n){return function(){var t=i.formatter.get(n);return t!==undefined?ch.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styleAttr:i.formatter.getCssText(n)}):ch.none()}},onAction:Rm(i),setInitialValue:o,nodeChangeHandler:n,shouldHide:i.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!i.formatter.canApply(t.format)},dataset:t}}function qm(o,r){return function(t,n){var e=o(t).mapError(function(t){return Ev(t)}).getOrDie();return r(e,n)}}function Km(t){var e,n=t.toolbar,o=t.buttons;return!1===n?[]:n===undefined||!0===n?(e=o,x(y(dA,function(t){var n=x(t.items,function(t){return Ah(e,t)||Ah(gA,t)});return{name:t.name,items:n}}),function(t){return 0<t.items.length})):dh(n)?y(n.split("|"),function(t){return{items:t.trim().split(" ")}}):s(n,function(t){return Ah(t,"name")&&Ah(t,"items")})?n:(w.console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])}function Jm(n,e,o,r,t){return M(e,o.toLowerCase()).orThunk(function(){return t.bind(function(t){return co(t,function(t){return M(e,t+o.toLowerCase())})})}).fold(function(){return M(gA,o.toLowerCase()).map(function(t){return t(n,r)}).orThunk(function(){return ch.none()})},function(t){return e=r,M(mA,(n=t).type).fold(function(){return w.console.error("skipping button defined by",n),ch.none()},function(t){return ch.some(t(n,e))});var n,e})}function $m(e,o,r,i){return x(y(Km(o),function(t){var n=O(t.items,function(t){return 0===t.trim().length?[]:Jm(e,o.buttons,t,r,i).toArray()});return{title:ch.from(e.translate(t.name)),items:n}}),function(t){return 0<t.items.length})}function Qm(e){return(De(e,"position").is("fixed")?ch.none():Fn(e)).orThunk(function(){var t=Hv.fromTag("span");Vn(e,t);var n=Fn(t);return hy(t),n}).map(Ge).getOrThunk(function(){return Ly(0,0)})}function Zm(n){return function(t){return t.translate(-n.left(),-n.top())}}function tg(n){return function(t){return t.translate(n.left(),n.top())}}function ng(e){return function(t,n){return S(e,function(t,n){return n(t)},Ly(t,n))}}function eg(t,n,e){return t.fold(ng([tg(e),Zm(n)]),ng([Zm(n)]),ng([]))}function og(t,n,e){return t.fold(ng([tg(e)]),ng([]),ng([tg(n)]))}function rg(t,n,e){return t.fold(ng([]),ng([Zm(e)]),ng([tg(n),Zm(e)]))}function ig(t,n,e){return t.fold(function(t,n){return{position:"absolute",left:t+"px",top:n+"px"}},function(t,n){return{position:"absolute",left:t-e.left()+"px",top:n-e.top()+"px"}},function(t,n){return{position:"fixed",left:t+"px",top:n+"px"}})}function ug(t,i,u,a){function n(o,r){return function(t,n){var e=o(i,u,a);return r(t.getOr(e.left()),n.getOr(e.top()))}}return t.fold(n(rg,EA.offset),n(og,EA.absolute),n(eg,EA.fixed))}function ag(t,n){var e=t.element();he(e,n.transitionClass),be(e,n.fadeOutClass),he(e,n.fadeInClass),n.onShow(t)}function cg(t,n){var e=t.element();he(e,n.transitionClass),be(e,n.fadeInClass),he(e,n.fadeOutClass),n.onHide(t)}function sg(t,o,r){return T(t,function(t){switch(t){case"bottom":return e=r,o.bottom()<=e.bottom();case"top":return n=r,o.y()>=n.y()}var n,e})}function fg(t,n){return Yn(t,n)?ch.some(parseInt(Xn(t,n),10)):ch.none()}function lg(r,t){return fg(r,t.leftAttr).bind(function(o){return fg(r,t.topAttr).map(function(t){var n=Xe(r),e=je(r);return Qe(o,t,n,e)})})}function dg(t,n,e){var o,r,i=Xn(t,n.positionAttr);switch(qn(o=t,(r=n).leftAttr),qn(o,r.topAttr),qn(o,r.positionAttr),i){case"static":return ch.some(_A["static"]());case"absolute":return ch.some(_A.absolute(e.x(),e.y()));default:return ch.none()}}function mg(t,n,e,o,r){var i=Ze(t);if(sg(n.modes,i,e))return ch.none();var u,a,c,s,f,l=r(),d=Ee(t,"position");u=t,a=n,c=i.x(),s=i.y(),f=d,Gn(u,a.leftAttr,c),Gn(u,a.topAttr,s),Gn(u,a.positionAttr,f);var m=eg(BA(i.x(),i.y()),o,l),g=eg(BA(e.x(),e.y()),o,l),p=i.y()<=e.y()?g.top():g.top()+e.height()-i.height();return ch.some(_A.fixed(m.left(),p))}function gg(t,n,e,o,r){var i,u,a,c=t.element();return De(c,"position").is("fixed")?(a=e,lg(i=c,u=n).filter(function(t){return sg(u.modes,t,a)}).bind(function(t){return dg(i,u,t)})):mg(c,n,e,o,r)}function pg(n,t){Sh(["left","top","position"],function(t){return Ae(n.element(),t)}),t.onUndocked(n)}function hg(t,n,e,o,r){var i=ig(r,0,o);Te(t.element(),i),("fixed"===i.position?n.onDocked:n.onUndocked)(t)}function vg(i,t,u,a,c){void 0===c&&(c=!1),t.contextual.each(function(r){r.lazyContext(i).each(function(t){var n,e,o=(e=a,(n=t).y()<e.bottom()&&n.bottom()>e.y());o!==u.isVisible()&&(u.setVisible(o),c&&!o?(xe(i.element(),[r.fadeOutClass]),r.onHide(i)):(o?ag:cg)(i,r))})})}function bg(o,r,t){var n,e,i=o.element();t.setDocked(!1),(n=r,e=o.element(),lg(e,n).bind(function(t){return dg(e,n,t)})).each(function(t){t.fold(function(){return pg(o,r)},function(t,n){var e=(qe(Bn(i)),Qm(i));hg(o,r,0,e,BA(t,n))},Q)}),t.setVisible(!0),r.contextual.each(function(t){we(i,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(o)}),MA(o,r,t)}function yg(t,n,e){e.isDocked()&&bg(t,n,e)}function xg(e){var o=e.element();Mn(o).each(function(t){if(RA.isDocked(e)){var n=Xe(t);Oe(o,"width",n+"px"),Oe(t,"padding-top",Ue(o)+"px")}else Ae(o,"width"),Ae(t,"padding-top")})}function wg(t,n){n?(be(t,VA.fadeOutClass),xe(t,[VA.transitionClass,VA.fadeInClass])):(be(t,VA.fadeInClass),xe(t,[VA.fadeOutClass,VA.transitionClass]))}function Sg(t,n){var e=Hv.fromDom(t.getContainer());n?(he(e,HA),be(e,NA)):(he(e,NA),be(e,HA))}function kg(i,o){function u(n){o().each(function(t){return n(t.element())})}function t(t){i.inline||xg(t),Sg(i,RA.isDocked(t)),t.getSystem().broadcastOn([bw()],{}),o().each(function(t){return t.getSystem().broadcastOn([bw()],{})})}var n,a=Rv(ch.none()),e=i.inline?[]:[kx.config({channels:(n={},n[yB()]={onReceive:xg},n)})];return b([sk.config({}),RA.config({leftAttr:"data-dock-left",topAttr:"data-dock-top",
positionAttr:"data-dock-pos",contextual:ih({lazyContext:function(t){var n=Ue(t.element()),e=i.inline?i.getContentAreaContainer():i.getContainer(),o=Ze(Hv.fromDom(e)),r=o.height()-n;return ch.some(Qe(o.x(),o.y(),o.width(),r))},onShow:function(){u(function(t){return wg(t,!0)})},onShown:function(r){u(function(t){return we(t,[VA.transitionClass,VA.fadeInClass])}),a.get().each(function(t){var n,e,o;n=r.element(),Uo(o=Bn(e=t)).filter(function(t){return!$t(e,t)}).filter(function(t){return $t(t,Hv.fromDom(o.dom().body))||sb(n,t)}).each(function(){return jo(e)}),a.set(ch.none())})},onHide:function(t){var n,e;a.set((n=t.element(),e=o,Wo(n).orThunk(function(){return e().toOption().bind(function(t){return Wo(t.element())})}))),u(function(t){return wg(t,!1)})},onHidden:function(){u(function(t){return we(t,[VA.transitionClass])})}},VA),modes:["top"],onDocked:t,onUndocked:t})],e)}function Cg(t){return"<alloy.field."+t+">"}function Og(t){return{element:function(){return t.element().dom()}}}function Tg(e,o){var r=y(Oh(o),function(t){var n=o[t],e=lt(ft("sidebar",JA,n));return{name:t,getApi:Og,onSetup:e.onSetup,onShow:e.onShow,onHide:e.onHide}});return y(r,function(t){var n=Rv(Q);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:iC([Fa(t,n),Ia(t,n),bn(Kb(),function(n,t){var e=t.event();k(r,function(t){return t.name===e.name()}).each(function(t){(e.visible()?t.onShow:t.onHide)(t.getApi(n))})})])})})}function Eg(t,e){uS.getCurrent(t).each(function(t){return uk.set(t,[(n=e,KA.sketch(function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:Tg(t,n),slotBehaviours:iC([ly(function(t){return KA.hideAllSlots(t)})])}}))]);var n})}function Dg(t){return uS.getCurrent(t).bind(function(t){return gB.isGrowing(t)||gB.hasGrown(t)?uS.getCurrent(t).bind(function(n){return k(KA.getSlotNames(n),function(t){return KA.isShowing(n,t)})}):ch.none()})}function Bg(t,n,e){var o=t.element();!0===n?(uk.set(t,[{dom:{tag:"div",attributes:{"aria-label":e.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:pa('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:Po([rk.config({mode:"special",onTab:function(){return ch.some(!0)},onShiftTab:function(){return ch.some(!0)}}),sk.config({})])}]),Ae(o,"display"),qn(o,"aria-hidden")):(uk.set(t,[]),Oe(o,"display","none"),Gn(o,"aria-hidden","true"))}function Ag(t){return"string"==typeof t?t.split(" "):t}function _g(i,u){var a=Ih(a_,u.menus),n=0<Oh(u.menus).length;return x(y(x(u.menubar===undefined||!0===u.menubar?Ag("file edit view insert format tools table help"):Ag(!1===u.menubar?"":u.menubar),function(t){return n&&u.menus.hasOwnProperty(t)&&u.menus[t].hasOwnProperty("items")||a_.hasOwnProperty(t)}),function(t){var n,e,o,r=a[t];return n={title:r.title,items:Ag(r.items)},e=u,o=i.getParam("removed_menuitems","").split(/[ ,]/),{text:n.title,getItems:function(){return O(n.items,function(t){var n=t.toLowerCase();return 0===n.trim().length?[]:f(o,function(t){return t===n})?[]:"separator"===n||"|"===n?[{type:"separator"}]:e.menuItems[n]?[e.menuItems[n]]:[]})}}}),function(t){return 0<t.getItems().length&&f(t.getItems(),function(t){return"separator"!==t.type})})}function Mg(t,n){var e,o=function(t){var n=t.settings,e=n.skin,o=n.skin_url;if(!1!==e){var r=e||"oxide";o=o?t.documentBaseURI.toAbsolute(o):NO.baseURL+"/skins/ui/"+r}return o}(n);o&&(e=o+"/skin.min.css",n.contentCSS.push(o+(t?"/content.inline":"/content")+".min.css")),!1==(!1===n.getParam("skin"))&&e?zC.DOM.styleSheetLoader.load(e,c_(n)):c_(n)()}function Fg(n,t,e,o){var r=t.outerContainer,i=e.toolbar,u=e.buttons;if(s(i,dh)){var a=i.map(function(t){return $m(n,{toolbar:t,buttons:u},{backstage:o},ch.none())});u_.setToolbars(r,a)}else u_.setToolbar(r,$m(n,e,{backstage:o},ch.none()))}function Ig(t){return(n=t,e=Lc(n),o=Wc(n),r=Xc(n),h_(e).map(function(t){return p_(t,o,r)})).getOr(Lc(t));var n,e,o,r}function Rg(t){var n=jc(t),e=Uc(t),o=Gc(t);return h_(n).map(function(t){return p_(t,e,o)})}function Vg(t,n){return function(){t.execCommand("mceToggleFormat",!1,n)}}function Hg(t){var n,e;!function(n){SD.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:Im(n,t.name),onAction:Vg(n,t.name)})});for(var t=1;t<=6;t++){var e="h"+t;n.ui.registry.addToggleButton(e,{text:e.toUpperCase(),tooltip:"Heading "+t,onSetup:Im(n,e),onAction:Vg(n,e)})}}(t),e=t,SD.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})}),n=t,SD.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)},onSetup:Im(n,t.name)})})}function Ng(t,n,e){function o(){return!!n.undoManager&&n.undoManager[e]()}function r(){t.setDisabled(n.readonly||!o())}return t.setDisabled(!o()),n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return n.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}}function Pg(t,n){return{anchor:"makeshift",x:t,y:n}}function zg(t){return"longpress"===t.type||0===t.type.indexOf("touch")}function Lg(t,n){var e,o,r,i=zC.DOM.getPos(t);return e=n,o=i.x,r=i.y,Pg(e.x+o,e.y+r)}function jg(t,n){return"contextmenu"===n.type?t.inline?function(t){if(zg(t)){var n=t.touches[0];return Pg(n.pageX,n.pageY)}return Pg(t.pageX,t.pageY)}(n):Lg(t.getContentAreaContainer(),function(t){if(zg(t)){var n=t.touches[0];return Pg(n.clientX,n.clientY)}return Pg(t.clientX,t.clientY)}(n)):T_(t)}function Ug(t){return{anchor:"node",node:ch.some(Hv.fromDom(t.selection.getNode())),root:Hv.fromDom(t.getBody())}}function Wg(t,n,e,o,r,i){var u,a,c=e(),s=(u=t,a=n,i?Ug(u):jg(u,a));Dl(c,NC.CLOSE_ON_EXECUTE,o,!1).map(function(t){n.preventDefault(),Mk.showMenuAt(r,s,{menu:{markers:dc("normal")},data:t})})}function Gg(n,e,t,o,r,i){var u,a,c=(u=n,a=i?Ug(u):T_(u),ih({bubble:Xo(0,12,D_),layouts:E_,overrides:{maxWidthFunction:jD(),maxHeightFunction:nw()}},a));Dl(t,NC.CLOSE_ON_EXECUTE,o,!0).map(function(t){e.preventDefault(),Mk.showMenuWithinBounds(r,c,{menu:{markers:dc("normal")},data:t,type:"horizontal"},function(){return ch.some(Mm(n))}),n.fire(tB)})}function Xg(n,e,o,r,i,u){function t(){var t=o();Gg(n,e,t,r,i,u)}var a=Yt(),c=a.os.isiOS(),s=a.os.isOSX(),f=a.os.isAndroid();if(!s&&!c||u)f&&!u&&n.selection.setCursorLocation(e.target,0),t();else{var l=function(){!function(t){function n(){Nk.setEditorTimeout(t,function(){t.selection.setRng(r)},10),i()}function e(t){t.preventDefault(),t.stopImmediatePropagation()}function o(){return i()}var r=t.selection.getRng();t.once("touchend",n),t.on("mousedown",e,!0),t.once("longpresscancel",o);var i=function(){t.off("touchend",n),t.off("longpresscancel",o),t.off("mousedown",e)}}(n),t()};!function(t,n){var e=t.selection;if(e.isCollapsed()||n.touches.length<1)return!1;var o=n.touches[0],r=e.getRng();return dr(t.getWin(),Px.domRange(r)).exists(function(t){return t.left()<=o.clientX&&t.right()>=o.clientX&&t.top()<=o.clientY&&t.bottom()>=o.clientY})}(n,e)?(n.once("selectionchange",l),n.once("touchend",function(){return n.off("selectionchange",l)})):l()}}function Yg(t){return"string"==typeof t?t.split(/[ ,]/):t}function qg(t){return dh(t)?"|"===t:"separator"===t.type}function Kg(t,n){if(0===n.length)return t;var e=B(t).filter(function(t){return!qg(t)}).fold(function(){return[]},function(){return[M_]});return t.concat(e).concat(n).concat([M_])}function Jg(c,t,e){function n(){return Mk.hide(i)}function o(u){var t,n="longpress"===u.type;if(B_(c)&&u.preventDefault(),t=c,(!u.ctrlKey||B_(t))&&!__(c)){var a=!n&&(2!==u.button||u.target===c.getBody());(r()?Xg:Wg)(c,u,function(){var o,r,t,n=a?c.selection.getStart(!0):u.target,e=c.ui.registry.getAll(),i=A_(c);return o=e.contextMenus,r=n,0<(t=S(i,function(t,n){if(Ah(o,n)){var e=o[n].update(r);return dh(e)?Kg(t,e.split(" ")):0<e.length?Kg(t,y(e,F_)):t}return t.concat([n])},[])).length&&qg(t[t.length-1])&&t.pop(),t},e,i,a)}}var r=Yt().deviceType.isTouch,i=Hy(Mk.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return c.focus()},onShow:function(){return e.setContextMenuState(!0)},onHide:function(){return e.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Po([_u("dismissContextMenu",[bn(Xb(),function(t){hw.close(t),c.focus()})])])}));c.on("init",function(){var t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(r()?"":" ResizeWindow");c.on(t,n),c.on(r()?"longpress":"longpress contextmenu",o)})}function $g(t,n){var e;t.getSystem().addToGui(n),Mn((e=n).element()).filter(uy).each(function(n){De(n,"z-index").each(function(t){Gn(n,I_,t)}),Oe(n,"z-index",Ee(e.element(),"z-index"))})}function Qg(t){Mn(t.element()).filter(uy).each(function(t){var n=Xn(t,I_);Yn(t,I_)?Oe(t,"z-index",n):Ae(t,"z-index"),qn(t,I_)}),t.getSystem().removeFromGui(t)}function Zg(t,n,e){return t.getSystem().build(HO.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[n]},events:e}))}function tp(t,n,e,o){return(r=n,i=t.element(),u=parseInt(Xn(i,r.leftAttr),10),a=parseInt(Xn(i,r.topAttr),10),isNaN(u)||isNaN(a)?ch.none():ch.some(Ly(u,a))).fold(function(){return e},function(t){return AA(t.left()+o.left(),t.top()+o.top())});var r,i,u,a}function np(t,n,e,o,r,i){var u,a,c,s=tp(t,n,e,o),f=n.mustSnap?R_(t,n,s,r,i):V_(t,n,s,r,i),l=eg(s,r,i);return u=n,a=l,Gn(c=t.element(),u.leftAttr,a.left()+"px"),Gn(c,u.topAttr,a.top()+"px"),f.fold(function(){return{coord:AA(l.left(),l.top()),extra:ch.none()}},function(t){return{coord:t.output(),extra:t.extra()}})}function ep(t,n){var e,o;e=n,qn(o=t.element(),e.leftAttr),qn(o,e.topAttr)}function op(t,f,l,d){return co(t,function(t){var n,e,o,r,i,u,a,c,s=t.sensor();return n=f,e=s,o=t.range().left(),r=t.range().top(),a=og(n,i=l,u=d),c=og(e,i,u),Math.abs(a.left()-c.left())<=o&&Math.abs(a.top()-c.top())<=r?ch.some({output:nh(ug(t.output(),f,l,d)),extra:t.extra}):ch.none()})}function rp(n){return(t=De(n,"left"),e=De(n,"top"),o=De(n,"position"),r=function(t,n,e){return("fixed"===e?AA:DA)(parseInt(t,10),parseInt(n,10))},t.isSome()&&e.isSome()&&o.isSome()?ch.some(r(t.getOrDie(),e.getOrDie(),o.getOrDie())):ch.none()).getOrThunk(function(){var t=Ge(n);return BA(t.left(),t.top())});var t,e,o,r}function ip(e,t,r,i,u,a,n){return o=t.fold(function(){var t,e,o,n=eg((t=r,e=a.left(),o=a.top(),t.fold(function(t,n){return EA.offset(t+e,n+o)},function(t,n){return EA.absolute(t+e,n+o)},function(t,n){return EA.fixed(t+e,n+o)})),i,u);return AA(n.left(),n.top())},function(n){var t=np(e,n,r,a,i,u);return t.extra.each(function(t){n.onSensor(e,t)}),t.coord}),c=i,s=u,l=(f=n).bounds,d=og(o,c,s),m=Br(d.left(),l.x(),l.x()+l.width()-f.width),g=Br(d.top(),l.y(),l.y()+l.height()-f.height),p=BA(m,g),o.fold(function(){var t=rg(p,c,s);return DA(t.left(),t.top())},function(){return p},function(){var t=eg(p,c,s);return AA(t.left(),t.top())});var o,c,s,f,l,d,m,g,p}function up(t,n){return{bounds:t.getBounds(),height:Ue(n.element()),width:Ye(n.element())}}function ap(n,e,t,o,r){var i=t.update(o,r),u=t.getStartData().getOrThunk(function(){return up(e,n)});i.each(function(t){!function(t,n,e,o){var r=n.getTarget(t.element());if(n.repositionTarget){var i=qe(Bn(t.element())),u=Qm(r),a=rp(r);Te(r,ig(ip(t,n.snaps,a,i,u,o,e),0,u))}n.onDrag(t,r,o)}(n,e,u,t)})}function cp(n,t,e,o){t.each(Qg),e.snaps.each(function(t){ep(n,t)});var r=e.getTarget(n.element());o.reset(),e.onDrop(n,r)}function sp(t,r,i,u,n,e){return t.fold(function(){return X_.snap({sensor:BA(i-20,u-20),range:Ly(n,e),output:BA(ch.some(i),ch.some(u)),extra:{td:r}})},function(t){var n=i-20,e=u-20,o=t.element().dom().getBoundingClientRect();return X_.snap({sensor:BA(n,e),range:Ly(40,40),output:BA(ch.some(i-o.width/2),ch.some(u-o.height/2)),extra:{td:r}})})}function fp(t,i,u){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,n){var e,o,r=n.td;e=i.get(),o=r,!e.exists(function(t){return $t(t,o)})&&(i.set(ch.some(r)),u(r))},mustSnap:!0}}function lp(t){return Zu(Rk.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Po([X_.config({mode:Y_.deviceType.isTouch()?"touch":"mouse",blockerClass:"blocker",snaps:t}),HT.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}function dp(t,n,e){var o,r,i,u,a,c,s=Hv.fromDom(t.getContainer()),f=(o=t,r=n,i=e,u=je(s),a=Xe(s),(c={}).height=p_(u+r.top(),Wc(o),Xc(o)),i===aA.Both&&(c.width=p_(a+r.left(),Uc(o),Gc(o))),c);Eh(f,function(t,n){return Oe(s,n,v_(t))}),sO(t)}function mp(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}function gp(o,t){var r,n,e,i,u,a,c,s;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(s=[],o.getParam("elementpath",!0,"boolean")&&s.push(tM(o,{})),Gt(o.settings.plugins,"wordcount")&&s.push(function(t,o){function r(t,n,e){return uk.set(t,[ze(o.translate(["{0} "+e,n[e]]))])}var n;return Rk.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Po([xT.config({}),uk.config({}),Ew.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),_u("wordcount-events",[bn(nn(),function(t){var n=Ew.getValue(t),e="words"===n.mode?"characters":"words";Ew.setValue(t,{mode:e,count:n.count}),r(t,n.count,e)}),ly(function(e){t.on("wordCountUpdate",function(t){var n=Ew.getValue(e).mode;Ew.setValue(e,{mode:n,count:t.wordCount}),r(e,t.wordCount,n)})})])]),eventOrder:(n={},n[nn()]=["wordcount-events","alloy.base.behaviour"],n)})}(o,t)),o.getParam("branding",!0,"boolean")&&s.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(c=mC.translate(["Powered by {0}","Tiny"]))+'">'+c+"</a>"}}),n=0<s.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:s}]:[],i=o,u=!Gt(i.settings.plugins,"autoresize"),a=i.getParam("resize",u),e=!1===a?aA.None:"both"===a?aA.Both:aA.Vertical,e!==aA.None&&n.push((r=e,{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},innerHtml:na("resize-handle",t.icons)},behaviours:Po([X_.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,n,e){dp(o,e,r)},blockerClass:"tox-blocker"})])})),n)}}function pp(t){return[yt("type"),bt("columns",Bv),t]}function hp(n){return Cv("items","items",Vh(),rt(ct(function(t){return ft("Checking item of "+n,ZM,t).fold(function(t){return lh.error(Ev(t))},function(t){return lh.value(t)})})))}function vp(t){return dh(t.type)&&dh(t.name)}function bp(t){var n=O(x(mF(t),vp),function(n){return(t=n,ch.from(gF[t.type])).fold(function(){return[]},function(t){return[bt(n.name,t)]});var t});return xv(n)}function yp(t){return{internalDialog:lt(ft("dialog",dF,t)),dataValidator:bp(t),initialData:t.initialData}}function xp(t){var e=[],o={};return Eh(t,function(t,n){t.fold(function(){e.push(n)},function(t){o[n]=t})}),0<e.length?lh.error(e):lh.value(o)}function wp(t){return kh((n=t,e=function(t,n){return n<t?-1:t<n?1:0},(o=bh.call(n,0)).sort(e),o));var n,e,o}function Sp(t,n){Oe(t,"height",n+"px"),Yt().browser.isIE()?Ae(t,"flex-basis"):Oe(t,"flex-basis",n+"px")}function kp(t,o,r){eo(t,'[role="dialog"]').each(function(e){oo(e,'[role="tablist"]').each(function(n){r.get().map(function(t){return Oe(o,"height","0"),Oe(o,"flex-basis","0"),Math.min(t,function(t,n,e){var o,r=An(t).dom();o="fixed"===Ee(eo(t,".tox-dialog-wrap").getOr(t),"position")?Math.max(r.clientHeight,w.window.innerHeight):Math.max(r.offsetHeight,r.scrollHeight);var i=je(n),u=n.dom().offsetLeft>=e.dom().offsetLeft+Xe(e)?Math.max(je(e),i):i,a=parseInt(Ee(t,"margin-top"),10)||0,c=parseInt(Ee(t,"margin-bottom"),10)||0;return o-(je(t)+a+c-u)}(e,o,n))}).each(function(t){Sp(o,t)})})})}function Cp(t){return oo(t,'[role="tabpanel"]')}function Op(u){var a;return{smartTabHeight:(a=Rv(ch.none()),{extraEvents:[ly(function(t){var o=t.element();Cp(o).each(function(e){var n;Oe(e,"visibility","hidden"),t.getSystem().getByDom(e).toOption().each(function(t){var o,r,i,n=wp((r=e,i=t,y(o=u,function(t,n){uk.set(i,o[n].view());var e=r.dom().getBoundingClientRect();return uk.set(i,[]),e.height})));a.set(n)}),kp(o,e,a),Ae(e,"visibility"),n=t,kh(u).each(function(t){return DF.showTab(n,t.value)}),Nk.requestAnimationFrame(function(){kp(o,e,a)})})}),bn(Ub(),function(t){var n=t.element();Cp(n).each(function(t){kp(n,t,a)})}),bn(ZO,function(t){var r=t.element();Cp(r).each(function(n){var t=Uo();Oe(n,"visibility","hidden");var e=De(n,"height").map(function(t){return parseInt(t,10)});Ae(n,"height"),Ae(n,"flex-basis");var o=n.dom().getBoundingClientRect().height;e.forall(function(t){return t<o})?(a.set(ch.from(o)),kp(r,n,a)):e.each(function(t){Sp(n,t)}),Ae(n,"visibility"),t.each(jo)})})],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}}function Tp(t,n,r,e){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:ih(ih({},n.map(function(t){return{id:t}}).getOr({})),e?{"aria-live":"polite"}:{})},components:[],behaviours:Po([NE(0),zB.config({channel:FF,updateState:function(t,n){return ch.some({isTabPanel:function(){return"tabpanel"===n.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[function(t,e){function o(t){var n=xp(Ew.getValue(t)).getOr({}),e=i.get(),o=Fh(e,n);i.set(o)}function r(t){var n=i.get();Ew.setValue(t,n)}var i=Rv({}),u=Rv(null),n=y(t.tabs,function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.shared.providers.translate(t.title)},view:function(){return[DE.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"]},components:y(t.items,function(t){return gd(n,t,e)}),formBehaviours:Po([rk.config({mode:"acyclic",useTabstopAt:v(qE)}),_u("TabView.form.events",[ly(r),dy(o)]),kx.config({channels:U([{key:BF,value:{onReceive:o}},{key:AF,value:{onReceive:r}}])})])}})]}}}),a=Op(n).smartTabHeight;return DF.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,n){var e=Ew.getValue(n);on(t,QO,{name:e,oldName:u.get()}),u.set(e)},tabs:n,components:[DF.parts().tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[SF.parts().tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Po([xT.config({})])}),DF.parts().tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:a.selectFirst,tabSectionBehaviours:Po([_u("tabpanel",a.extraEvents),rk.config({mode:"acyclic"}),uS.config({find:function(t){return kh(DF.getViewItems(t))}}),Ew.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([BF],{}),i.get()},setValue:function(t,n){i.set(n),t.getSystem().broadcastOn([AF],{})}}})])})}(t.body,r)];default:return[(e=t.body,o=r,n=Zu(DE.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:y(e.items,function(t){return gd(n,t,o)})}})),{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[n.asSpec()]}],behaviours:Po([rk.config({mode:"acyclic",useTabstopAt:v(qE)}),HE(n),jE(n,{postprocess:function(t){return xp(t).fold(function(t){return w.console.error(t),{}},function(t){return t})}})])})]}var e,o,n},initialData:t})])}}function Ep(t,e){return[Sn(yb(),KE),t(XO,function(t,n){e.onClose(),n.onClose()}),t(YO,function(t,n,e,o){n.onCancel(t),en(o,XO)}),bn($O,function(){return e.onUnblock()}),bn(JO,function(t,n){return e.onBlock(n.event())})]}function Dp(t,n){function e(t,n){return HO.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:y(n,function(t){return t.memento.asSpec()})})}var o=function(t,n){for(var e=[],o=[],r=0,i=t.length;r<i;r++){var u=t[r];(n(u,r)?e:o).push(u)}return{pass:e,fail:o}}(n.map(function(t){return t.footerButtons}).getOr([]),function(t){return"start"===t.align});return[e("start",o.pass),e("end",o.fail)]}function Bp(t,o){return{dom:pa('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Po([zB.config({channel:IF,initialData:t,updateState:function(t,n){var r=y(n.buttons,function(t){var n,e=Zu((n=o,Nl(t,t.type,n)));return{name:t.name,align:t.align,memento:e}});return ch.some({lookupByName:function(t,n){return e=t,o=n,k(r,function(t){return t.name===o}).bind(function(t){return t.memento.getOpt(e)});var e,o},footerButtons:r})},renderComponents:Dp})])}}function Ap(t,n){return uM.parts().footer(Bp(t,n))}function _p(n,e){if(n.getRoot().getSystem().isConnected()){var o=uS.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return DE.getField(o,e).fold(function(){var t=n.getFooter();return zB.getState(t).get().bind(function(t){return t.lookupByName(o,e)})},function(t){return ch.some(t)})}return ch.none()}function Mp(a,o,c){function t(t){var n=a.getRoot();n.getSystem().isConnected()&&t(n)}var s={getData:function(){var t=a.getRoot(),n=t.getSystem().isConnected()?a.getFormWrapper():t,e=Ew.getValue(n),o=V(c,function(t){return t.get()});return ih(ih({},e),o)},setData:function(u){t(function(){var n,t,e=s.getData(),o=Ih(e,u),r=(n=o,t=a.getRoot(),zB.getState(t).get().map(function(t){return lt(ft("data",t.dataValidator,n))}).getOr(n)),i=a.getFormWrapper();Ew.setValue(i,r),Eh(c,function(t,n){Ah(o,n)&&t.set(o[n])})})},disable:function(t){_p(a,t).each(_C.disable)},enable:function(t){_p(a,t).each(_C.enable)},focus:function(t){_p(a,t).each(sk.focus)},block:function(n){if(!dh(n))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(function(t){on(t,JO,{message:n})})},unblock:function(){t(function(t){en(t,$O)})},showTab:function(n){t(function(){var t=a.getBody();zB.getState(t).get().exists(function(t){return t.isTabPanel()})&&uS.getCurrent(t).each(function(t){DF.showTab(t,n)})})},redial:function(e){t(function(t){var n=o(e);t.getSystem().broadcastOn([_F],n),t.getSystem().broadcastOn([MF],n.internalDialog),t.getSystem().broadcastOn([FF],n.internalDialog),t.getSystem().broadcastOn([IF],n.internalDialog),s.setData(n.initialData)})},close:function(){t(function(t){en(t,XO)})}};return s}function Fp(t,n){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,n]}}function Ip(t,n){return uM.parts().close(Rk.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close")}},action:t,buttonBehaviours:Po([xT.config({})])}))}function Rp(){return uM.parts().title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function Vp(t,n){return uM.parts().body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:pa("<p>"+n.translate(t)+"</p>")}]}]})}function Hp(t){return uM.parts().footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})}function Np(t,n){return[HO.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),HO.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:n})]}function Pp(n){var t,e="tox-dialog",o=e+"-wrap",r=o+"__backdrop",i=e+"__disable-scroll";return uM.sketch({lazySink:n.lazySink,onEscape:function(t){return n.onEscape(t),ch.some(!0)},useTabstopAt:function(t){return!qE(t)},dom:{tag:"div",classes:[e].concat(n.extraClasses),styles:ih({position:"relative"},n.extraStyles)},components:b([n.header,n.body],n.footer.toArray()),parts:{blocker:{dom:pa('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:NF?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:Po(b([sk.config({}),_u("dialog-events",n.dialogEvents.concat([Cn(yb(),function(t){rk.focusIn(t)})])),_u("scroll-lock",[ly(function(){he(cy(),i)}),dy(function(){be(cy(),i)})])],n.extraBehaviours)),eventOrder:ih((t={},t[Fb()]=["dialog-events"],t[Wb()]=["scroll-lock","dialog-events","alloy.base.behaviour"],t[Gb()]=["alloy.base.behaviour","dialog-events","scroll-lock"],t),n.eventOrder)})}function zp(t){return Rk.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>'}}],action:function(t){en(t,YO)}})}function Lp(t,n,e){function o(t){return[ze(e.translate(t.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:ih({},n.map(function(t){return{id:t}}).getOr({}))},components:o(t),behaviours:Po([zB.config({channel:MF,renderComponents:o})])}}function jp(){return{dom:pa('<div class="tox-dialog__draghandle"></div>')}}function Up(t,n){return e={title:n.shared.providers.translate(t),draggable:n.dialog.isDraggableModal()},o=n.shared.providers,r=uM.parts().title(Lp(e,ch.none(),o)),i=uM.parts().draghandle(jp()),u=uM.parts().close(zp(o)),a=[r].concat(e.draggable?[i]:[]).concat([u]),HO.sketch({dom:pa('<div class="tox-dialog__header"></div>'),components:a});var e,o,r,i,u,a}function Wp(t,n){return{onClose:function(){return n.closeWindow()},onBlock:function(e){uM.setBusy(t(),function(t,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e.message()},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:n,components:[{dom:pa('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})},onUnblock:function(){uM.setIdle(t())}}}function Gp(t,n,e,o){var r;return Hy(Pp(ih(ih({},t),{lazySink:o.shared.getSink,extraBehaviours:b([zB.config({channel:_F,updateState:function(t,n){return ch.some(n)},initialData:n}),GE({})],t.extraBehaviours),onEscape:function(t){en(t,YO)},dialogEvents:e,eventOrder:(r={},r[Mb()]=["reflecting","receiving"],r[Wb()]=["scroll-lock","reflecting","messages","dialog-events","alloy.base.behaviour"],r[Gb()]=["alloy.base.behaviour","dialog-events","messages","reflecting","scroll-lock"],r)})))}function Xp(t){return y(t,function(t){return"menu"===t.type?(e=y((n=t).items,function(t){var n=Rv(!1);return ih(ih({},t),{storage:n})}),ih(ih({},n),{items:e})):t;var n,e})}function Yp(t){return S(t,function(t,n){return"menu"!==n.type?t:S(n.items,function(t,n){return t[n.name]=n.storage,t},t)},{})}function qp(t,n,e){var o,r,i,u=Up(t.internalDialog.title,e),a=(o={body:t.internalDialog.body},r=e,i=Tp(o,ch.none(),r,!1),uM.parts().body(i)),c=Xp(t.internalDialog.buttons),s=Yp(c),f=Ap({buttons:c},e),l=HF(function(){return g},Wp(function(){return m},n)),d="normal"!==t.internalDialog.size?"large"===t.internalDialog.size?["tox-dialog--width-lg"]:["tox-dialog--width-md"]:[],m=Gp({header:u,body:a,footer:ch.some(f),extraClasses:d,extraBehaviours:[],extraStyles:{}},t,l,e),g=Mp({getRoot:function(){return m},getBody:function(){return uM.getBody(m)},getFooter:function(){return uM.getFooter(m)},getFormWrapper:function(){var t=uM.getBody(m);return uS.getCurrent(t).getOr(t)}},n.redial,s);return{dialog:m,instanceApi:g}}function Kp(t,n,e,o){var r,i,u,a,c,s,f,l,d,m=Qn("dialog-label"),g=Qn("dialog-content"),p=Zu((f={title:t.internalDialog.title,draggable:!0},l=m,d=e.shared.providers,HO.sketch({dom:pa('<div class="tox-dialog__header"></div>'),components:[Lp(f,ch.some(l),d),jp(),zp(d)],containerBehaviours:Po([X_.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return ro(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),h=Zu((u={body:t.internalDialog.body},a=g,c=e,s=o,Tp(u,ch.some(a),c,s))),v=Xp(t.internalDialog.buttons),b=Yp(v),y=Zu(Bp({buttons:v},e)),x=HF(function(){return S},{onBlock:function(){},onUnblock:function(){},onClose:function(){return n.closeWindow()}}),w=Hy({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(r={role:"dialog"},r["aria-labelledby"]=m,r["aria-describedby"]=""+g,r)},eventOrder:(i={},i[Mb()]=[zB.name(),kx.name()],i[Fb()]=["execute-on-form"],i[Wb()]=["reflecting","execute-on-form"],i),behaviours:Po([rk.config({mode:"cyclic",onEscape:function(t){return en(t,XO),ch.some(!0)},useTabstopAt:function(t){return!qE(t)&&("button"!==sn(t)||"disabled"!==Xn(t,"disabled"))}}),zB.config({channel:_F,updateState:function(t,n){return ch.some(n)},initialData:t}),sk.config({}),_u("execute-on-form",x.concat([Cn(yb(),function(t){rk.focusIn(t)})])),GE({})]),components:[p.asSpec(),h.asSpec(),y.asSpec()]}),S=Mp({getRoot:function(){return w},getFooter:function(){return y.get(w)},getBody:function(){return h.get(w)},getFormWrapper:function(){var t=h.get(w);return uS.getCurrent(t).getOr(t)}},n.redial,b);return{dialog:w,instanceApi:S}}function Jp(t){return mh(t)&&-1!==zF.indexOf(t.mceAction)}function $p(o,t,r,n){var e,i,u=Up(o.title,n),a=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[JE({dom:{tag:"iframe",attributes:{src:o.url}},behaviours:Po([xT.config({}),sk.config({})])})]}],behaviours:Po([rk.config({mode:"acyclic",useTabstopAt:v(qE)})])},uM.parts().body(i)),c=o.buttons.bind(function(t){return 0===t.length?ch.none():ch.some(Ap({buttons:t},n))}),s=VF(function(){return h},Wp(function(){return p},t)),f=ih(ih({},o.height.fold(function(){return{}},function(t){return{height:t+"px","max-height":t+"px"}})),o.width.fold(function(){return{}},function(t){return{width:t+"px","max-width":t+"px"}})),l=o.width.isNone()&&o.height.isNone()?["tox-dialog--width-lg"]:[],d=new PF(o.url,{base_uri:new PF(w.window.location.href)}),m=d.protocol+"://"+d.host+(d.port?":"+d.port:""),g=Rv(ch.none()),p=Gp({header:u,body:a,footer:c,extraClasses:l,extraBehaviours:[_u("messages",[ly(function(){var t=Dc(Hv.fromDom(w.window),"message",function(t){if(d.isSameOrigin(new PF(t.raw().origin))){var n=t.raw().data;Jp(n)?function(t,n,e){switch(e.mceAction){case"insertContent":t.insertContent(e.content);break;case"setContent":t.setContent(e.content);break;case"execCommand":var o=!!ph(e.ui)&&e.ui;t.execCommand(e.cmd,o,e.value);break;case"close":n.close();break;case"block":n.block(e.message);break;case"unblock":n.unblock()}}(r,h,n):!Jp(e=n)&&mh(e)&&Ah(e,"mceAction")&&o.onMessage(h,n)}var e});g.set(ch.some(t))}),dy(function(){g.get().each(function(t){return t.unbind()})})]),kx.config({channels:(e={},e[RF]={onReceive:function(t,n){oo(t.element(),"iframe").each(function(t){t.dom().contentWindow.postMessage(n,m)})}},e)})],extraStyles:f},o,s,n),h=function(n){function t(t){n.getSystem().isConnected()&&t(n)}return{block:function(n){if(!dh(n))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(function(t){on(t,JO,{message:n})})},unblock:function(){t(function(t){en(t,$O)})},close:function(){t(function(t){en(t,XO)})},sendMessage:function(n){t(function(t){t.getSystem().broadcastOn([RF],n)})}}}(p);return{dialog:p,instanceApi:h}}var Qp,Zp,th,nh=function(t){return function(){return t}},eh=nh(!1),oh=nh(!0),rh=tinymce.util.Tools.resolve("tinymce.ThemeManager"),ih=function(){return(ih=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},uh=(Qp={fold:function(t){return t()},is:eh,isSome:eh,isNone:oh,getOr:e,getOrThunk:n,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:nh(null),getOrUndefined:nh(undefined),or:e,orThunk:n,map:t,each:Q,bind:t,exists:eh,forall:oh,filter:t,equals:c,equals_:c,toArray:function(){return[]},toString:nh("none()")},
Object.freeze&&Object.freeze(Qp),Qp),ah=function(e){function t(){return r}function n(t){return t(e)}var o=nh(e),r={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:oh,isNone:eh,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:t,orThunk:t,map:function(t){return ah(t(e))},each:function(t){t(e)},bind:n,exists:n,forall:n,filter:function(t){return t(e)?r:uh},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(eh,function(t){return n(e,t)})}};return r},ch={some:ah,none:t,from:function(t){return null===t||t===undefined?uh:ah(t)}},sh=function(e){return{is:function(t){return e===t},isValue:oh,isError:eh,getOr:nh(e),getOrThunk:nh(e),getOrDie:nh(e),or:function(){return sh(e)},orThunk:function(){return sh(e)},fold:function(t,n){return n(e)},map:function(t){return sh(t(e))},mapError:function(){return sh(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return ch.some(e)}}},fh=function(n){return{is:eh,isValue:eh,isError:oh,getOr:l,getOrThunk:function(t){return t()},getOrDie:function(){return i(String(n))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t){return t(n)},map:function(){return fh(n)},mapError:function(t){return fh(t(n))},each:Q,bind:function(){return fh(n)},exists:eh,forall:oh,toOption:ch.none}},lh={value:sh,error:fh,fromOption:function(t,n){return t.fold(function(){return fh(n)},sh)}},dh=o("string"),mh=o("object"),gh=o("array"),ph=o("boolean"),hh=o("function"),vh=o("number"),bh=Array.prototype.slice,yh=Array.prototype.indexOf,xh=Array.prototype.push,wh=function(t,n){return-1<u(t,n)},Sh=function(t,n){for(var e=0,o=t.length;e<o;e++)n(t[e],e)},kh=function(t){return 0===t.length?ch.none():ch.some(t[0])},Ch=hh(Array.from)?Array.from:function(t){return bh.call(t)},Oh=Object.keys,Th=Object.hasOwnProperty,Eh=function(t,n){for(var e=Oh(t),o=0,r=e.length;o<r;o++){var i=e[o];n(t[i],i)}},Dh=function(t,o){var r={};return Eh(t,function(t,n){var e=o(t,n);r[e.k]=e.v}),r},Bh=function(t,e){var o=[];return Eh(t,function(t,n){o.push(e(t,n))}),o},Ah=function(t,n){return Th.call(t,n)},_h=function(u){if(!gh(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],e={};return Sh(u,function(t,o){var n=Oh(t);if(1!==n.length)throw new Error("one and only one name per case");var r=n[0],i=t[r];if(e[r]!==undefined)throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!gh(i))throw new Error("case arguments must be an array");a.push(r),e[r]=function(){var t=arguments.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+i.length+" ("+i+"), got "+t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=arguments[n];return{fold:function(){if(arguments.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+arguments.length);return arguments[o].apply(null,e)},match:function(t){var n=Oh(t);if(a.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+n.join(","));if(!T(a,function(t){return wh(n,t)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+a.join(", "));return t[r].apply(null,e)},log:function(t){w.console.log(t,{constructors:a,constructor:r,params:e})}}}}),e},Mh=Object.prototype.hasOwnProperty,Fh=a(function(t,n){return mh(t)&&mh(n)?Fh(t,n):n}),Ih=a(function(t,n){return n}),Rh=_h([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Vh=Rh.strict,Hh=Rh.asOption,Nh=Rh.defaultedThunk,Ph=Rh.mergeWithThunk,zh=(_h([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t){return H(t)}),Lh=function(t,n){return N(t,n)};(th=Zp=Zp||{})[th.Error=0]="Error",th[th.Value=1]="Value";var jh,Uh,Wh,Gh,Xh,Yh,qh,Kh,Jh,$h,Qh,Zh,tv,nv,ev,ov,rv,iv,uv=function(t){return t.fold(q,Y)},av=function(t){return X(t,lh.error,lh.value)},cv=Y,sv=function(t){var n=[],e=[];return Sh(t,function(t){X(t,function(t){return e.push(t)},function(t){return n.push(t)})}),{values:n,errors:e}},fv=q,lv=function(t,n){return t.stype===Zp.Value?n(t.svalue):t},dv=function(t,n){return t.stype===Zp.Error?n(t.serror):t},mv=function(t,n){return t.stype===Zp.Value?{stype:Zp.Value,svalue:n(t.svalue)}:t},gv=function(t,n){return t.stype===Zp.Error?{stype:Zp.Error,serror:n(t.serror)}:t},pv=function(t,n){var e,o,r=sv(t);return 0<r.errors.length?K(r.errors):(e=r.values,o=n,0<e.length?cv(Fh(o,Ih.apply(undefined,e))):cv(o))},hv=function(t){var n=sv(t);return 0<n.errors.length?K(n.errors):cv(n.values)},vv=_h([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]},{thunk:["description"]},{func:["args","outputSchema"]}]),bv=_h([{field:["name","presence","type"]},{state:["name"]}]),yv=_h([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),xv=function(a){return{extract:function(t,n,e){return o=t,r=e,i=n,u=y(a,function(t){return nt(o,r,t,i)}),pv(u,{});var o,r,i,u},toString:function(){return"obj{\n"+y(a,function(t){return t.fold(function(t,n,e,o){return t+" -> "+o.toString()},function(t){return"state("+t+")"})}).join("\n")+"}"},toDsl:function(){return vv.objOf(y(a,function(t){return t.fold(function(t,n,e,o){return bv.field(t,e,o)},function(t){return bv.state(t)})}))}}},wv=nh(et(cv)),Sv=d(rt,xv),kv=yv.state,Cv=yv.field,Ov=et(cv),Tv=function(o){return{extract:function(t,n,e){return o().extract(t,n,e)},toString:function(){return o().toString()},toDsl:function(){return o().toDsl()}}},Ev=function(t){return"Errors: \n"+y(10<(n=t.errors).length?n.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):n,function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})+"\n\nInput object: "+J(t.input);var n},Dv=nh(Ov),Bv=pt(vh,"number"),Av=pt(dh,"string"),_v=pt(ph,"boolean"),Mv=pt(hh,"function"),Fv=function(n){function t(t,n){for(var e=t.next();!e.done;){if(!n(e.value))return!1;e=t.next()}return!0}if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(function(t){return Fv(n[t])});case"Map":return t(n.keys(),Fv)&&t(n.values(),Fv);case"Set":return t(n.keys(),Fv);default:return!1}},Iv=et(function(t){return Fv(t)?cv(t):fv("Expected value to be acceptable for sending via postMessage")}),Rv=function(t){function n(){return e}var e=t;return{get:n,set:function(t){e=t},clone:function(){return Rv(n())}}},Vv=function(t){if(null===t||t===undefined)throw new Error("Node cannot be null or undefined");return{dom:nh(t)}},Hv={fromHtml:function(t,n){var e=(n||w.document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length)throw w.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Vv(e.childNodes[0])},fromTag:function(t,n){var e=(n||w.document).createElement(t);return Vv(e)},fromText:function(t,n){var e=(n||w.document).createTextNode(t);return Vv(e)},fromDom:Vv,fromPoint:function(t,n,e){var o=t.dom();return ch.from(o.elementFromPoint(n,e)).map(Vv)}},Nv=function(t,n){return zt(t,n,w.Node.DOCUMENT_POSITION_CONTAINED_BY)},Pv=function(){return zv(0,0)},zv=function(t,n){return{major:t,minor:n}},Lv={nu:zv,detect:function(t,n){var e=String(n).toLowerCase();return 0===t.length?Pv():Lt(t,e)},unknown:Pv},jv="Firefox",Uv=function(t){var n=t.current;return{current:n,version:t.version,isEdge:jt("Edge",n),isChrome:jt("Chrome",n),isIE:jt("IE",n),isOpera:jt("Opera",n),isFirefox:jt(jv,n),isSafari:jt("Safari",n)}},Wv={unknown:function(){return Uv({current:undefined,version:Lv.unknown()})},nu:Uv,edge:nh("Edge"),chrome:nh("Chrome"),ie:nh("IE"),opera:nh("Opera"),firefox:nh(jv),safari:nh("Safari")},Gv="Windows",Xv="Android",Yv="Solaris",qv="FreeBSD",Kv=function(t){var n=t.current;return{current:n,version:t.version,isWindows:Ut(Gv,n),isiOS:Ut("iOS",n),isAndroid:Ut(Xv,n),isOSX:Ut("OSX",n),isLinux:Ut("Linux",n),isSolaris:Ut(Yv,n),isFreeBSD:Ut(qv,n)}},Jv={unknown:function(){return Kv({current:undefined,version:Lv.unknown()})},nu:Kv,windows:nh(Gv),ios:nh("iOS"),android:nh(Xv),linux:nh("Linux"),osx:nh("OSX"),solaris:nh(Yv),freebsd:nh(qv)},$v=function(t,e){return Wt(t,e).map(function(t){var n=Lv.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Qv=function(t,e){return Wt(t,e).map(function(t){var n=Lv.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Zv=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tb=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Gt(t,"edge/")&&Gt(t,"chrome")&&Gt(t,"safari")&&Gt(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Zv],search:function(t){return Gt(t,"chrome")&&!Gt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Gt(t,"msie")||Gt(t,"trident")}},{name:"Opera",versionRegexes:[Zv,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Xt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Xt("firefox")},{name:"Safari",versionRegexes:[Zv,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Gt(t,"safari")||Gt(t,"mobile/"))&&Gt(t,"applewebkit")}}],nb=[{name:"Windows",search:Xt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Gt(t,"iphone")||Gt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Xt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Xt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Xt("linux"),versionRegexes:[]},{name:"Solaris",search:Xt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Xt("freebsd"),versionRegexes:[]}],eb={browsers:nh(tb),oses:nh(nb)},ob=Rv((jh=w.navigator.userAgent,Uh=function(t){return w.window.matchMedia(t).matches},ev=eb.browsers(),ov=eb.oses(),rv=$v(ev,jh).fold(Wv.unknown,Wv.nu),iv=Qv(ov,jh).fold(Jv.unknown,Jv.nu),{browser:rv,os:iv,deviceType:(Wh=iv,Gh=rv,Xh=jh,Yh=Uh,qh=Wh.isiOS()&&!0===/ipad/i.test(Xh),Kh=Wh.isiOS()&&!qh,Jh=Wh.isiOS()||Wh.isAndroid(),$h=Jh||Yh("(pointer:coarse)"),Qh=qh||!Kh&&Jh&&Yh("(min-device-width:768px)"),Zh=Kh||Jh&&!Qh,tv=Gh.isSafari()&&Wh.isiOS()&&!1===/safari/i.test(Xh),nv=!Zh&&!Qh&&!tv,{isiPad:nh(qh),isiPhone:nh(Kh),isTablet:nh(Qh),isPhone:nh(Zh),isTouch:nh($h),isAndroid:Wh.isAndroid,isiOS:Wh.isiOS,isWebView:nh(tv),isDesktop:nh(nv)})})),rb=(w.Node.ATTRIBUTE_NODE,w.Node.CDATA_SECTION_NODE,w.Node.COMMENT_NODE,w.Node.DOCUMENT_NODE),ib=(w.Node.DOCUMENT_TYPE_NODE,w.Node.DOCUMENT_FRAGMENT_NODE,w.Node.ELEMENT_NODE),ub=w.Node.TEXT_NODE,ab=(w.Node.PROCESSING_INSTRUCTION_NODE,w.Node.ENTITY_REFERENCE_NODE,w.Node.ENTITY_NODE,w.Node.NOTATION_NODE,ib),cb=rb,sb=Yt().browser.isIE()?function(t,n){return Nv(t.dom(),n.dom())}:function(t,n){var e=t.dom(),o=n.dom();return e!==o&&e.contains(o)},fb=nh("touchstart"),lb=nh("touchmove"),db=nh("touchend"),mb=nh("touchcancel"),gb=nh("mousedown"),pb=nh("mousemove"),hb=nh("mouseout"),vb=nh("mouseup"),bb=nh("mouseover"),yb=nh("focusin"),xb=nh("focusout"),wb=nh("keydown"),Sb=nh("keyup"),kb=nh("input"),Cb=nh("change"),Ob=nh("click"),Tb=nh("transitionend"),Eb=nh("selectstart"),Db={tap:nh("alloy.tap")},Bb=nh("alloy.focus"),Ab=nh("alloy.blur.post"),_b=nh("alloy.paste.post"),Mb=nh("alloy.receive"),Fb=nh("alloy.execute"),Ib=nh("alloy.focus.item"),Rb=Db.tap,Vb=nh("alloy.longpress"),Hb=nh("alloy.sandbox.close"),Nb=nh("alloy.typeahead.cancel"),Pb=nh("alloy.system.init"),zb=nh("alloy.system.touchmove"),Lb=nh("alloy.system.touchend"),jb=nh("alloy.system.scroll"),Ub=nh("alloy.system.resize"),Wb=nh("alloy.system.attached"),Gb=nh("alloy.system.detached"),Xb=nh("alloy.system.dismissRequested"),Yb=nh("alloy.system.repositionRequested"),qb=nh("alloy.focusmanager.shifted"),Kb=nh("alloy.slotcontainer.visibility"),Jb=nh("alloy.change.tab"),$b=nh("alloy.dismiss.tab"),Qb=nh("alloy.highlight"),Zb=nh("alloy.dehighlight"),ty=function(t,n,e,o){var r=ih({target:n},o);t.getSystem().triggerEvent(e,n,V(r,nh))};"undefined"!=typeof w.window?w.window:Function("return this;")();var ny,ey,oy,ry,iy,uy=fn(ib),ay=fn(ub),cy=F(function(){return sy(Hv.fromDom(w.document))}),sy=function(t){var n=t.dom().body;if(null===n||n===undefined)throw new Error("Body is not available yet");return Hv.fromDom(n)},fy=function(t,n,e){return mn(t,function(t){return n(t).isSome()},e).bind(n)},ly=xn(Wb()),dy=xn(Gb()),my=xn(Pb()),gy=(ny=Fb(),function(t){return bn(ny,t)}),py=(On("element","offset"),function(t,n){t.dom().appendChild(n.dom())}),hy=function(t){var n=t.dom();null!==n.parentNode&&n.parentNode.removeChild(n)},vy=pn([(ey=Bb(),oy=function(t,n){var e,o,r=n.event().originator(),i=n.event().target();return!(o=i,$t(e=r,t.element())&&!$t(e,o)&&(w.console.warn(Bb()+" did not get interpreted by the desired target. \nOriginator: "+$n(r)+"\nTarget: "+$n(i)+"\nCheck the "+Bb()+" event handlers"),1))},{key:ey,value:Zt({can:oy})})]),by=Object.freeze({events:vy}),yy=0,xy=nh("alloy-id-"),wy=nh("data-alloy-id"),Sy=xy(),ky=wy(),Cy=function(t,n){Object.defineProperty(t.dom(),ky,{value:n,writable:!0})},Oy=function(t){var n=uy(t)?t.dom()[ky]:null;return ch.from(n)},Ty=l,Ey=te(),Dy=function(t){return y(t,function(t){return o=n="/*",r=(e=t).length-n.length,""!==o&&(e.length<o.length||e.substr(r,r+o.length)!==o)?t:t.substring(0,t.length-"/*".length);var n,e,o,r})},By=Qn("alloy-premade"),Ay={init:function(){return _y({readState:function(){return"No State required"}})}},_y=function(t){return t},My=function(t,n){return e=m.apply(undefined,[t.handler].concat(n)),o=t.purpose(),{cHandler:e,purpose:nh(o)};var e,o},Fy=function(t,i){return W(Bh(t,function(o,r){return(1===o.length?lh.value(o[0].handler()):fe(o,i,r)).map(function(t){var n=se(t),e=1<o.length?x(i[r],function(n){return f(o,function(t){return t.name()===n})}).join(" > "):o[0].name();return j(r,{handler:n,purpose:nh(e)})})}),{})},Iy=function(t,n){return Se(t)?t.style.getPropertyValue(n):""},Ry=function(t){var n=dt("external.component",ot([vt("element"),Ot("uid")]),t),e=Rv(te());n.uid.each(function(t){Cy(n.element,t)});var o={getSystem:e.get,config:ch.none,hasConfigured:nh(!1),connect:function(t){e.set(t)},disconnect:function(){e.set(te(function(){return o}))},getApis:function(){return{}},element:nh(n.element),spec:nh(t),readState:nh("No state"),syncComponents:Q,components:nh([]),events:nh({})};return ee(o)},Vy=Zn,Hy=function(t){return Lh(t,By).fold(function(){return Pe(t.hasOwnProperty("uid")?t:ih({uid:Vy("")},t)).getOrDie()},function(t){return t})},Ny=ee,Py=Le("height",function(t){var n=t.dom();return ln(t)?n.getBoundingClientRect().height:n.offsetHeight}),zy=function(e,o){return{left:nh(e),top:nh(o),translate:function(t,n){return zy(e+t,o+n)}}},Ly=zy,jy=function(t){var n,e=t.dom(),o=e.ownerDocument.body;return o===e?Ly(o.offsetLeft,o.offsetTop):ln(t)?(n=e.getBoundingClientRect(),Ly(n.left,n.top)):Ly(0,0)},Uy=Le("width",function(t){return t.dom().offsetWidth}),Wy=(Yt().browser.isSafari(),function(o,t){return o.view(t).fold(nh([]),function(t){var n=o.owner(t),e=Wy(o,n);return[t].concat(e)})}),Gy=Object.freeze({view:function(t){return(t.dom()===w.document?ch.none():ch.from(t.dom().defaultView.frameElement)).map(Hv.fromDom)},owner:function(t){return Bn(t)}}),Xy=On("point","width","height"),Yy=On("x","y","width","height"),qy=function(n,t){return mn(t,function(t){return $t(t,n.element())},nh(!1)).isSome()||uo(n,t)},Ky="unknown";(iy=ry=ry||{})[iy.STOP=0]="STOP",iy[iy.NORMAL=1]="NORMAL",iy[iy.LOGGING=2]="LOGGING";var Jy,$y,Qy=Rv({}),Zy=["alloy/data/Fields","alloy/debugging/Debugging"],tx=nh({logEventCut:Q,logEventStopped:Q,logNoParent:Q,logEventNoHandlers:Q,logEventResponse:Q,write:Q}),nx=nh([vt("menu"),vt("selectedMenu")]),ex=nh([vt("item"),vt("selectedItem")]),ox=(nh(xv(ex().concat(nx()))),nh(xv(ex()))),rx=St("initSize",[vt("numColumns"),vt("numRows")]),ix=nh(rx),ux=On("x","y","bubble","direction","label"),ax=_h([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),cx=ax.southeast,sx=ax.southwest,fx=ax.northeast,lx=ax.northwest,dx=ax.south,mx=ax.north,gx=ax.east,px=ax.west,hx=function(t,n,e){return ux(So(t,n),Co(t,n),e.north(),mx(),"layout-n")},vx=function(t,n,e){return ux(So(t,n),Oo(t),e.south(),dx(),"layout-s")},bx=function(e,t,o,r,n,i,u){function a(t){return G(t,o)?t[o]():ch.none()}var c=V(n,function(t,n){return Ho(o,t,n)}),s=V(i,function(t,n){return ne(t,n)}),f=ih(ih(ih({},s),c),{revoke:m(No,o),config:function(t){var n=dt(o+"-config",e,t);return{key:o,value:{config:n,me:f,configAsRaw:F(function(){return dt(o+"-config",e,t)}),initialConfig:t,state:u}}},schema:function(){return t},exhibit:function(t,e){return a(t).bind(function(n){return Lh(r,"exhibit").map(function(t){return t(e,n.config,n.state)})}).getOr(ie({}))},name:function(){return o},handlers:function(t){return a(t).map(function(t){return L("events",function(){return{}})(r)(t.config,t.state)}).getOr({})}});return f},yx=ot([vt("fields"),vt("name"),_t("active",{}),_t("apis",{}),_t("state",Ay),_t("extra",{})]),xx=ot([vt("branchKey"),vt("branches"),vt("name"),_t("active",{}),_t("apis",{}),_t("state",Ay),_t("extra",{})]),wx=nh(undefined),Sx=Object.freeze({events:function(o){return pn([bn(Mb(),function(r,i){var t,n,u=o.channels,e=(t=Oh(u),(n=i).universal()?t:x(t,function(t){return wh(n.channels(),t)}));Sh(e,function(t){var n=u[t],e=n.schema,o=dt("channel["+t+"] data\nReceiver: "+$n(r.element()),e,i.data());n.onReceive(r,o)})})])}}),kx=zo({fields:[bt("channels",st(lh.value,ot([vo("onReceive"),_t("schema",Dv())])))],name:"receiving",active:Sx}),Cx=Object.freeze({exhibit:function(t,n){return ie({classes:[],styles:n.useFixed()?{}:{position:"relative"}})}}),Ox=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Tx=Dn(["x","y","width","height","maxHeight","maxWidth","direction","classes","label","candidateYforTest"],[]),Ex=On("position","left","top","right","bottom"),Dx=_h([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Bx=function(t,n,e){var o=Ly(n,e);return t.fold(nh(o),nh(o),function(){var t=qe();return o.translate(-t.left(),-t.top())})},Ax=Dx.relative,_x=Dx.fixed,Mx=function(t){return"rtl"===Ee(t,"direction")?"rtl":"ltr"},Fx=[vt("hotspot"),Ot("bubble"),_t("overrides",{}),Qo(),yo("placement",function(t,n,e){var o=Ko(e,n.hotspot.element()),r=Zo(t.element(),n,Fo(),Io());return ch.some(Jo({anchorBox:o,bubble:n.bubble.getOr(Yo()),overrides:n.overrides,layouts:r,placer:ch.none()}))})],Ix=[vt("x"),vt("y"),_t("height",0),_t("width",0),_t("bubble",Yo()),_t("overrides",{}),Qo(),yo("placement",function(t,n,e){var o=Bx(e,n.x,n.y),r=Qe(o.left(),o.top(),n.width,n.height),i=Zo(t.element(),n,[Eo,Do,Bo,Ao,vx,hx,_o,Mo],[Do,Eo,Ao,Bo,vx,hx,_o,Mo]);return ch.some(Jo({anchorBox:r,bubble:n.bubble,overrides:n.overrides,layouts:i,placer:ch.none()}))})],Rx={create:On("start","soffset","finish","foffset")},Vx=_h([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Hx=(Vx.before,Vx.on,Vx.after,function(t){return t.fold(l,l,l)}),Nx=_h([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Px={domRange:Nx.domRange,relative:Nx.relative,exact:Nx.exact,exactFromRange:function(t){return Nx.exact(t.start(),t.soffset(),t.finish(),t.foffset())},getWin:function(t){return _n(t.match({domRange:function(t){return Hv.fromDom(t.startContainer)},relative:function(t){return Hx(t)},exact:function(t){return t}}))},range:Rx.create},zx=_h([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Lx=function jF(e,o){var n=function(t){return e(t)?ch.from(t.dom().nodeValue):ch.none()};return{get:function(t){if(!e(t))throw new Error("Can only get "+o+" value of a "+o+" node");return n(t).getOr("")},getOption:n,set:function(t,n){if(!e(t))throw new Error("Can only set raw "+o+" value of a "+o+" node");t.dom().nodeValue=n}}}(ay,"text"),jx=["img","br"],Ux=function(t,i){var u=function(t){for(var n=In(t),e=n.length-1;0<=e;e--){var o=n[e];if(i(o))return ch.some(o);var r=u(o);if(r.isSome())return r}return ch.none()};return u(t)},Wx=(document.caretPositionFromPoint||document.caretRangeFromPoint,On("element","offset")),Gx=_h([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Xx=Gx.screen,Yx=Gx.absolute,qx=function(t,n,e,o){var r=t,i=n,u=e,a=o;t<0&&(r=0,u=e+t),n<0&&(i=0,a=o+n);var c=Xx(Ly(r,i));return ch.some(Xy(c,u,a))},Kx=function(t,c,s,f,l){return t.map(function(t){var n,e,o,r=[c,t.point()],i=(n=function(){return hr(r)},e=function(){return hr(r)},o=function(){return pr(y(r,mr))},f.fold(n,e,o)),u=Yy(i.left(),i.top(),t.width(),t.height()),a=Zo(l,s,s.showAbove?[Bo,Ao,Eo,Do,hx,vx]:[Eo,Do,Bo,Ao,vx,vx],s.showAbove?[Ao,Bo,Do,Eo,hx,vx]:[Do,Eo,Ao,Bo,vx,hx]);return Jo({anchorBox:u,bubble:s.bubble.getOr(Yo()),overrides:s.overrides,layouts:a,placer:ch.none()})})},Jx=On("element","offset"),$x=gt("anchor",{selection:[Ot("getSelection"),vt("root"),Ot("bubble"),Qo(),_t("overrides",{}),_t("showAbove",!1),yo("placement",function(t,n,e){var o=_n(n.root).dom(),r=vr(t,0,n),i=yr(o,n).bind(function(t){return dr(o,Px.exactFromRange(t)).orThunk(function(){var n=Hv.fromText("\ufeff");return Vn(t.start(),n),dr(o,Px.exact(n,0,n,1)).map(function(t){return hy(n),t})}).bind(function(t){return qx(t.left(),t.top(),t.width(),t.height())})}),u=yr(o,n).bind(function(t){return uy(t.start())?ch.some(t.start()):Mn(t.start())}).getOr(t.element());return Kx(i,r,n,e,u)})],node:[vt("node"),vt("root"),Ot("bubble"),Qo(),_t("overrides",{}),_t("showAbove",!1),yo("placement",function(r,i,u){var a=vr(r,0,i);return i.node.bind(function(t){var n=t.dom().getBoundingClientRect(),e=qx(n.left,n.top,n.width,n.height),o=i.node.getOr(r.element());return Kx(e,a,i,u,o)})})],hotspot:Fx,submenu:[vt("item"),Qo(),_t("overrides",{}),yo("placement",function(t,n,e){var o=Ko(e,n.item.element()),r=Zo(t.element(),n,[Cr,Or,Tr,Er],[Or,Cr,Er,Tr]);return ch.some(Jo({anchorBox:o,bubble:Yo(),overrides:n.overrides,layouts:r,placer:ch.none()}))})],makeshift:Ix}),Qx=On("anchorBox","origin"),Zx=_h([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),tw=nh(function(t,n){Fr(t,n),Te(t,{"overflow-x":"hidden","overflow-y":"auto"})}),nw=nh(function(t,n){Fr(t,n)}),ew=Dn(["bounds","origin","preference","maxHeightFunction","maxWidthFunction"],[]),ow=function(t,n,e,o){var r,i,u,a,c,s,f=_r(t,n,e,o);Mr(n,f,o),c=n,s=f.classes(),we(c,s.off),xe(c,s.on),u=n,a=f,o.maxHeightFunction()(u,a.maxHeight()),r=n,i=f,o.maxWidthFunction()(r,i.maxWidth())},rw=function(t,n,e,o,r,i){var u=i.map(Ze);return iw(t,n,e,o,r,u)},iw=function(c,s,t,n,f,l){var d=dt("positioning anchor.info",$x,n);Go(function(){Oe(f.element(),"position","fixed");var t=De(f.element(),"visibility");Oe(f.element(),"visibility","hidden");var n,e,o,r,i=s.useFixed()?(r=w.document.documentElement,_x(0,0,r.clientWidth,r.clientHeight)):(e=Ge((n=c).element()),o=n.element().dom().getBoundingClientRect(),Ax(e.left(),e.top(),o.width,o.height)),u=d.placement,a=l.map(nh).or(s.getBounds);u(c,d,i).each(function(t){t.placer.getOr(Vr)(c,i,t,a,f)}),t.fold(function(){Ae(f.element(),"visibility")},function(t){Oe(f.element(),"visibility",t)}),De(f.element(),"left").isNone()&&De(f.element(),"top").isNone()&&De(f.element(),"right").isNone()&&De(f.element(),"bottom").isNone()&&De(f.element(),"position").is("fixed")&&Ae(f.element(),"position")},f.element())},uw=Object.freeze({position:function(t,n,e,o,r){rw(t,n,e,o,r,ch.none())},positionWithin:rw,positionWithinBounds:iw,getMode:function(t,n){return n.useFixed()?"fixed":"absolute"}}),aw=zo({fields:[_t("useFixed",eh),Ot("getBounds")],name:"positioning",active:Cx,apis:uw}),cw=function(t){en(t,Gb());var n=t.components();Sh(n,cw)},sw=function(t){var n=t.components();Sh(n,sw),en(t,Wb())},fw=function(t,n,e){t.getSystem().addToWorld(n),e(t.element(),n.element()),ln(t.element())&&sw(n),t.syncComponents()},lw=function(t,n,e){e(t,n.element());var o=In(n.element());Sh(o,function(t){n.getByDom(t).each(sw)})},dw=function(t,n){var e,o,r,i,u=n.getAttachPoint(t);Oe(t.element(),"position",aw.getMode(u)),e=t,o="visibility",r=n.cloakVisibilityAttr,i="hidden",De(e.element(),o).fold(function(){qn(e.element(),r)},function(t){Gn(e.element(),r,t)}),Oe(e.element(),o,i)},mw=function(t,n){var e;e=t.element(),!f(["top","left","right","bottom"],function(t){return De(e,t).isSome()})&&Ae(t.element(),"position"),function(t,n,e){if(Yn(t.element(),e)){var o=Xn(t.element(),e);Oe(t.element(),n,o)}else Ae(t.element(),n)}(t,"visibility",n.cloakVisibilityAttr)},gw=Object.freeze({cloak:dw,decloak:mw,open:Xr,openWhileCloaked:function(t,n,e,o,r){dw(t,n),Xr(t,n,e,o),r(),mw(t,n)},close:Yr,isOpen:qr,isPartOf:function(n,e,t,o){return qr(0,0,t)&&t.get().exists(function(t){return e.isPartOf(n,t,o)})},getState:function(t,n,e){return e.get()},setContent:function(t,n,e,o){return e.get().map(function(){return Gr(t,n,e,o)})}}),pw=Object.freeze({events:function(n,e){return pn([bn(Hb(),function(t){Yr(t,n,e)})])}}),hw=zo({fields:[po("onOpen"),po("onClose"),vt("isPartOf"),vt("getAttachPoint"),_t("cloakVisibilityAttr","data-precloak-visibility")],name:"sandboxing",active:pw,apis:gw,state:Object.freeze({init:function(){var n=Rv(ch.none()),t=nh("not-implemented");return _y({readState:t,isOpen:function(){return n.get().isSome()},clear:function(){n.set(ch.none())},set:function(t){n.set(ch.some(t))},get:function(){return n.get()}})}})}),vw=nh("dismiss.popups"),bw=nh("reposition.popups"),yw=nh("mouse.released"),xw=ot([_t("isExtraPart",nh(!1)),At("fireEventInstead",[_t("event",Xb())])]),ww=ot([_t("isExtraPart",nh(!1)),At("fireEventInstead",[_t("event",Yb())]),wt("doReposition")]),Sw=Object.freeze({onLoad:$r,onUnload:Qr,setValue:function(t,n,e,o){n.store.manager.setValue(t,n,e,o)},getValue:function(t,n,e){return n.store.manager.getValue(t,n,e)},getState:function(t,n,e){return e}}),kw=Object.freeze({events:function(n,e){return pn(n.resetOnDom?[ly(function(t){$r(t,n,e)}),dy(function(t){Qr(t,n,e)})]:[Ro(n,e,$r)])}}),Cw=Object.freeze({memory:Zr,dataset:ti,manual:function(){return _y({readState:function(){}})},init:function(t){return t.store.manager.state(t)}}),Ow=[Ot("initialValue"),vt("getFallbackEntry"),vt("getDataKey"),vt("setValue"),yo("manager",{setValue:ni,getValue:function(t,n,e){var o=n.store,r=o.getDataKey(t);return e.lookup(r).fold(function(){return o.getFallbackEntry(r)},function(t){return t})},onLoad:function(n,e,o){e.store.initialValue.each(function(t){ni(n,e,o,t)})},onUnload:function(t,n,e){e.clear()},state:ti})],Tw=[vt("getValue"),_t("setValue",Q),Ot("initialValue"),yo("manager",{setValue:function(t,n,e,o){n.store.setValue(t,o),n.onSetValue(t,o)},getValue:function(t,n){return n.store.getValue(t)},onLoad:function(n,e){e.store.initialValue.each(function(t){e.store.setValue(n,t)})},onUnload:Q,state:Ay.init})],Ew=zo({fields:[Mt("store",{mode:"memory"},gt("mode",{memory:[Ot("initialValue"),yo("manager",{setValue:function(t,n,e,o){e.set(o),n.onSetValue(t,o)},getValue:function(t,n,e){return e.get()},onLoad:function(t,n,e){n.store.initialValue.each(function(t){e.isNotSet()&&e.set(t)})},onUnload:function(t,n,e){e.clear()},state:Zr})],manual:Tw,dataset:Ow})),po("onSetValue"),_t("resetOnDom",!1)],name:"representing",active:kw,apis:Sw,extra:{setValueFrom:function(t,n){var e=Ew.getValue(n);Ew.setValue(t,e)}},state:Cw}),Dw=ei,Bw=ri,Aw="placeholder",_w=_h([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Mw=function(r,i,u,a){return ii(r,0,u,a).fold(function(t,n){var e=n(i,u.config,u.validated),o=O(Lh(e,"components").getOr([]),function(t){return Mw(r,i,t,a)});return[ih(ih({},e),{components:o})]},function(t,n){var e=n(i,u.config,u.validated);return u.validated.preprocess.getOr(l)(e)})},Fw=_w.single,Iw=_w.multiple,Rw=nh(Aw),Vw=_h([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Hw=_t("factory",{sketch:l}),Nw=_t("schema",[]),Pw=vt("name"),zw=Cv("pname","pname",Nh(function(t){return"<alloy."+Qn(t.name)+">"}),Dv()),Lw=Pt("schema",function(){return[Ot("preprocess")]}),jw=_t("defaults",nh({})),Uw=_t("overrides",nh({})),Ww=xv([Hw,Nw,Pw,zw,jw,Uw]),Gw=xv([Hw,Nw,Pw,jw,Uw]),Xw=xv([Hw,Nw,Pw,zw,jw,Uw]),Yw=xv([Hw,Lw,Pw,vt("unit"),zw,jw,Uw]),qw=si(Vw.required,Ww),Kw=si(Vw.external,Gw),Jw=si(Vw.optional,Xw),$w=si(Vw.group,Yw),Qw=nh("entirety"),Zw=Object.freeze({required:qw,external:Kw,optional:Jw,group:$w,asNamedPart:ai,name:ci,asCommon:function(t){return t.fold(l,l,l,l)},original:Qw}),tS=function(t,n){return{uiType:Rw(),owner:t,name:n}},nS=Object.freeze({generate:li,generateOne:di,schemas:mi,names:gi,substitutes:pi,components:hi,defaultUids:ki,defaultUidsSchema:Ci,getAllParts:xi,getAllPartNames:wi,getPart:vi,getPartOrDie:bi,getParts:yi,getPartsOrDie:Si}),eS=function(t){return t.hasOwnProperty("uid")?t:ih(ih({},t),{uid:Zn("uid")})},oS=ot([vt("name"),vt("factory"),vt("configFields"),_t("apis",{}),_t("extraApis",{})]),rS=ot([vt("name"),vt("factory"),vt("configFields"),vt("partFields"),_t("apis",{}),_t("extraApis",{})]),iS=Object.freeze({getCurrent:function(t,n){return n.find(t)}}),uS=zo({fields:[vt("find")],name:"composing",apis:iS}),aS=function(t,n,e,o){return ye(o.element(),n.highlightClass)},cS=function(t,n,e,o){var r=sr(t.element(),"."+n.itemClass);return ch.from(r[o]).fold(function(){return lh.error("No element found with index "+o)},t.getSystem().getByDom)},sS=function(n,t){return oo(n.element(),"."+t.itemClass).bind(function(t){return n.getSystem().getByDom(t).toOption()})},fS=function(n,t){var e=sr(n.element(),"."+t.itemClass);return(0<e.length?ch.some(e[e.length-1]):ch.none()).bind(function(t){return n.getSystem().getByDom(t).toOption()})},lS=function(n,t){return ao(y(sr(n.element(),"."+t.itemClass),function(t){return n.getSystem().getByDom(t).toOption()}))},dS=Object.freeze({dehighlightAll:function(t,n){return Ai(t,n,0,[])},dehighlight:function(t,n,e,o){aS(t,n,e,o)&&(be(o.element(),n.highlightClass),n.onDehighlight(t,o),en(o,Zb()))},highlight:_i,highlightFirst:function(n,e,o){sS(n,e).each(function(t){_i(n,e,o,t)})},highlightLast:function(n,e,o){fS(n,e).each(function(t){_i(n,e,o,t)})},highlightAt:function(n,e,o,t){cS(n,e,o,t).fold(function(t){throw new Error(t)},function(t){_i(n,e,o,t)})},highlightBy:function(n,e,o,t){k(lS(n,e),t).each(function(t){_i(n,e,o,t)})},isHighlighted:aS,getHighlighted:function(n,t){return oo(n.element(),"."+t.highlightClass).bind(function(t){return n.getSystem().getByDom(t).toOption()})},getFirst:sS,getLast:fS,getPrevious:function(t,n){return Mi(t,n,0,-1)},getNext:function(t,n){return Mi(t,n,0,1)},getCandidates:lS}),mS=zo({fields:[vt("highlightClass"),vt("itemClass"),po("onHighlight"),po("onDehighlight")],name:"highlighting",apis:dS}),gS=v(Pi);($y=Jy=Jy||{}).OnFocusMode="onFocus",$y.OnEnterOrSpaceMode="onEnterOrSpace",$y.OnApiMode="onApi";var pS,hS,vS,bS=Xi(Pt("cyclic",nh(!1))),yS=Xi(Pt("cyclic",nh(!0))),xS=Gi([_t("execute",Yi),_t("useSpace",!1),_t("useEnter",!0),_t("useControlEnter",!1),_t("useDown",!1)],Ay.init,function(t,n,e){var o=e.useSpace&&!Bi(t.element())?[32]:[],r=e.useEnter?[13]:[],i=e.useDown?[40]:[];return[Li(Hi(o.concat(r).concat(i)),Ki)].concat(e.useControlEnter?[Li(Ni([zi,Hi([13])]),Ki)]:[])},function(t,n,e){return e.useSpace&&!Bi(t.element())?[Li(Hi([32]),qi)]:[]},function(){return ch.none()}),wS=Object.freeze({flatgrid:Ji,init:function(t){return t.state(t)}}),SS=function(n,e,t,o,r){return o.focusManager.get(e).bind(function(t){return n(e.element(),t,o,r)}).map(function(t){return o.focusManager.set(e,t),!0})},kS=tu,CS=tu,OS=tu,TS=Dn(["index","candidates"],[]),ES=[vt("selector"),_t("execute",Yi),ho("onEscape"),_t("captureTab",!1),ix()],DS=cu(function(t,n,e,o){return iu(t,n,e,o,-1)}),BS=cu(function(t,n,e,o){return iu(t,n,e,o,1)}),AS=cu(function(t,n,e,o){return uu(t,n,e,o,-1)}),_S=cu(function(t,n,e,o){return uu(t,n,e,o,1)}),MS=Gi(ES,Ji,nh([Li(Hi([37]),Qi(DS,BS)),Li(Hi([39]),Zi(DS,BS)),Li(Hi([38]),kS(AS)),Li(Hi([40]),CS(_S)),Li(Ni([Pi,Hi([9])]),su),Li(Ni([gS,Hi([9])]),su),Li(Hi([27]),function(t,n,e){return e.onEscape(t,n)}),Li(Hi([32].concat([13])),function(n,e,o){return(t=n,r=o,r.focusManager.get(t).bind(function(t){return ro(t,r.selector)})).bind(function(t){
return o.execute(n,e,t)});var t,r})]),nh([Li(Hi([32]),qi)]),function(){return ch.some(au)}),FS=[vt("selector"),_t("getInitial",ch.none),_t("execute",Yi),ho("onEscape"),_t("executeOnMove",!1),_t("allowVertical",!0)],IS=nh([Li(Hi([32]),qi)]),RS=Gi(FS,Ay.init,function(t,n,e){var o=[37].concat(e.allowVertical?[38]:[]),r=[39].concat(e.allowVertical?[40]:[]);return[Li(Hi(o),pu(Qi(mu,gu))),Li(Hi(r),pu(Zi(mu,gu))),Li(Hi([13]),lu),Li(Hi([32]),lu),Li(Hi([27]),hu)]},IS,function(){return ch.some(du)}),VS=Dn(["rowIndex","columnIndex","cell"],[]),HS=[St("selectors",[vt("row"),vt("cell")]),_t("cycles",!0),_t("previousSelector",ch.none),_t("execute",Yi)],NS=ku(function(t,n,e){return bu(t,n,e,-1)},function(t,n,e){return xu(t,n,e,-1)}),PS=ku(function(t,n,e){return bu(t,n,e,1)},function(t,n,e){return xu(t,n,e,1)}),zS=ku(function(t,n,e){return yu(t,e,n,-1)},function(t,n,e){return wu(t,e,n,-1)}),LS=ku(function(t,n,e){return yu(t,e,n,1)},function(t,n,e){return wu(t,e,n,1)}),jS=nh([Li(Hi([37]),Qi(NS,PS)),Li(Hi([39]),Zi(NS,PS)),Li(Hi([38]),kS(zS)),Li(Hi([40]),CS(LS)),Li(Hi([32].concat([13])),function(n,e,o){return Wo(n.element()).bind(function(t){return o.execute(n,e,t)})})]),US=nh([Li(Hi([32]),qi)]),WS=Gi(HS,Ay.init,jS,US,function(){return ch.some(Su)}),GS=[vt("selector"),_t("execute",Yi),_t("moveOnTab",!1)],XS=nh([Li(Hi([38]),OS(Tu)),Li(Hi([40]),OS(Eu)),Li(Ni([Pi,Hi([9])]),function(t,n,e){return e.moveOnTab?OS(Tu)(t,n,e):ch.none()}),Li(Ni([gS,Hi([9])]),function(t,n,e){return e.moveOnTab?OS(Eu)(t,n,e):ch.none()}),Li(Hi([13]),Cu),Li(Hi([32]),Cu)]),YS=nh([Li(Hi([32]),qi)]),qS=Gi(GS,Ay.init,XS,YS,function(){return ch.some(Ou)}),KS=Gi([ho("onSpace"),ho("onEnter"),ho("onShiftEnter"),ho("onLeft"),ho("onRight"),ho("onTab"),ho("onShiftTab"),ho("onUp"),ho("onDown"),ho("onEscape"),_t("stopSpaceKeyup",!1),Ot("focusIn")],Ay.init,function(t,n,e){return[Li(Hi([32]),e.onSpace),Li(Ni([gS,Hi([13])]),e.onEnter),Li(Ni([Pi,Hi([13])]),e.onShiftEnter),Li(Ni([Pi,Hi([9])]),e.onShiftTab),Li(Ni([gS,Hi([9])]),e.onTab),Li(Hi([38]),e.onUp),Li(Hi([40]),e.onDown),Li(Hi([37]),e.onLeft),Li(Hi([39]),e.onRight),Li(Hi([32]),e.onSpace),Li(Hi([27]),e.onEscape)]},function(t,n,e){return e.stopSpaceKeyup?[Li(Hi([32]),qi)]:[]},function(t){return t.focusIn}),JS=bS.schema(),$S=yS.schema(),QS=RS.schema(),ZS=MS.schema(),tk=WS.schema(),nk=xS.schema(),ek=qS.schema(),ok=KS.schema(),rk=Lo({branchKey:"mode",branches:Object.freeze({acyclic:JS,cyclic:$S,flow:QS,flatgrid:ZS,matrix:tk,execution:nk,menu:ek,special:ok}),name:"keying",active:{events:function(t,n){return t.handler.toEvents(t,n)}},apis:{focusIn:function(n,e,o){e.sendFocusIn(e).fold(function(){n.getSystem().triggerFocus(n.element(),n.element())},function(t){t(n,e,o)})},setGridSize:function(t,n,e,o,r){G(e,"setGridSize")?e.setGridSize(o,r):w.console.error("Layout does not support setGridSize")}},state:wS}),ik=function(t){return t.components()},uk=zo({fields:[],name:"replacing",apis:Object.freeze({append:function(t,n,e,o){Du(t,0,py,o)},prepend:function(t,n,e,o){Du(t,0,Nn,o)},remove:Bu,replaceAt:Au,replaceBy:function(n,t,e,o,r){return C(ik(n),o).bind(function(t){return Au(n,0,0,t,r)})},set:function(n,t,e,o){Go(function(){var t=y(o,n.getSystem().build);Nr(n,t)},n.element())},contents:ik})}),ak=Object.freeze({focus:Mu,blur:function(t,n){n.ignore||t.element().dom().blur()},isFocused:function(t){return n=t.element(),e=Bn(n).dom(),n.dom()===e.activeElement;var n,e}}),ck=Object.freeze({exhibit:function(t,n){return ie(n.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(e){return pn([bn(Bb(),function(t,n){Mu(t,e),n.stop()})].concat(e.stopMousedown?[bn(gb(),function(t,n){n.event().prevent()})]:[]))}}),sk=zo({fields:[po("onFocus"),_t("stopMousedown",!1),_t("ignore",!1)],name:"focusing",active:ck,apis:ak}),fk=function(t,n,e,o){(o?Vu:Hu)(t,n,e)},lk=Object.freeze({onLoad:Nu,toggle:Ru,isOn:function(t,n,e){return e.get()},on:Vu,off:Hu,set:fk}),dk=Object.freeze({exhibit:function(){return ie({})},events:function(t,n){var e,o,r,i=(e=t,o=n,r=Ru,gy(function(t){r(t,e,o)})),u=Ro(t,n,Nu);return pn(R([t.toggleOnExecute?[i]:[],[u]]))}}),mk=function(t,n,e){Gn(t.element(),"aria-expanded",e)},gk=zo({fields:[_t("selected",!1),Ot("toggleClass"),_t("toggleOnExecute",!0),Mt("aria",{mode:"none"},gt("mode",{pressed:[_t("syncWithExpanded",!1),yo("update",function(t,n,e){Gn(t.element(),"aria-pressed",e),n.syncWithExpanded&&mk(t,n,e)})],checked:[yo("update",function(t,n,e){Gn(t.element(),"aria-checked",e)})],expanded:[yo("update",mk)],selected:[yo("update",function(t,n,e){Gn(t.element(),"aria-selected",e)})],none:[yo("update",Q)]}))],name:"toggling",active:dk,apis:lk,state:(pS=!1,{init:function(){var n=Rv(pS);return{get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(pS)},readState:function(){return n.get()}}}})}),pk="alloy.item-hover",hk="alloy.item-focus",vk=nh(pk),bk=nh(hk),yk=[vt("data"),vt("components"),vt("dom"),_t("hasSubmenu",!1),Ot("toggling"),Dw("itemBehaviours",[gk,sk,rk,Ew]),_t("ignoreFocus",!1),_t("domModification",{}),yo("builder",function(t){return{dom:t.dom,domModification:ih(ih({},t.domModification),{attributes:ih(ih(ih({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Bw(t.itemBehaviours,[t.toggling.fold(gk.revoke,function(t){return gk.config(ih({aria:{mode:"checked"}},t))}),sk.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){ju(t)}}),rk.config({mode:"execution"}),Ew.config({store:{mode:"memory",initialValue:t.data}}),_u("item-type-events",b(Pu(),[bn(bb(),Lu),bn(Ib(),sk.focus)]))]),components:t.components,eventOrder:t.eventOrder}}),_t("eventOrder",{})],xk=[vt("dom"),vt("components"),yo("builder",function(t){return{dom:t.dom,components:t.components,events:pn([bn(Ib(),function(t,n){n.stop()})])}})],wk=nh([qw({name:"widget",overrides:function(t){return{behaviours:Po([Ew.config({store:{mode:"manual",getValue:function(){return t.data},setValue:function(){}}})])}}})]),Sk=gt("type",{widget:[vt("uid"),vt("data"),vt("components"),vt("dom"),_t("autofocus",!1),_t("ignoreFocus",!1),Dw("widgetBehaviours",[Ew,sk,rk]),_t("domModification",{}),Ci(wk()),yo("builder",function(e){function o(t){return vi(t,e,"widget").map(function(t){return rk.focusIn(t),t})}function t(t,n){return Bi(n.event().target())||e.autofocus&&n.setSource(t.element()),ch.none()}var n=pi(0,e,wk()),r=hi("item-widget",e,n.internals());return{dom:e.dom,components:r,domModification:e.domModification,events:pn([gy(function(t,n){o(t).each(function(){n.stop()})}),bn(bb(),Lu),bn(Ib(),function(t){e.autofocus?o(t):sk.focus(t)})]),behaviours:Bw(e.widgetBehaviours,[Ew.config({store:{mode:"memory",initialValue:e.data}}),sk.config({ignore:e.ignoreFocus,onFocus:function(t){ju(t)}}),rk.config({mode:"special",focusIn:e.autofocus?function(t){o(t)}:wx(),onLeft:t,onRight:t,onEscape:function(t,n){return sk.isFocused(t)||e.autofocus?(e.autofocus&&n.setSource(t.element()),ch.none()):(sk.focus(t),ch.some(!0))}})])}})],item:yk,separator:xk}),kk=nh([$w({factory:{sketch:function(t){var n=dt("menu.spec item",Sk,t);return n.builder(n)}},name:"items",unit:"item",defaults:function(t,n){return n.hasOwnProperty("uid")?n:ih(ih({},n),{uid:Zn("item")})},overrides:function(t,n){return{type:n.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Ck=nh([vt("value"),vt("items"),vt("dom"),vt("components"),_t("eventOrder",{}),ei("menuBehaviours",[mS,Ew,uS,rk]),Mt("movement",{mode:"menu",moveOnTab:!0},gt("mode",{grid:[ix(),yo("config",function(t,n){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:n.initSize.numColumns,numRows:n.initSize.numRows},focusManager:t.focusManager}})],matrix:[yo("config",function(t,n){return{mode:"matrix",selectors:{row:n.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}}),vt("rowSelector")],menu:[_t("moveOnTab",!0),yo("config",function(t,n){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:n.moveOnTab,focusManager:t.focusManager}})]})),bt("markers",ox()),_t("fakeFocus",!1),_t("focusManager",Ui()),po("onHighlight")]),Ok=nh("alloy.menu-focus"),Tk=Di({name:"Menu",configFields:Ck(),partFields:kk(),factory:function(t,n){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ri(t.menuBehaviours,[mS.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Ew.config({store:{mode:"memory",initialValue:t.value}}),uS.config({find:ch.some}),rk.config(t.movement.config(t,t.movement))]),events:pn([bn(bk(),function(n,e){var t=e.event();n.getSystem().getByDom(t.target()).each(function(t){mS.highlight(n,t),e.stop(),on(n,Ok(),{menu:n,item:t})})}),bn(vk(),function(t,n){var e=n.event().item();mS.highlight(t,e)})]),components:n,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Ek=function(e,o,r,t){return Lh(r,t).bind(function(t){return Lh(e,t).bind(function(t){var n=Ek(e,o,r,t);return ch.some([t].concat(n))})}).getOr([])},Dk=function(t){return"prepared"===t.type?ch.some(t.menu):ch.none()},Bk={init:function(){function r(t,o,r){return e(t).bind(function(n){return(e=t,A(i.get(),function(t){return t===e})).bind(function(t){return o(t).map(function(t){return{triggeredMenu:n,triggeringItem:t,triggeringPath:r}})});var e})}var i=Rv({}),u=Rv({}),a=Rv({}),c=Rv(ch.none()),s=Rv({}),e=function(t){return n(t).bind(Dk)},n=function(t){return Lh(u.get(),t)},f=function(t){return Lh(i.get(),t)};return{setMenuBuilt:function(t,n){var e;u.set(ih(ih({},u.get()),((e={})[t]={type:"prepared",menu:n},e)))},setContents:function(t,n,e,o){c.set(ch.some(t)),i.set(e),u.set(n),s.set(o);var r=Uu(o,e);a.set(r)},expand:function(e){return Lh(i.get(),e).map(function(t){var n=Lh(a.get(),e).getOr([]);return[t].concat(n)})},refresh:function(t){return Lh(a.get(),t)},collapse:function(t){return Lh(a.get(),t).bind(function(t){return 1<t.length?ch.some(t.slice(1)):ch.none()})},lookupMenu:n,lookupItem:f,otherMenus:function(t){var n=s.get();return D(Oh(n),t)},getPrimary:function(){return c.get().bind(e)},getMenus:function(){return u.get()},clear:function(){i.set({}),u.set({}),a.set({}),c.set(ch.none())},isClear:function(){return c.get().isNone()},getTriggeringPath:function(t,o){var n=x(f(t).toArray(),function(t){return e(t).isSome()});return Lh(a.get(),t).bind(function(t){var e=E(n.concat(t));return function(t){for(var n=[],e=0;e<t.length;e++){var o=t[e];if(!o.isSome())return ch.none();n.push(o.getOrDie())}return ch.some(n)}(O(e,function(t,n){return r(t,o,e.slice(0,n+1)).fold(function(){return c.get().is(t)?[]:[ch.none()]},function(t){return[ch.some(t)]})}))})}}},extractPreparedMenu:Dk},Ak=nh("collapse-item"),_k=Ei({name:"TieredMenu",configFields:[bo("onExecute"),bo("onEscape"),vo("onOpenMenu"),vo("onOpenSubmenu"),vo("onRepositionMenu"),po("onCollapseMenu"),_t("highlightImmediately",!0),St("data",[vt("primary"),vt("menus"),vt("expansions")]),_t("fakeFocus",!1),po("onHighlight"),po("onHover"),lo(),vt("dom"),_t("navigateOnHover",!0),_t("stayInDom",!1),ei("tmenuBehaviours",[rk,mS,uS,uk]),_t("eventOrder",{})],apis:{collapseMenu:function(t,n){t.collapseMenu(n)},highlightPrimary:function(t,n){t.highlightPrimary(n)},repositionMenus:function(t,n){t.repositionMenus(n)}},factory:function(a){function t(t){var o,r,n=(o=t,r=a.data.primary,V(a.data.menus,function(t,n){function e(){return Tk.sketch(ih(ih({dom:t.dom},t),{value:n,items:t.items,markers:a.markers,fakeFocus:a.fakeFocus,onHighlight:a.onHighlight,focusManager:a.fakeFocus?Wi():Ui()}))}return n===r?{type:"prepared",menu:o.getSystem().build(e())}:{type:"notbuilt",nbMenu:e}})),e=h();return p.setContents(a.data.primary,n,a.data.expansions,e),p.getPrimary()}function c(t){return Ew.getValue(t).value}function u(n,t){mS.highlight(n,t),mS.getHighlighted(t).orThunk(function(){return mS.getFirst(t)}).each(function(t){un(n,t.element(),Ib())})}function s(n,t){return ao(y(t,function(t){return n.lookupMenu(t).bind(function(t){return"prepared"===t.type?ch.some(t.menu):ch.none()})}))}function f(n,t,e){var o=s(t,t.otherMenus(e));Sh(o,function(t){we(t.element(),[a.markers.backgroundMenu]),a.stayInDom||uk.remove(n,t)})}function l(t,o){var n,e=(n=t,g.get().getOrThunk(function(){var e={},t=x(sr(n.element(),"."+a.markers.item),function(t){return"true"===Xn(t,"aria-haspopup")});return Sh(t,function(t){n.getSystem().getByDom(t).each(function(t){var n=c(t);e[n]=t})}),g.set(ch.some(e)),e}));Eh(e,function(t,n){var e=wh(o,n);Gn(t.element(),"aria-expanded",e)})}function d(o,r,i){return ch.from(i[0]).bind(function(t){return r.lookupMenu(t).bind(function(t){if("notbuilt"===t.type)return ch.none();var n=t.menu,e=s(r,i.slice(1));return Sh(e,function(t){he(t.element(),a.markers.backgroundMenu)}),ln(n.element())||uk.append(o,Ny(n)),we(n.element(),[a.markers.backgroundMenu]),u(o,n),f(o,r,i),ch.some(n)})})}function i(r,i,u){void 0===u&&(u=m.HighlightSubmenu);var t=c(i);return p.expand(t).bind(function(o){return l(r,o),ch.from(o[0]).bind(function(e){return p.lookupMenu(e).bind(function(t){var n=function(t,n,e){if("notbuilt"!==e.type)return e.menu;var o=t.getSystem().build(e.nbMenu());return p.setMenuBuilt(n,o),o}(r,e,t);return ln(n.element())||uk.append(r,Ny(n)),a.onOpenSubmenu(r,i,n,E(o)),u===m.HighlightSubmenu?(mS.highlightFirst(n),d(r,p,o)):(mS.dehighlightAll(n),ch.some(i))})})})}function o(n,e){var t=c(e);return p.collapse(t).bind(function(t){return l(n,t),d(n,p,t).map(function(t){return a.onCollapseMenu(n,e,t),t})})}function n(e){return function(n,t){return ro(t.getSource(),"."+a.markers.item).bind(function(t){return n.getSystem().getByDom(t).toOption().bind(function(t){return e(n,t).map(function(){return!0})})})}}function e(t){return mS.getHighlighted(t).bind(mS.getHighlighted)}var m,r,g=Rv(ch.none()),p=Bk.init(),h=function(){return V(a.data.menus,function(t){return O(t.items,function(t){return"separator"===t.type?[]:[t.data.value]})})};(r=m=m||{})[r.HighlightSubmenu=0]="HighlightSubmenu",r[r.HighlightParent=1]="HighlightParent";var v=pn([bn(Ok(),function(e,o){var t=o.event().item();p.lookupItem(c(t)).each(function(){var t=o.event().menu();mS.highlight(e,t);var n=c(o.event().item());p.refresh(n).each(function(t){return f(e,p,t)})})}),gy(function(n,t){var e=t.event().target();n.getSystem().getByDom(e).each(function(t){0===c(t).indexOf("collapse-item")&&o(n,t),i(n,t,m.HighlightSubmenu).fold(function(){a.onExecute(n,t)},function(){})})}),ly(function(n){t(n).each(function(t){uk.append(n,Ny(t)),a.onOpenMenu(n,t),a.highlightImmediately&&u(n,t)})})].concat(a.navigateOnHover?[bn(vk(),function(t,n){var e,o,r=n.event().item();e=t,o=c(r),p.refresh(o).bind(function(t){return l(e,t),d(e,p,t)}),i(t,r,m.HighlightParent),a.onHover(t,r)})]:[])),b={collapseMenu:function(n){e(n).each(function(t){o(n,t)})},highlightPrimary:function(n){p.getPrimary().each(function(t){u(n,t)})},repositionMenus:function(o){p.getPrimary().bind(function(n){return e(o).bind(function(t){var n=c(t),e=ao(y(_(p.getMenus()),Bk.extractPreparedMenu));return p.getTriggeringPath(n,function(t){return n=t,co(e,function(t){return t.getSystem().isConnected()?k(mS.getCandidates(t),function(t){return c(t)===n}):ch.none()});var n})}).map(function(t){return{primary:n,triggeringPath:t}})}).fold(function(){var t;(t=o,ch.from(t.components()[0]).filter(function(t){return"menu"===Xn(t.element(),"role")})).each(function(t){a.onRepositionMenu(o,t,[])})},function(t){var n=t.primary,e=t.triggeringPath;a.onRepositionMenu(o,n,e)})}};return{uid:a.uid,dom:a.dom,markers:a.markers,behaviours:ri(a.tmenuBehaviours,[rk.config({mode:"special",onRight:n(function(t,n){return Bi(n.element())?ch.none():i(t,n,m.HighlightSubmenu)}),onLeft:n(function(t,n){return Bi(n.element())?ch.none():o(t,n)}),onEscape:n(function(t,n){return o(t,n).orThunk(function(){return a.onEscape(t,n).map(function(){return t})})}),focusIn:function(n){p.getPrimary().each(function(t){un(n,t.element(),Ib())})}}),mS.config({highlightClass:a.markers.selectedMenu,itemClass:a.markers.menu}),uS.config({find:function(t){return mS.getHighlighted(t)}}),uk.config({})]),eventOrder:a.eventOrder,apis:b,events:v}},extraApis:{tieredData:function(t,n,e){return{primary:t,menus:n,expansions:e}},singleData:function(t,n){return{primary:t,menus:j(t,n),expansions:{}}},collapseItem:function(t){return{value:Qn(Ak()),meta:{text:t}}}}}),Mk=Ei({name:"InlineView",configFields:[vt("lazySink"),po("onShow"),po("onHide"),Bt("onEscape"),ei("inlineBehaviours",[hw,Ew,kx]),At("fireDismissalEventInstead",[_t("event",Xb())]),At("fireRepositionEventInstead",[_t("event",Yb())]),_t("getRelated",ch.none),_t("eventOrder",ch.none)],factory:function(i){function t(e){hw.isOpen(e)&&Ew.getValue(e).each(function(t){switch(t.mode){case"menu":hw.getState(e).each(function(t){_k.repositionMenus(t)});break;case"position":var n=i.lazySink(e).getOrDie();aw.positionWithinBounds(n,t.anchor,e,t.getBounds())}})}var o=function(t,n,e,o){r(t,n,e,function(){return o.map(function(t){return Ze(t)})})},r=function(t,n,e,o){var r=i.lazySink(t).getOrDie();hw.openWhileCloaked(t,e,function(){return aw.positionWithinBounds(r,n,t,o())}),Ew.setValue(t,ch.some({mode:"position",anchor:n,getBounds:o}))},u=function(t,n,e,o){var r=function(t,n,r,e,i){function u(){return t.lazySink(n)}function a(t){return 2===t.length?o:{}}var o="horizontal"===e.type?{layouts:{onLtr:function(){return Fo()},onRtl:function(){return Io()}}}:{};return _k.sketch({dom:{tag:"div"},data:e.data,markers:e.menu.markers,onEscape:function(){return hw.close(n),t.onEscape.map(function(t){return t(n)}),ch.some(!0)},onExecute:function(){return ch.some(!0)},onOpenMenu:function(t,n){aw.positionWithinBounds(u().getOrDie(),r,n,i())},onOpenSubmenu:function(t,n,e,o){var r=u().getOrDie();aw.position(r,ih({anchor:"submenu",item:n},a(o)),e)},onRepositionMenu:function(t,n,e){var o=u().getOrDie();aw.positionWithinBounds(o,r,n,i()),Sh(e,function(t){var n=a(t.triggeringPath);aw.position(o,ih({anchor:"submenu",item:t.triggeringItem},n),t.triggeredMenu)})}})}(i,t,n,e,o);hw.open(t,r),Ew.setValue(t,ch.some({mode:"menu",menu:r}))},n={setContent:function(t,n){hw.setContent(t,n)},showAt:function(t,n,e){o(t,n,e,ch.none())},showWithin:o,showWithinBounds:r,showMenuAt:function(t,n,e){u(t,n,e,function(){return ch.none()})},showMenuWithinBounds:u,hide:function(t){Ew.setValue(t,ch.none()),hw.close(t)},getContent:function(t){return hw.getState(t)},reposition:t,isOpen:hw.isOpen};return{uid:i.uid,dom:i.dom,behaviours:ri(i.inlineBehaviours,[hw.config({isPartOf:function(t,n,e){return qy(n,e)||(o=t,r=e,i.getRelated(o).exists(function(t){return qy(t,r)}));var o,r},getAttachPoint:function(t){return i.lazySink(t).getOrDie()},onOpen:function(t){i.onShow(t)},onClose:function(t){i.onHide(t)}}),Ew.config({store:{mode:"memory",initialValue:ch.none()}}),kx.config({channels:ih(ih({},Kr(ih({isExtraPart:nh(!1)},i.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),Jr(ih(ih({isExtraPart:nh(!1)},i.fireRepositionEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})),{doReposition:t})))})]),eventOrder:i.eventOrder,apis:n}},apis:{showAt:function(t,n,e,o){t.showAt(n,e,o)},showWithin:function(t,n,e,o,r){t.showWithin(n,e,o,r)},showWithinBounds:function(t,n,e,o,r){t.showWithinBounds(n,e,o,r)},showMenuAt:function(t,n,e,o){t.showMenuAt(n,e,o)},showMenuWithinBounds:function(t,n,e,o,r){t.showMenuWithinBounds(n,e,o,r)},hide:function(t,n){t.hide(n)},isOpen:function(t,n){return t.isOpen(n)},getContent:function(t,n){return t.getContent(n)},setContent:function(t,n,e){t.setContent(n,e)},reposition:function(t,n){t.reposition(n)}}}),Fk=function(t,n,e){return ux(Gu(t,n),Yu(t),e.innerNorth(),mx(),"layout-n")},Ik=function(t,n,e){return ux(Gu(t,n),qu(t,n),e.innerSouth(),dx(),"layout-s")},Rk=Ei({name:"Button",factory:function(t){function e(n){return Lh(t.dom,"attributes").bind(function(t){return Lh(t,n)})}var n=zu(t.action),o=t.dom.tag;return{uid:t.uid,dom:t.dom,components:t.components,events:n,behaviours:Bw(t.buttonBehaviours,[sk.config({}),rk.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==o)return{role:e("role").getOr("button")};var t=e("type").getOr("button"),n=e("role").map(function(t){return{role:t}}).getOr({});return ih({type:t},n)}()},eventOrder:t.eventOrder}},configFields:[_t("uid",undefined),vt("dom"),_t("components",[]),Dw("buttonBehaviours",[sk,rk]),Ot("action"),Ot("role"),_t("eventOrder",{})]}),Vk={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Hk=Ei({name:"Notification",factory:function(n){function e(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}}function o(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}}var t,r,i=Zu({dom:{tag:"p",innerHtml:n.translationProvider(n.text)},behaviours:Po([uk.config({})])}),u=Zu({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(0)]},o(0)],behaviours:Po([uk.config({})])}),a={updateProgress:function(t,n){t.getSystem().isConnected()&&u.getOpt(t).each(function(t){uk.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(n)]},o(n)])})},updateText:function(t,n){if(t.getSystem().isConnected()){var e=i.get(t);uk.set(e,[ze(n)])}}},c=R([n.icon.toArray(),n.level.toArray(),n.level.bind(function(t){return ch.from(Vk[t])}).toArray()]);return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert"},classes:n.level.map(function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]}).getOr(["tox-notification","tox-notification--in"])},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(t=c,r=n.iconProvider,co(t,function(t){return ch.from(r()[t])}).getOrThunk(function(){return ta(r)}))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[i.asSpec()],behaviours:Po([uk.config({})])}].concat(n.progress?[u.asSpec()]:[]).concat(Rk.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:na("close",n.iconProvider),attributes:{"aria-label":n.translationProvider("Close")}}}],action:function(t){n.onAction(t)}})),apis:a}},configFields:[Ot("level"),vt("progress"),vt("icon"),vt("onAction"),vt("text"),vt("iconProvider"),vt("translationProvider")],apis:{updateProgress:function(t,n,e){t.updateProgress(n,e)},updateText:function(t,n,e){t.updateText(n,e)}}}),Nk=tinymce.util.Tools.resolve("tinymce.util.Delay"),Pk=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),zk=_h([{aborted:[]},{edge:["element"]},{success:["info"]}]),Lk=_h([{abort:[]},{kontinue:[]},{finish:["info"]}]),jk=function(n,e,t,o,r,i){function u(){return i.fold(zk.aborted,zk.edge)}function a(){var t=r();return t?jk(n,t,ch.none(),o,r,ch.some(e)):u()}if(s=e,(c=n).isBlock(s)||wh(["BR","IMG","HR","INPUT"],s.nodeName)||"false"===c.getContentEditable(s))return u();var c,s;if(e.nodeType!==w.Node.TEXT_NODE)return a();var f=e.textContent;return o(Lk,e,f,t).fold(zk.aborted,function(){return a()},zk.success)},Uk=function(t){return ro(t,"[data-mce-autocompleter]")},Wk=/[\u00a0 \t\r\n]/,Gk=function(e,t){function o(t,n){on(t,wb(),{raw:n})}t.on("keypress compositionend",e.onKeypress.throttle),t.on("remove",e.onKeypress.cancel),t.on("keydown",function(n){function t(){return e.getView().bind(mS.getHighlighted)}8===n.which&&e.onKeypress.throttle(n),e.isActive()&&(27===n.which&&e.cancelIfNecessary(),e.isMenuOpen()?13===n.which?(t().each(rn),n.preventDefault()):40===n.which?(t().fold(function(){e.getView().each(mS.highlightFirst)},function(t){o(t,n)}),n.preventDefault(),n.stopImmediatePropagation()):37!==n.which&&38!==n.which&&39!==n.which||t().each(function(t){o(t,n),n.preventDefault(),n.stopImmediatePropagation()}):13!==n.which&&38!==n.which&&40!==n.which||e.cancelIfNecessary())}),t.on("NodeChange",function(t){e.isActive()&&!e.isProcessingAction()&&Uk(Hv.fromDom(t.element)).isNone()&&e.cancelIfNecessary()})},Xk=tinymce.util.Tools.resolve("tinymce.util.Promise"),Yk=function(t){if(t.nodeType===w.Node.TEXT_NODE)return sa(t,t.data.length);var n=t.childNodes;return 0<n.length?Yk(n[n.length-1]):sa(t,n.length)},qk=function(t,n){var e=t.childNodes;return 0<e.length&&n<e.length?qk(e[n],0):0<e.length&&t.nodeType===w.Node.ELEMENT_NODE&&e.length===n?Yk(e[e.length-1]):sa(t,n)},Kk=function(n,t,e,o){void 0===o&&(o={});var r=t(),i=n.selection.getRng().startContainer.nodeValue,u=x(r.lookupByChar(e.triggerChar),function(t){return e.text.length>=t.minChars&&t.matches.getOrThunk(function(){return function(e){function o(t,n,e,o){var r=o.getOr(e.length);return 0===r?t.kontinue():t.finish(/\s/.test(e.charAt(r-1)))}return function(t){var n=qk(t.startContainer,t.startOffset);return ra(e,n.element,n.offset,o).fold(nh(!0),nh(!0),l)}}(n.dom)})(e.range,i,e.text)});if(0===u.length)return ch.none();var a=Xk.all(y(u,function(n){return n.fetch(e.text,n.maxResults,o).then(function(t){return{matchText:e.text,items:t,columns:n.columns,onAction:n.onAction}})}));return ch.some({lookupData:a,context:e})},Jk=xv([yt("type"),Dt("text")]),$k=xv([Pt("type",function(){return"autocompleteitem"}),Pt("active",function(){return!1}),Pt("disabled",function(){return!1}),_t("meta",{}),yt("value"),Dt("text"),Dt("icon")]),Qk=xv([yt("type"),yt("ch"),Ft("minChars",1),_t("columns",1),Ft("maxResults",10),Bt("matches"),wt("fetch"),wt("onAction")]),Zk=[Vt("disabled",!1),Dt("text"),Dt("shortcut"),Cv("value","value",Nh(function(){return Qn("menuitem-value")}),Dv()),_t("meta",{})],tC=xv([yt("type"),Ht("onSetup",function(){return Q}),Ht("onAction",Q),Dt("icon")].concat(Zk)),nC=xv([yt("type"),wt("getSubmenuItems"),Ht("onSetup",function(){return Q}),Dt("icon")].concat(Zk)),eC=xv([yt("type"),Vt("active",!1),Ht("onSetup",function(){return Q}),wt("onAction")].concat(Zk)),oC=xv([yt("type"),Vt("active",!1),Dt("icon")].concat(Zk)),rC=xv([yt("type"),xt("fancytype",["inserttable","colorswatch"]),Ht("onAction",Q)]),iC=function(t){return ma(Qn("unnamed-events"),t)},uC=[vt("lazySink"),vt("tooltipDom"),_t("exclusive",!0),_t("tooltipComponents",[]),_t("delay",300),Rt("mode","normal",["normal","follow-highlight"]),_t("anchor",function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:nh([vx,hx,Eo,Bo,Do,Ao]),onRtl:nh([vx,hx,Eo,Bo,Do,Ao])}}}),po("onHide"),po("onShow")],aC=Object.freeze({init:function(){function e(){o.get().each(function(t){w.clearTimeout(t)})}var o=Rv(ch.none()),n=Rv(ch.none()),t=nh("not-implemented");return _y({getTooltip:function(){return n.get()},isShowing:function(){return n.get().isSome()},setTooltip:function(t){n.set(ch.some(t))},clearTooltip:function(){n.set(ch.none())},clearTimer:e,resetTimer:function(t,n){e(),o.set(ch.some(w.setTimeout(function(){t()},n)))},readState:t})}}),cC=Qn("tooltip.exclusive"),sC=Qn("tooltip.show"),fC=Qn("tooltip.hide"),lC=Object.freeze({hideAllExclusive:ga,setComponents:function(t,n,e,o){e.getTooltip().each(function(t){t.getSystem().isConnected()&&uk.set(t,o)})}}),dC=zo({fields:uC,name:"tooltipping",active:Object.freeze({events:function(o,r){function e(n){r.getTooltip().each(function(t){Lr(t),o.onHide(n,t),r.clearTooltip()}),r.clearTimer()}return pn(R([[bn(sC,function(t){r.resetTimer(function(){!function(t){if(!r.isShowing()){ga(t);var n=o.lazySink(t).getOrDie(),e=t.getSystem().build({dom:o.tooltipDom,components:o.tooltipComponents,events:pn("normal"===o.mode?[bn(bb(),function(){en(t,sC)}),bn(hb(),function(){en(t,fC)})]:[]),behaviours:Po([uk.config({})])});r.setTooltip(e),Pr(n,e),o.onShow(t,e),aw.position(n,o.anchor(t),e)}}(t)},o.delay)}),bn(fC,function(t){r.resetTimer(function(){e(t)},o.delay)}),bn(Mb(),function(t,n){wh(n.channels(),cC)&&e(t)}),dy(function(t){e(t)})],"normal"===o.mode?[bn(yb(),function(t){en(t,sC)}),bn(Ab(),function(t){en(t,fC)}),bn(bb(),function(t){en(t,sC)}),bn(hb(),function(t){en(t,fC)})]:[bn(Qb(),function(t){en(t,sC)}),bn(Zb(),function(t){en(t,fC)})]]))}}),state:aC,apis:lC}),mC=tinymce.util.Tools.resolve("tinymce.util.I18n"),gC="tox-menu-nav__js",pC="tox-collection__item",hC="tox-swatch",vC={normal:gC,color:hC},bC="tox-collection__item--enabled",yC="tox-collection__item-icon",xC="tox-collection__item-label",wC="tox-collection__item-caret",SC="tox-collection__item--active",kC=tinymce.util.Tools.resolve("tinymce.Env"),CC=function(t){var e=kC.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},n=y(t.split("+"),function(t){var n=t.toLowerCase().trim();return Ah(e,n)?e[n]:t});return kC.mac?n.join(""):n.join("+")},OC=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],TC=["list-bull-circle","list-bull-default","list-bull-square"],EC=["input","button","textarea","select"],DC=function(n,t){t.disableClass.each(function(t){he(n.element(),t)}),(Oa(n,t)?Ta:Da)(n),t.onDisabled(n)},BC=Object.freeze({enable:Aa,disable:DC,isDisabled:_a,onLoad:Ca,set:function(t,n,e,o){(o?DC:Aa)(t,n,e)}}),AC=Object.freeze({exhibit:function(t,n){return ie({classes:n.disabled?n.disableClass.map(r).getOr([]):[]})},events:function(n,t){return pn([hn(Fb(),function(t){return _a(t,n)}),Ro(n,t,Ca)])}}),_C=zo({fields:[_t("disabled",!1),_t("useNative",!0),Ot("disableClass"),po("onDisabled"),po("onEnabled")],name:"disabling",active:AC,apis:BC}),MC=function(t){return _C.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},FC=function(t){return _C.config({disabled:t})},IC=function(t){return _C.config({disabled:t,disableClass:"tox-tbtn--disabled"})},RC=function(t){return _C.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})};(vS=hS=hS||{})[vS.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",vS[vS.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var VC,HC,NC=hS,PC={"alloy.execute":["disabling","alloy.base.behaviour","toggling","item-events"]},zC=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),LC=nh(li("item-widget",wk())),jC=Qn("cell-over"),UC=Qn("cell-execute"),WC=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,GC=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,XC=Math.min,YC=Math.max,qC=Math.round,KC=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,JC=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,$C=nh(Ga(255,0,0,1)),QC=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),ZC="tinymce-custom-colors",tO="choiceitem",nO=[{type:tO,text:"Light Green",value:"#BFEDD2"},{type:tO,text:"Light Yellow",value:"#FBEEB8"},{type:tO,text:"Light Red",value:"#F8CAC6"},{type:tO,text:"Light Purple",value:"#ECCAFA"},{type:tO,text:"Light Blue",value:"#C2E0F4"},{type:tO,text:"Green",value:"#2DC26B"},{type:tO,text:"Yellow",value:"#F1C40F"},{type:tO,text:"Red",value:"#E03E2D"},{type:tO,text:"Purple",value:"#B96AD9"},{type:tO,text:"Blue",value:"#3598DB"},{type:tO,text:"Dark Turquoise",value:"#169179"},{type:tO,text:"Orange",value:"#E67E23"},{type:tO,text:"Dark Red",value:"#BA372A"},{type:tO,text:"Dark Purple",value:"#843FA1"},{type:tO,text:"Dark Blue",value:"#236FA1"},{type:tO,text:"Light Gray",value:"#ECF0F1"},{type:tO,text:"Medium Gray",value:"#CED4D9"},{type:tO,text:"Gray",value:"#95A5A6"},{type:tO,text:"Dark Gray",value:"#7E8C8D"},{type:tO,text:"Navy Blue",value:"#34495E"},{type:tO,text:"Black",value:"#000000"},{type:tO,text:"White",value:"#ffffff"}],eO=function UF(e){void 0===e&&(e=10);var t,n=QC.getItem(ZC),o=dh(n)?JSON.parse(n):[],r=e-(t=o).length<0?t.slice(0,e):t,i=function(t){r.splice(t,1)};return{add:function(t){var n;(n=u(r,t),-1===n?ch.none():ch.some(n)).each(i),r.unshift(t),r.length>e&&r.pop(),QC.setItem(ZC,JSON.stringify(r))},state:function(){return r.slice(0)}}}(10),oO=function(t,n){return t.getParam("color_cols",n,"number")},rO=function(t){return!1!==t.getParam("custom_colors")},iO=function(t){var n=Qa(t);return n!==undefined?$a(n):nO},uO=function(){return y(eO.state(),function(t){return{type:tO,text:t,value:t}})},aO=function(t){eO.add(t)},cO=function(t){return t.fire("SkinLoaded")},sO=function(t){return t.fire("ResizeEditor")},fO=function(t,n){return t.fire("ScrollContent",n)},lO=function(t,n){return t.fire("ResizeContent",n)},dO=function(t,n){return t.fire("TextColorChange",n)},mO=function(i){return function(t,n){var e,o={colorpicker:n},r=(e=t,function(t){var n=t.getData();e(ch.from(n.colorpicker)),t.close()});i.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onAction:function(t,n){"hex-valid"===n.name&&(n.value?t.enable("ok"):t.disable("ok"))},onSubmit:r,onClose:function(){},onCancel:function(){t(ch.none())}})}},gO={register:function(t){var i;(i=t).addCommand(
"mceApplyTextcolor",function(t,n){var e,o,r;o=t,r=n,(e=i).undoManager.transact(function(){e.focus(),e.formatter.apply(o,{value:r}),e.nodeChanged()})}),i.addCommand("mceRemoveTextcolor",function(t){var n,e;e=t,(n=i).undoManager.transact(function(){n.focus(),n.formatter.remove(e,{value:null},null,!0),n.nodeChanged()})});var n=Rv(null),e=Rv(null);uc(t,"forecolor","forecolor","Text color",n),uc(t,"backcolor","hilitecolor","Background color",e),ac(t,"forecolor","forecolor","Text color"),ac(t,"backcolor","hilitecolor","Background color")},getColors:oc,getFetch:rc,colorPickerDialog:mO,getCurrentColor:Za,getColorCols:nc,calcCols:tc},pO=[Tk.parts().items({})],hO=function(t,f,l,d,m,g,p){return ao(y(t,function(s){return"choiceitem"===s.type?ft("choicemenuitem",oC,s).fold(pc,function(t){return ch.some((n=t,e=1===l,o=d,r=f,i=g(s.value),u=m,a=p,c=ka({presets:o,textContent:e?n.text:ch.none(),htmlContent:ch.none(),ariaLabel:n.text,iconContent:n.icon,shortcutContent:e?n.shortcut:ch.none(),checkMark:e?ch.some(wa(a.icons)):ch.none(),caret:ch.none(),value:n.value},a,!0),Fh(Va({data:Ha(n),disabled:n.disabled,getApi:function(n){return{setActive:function(t){gk.set(n,t)},isActive:function(){return gk.isOn(n)},isDisabled:function(){return _C.isDisabled(n)},setDisabled:function(t){return _C.set(n,t)}}},onAction:function(){return r(n.value)},onSetup:function(t){return t.setActive(i),function(){}},triggersSubmenu:!1,itemBehaviours:[]},c,u),{toggling:{toggleClass:bC,toggleOnExecute:!1,selected:n.active}})));var n,e,o,r,i,u,a,c}):ch.none()}))},vO={inserttable:function WF(o){var t=Qn("size-label"),i=function(t,n,e){for(var o=[],r=0;r<n;r++){for(var i=[],u=0;u<e;u++)i.push(Pa(r,u,t));o.push(i)}return o}(t,10,10),u=Zu({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[ze("0x0")],behaviours:Po([uk.config({})])});return{type:"widget",data:{value:Qn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[LC().widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:O(i,function(t){return y(t,Ny)}).concat(u.asSpec()),behaviours:Po([_u("insert-table-picker",[Sn(jC,function(t,n,e){var o=e.event().row(),r=e.event().col();!function(t,n,e,o,r){for(var i=0;i<o;i++)for(var u=0;u<r;u++)gk.set(t[i][u],i<=n&&u<=e)}(i,o,r,10,10),uk.set(u.get(t),[ze(r+1+"x"+(o+1))])}),Sn(UC,function(t,n,e){o.onAction({numRows:e.event().row()+1,numColumns:e.event().col()+1}),en(t,Hb())})]),rk.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function GF(n,t){var e=gO.getColors(t.colorinput.getColors(),t.colorinput.hasCustomColors()),o=t.colorinput.getColorCols(),r=bc(Qn("menu-value"),e,function(t){n.onAction({value:t})},o,"color",NC.CLOSE_ON_EXECUTE,function(){return!1},t.shared.providers),i=Fh(ih(ih({},r),{markers:dc("color"),movement:yc(o,"color")}));return{type:"widget",data:{value:Qn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[LC().widget(Tk.sketch(i))]}}},bO=function(t,n,e,o,r,i,u,a){void 0===a&&(a=!0);var c,s,f=ka({presets:o,textContent:ch.none(),htmlContent:e?t.text.map(function(t){return Na(t,n)}):ch.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:ch.none(),checkMark:ch.none(),caret:ch.none(),value:t.value},u.providers,a,t.icon);return Va({data:Ha(t),disabled:t.disabled,getApi:function(){return{}},onAction:function(){return r(t.value,t.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:(c=t.meta,s=u,M(c,"tooltipWorker").map(function(t){return[dC.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:nw}}},mode:"follow-highlight",onShow:function(n){t(function(t){dC.setComponents(n,[Ry({element:Hv.fromDom(t)})])})}})]}).getOr([]))},f,i)},yO=function(t){var n=t.text.fold(function(){return{}},function(t){return{innerHtml:t}});return{type:"separator",dom:ih({tag:"div",classes:[pC,"tox-collection__group-heading"]},n),components:[]}},xO=function(t,n,e,o){void 0===o&&(o=!0);var r=ka({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:ch.none(),ariaLabel:t.text,caret:ch.none(),checkMark:ch.none(),shortcutContent:t.shortcut},e,o);return Va({data:Ha(t),getApi:function(n){return{isDisabled:function(){return _C.isDisabled(n)},setDisabled:function(t){return _C.set(n,t)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,n)},wO=function(t,n,e,o,r){void 0===o&&(o=!0),void 0===r&&(r=!1);var i,u,a=r?(u=e.icons,{dom:{tag:"div",classes:[wC],innerHtml:na("chevron-down",u)}}):(i=e.icons,{dom:{tag:"div",classes:[wC],innerHtml:na("chevron-right",i)}}),c=ka({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:ch.none(),ariaLabel:t.text,caret:ch.some(a),checkMark:ch.none(),shortcutContent:t.shortcut},e,o);return Va({data:Ha(t),getApi:function(n){return{isDisabled:function(){return _C.isDisabled(n)},setDisabled:function(t){return _C.set(n,t)}}},disabled:t.disabled,onAction:Q,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},c,n)},SO=function(t,n,e){var o=ka({iconContent:ch.none(),textContent:t.text,htmlContent:ch.none(),ariaLabel:t.text,checkMark:ch.some(wa(e.icons)),caret:ch.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},e,!0);return Fh(Va({data:Ha(t),disabled:t.disabled,getApi:function(n){return{setActive:function(t){gk.set(n,t)},isActive:function(){return gk.isOn(n)},isDisabled:function(){return _C.isDisabled(n)},setDisabled:function(t){return _C.set(n,t)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,n),{toggling:{toggleClass:bC,toggleOnExecute:!1,selected:t.active}})},kO=function(n,e){return(t=vO,o=n.fancytype,Object.prototype.hasOwnProperty.call(t,o)?ch.some(t[o]):ch.none()).map(function(t){return t(n,e)});var t,o};(HC=VC=VC||{})[HC.ContentFocus=0]="ContentFocus",HC[HC.UiFocus=1]="UiFocus";var CO,OO,TO=function(d,c){function e(){return o.get().isSome()}function s(){e()&&Mk.hide(m)}function f(t,n,e,o){t.matchLength=n.text.length;var r,i,u,a,c,s,f,l=co(e,function(t){return ch.from(t.columns)}).getOr(1);Mk.showAt(m,{anchor:"node",root:Hv.fromDom(d.getBody()),node:ch.from(t.element)},Tk.sketch((r=vc("autocompleter-value",!0,o,l,"normal"),i=l,u=VC.ContentFocus,a="normal",c=u===VC.ContentFocus?Wi():Ui(),s=yc(i,a),f=dc(a),{dom:r.dom,components:r.components,items:r.items,value:r.value,markers:{selectedItem:f.selectedItem,item:f.item},movement:s,fakeFocus:u===VC.ContentFocus,focusManager:c,menuBehaviours:iC("auto"!==i?[]:[ly(function(o){da(o,4,f.item).each(function(t){var n=t.numColumns,e=t.numRows;rk.setGridSize(o,e,n)})})])}))),Mk.getContent(m).each(mS.highlightFirst)}var o=Rv(ch.none()),l=Rv(!1),m=Hy(Mk.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Po([_u("dismissAutocompleter",[bn(Xb(),function(){return g()})])]),lazySink:c.getSink})),g=function(){if(e()){var t=o.get().map(function(t){return t.element});Uk(t.getOr(Hv.fromDom(d.selection.getNode()))).each(Ln),s(),o.set(ch.none()),l.set(!1)}},r=F(function(){return la(d)}),p=function(t){var n;(n=t,o.get().map(function(t){return ca(d.dom,d.selection.getRng(),t.triggerChar).bind(function(t){return Kk(d,r,t,n)})}).getOrThunk(function(){return fa(d,r)})).fold(g,function(a){!function(t){if(!e()){var n=ia(d,t.range);o.set(ch.some({triggerChar:t.triggerChar,element:n,matchLength:t.text.length})),l.set(!1)}}(a.context),a.lookupData.then(function(u){o.get().map(function(t){var n,e,o,r=a.context;if(t.triggerChar===r.triggerChar){var i=(n=r.triggerChar,o=co(e=u,function(t){return ch.from(t.columns)}).getOr(1),O(e,function(i){return kc(i.items,i.matchText,function(o,r){var t=d.selection.getRng();ca(d.dom,t,n).fold(function(){return w.console.error("Lost context. Cursor probably moved")},function(t){var n=t.range,e={hide:function(){g()},reload:function(t){s(),p(t)}};l.set(!0),i.onAction(e,n,o,r),l.set(!1)})},o,NC.BUBBLE_TO_SANDBOX,c)}));0<i.length?f(t,r,u,i):10<=r.text.length-t.matchLength?g():s()}})})})},t={onKeypress:oa(function(t){27!==t.which&&p()},50),cancelIfNecessary:g,isMenuOpen:function(){return Mk.isOpen(m)},isActive:e,isProcessingAction:l.get,getView:function(){return Mk.getContent(m)}};Gk(t,d)},EO=function(t,n,e,o){t.dom().removeEventListener(n,e,o)},DO=nh(!0),BO=Tc,AO=Yt().browser.isFirefox(),_O=ot([wt("triggerEvent"),_t("stopBackspace",!0)]),MO=_h([{stopped:[]},{resume:["element"]},{complete:[]}]),FO=function(n,e,o,t,r,i){return Vc(n,e,o,t,r,i).fold(function(){return!0},function(t){return FO(n,e,o,t,r,i)},function(){return!1})},IO=function(t,n,e,o,r){var i=Rc(e,o);return FO(t,n,e,o,i,r)},RO=On("element","descHandler"),VO=function(t,n){return{id:nh(t),descHandler:nh(n)}},HO=Ei({name:"Container",factory:function(t){var n=t.dom,e=n.attributes,o=h(n,["attributes"]);return{uid:t.uid,dom:ih({tag:"div",attributes:ih({role:"presentation"},e)},o),components:t.components,behaviours:oi(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[_t("components",[]),ei("containerBehaviours",[]),_t("events",{}),_t("domModification",{}),_t("eventOrder",{})]}),NO=tinymce.util.Tools.resolve("tinymce.EditorManager"),PO=function(t){return Kc(t).fold(function(){return 0<t.getParam("toolbar",[],"string[]").length},function(){return!0})};(OO=CO=CO||{})["default"]="",OO.floating="floating",OO.sliding="sliding",OO.scrolling="scrolling";var zO,LO,jO,UO,WO=function(u){var a=Rv(ch.none()),c=Rv(!1),o=oa(function(t){u.fire("longpress",ih(ih({},t),{type:"longpress"})),c.set(!0)},400);u.on("touchstart",function(e){ns(e).each(function(t){o.cancel();var n={x:nh(t.clientX),y:nh(t.clientY),target:nh(e.target)};o.throttle(e),c.set(!1),a.set(ch.some(n))})},!0),u.on("touchmove",function(t){o.cancel(),ns(t).each(function(i){a.get().each(function(t){var n,e,o,r;n=i,e=t,o=Math.abs(n.clientX-e.x()),r=Math.abs(n.clientY-e.y()),!(5<o||5<r)||(a.set(ch.none()),c.set(!1),u.fire("longpresscancel"))})})},!0),u.on("touchend touchcancel",function(n){o.cancel(),"touchcancel"!==n.type&&a.get().filter(function(t){return t.target().isEqualNode(n.target)}).each(function(){c.get()?n.preventDefault():u.fire("tap").isDefaultPrevented()&&n.preventDefault()})},!0)},GO=Qn("form-component-change"),XO=Qn("form-close"),YO=Qn("form-cancel"),qO=Qn("form-action"),KO=Qn("form-submit"),JO=Qn("form-block"),$O=Qn("form-unblock"),QO=Qn("form-tabchange"),ZO=Qn("form-resize"),tT=nh([_t("prefix","form-field"),ei("fieldBehaviours",[uS,Ew])]),nT=nh([Jw({schema:[vt("dom")],name:"label"}),Jw({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[vt("text")],name:"aria-descriptor"}),qw({factory:{sketch:function(t){var n=z(t,["factory"]);return t.factory.sketch(n)}},schema:[vt("factory")],name:"field"})]),eT=Di({name:"FormField",configFields:tT(),partFields:nT(),factory:function(r,t){var n=ri(r.fieldBehaviours,[uS.config({find:function(t){return vi(t,r,"field")}}),Ew.config({store:{mode:"manual",getValue:function(t){return uS.getCurrent(t).bind(Ew.getValue)},setValue:function(t,n){uS.getCurrent(t).each(function(t){Ew.setValue(t,n)})}}})]),e=pn([ly(function(t){var o=yi(t,r,["label","field","aria-descriptor"]);o.field().each(function(e){var n=Qn(r.prefix);o.label().each(function(t){Gn(t.element(),"for",n),Gn(e.element(),"id",n)}),o["aria-descriptor"]().each(function(t){var n=Qn(r.prefix);Gn(t.element(),"id",n),Gn(e.element(),"aria-describedby",n)})})})]),o={getField:function(t){return vi(t,r,"field")},getLabel:function(t){return vi(t,r,"label")}};return{uid:r.uid,dom:r.dom,components:t,behaviours:n,events:e,apis:o}},apis:{getField:function(t,n){return t.getField(n)},getLabel:function(t,n){return t.getLabel(n)}}}),oT=nh([Ot("data"),_t("inputAttributes",{}),_t("inputStyles",{}),_t("tag","input"),_t("inputClasses",[]),po("onSetValue"),_t("styles",{}),_t("eventOrder",{}),ei("inputBehaviours",[Ew,sk]),_t("selectOnFocus",!0)]),rT=Ei({name:"Input",configFields:oT(),factory:function(t){return{uid:t.uid,dom:os(t),components:[],behaviours:(n=t,ih(ih({},es(n)),ri(n.inputBehaviours,[Ew.config({store:{mode:"manual",initialValue:n.data.getOr(undefined),getValue:function(t){return Me(t.element())},setValue:function(t,n){Me(t.element())!==n&&Fe(t.element(),n)}},onSetValue:n.onSetValue})]))),eventOrder:t.eventOrder};var n}}),iT={},uT={exports:iT};zO=undefined,LO=iT,jO=uT,UO=undefined,function(t){"object"==typeof LO&&void 0!==jO?jO.exports=t():"function"==typeof zO&&zO.amd?zO([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=t()}(function(){return function f(i,u,a){function c(n,t){if(!u[n]){if(!i[n]){var e="function"==typeof UO&&UO;if(!t&&e)return e(n,!0);if(s)return s(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var r=u[n]={exports:{}};i[n][0].call(r.exports,function(t){return c(i[n][1][t]||t)},r,r.exports,f,i,u,a)}return u[n].exports}for(var s="function"==typeof UO&&UO,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,n){function e(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(t){if(s===setTimeout)return setTimeout(t,0);if((s===e||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function i(){g&&d&&(g=!1,d.length?m=d.concat(m):p=-1,m.length&&u())}function u(){if(!g){var t=r(i);g=!0;for(var n=m.length;n;){for(d=m,m=[];++p<n;)d&&d[p].run();p=-1,n=m.length}d=null,g=!1,function e(t){if(f===clearTimeout)return clearTimeout(t);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(n){try{return f.call(null,t)}catch(n){return f.call(this,t)}}}(t)}}function a(t,n){this.fun=t,this.array=n}function c(){}var s,f,l=n.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:e}catch(t){s=e}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(t){f=o}}();var d,m=[],g=!1,p=-1;l.nextTick=function(t){var n=new Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];m.push(new a(t,n)),1!==m.length||g||r(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.prependListener=c,l.prependOnceListener=c,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],2:[function(t,e){(function(n){function c(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],f(t,this)}function o(e,o){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var t=1===e._state?o.onFulfilled:o.onRejected;if(null!==t){var n;try{n=t(e._value)}catch(l){return void u(o.promise,l)}r(o.promise,n)}else(1===e._state?r:u)(o.promise,e._value)})):e._deferreds.push(o)}function r(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof i)return t._state=3,t._value=n,void a(t);if("function"==typeof e)return void f(function c(n,e){return function(){n.apply(e,arguments)}}(e,n),t)}t._state=1,t._value=n,a(t)}catch(o){u(t,o)}}function u(t,n){t._state=2,t._value=n,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var n=0,e=t._deferreds.length;n<e;n++)o(t,t._deferreds[n]);t._deferreds=null}function s(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function f(t,n){var e=!1;try{t(function(t){e||(e=!0,r(n,t))},function(t){e||(e=!0,u(n,t))})}catch(c){if(e)return;e=!0,u(n,c)}}var t,l;t=this,l=setTimeout,i.prototype["catch"]=function(t){return this.then(null,t)},i.prototype.then=function(t,n){var e=new this.constructor(c);return o(this,new s(t,n,e)),e},i.all=function(t){var a=Array.prototype.slice.call(t);return new i(function(o,r){function i(n,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void e.call(t,function(t){i(n,t)},r)}a[n]=t,0==--u&&o(a)}catch(c){r(c)}}if(0===a.length)return o([]);for(var u=a.length,t=0;t<a.length;t++)i(t,a[t])})},i.resolve=function(n){return n&&"object"==typeof n&&n.constructor===i?n:new i(function(t){t(n)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(r){return new i(function(t,n){for(var e=0,o=r.length;e<o;e++)r[e].then(t,n)})},i._immediateFn="function"==typeof n?function(t){n(t)}:function(t){l(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==e&&e.exports?e.exports=i:t.Promise||(t.Promise=i)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(c,t,s){(function(t,n){function e(t,n){this._id=t,this._clearFn=n}var o=c("process/browser.js").nextTick,r=Function.prototype.apply,i=Array.prototype.slice,u={},a=0;s.setTimeout=function(){return new e(r.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new e(r.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(t){t.close()},e.prototype.unref=e.prototype.ref=function(){},e.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},s.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},s._unrefActive=s.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;0<=n&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},s.setImmediate="function"==typeof t?t:function(t){var n=a++,e=!(arguments.length<2)&&i.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(e?t.apply(null,e):t.call(null),s.clearImmediate(n))}),n},s.clearImmediate="function"==typeof n?n:function(t){delete u[t]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,n){var e=t("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();n.exports={boltExport:o.Promise||e}},{"promise-polyfill":2}]},{},[4])(4)});var aT,cT,sT=uT.exports.boltExport,fT=function(t){var e=ch.none(),n=[],o=function(t){r()?u(t):n.push(t)},r=function(){return e.isSome()},i=function(t){Sh(t,u)},u=function(n){e.each(function(t){w.setTimeout(function(){n(t)},0)})};return t(function(t){e=ch.some(t),i(n),n=[]}),{get:o,map:function(e){return fT(function(n){o(function(t){n(e(t))})})},isReady:r}},lT={nu:fT,pure:function(n){return fT(function(t){t(n)})}},dT=function(e){function t(t){e().then(t,rs)}return{map:function(t){return dT(function(){return e().then(t)})},bind:function(n){return dT(function(){return e().then(function(t){return n(t).toPromise()})})},anonBind:function(t){return dT(function(){return e().then(function(){return t.toPromise()})})},toLazy:function(){return lT.nu(t)},toCached:function(){var t=null;return dT(function(){return null===t&&(t=e()),t})},toPromise:e,get:t}},mT=function(t){return dT(function(){return new sT(t)})},gT=function(t){return dT(function(){return sT.resolve(t)})},pT=["input","textarea"],hT=Object.freeze({markValid:us,markInvalid:as,query:cs,run:ss,isInvalid:function(t,n){return ye(n.getRoot(t).getOr(t.element()),n.invalidClass)}}),vT=Object.freeze({events:function(n){return n.validator.map(function(t){return pn([bn(t.onEvent,function(t){ss(t,n).get(l)})].concat(t.validateOnLoad?[ly(function(t){ss(t,n).get(Q)})]:[]))}).getOr({})}}),bT=zo({fields:[vt("invalidClass"),_t("getRoot",ch.none),At("notify",[_t("aria","alert"),_t("getContainer",ch.none),_t("validHtml",""),po("onValid"),po("onInvalid"),po("onValidate")]),At("validator",[vt("validate"),_t("onEvent","input"),_t("validateOnLoad",!0)])],name:"invalidating",active:vT,apis:hT,extra:{validation:function(e){return function(t){var n=Ew.getValue(t);return gT(e(n))}}}}),yT=Object.freeze({exhibit:function(t,n){return ie({attributes:U([{key:n.tabAttr,value:"true"}])})}}),xT=zo({fields:[_t("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:yT}),wT=function(t,n,e,o){return{dom:ST(e),components:t.toArray().concat([n]),fieldBehaviours:Po(o)}},ST=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},kT=Object.freeze({getCoupled:function(t,n,e,o){return e.getOrCreate(t,n,o)}}),CT=zo({fields:[bt("others",st(lh.value,Dv()))],name:"coupling",apis:kT,state:Object.freeze({init:function(){var i={},t=nh({});return _y({readState:t,getOrCreate:function(e,o,r){var t=Oh(o.others);if(t)return Lh(i,r).getOrThunk(function(){var t=Lh(o.others,r).getOrDie("No information found for coupled component: "+r)(e),n=e.getSystem().build(t);return i[r]=n});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(t,null,2))}})}})}),OT=nh("sink"),TT=nh(Jw({name:OT(),overrides:nh({dom:{tag:"div"},behaviours:Po([aw.config({useFixed:oh})]),events:pn([kn(wb()),kn(gb()),kn(Ob())])})}));(cT=aT=aT||{})[cT.HighlightFirst=0]="HighlightFirst",cT[cT.HighlightNone=1]="HighlightNone";var ET,DT,BT,AT,_T,MT,FT=function(n,t){return n.getSystem().getByUid(t.uid+"-"+OT()).map(function(t){return function(){return lh.value(t)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return lh.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(n)}})})},IT=nh([vt("dom"),vt("fetch"),po("onOpen"),ho("onExecute"),_t("getHotspot",ch.some),_t("getAnchorOverrides",nh({})),_t("layouts",ch.none()),ei("dropdownBehaviours",[gk,CT,rk,sk]),vt("toggleClass"),_t("eventOrder",{}),Ot("lazySink"),_t("matchWidth",!1),_t("useMinWidth",!1),Ot("role")].concat(xs())),RT=nh([Kw({schema:[lo()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),TT()]),VT=Di({name:"Dropdown",configFields:IT(),partFields:RT(),factory:function(n,t,e,o){function r(t){hw.getState(t).each(function(t){_k.highlightPrimary(t)})}function i(t){return rn(t),ch.some(!0)}var u,a,c={expand:function(t){gk.isOn(t)||ps(n,function(t){return t},t,o,Q,aT.HighlightNone).get(Q)},open:function(t){gk.isOn(t)||ps(n,function(t){return t},t,o,Q,aT.HighlightFirst).get(Q)},isOpen:gk.isOn,close:function(t){gk.isOn(t)&&ps(n,function(t){return t},t,o,Q,aT.HighlightFirst).get(Q)},repositionMenus:function(t){gk.isOn(t)&&ys(t)}};return{uid:n.uid,dom:n.dom,components:t,behaviours:ri(n.dropdownBehaviours,[gk.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),CT.config({others:{sandbox:function(t){return bs(n,t,{onOpen:function(){gk.on(t)},onClose:function(){gk.off(t)}})}}}),rk.config({mode:"special",onSpace:i,onEnter:i,onDown:function(t){VT.isOpen(t)?r(CT.getCoupled(t,"sandbox")):VT.open(t);return ch.some(!0)},onEscape:function(t){return VT.isOpen(t)?(VT.close(t),ch.some(!0)):ch.none()}}),sk.config({})]),events:zu(ch.some(function(t){ps(n,function(t){return t},t,o,r,aT.HighlightFirst).get(Q)})),eventOrder:ih(ih({},n.eventOrder),(u={},u[Fb()]=["disabling","toggling","alloy.base.behaviour"],u)),apis:c,domModification:{attributes:ih(ih({"aria-haspopup":"true"},n.role.fold(function(){return{}},function(t){return{role:t}})),"button"===n.dom.tag?{type:(a="type",Lh(n.dom,"attributes").bind(function(t){return Lh(t,a)})).getOr("button")}:{})}}},apis:{open:function(t,n){return t.open(n)},expand:function(t,n){return t.expand(n)},close:function(t,n){return t.close(n)},isOpen:function(t,n){return t.isOpen(n)},repositionMenus:function(t,n){return t.repositionMenus(n)}}}),HT=zo({fields:[],name:"unselecting",active:Object.freeze({events:function(){return pn([hn(Eb(),nh(!0))])},exhibit:function(){return ie({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),NT=Qn("color-input-change"),PT=Qn("color-swatch-change"),zT=Qn("color-picker-cancel"),LT=nh(Qn("rgb-hex-update")),jT=nh(Qn("slider-update")),UT=nh(Qn("palette-update")),WT=Yt().deviceType.isTouch(),GT=Jw({schema:[vt("dom")],name:"label"}),XT=ks("top-left"),YT=ks("top"),qT=ks("top-right"),KT=ks("right"),JT=ks("bottom-right"),$T=ks("bottom"),QT=ks("bottom-left"),ZT=[GT,ks("left"),KT,YT,$T,XT,qT,QT,JT,qw({name:"thumb",defaults:nh({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:pn([wn(fb(),t,"spectrum"),wn(lb(),t,"spectrum"),wn(db(),t,"spectrum"),wn(gb(),t,"spectrum"),wn(pb(),t,"spectrum"),wn(vb(),t,"spectrum")])}}}),qw({schema:[Pt("mouseIsDown",function(){return Rv(!1)})],name:"spectrum",overrides:function(e){function o(n,t){return r.getValueFromEvent(t).map(function(t){return r.setValueFrom(n,e,t)})}var r=e.model.manager,t=pn([bn(fb(),o),bn(lb(),o)]),n=pn([bn(gb(),o),bn(pb(),function(t,n){e.mouseIsDown.get()&&o(t,n)})]);return{behaviours:Po(WT?[]:[rk.config({mode:"special",onLeft:function(t){return r.onLeft(t,e)},onRight:function(t){return r.onRight(t,e)},onUp:function(t){return r.onUp(t,e)},onDown:function(t){return r.onDown(t,e)}}),sk.config({})]),events:WT?t:n}}})],tE=Yt().deviceType.isTouch(),nE=nh("slider.change.value"),eE="left",oE=bf(-1),rE=bf(1),iE=ch.none,uE=ch.none,aE={"top-left":ch.none(),top:ch.none(),"top-right":ch.none(),right:ch.some(function(t,n){$s(t,qs(_s(n)))}),"bottom-right":ch.none(),bottom:ch.none(),"bottom-left":ch.none(),left:ch.some(function(t,n){$s(t,qs(Es(n)))})},cE=Object.freeze({setValueFrom:function(t,n,e){var o=vf(t,n,e);return pf(t,hf(o)),o},setToMin:function(t,n){pf(t,hf(Os(n)))},setToMax:function(t,n){pf(t,hf(Bs(n)))},findValueOfOffset:vf,getValueFromEvent:function(t){return Cs(t).map(function(t){return t.left()})},findPositionOfValue:yf,setPositionFromValue:function(t,n,e,o){var r=Ys(e),i=yf(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),e),u=Xe(n.element())/2;Oe(n.element(),"left",i-u+"px")},onLeft:oE,onRight:rE,onUp:iE,onDown:uE,edgeActions:aE}),sE=ch.none,fE=ch.none,lE=kf(-1),dE=kf(1),mE={"top-left":ch.none(),top:ch.some(function(t,n){$s(t,Ks(Ds(n)))}),"top-right":ch.none(),right:ch.none(),"bottom-right":ch.none(),bottom:ch.some(function(t,n){$s(t,Ks(Ms(n)))}),"bottom-left":ch.none(),left:ch.none()},gE=Object.freeze({setValueFrom:function(t,n,e){var o=Sf(t,n,e);return xf(t,wf(o)),o},setToMin:function(t,n){xf(t,wf(Ts(n)))},setToMax:function(t,n){xf(t,wf(As(n)))},findValueOfOffset:Sf,getValueFromEvent:function(t){return Cs(t).map(function(t){return t.top()})},findPositionOfValue:Cf,setPositionFromValue:function(t,n,e,o){var r=Ys(e),i=Cf(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),e),u=je(n.element())/2;Oe(n.element(),"top",i-u+"px")},onLeft:sE,onRight:fE,onUp:lE,onDown:dE,edgeActions:mE}),pE=Ef(-1,!1),hE=Ef(1,!1),vE=Ef(-1,!0),bE=Ef(1,!0),yE={"top-left":ch.some(function(t,n){$s(t,Js(Es(n),Ds(n)))}),top:ch.some(function(t,n){$s(t,Js(Vs(n),Ds(n)))}),"top-right":ch.some(function(t,n){$s(t,Js(_s(n),Ds(n)))}),right:ch.some(function(t,n){$s(t,Js(_s(n),Hs(n)))}),"bottom-right":ch.some(function(t,n){$s(t,Js(_s(n),Ms(n)))}),bottom:ch.some(function(t,n){$s(t,Js(Vs(n),Ms(n)))}),"bottom-left":ch.some(function(t,n){$s(t,Js(Es(n),Ms(n)))}),left:ch.some(function(t,n){$s(t,Js(Es(n),Hs(n)))})},xE=Object.freeze({setValueFrom:function(t,n,e){var o=Tf(vf(t,n,e.left()),Sf(t,n,e.top()));return Of(t,o),o},setToMin:function(t,n){Of(t,Tf(Os(n),Ts(n)))},setToMax:function(t,n){Of(t,Tf(Bs(n),As(n)))},getValueFromEvent:function(t){return Cs(t)},setPositionFromValue:function(t,n,e,o){var r=Ys(e),i=yf(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),e),u=Cf(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),e),a=Xe(n.element())/2,c=je(n.element())/2;Oe(n.element(),"left",i-a+"px"),Oe(n.element(),"top",u-c+"px")},onLeft:pE,onRight:hE,onUp:vE,onDown:bE,edgeActions:yE}),wE=Yt().deviceType.isTouch(),SE=[_t("stepSize",1),_t("onChange",Q),_t("onChoose",Q),_t("onInit",Q),_t("onDragStart",Q),_t("onDragEnd",Q),_t("snapToGrid",!1),_t("rounded",!0),Ot("snapStart"),bt("model",gt("mode",{x:[_t("minX",0),_t("maxX",100),Pt("value",function(t){return Rv(t.mode.minX)}),vt("getInitialValue"),yo("manager",cE)],y:[_t("minY",0),_t("maxY",100),Pt("value",function(t){return Rv(t.mode.minY)}),vt("getInitialValue"),yo("manager",gE)],xy:[_t("minX",0),_t("maxX",100),_t("minY",0),_t("maxY",100),Pt("value",function(t){return Rv({x:nh(t.mode.minX),y:nh(t.mode.minY)})}),vt("getInitialValue"),yo("manager",xE)]})),ei("sliderBehaviours",[rk,Ew])].concat(wE?[]:[Pt("mouseIsDown",function(){return Rv(!1)})]),kE=Yt().deviceType.isTouch(),CE=Di({name:"Slider",configFields:SE,partFields:ZT,factory:function(r,t){function i(t){return bi(t,r,"thumb")}function u(t){return bi(t,r,"spectrum")}function e(t){return vi(t,r,"left-edge")}function o(t){return vi(t,r,"right-edge")}function a(t){return vi(t,r,"top-edge")}function c(t){return vi(t,r,"bottom-edge")}function s(t,n){d.setPositionFromValue(t,n,r,{getLeftEdge:e,getRightEdge:o,getTopEdge:a,getBottomEdge:c,getSpectrum:u})}function f(t,n){l.value.set(n);var e=i(t);return s(t,e),r.onChange(t,e,n),ch.some(!0)}var l=r.model,d=l.manager,n=[bn(fb(),function(t){r.onDragStart(t,i(t))}),bn(db(),function(t){r.onDragEnd(t,i(t))})],m=[bn(gb(),function(t,n){n.stop(),r.onDragStart(t,i(t)),r.mouseIsDown.set(!0)}),bn(vb(),function(t){r.onDragEnd(t,i(t))})],g=kE?n:m;return{uid:r.uid,dom:r.dom,components:t,behaviours:ri(r.sliderBehaviours,R([kE?[]:[rk.config({mode:"special",focusIn:function(t){return vi(t,r,"spectrum").map(rk.focusIn).map(nh(!0))}})],[Ew.config({store:{mode:"manual",getValue:function(){return l.value.get()}}}),kx.config({channels:{"mouse.released":{onReceive:function(e){function t(){vi(e,r,"thumb").each(function(t){var n=l.value.get();r.onChoose(e,t,n)})}if(kE)t();else{var n=r.mouseIsDown.get();r.mouseIsDown.set(!1),n&&t()}}}}})]])),events:pn([bn(nE(),function(t,n){f(t,n.event().value())}),ly(function(t){var n=l.getInitialValue();l.value.set(n);var e=i(t);s(t,e);var o=u(t);r.onInit(t,e,o,l.value.get())})].concat(g)),apis:{resetToMin:function(t){d.setToMin(t,r)},resetToMax:function(t){d.setToMax(t,r)},changeValue:f,refresh:s},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,n){t.resetToMin(n)},resetToMax:function(t,n){t.resetToMax(n)},refresh:function(t,n){t.refresh(n)}}}),OE=function(t,n){var e=CE.parts().spectrum({dom:{tag:"div",classes:[n("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=CE.parts().thumb({dom:{tag:"div",classes:[n("hue-slider-thumb")],attributes:{role:"presentation"}}});return CE.sketch({dom:{tag:"div",classes:[n("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:nh({y:nh(0)})},components:[e,o],sliderBehaviours:Po([sk.config({})]),onChange:function(t,n,e){on(t,jT(),{value:e})}})},TE=[ei("formBehaviours",[Ew])],EE=function(o,t){return{uid:o.uid,dom:o.dom,components:t,behaviours:ri(o.formBehaviours,[Ew.config({store:{mode:"manual",getValue:function(t){return V(xi(t,o),function(t){return t().bind(function(t){return n=uS.getCurrent(t),e="missing current",n.fold(function(){return lh.error(e)},lh.value);var n,e}).map(Ew.getValue)})},setValue:function(e,t){Eh(t,function(n,t){vi(e,o,t).each(function(t){uS.getCurrent(t).each(function(t){Ew.setValue(t,n)})})})}}})]),apis:{getField:function(t,n){return vi(t,o,n).bind(uS.getCurrent)}}}},DE={getField:oe(function(t,n,e){return t.getField(n,e)}),sketch:function(t){var e,n=(e=[],{field:function(t,n){return e.push(t),di("form",Df(t),n)},record:function(){return e}}),o=t(n),r=y(n.record(),function(t){return qw({name:t,pname:Df(t)})});return Ti("form",TE,r,EE,o)}},BE=Qn("valid-input"),AE=Qn("invalid-input"),_E=Qn("validating-input"),ME="colorcustom.rgb.",FE=function(d,m,g,p){function h(t,n,e,o,r){var i,u,a=d(ME+"range"),c=[eT.parts().label({dom:{tag:"label",innerHtml:e,attributes:{"aria-label":o}}}),eT.parts().field({data:r,factory:rT,inputAttributes:ih({type:"text"},"hex"===n?{"aria-live":"polite"}:{}),inputClasses:[m("textfield")],inputBehaviours:Po([(i=n,u=t,bT.config({invalidClass:m("invalid"),notify:{
onValidate:function(t){on(t,_E,{type:i})},onValid:function(t){on(t,BE,{type:i,value:Ew.getValue(t)})},onInvalid:function(t){on(t,AE,{type:i,value:Ew.getValue(t)})}},validator:{validate:function(t){var n=Ew.getValue(t),e=u(n)?lh.value(!0):lh.error(d("aria.input.invalid"));return gT(e)},validateOnLoad:!1}})),xT.config({})]),onSetValue:function(t){bT.isInvalid(t)&&bT.run(t).get(Q)}})],s="hex"!==n?[eT.parts()["aria-descriptor"]({text:a})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:c.concat(s)}}function v(t,n){var e=n.red(),o=n.green(),r=n.blue();Ew.setValue(t,{red:e,green:o,blue:r})}function b(t,n){y.getOpt(t).each(function(t){Oe(t.element(),"background-color","#"+n.value())})}var y=Zu({dom:{tag:"div",classes:[m("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return Ei({factory:function(){function o(t){return u[t]().get()}function i(t,n){u[t]().set(n)}function n(t,n){var e=n.event();"hex"!==e.type()?i(e.type(),ch.none()):p(t)}function r(r,t,n){var e=parseInt(n,10);i(t,ch.some(e)),o("red").bind(function(e){return o("green").bind(function(n){return o("blue").map(function(t){return Ga(e,n,t,1)})})}).each(function(t){var n,e,o=(n=r,e=Wa(t),DE.getField(n,"hex").each(function(t){sk.isFocused(t)||Ew.setValue(n,{hex:e.value()})}),e);b(r,o)})}function e(t,n){var e=n.event();"hex"!==e.type()?r(t,e.type(),e.value()):function(t,n){g(t);var e=za(n);i("hex",ch.some(n));var o=qa(e);v(t,o),a(o),on(t,LT(),{hex:e}),b(t,e)}(t,e.value())}function t(t){return{label:d(ME+t+".label"),description:d(ME+t+".description")}}var u={red:nh(Rv(ch.some(255))),green:nh(Rv(ch.some(255))),blue:nh(Rv(ch.some(255))),hex:nh(Rv(ch.some("ffffff")))},a=function(t){var n=t.red(),e=t.green(),o=t.blue();i("red",ch.some(n)),i("green",ch.some(e)),i("blue",ch.some(o))},c=t("red"),s=t("green"),f=t("blue"),l=t("hex");return Fh(DE.sketch(function(t){return{dom:{tag:"form",classes:[m("rgb-form")],attributes:{"aria-label":d("aria.color.picker")}},components:[t.field("red",eT.sketch(h(Xa,"red",c.label,c.description,255))),t.field("green",eT.sketch(h(Xa,"green",s.label,s.description,255))),t.field("blue",eT.sketch(h(Xa,"blue",f.label,f.description,255))),t.field("hex",eT.sketch(h(La,"hex",l.label,l.description,"ffffff"))),y.asSpec()],formBehaviours:Po([bT.config({invalidClass:m("form-invalid")}),_u("rgb-form-events",[bn(BE,e),bn(AE,n),bn(_E,n)])])}}),{apis:{updateHex:function(t,n){var e,o;Ew.setValue(t,{hex:n.value()}),e=t,o=qa(n),v(e,o),a(o),b(t,n)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,n,e){t.updateHex(n,e)}},extraApis:{}})},IE=function(t,e){function r(t,n){var e=t.width,o=t.height,r=t.getContext("2d");if(null!==r){r.fillStyle=n,r.fillRect(0,0,e,o);var i=r.createLinearGradient(0,0,e,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=i,r.fillRect(0,0,e,o);var u=r.createLinearGradient(0,0,0,o);u.addColorStop(0,"rgba(0,0,0,0)"),u.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=u,r.fillRect(0,0,e,o)}}var o=CE.parts().spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),i=CE.parts().thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}});return Ei({factory:function(){var t=nh({x:nh(0),y:nh(0)}),n=Po([uS.config({find:ch.some}),sk.config({})]);return CE.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:t},rounded:!1,components:[o,i],onChange:function(t,n,e){on(t,UT(),{value:e})},onInit:function(t,n,e){r(e.element().dom(),Ja($C()))},sliderBehaviours:n})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,n,e){var o;o=e,r(n.components()[0].element().dom(),Ja(o))}},extraApis:{}})},RE=function(c,s){return Ei({name:"ColourPicker",configFields:[vt("dom"),_t("onValidHex",Q),_t("onInvalidHex",Q)],factory:function(t){function n(t,e){u.getOpt(t).each(function(t){var n=qa(e);g.paletteRgba().set(n),i.setRgba(t,n)})}function e(t,n){a.getOpt(t).each(function(t){r.updateHex(t,n)})}function d(n,e,t){Sh(t,function(t){t(n,e)})}var o,m,r=FE(c,s,t.onValidHex,t.onInvalidHex),i=IE(c,s),g={paletteRgba:nh(Rv($C()))},u=Zu(i.sketch({})),a=Zu(r.sketch({}));return{uid:t.uid,dom:t.dom,components:[u.asSpec(),OE(c,s),a.asSpec()],behaviours:Po([_u("colour-picker-events",[bn(UT(),(m=[e],function(t,n){var e,o,r,i,u,a,c,s,f,l=n.event().value();d(t,Wa(Ya(Ss((e=g.paletteRgba().get(),i=r=0,u=e.red()/255,a=e.green()/255,c=e.blue()/255,s=Math.min(u,Math.min(a,c)),f=Math.max(u,Math.max(a,c)),s===f?Ss(0,0,100*(i=s)):(r=60*((r=u===s?3:c===s?1:5)-(u===s?a-c:c===s?u-a:c-u)/(f-s)),o=(f-s)/f,i=f,Ss(Math.round(r),Math.round(100*o),Math.round(100*i)))).hue(),l.x(),100-l.y()))),m)})),bn(jT(),(o=[n,e],function(t,n){d(t,Wa(Ya(Ss((100-n.event().value().y())/100*360,100,100))),o)}))]),uS.config({find:function(t){return a.getOpt(t)}}),rk.config({mode:"acyclic"})])}}})},VE=function(){return uS.config({find:ch.some})},HE=function(t){return uS.config({find:t.getOpt})},NE=function(t){return uS.config({find:function(n){return Rn(n.element(),t).bind(function(t){return n.getSystem().getByDom(t).toOption()})}})},PE={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},zE=tinymce.util.Tools.resolve("tinymce.Resource"),LE=xv([_t("preprocess",l),_t("postprocess",l)]),jE=function(r,t){var i=dt("RepresentingConfigs.memento processors",LE,t);return Ew.config({store:{mode:"manual",getValue:function(t){var n=r.get(t),e=Ew.getValue(n);return i.postprocess(e)},setValue:function(t,n){var e=i.preprocess(n),o=r.get(t);Ew.setValue(o,e)}}})},UE=Af,WE=function(t){return _f(t,jn,Un)},GE=function(t){return Ew.config({store:{mode:"memory",initialValue:t}})},XE=Qn("alloy-fake-before-tabstop"),YE=Qn("alloy-fake-after-tabstop"),qE=function(t){return Ac(t,["."+XE,"."+YE].join(","),nh(!1))},KE=function(t,n){var e=n.element();ye(e,XE)?If(t,!0):ye(e,YE)&&If(t,!1)},JE=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[Ff([XE]),t,Ff([YE])],behaviours:Po([NE(1)])}},$E=!(Yt().browser.isIE()||Yt().browser.isEdge()),QE=window.Promise?window.Promise:(ET=jf.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){w.setTimeout(t,1)},DT=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},jf.prototype["catch"]=function(t){return this.then(null,t)},jf.prototype.then=function(e,o){var r=this;return new jf(function(t,n){Wf.call(r,new qf(e,o,t,n))})},jf.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=Array.prototype.slice.call(1===t.length&&DT(t[0])?t[0]:t);return new jf(function(o,r){function i(n,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void e.call(t,function(t){i(n,t)},r)}a[n]=t,0==--u&&o(a)}catch(c){r(c)}}if(0===a.length)return o([]);for(var u=a.length,t=0;t<a.length;t++)i(t,a[t])})},jf.resolve=function(n){return n&&"object"==typeof n&&n.constructor===jf?n:new jf(function(t){t(n)})},jf.reject=function(e){return new jf(function(t,n){n(e)})},jf.race=function(r){return new jf(function(t,n){for(var e=0,o=r;e<o.length;e++)o[e].then(t,n)})},jf),ZE=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],tD=function XF(n){return function(t){return rl(t,n)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),nD=ul(function YF(t,n){return ol(t,[1,0,0,0,n=el(255*n,-255,255),0,1,0,0,n,0,0,1,0,n,0,0,0,1,0,0,0,0,0,1])}),eD=ul(function qF(t,n){var e;return n=el(n,-1,1),ol(t,[(e=(n*=100)<0?127+n/100*127:127*(e=0==(e=n%1)?ZE[n]:ZE[Math.floor(n)]*(1-e)+ZE[Math.floor(n)+1]*e)+127)/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1])}),oD=function KF(n){return function(t){return il(t,n)}}([0,-1,0,-1,5,-1,0,-1,0]),rD=function JF(c){return function(n,e){return n.toCanvas().then(function(t){return function(t,n,e){for(var o=Nf(t),r=new Array(256),i=0;i<r.length;i++)r[i]=c(i,e);var u=function a(t,n){for(var e=t.data,o=0;o<e.length;o+=4)e[o]=n[e[o]],e[o+1]=n[e[o+1]],e[o+2]=n[e[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(u,0,0),nl(t,n)}(t,n.getType(),e)})}}(function(t,n){return 255*Math.pow(t/255,1-n)}),iD=Qn("toolbar.button.execute"),uD={"alloy.execute":["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},aD=Qn("update-menu-text"),cD=Qn("update-menu-icon"),sD={type:"separator"},fD=function(t,o){return p(Tl(dh(t)?t.split(" "):t,o),function(t,n){var e=El(function(t){if(Ol(t))return t;var n=Lh(t,"value").getOrThunk(function(){return Qn("generated-menu-item")});return Fh({value:n},t)}(n),o);return{menus:Fh(t.menus,e.menus),items:[e.item].concat(t.items),expansions:Fh(t.expansions,e.expansions)}},{menus:{},expansions:{},items:[]})},lD=nh([_t("field1Name","field1"),_t("field2Name","field2"),vo("onLockedChange"),mo(["lockClass"]),_t("locked",!1),Dw("coupledFieldBehaviours",[uS,Ew])]),dD=nh([zl("field1","field2"),zl("field2","field1"),qw({factory:Rk,schema:[vt("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:Po([gk.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),mD=Di({name:"FormCoupledInputs",configFields:lD(),partFields:dD(),factory:function(o,t){return{uid:o.uid,dom:o.dom,components:t,behaviours:Bw(o.coupledFieldBehaviours,[uS.config({find:ch.some}),Ew.config({store:{mode:"manual",getValue:function(t){var n,e=Si(t,o,["field1","field2"]);return(n={})[o.field1Name]=Ew.getValue(e.field1()),n[o.field2Name]=Ew.getValue(e.field2()),n},setValue:function(t,n){var e=Si(t,o,["field1","field2"]);G(n,o.field1Name)&&Ew.setValue(e.field1(),n[o.field1Name]),G(n,o.field2Name)&&Ew.setValue(e.field2(),n[o.field2Name])}}})]),apis:{getField1:function(t){return vi(t,o,"field1")},getField2:function(t){return vi(t,o,"field2")},getLock:function(t){return vi(t,o,"lock")}}}},apis:{getField1:function(t,n){return t.getField1(n)},getField2:function(t,n){return t.getField2(n)},getLock:function(t,n){return t.getLock(n)}}}),gD={undo:nh(Qn("undo")),redo:nh(Qn("redo")),zoom:nh(Qn("zoom")),back:nh(Qn("back")),apply:nh(Qn("apply")),swap:nh(Qn("swap")),transform:nh(Qn("transform")),tempTransform:nh(Qn("temp-transform")),transformApply:nh(Qn("transform-apply"))},pD=nh("save-state"),hD=nh("disable"),vD=nh("enable"),bD={formActionEvent:qO,saveState:pD,disable:hD,enable:vD},yD=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),xD=tinymce.util.Tools.resolve("tinymce.geom.Rect"),wD=tinymce.util.Tools.resolve("tinymce.util.Observable"),SD=tinymce.util.Tools.resolve("tinymce.util.Tools"),kD=tinymce.util.Tools.resolve("tinymce.util.VK"),CD=0,OD=function(s,e,f,o,r){function u(t,n,e,o){var r,i,u,a,c;r=n.x,i=n.y,u=n.w,a=n.h,r+=e*t.deltaX,i+=o*t.deltaY,(u+=e*t.deltaW)<20&&(u=20),(a+=o*t.deltaH)<20&&(a=20),c=s=xD.clamp({x:r,y:i,w:u,h:a},f,"move"===t.name),c=v(f,c),d.fire("updateRect",{rect:c}),l(c)}function n(n){function t(t,n){n.h<0&&(n.h=0),n.w<0&&(n.w=0),yD("#"+g+"-"+t,o).css({left:n.x,top:n.y,width:n.w,height:n.h})}SD.each(p,function(t){yD("#"+g+"-"+t.name,o).css({left:n.w*t.xMul+n.x,top:n.h*t.yMul+n.y})}),t("top",{x:e.x,y:e.y,w:e.w,h:n.y-e.y}),t("right",{x:n.x+n.w,y:n.y,w:e.w-n.x-n.w+e.x,h:n.h}),t("bottom",{x:e.x,y:n.y+n.h,w:e.w,h:e.h-n.y-n.h+e.y}),t("left",{x:e.x,y:n.y,w:n.x-e.x,h:n.h}),t("move",n)}function i(t){n(s=t)}function l(t){i(h(f,t))}var d,a,c,m="tox-",g="tox-crid-"+CD++,p=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}];c=["top","right","bottom","left"];var h=function(t,n){return{x:n.x+t.x,y:n.y+t.y,w:n.w,h:n.h}},v=function(t,n){return{x:n.x-t.x,y:n.y-t.y,w:n.w,h:n.h}};return function b(){yD('<div id="'+g+'" class="'+m+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),SD.each(c,function(t){yD("#"+g,o).append('<div id="'+g+"-"+t+'"class="'+m+'croprect-block" style="display: none" data-mce-bogus="all">')}),SD.each(p,function(t){yD("#"+g,o).append('<div id="'+g+"-"+t.name+'" class="'+m+"croprect-handle "+m+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')}),a=SD.map(p,function t(n){var e;return new ql(g,{document:o.ownerDocument,handle:g+"-"+n.name,start:function(){e=s},drag:function(t){u(n,e,t.deltaX,t.deltaY)}})}),n(s),yD(o).on("focusin focusout",function(t){yD(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")}),yD(o).on("keydown",function(n){function t(t,n,e,o,r){t.stopPropagation(),t.preventDefault(),u(i,e,o,r)}var i;switch(SD.each(p,function(t){if(n.target.id===g+"-"+t.name)return i=t,!1}),n.keyCode){case kD.LEFT:t(n,0,s,-10,0);break;case kD.RIGHT:t(n,0,s,10,0);break;case kD.UP:t(n,0,s,0,-10);break;case kD.DOWN:t(n,0,s,0,10);break;case kD.ENTER:case kD.SPACEBAR:n.preventDefault(),r()}})}(),d=SD.extend({toggleVisibility:function y(t){var n;n=SD.map(p,function(t){return"#"+g+"-"+t.name}).concat(SD.map(c,function(t){return"#"+g+"-"+t})).join(","),t?yD(n,o).show():yD(n,o).hide()},setClampRect:function x(t){f=t,n(s)},setRect:i,getInnerRect:function(){return v(f,s)},setInnerRect:l,setViewPortRect:function w(t){e=t,n(s)},destroy:function t(){SD.each(a,function(t){t.destroy()}),a=[]}},wD)},TD=Ei({name:"HtmlSelect",configFields:[vt("options"),ei("selectBehaviours",[sk,Ew]),_t("selectClasses",[]),_t("selectAttributes",{}),Ot("data")],factory:function(e){var t=y(e.options,function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}}),n=e.data.map(function(t){return j("initialValue",t)}).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:t,behaviours:ri(e.selectBehaviours,[sk.config({}),Ew.config({store:ih({mode:"manual",getValue:function(t){return Me(t.element())},setValue:function(t,n){k(e.options,function(t){return t.value===n}).isSome()&&Fe(t.element(),n)}},n)})])}}}),ED=Object.freeze({events:function(t,n){var e=t.stream.streams.setup(t,n);return pn([bn(t.event,e),dy(function(){return n.cancel()})].concat(t.cancelEvent.map(function(t){return[bn(t,function(){return n.cancel()})]}).getOr([])))}}),DD=Object.freeze({throttle:nd,init:function(t){return t.stream.streams.state(t)}}),BD=zo({fields:[bt("stream",gt("mode",{throttle:[vt("delay"),_t("stopEvent",!0),yo("streams",{setup:function(t,n){var e=t.stream,o=oa(t.onStream,e.delay);return n.setTimer(o),function(t,n){o.throttle(t,n),e.stopEvent&&n.stop()}},state:nd})]})),_t("event","input"),Ot("cancelEvent"),vo("onStream")],name:"streaming",active:ED,state:DD}),AD=function(t){od(t,function(t,n){return t.setSelectionRange(n.length,n.length)})},_D=nh("alloy.typeahead.itemexecute"),MD=nh([Ot("lazySink"),vt("fetch"),_t("minChars",5),_t("responseTime",1e3),po("onOpen"),_t("getHotspot",ch.some),_t("getAnchorOverrides",nh({})),_t("layouts",ch.none()),_t("eventOrder",{}),Nt("model",{},[_t("getDisplayText",function(t){return t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.value}),_t("selectsOver",!0),_t("populateFromBrowse",!0)]),po("onSetValue"),ho("onExecute"),po("onItemExecute"),_t("inputClasses",[]),_t("inputAttributes",{}),_t("inputStyles",{}),_t("matchWidth",!0),_t("useMinWidth",!1),_t("dismissOnBlur",!0),mo(["openClass"]),Ot("initialData"),ei("typeaheadBehaviours",[sk,Ew,BD,rk,gk,CT]),Pt("previewing",function(){return Rv(!0)})].concat(oT()).concat(xs())),FD=nh([Kw({schema:[lo()],name:"menu",overrides:function(o){return{fakeFocus:!0,onHighlight:function(n,e){o.previewing.get()?n.getSystem().getByUid(o.uid).each(function(t){rd(o.model,t,e).fold(function(){return mS.dehighlight(n,e)},function(t){return t()})}):n.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&ed(o.model,t,e)}),o.previewing.set(!1)},onExecute:function(t,n){return t.getSystem().getByUid(o.uid).toOption().map(function(t){return on(t,_D(),{item:n}),!0})},onHover:function(t,n){o.previewing.set(!1),t.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&ed(o.model,t,n)})}}}})]),ID=Di({name:"Typeahead",configFields:MD(),partFields:FD(),factory:function(r,t,n,i){function e(t,n,e){r.previewing.set(!1);var o=CT.getCoupled(t,"sandbox");hw.isOpen(o)?uS.getCurrent(o).each(function(t){mS.getHighlighted(t).fold(function(){e(t)},function(){an(o,t.element(),"keydown",n)})}):ms(r,u(t),t,o,i,function(t){uS.getCurrent(t).each(e)},aT.HighlightFirst).get(Q)}var o=es(r),u=function(e){return function(t){return t.map(function(t){var n=O(_(t.menus),function(t){return x(t.items,function(t){return"item"===t.type})});return Ew.getState(e).update(y(n,function(t){return t.data})),t})}},a=[sk.config({}),Ew.config({onSetValue:r.onSetValue,store:ih({mode:"dataset",getDataKey:function(t){return Me(t.element())},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(t,n){Fe(t.element(),r.model.getDisplayText(n))}},r.initialData.map(function(t){return j("initialValue",t)}).getOr({}))}),BD.config({stream:{mode:"throttle",delay:r.responseTime,stopEvent:!1},onStream:function(t){var n=CT.getCoupled(t,"sandbox");if(sk.isFocused(t)&&Me(t.element()).length>=r.minChars){var e=uS.getCurrent(n).bind(function(t){return mS.getHighlighted(t).map(Ew.getValue)});r.previewing.set(!0),ms(r,u(t),t,n,i,function(){uS.getCurrent(n).each(function(t){e.fold(function(){r.model.selectsOver&&mS.highlightFirst(t)},function(n){mS.highlightBy(t,function(t){return Ew.getValue(t).value===n.value}),mS.getHighlighted(t).orThunk(function(){return mS.highlightFirst(t),ch.none()})})})},aT.HighlightFirst).get(Q)}},cancelEvent:Nb()}),rk.config({mode:"special",onDown:function(t,n){return e(t,n,mS.highlightFirst),ch.some(!0)},onEscape:function(t){var n=CT.getCoupled(t,"sandbox");return hw.isOpen(n)?(hw.close(n),ch.some(!0)):ch.none()},onUp:function(t,n){return e(t,n,mS.highlightLast),ch.some(!0)},onEnter:function(n){var t=CT.getCoupled(n,"sandbox"),e=hw.isOpen(t);if(e&&!r.previewing.get())return uS.getCurrent(t).bind(function(t){return mS.getHighlighted(t)}).map(function(t){return on(n,_D(),{item:t}),!0});var o=Ew.getValue(n);return en(n,Nb()),r.onExecute(t,n,o),e&&hw.close(t),ch.some(!0)}}),gk.config({toggleClass:r.markers.openClass,aria:{mode:"expanded"}}),CT.config({others:{sandbox:function(t){return bs(r,t,{onOpen:function(){return gk.on(t)},onClose:function(){return gk.off(t)}})}}}),_u("typeaheadevents",[gy(function(t){var n=Q;ps(r,u(t),t,i,n,aT.HighlightFirst).get(Q)}),bn(_D(),function(t,n){var e=CT.getCoupled(t,"sandbox");ed(r.model,t,n.event().item()),en(t,Nb()),r.onItemExecute(t,e,n.event().item(),Ew.getValue(t)),hw.close(e),AD(t)})].concat(r.dismissOnBlur?[bn(Ab(),function(t){var n=CT.getCoupled(t,"sandbox");Wo(n.element()).isNone()&&hw.close(n)})]:[]))];return{uid:r.uid,dom:os(Fh(r,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:ih(ih({},o),ri(r.typeaheadBehaviours,a)),eventOrder:r.eventOrder}}}),RD=function(i){return ih(ih({},i),{toCached:function(){return RD(i.toCached())},bindFuture:function(n){return RD(i.bind(function(t){return t.fold(function(t){return gT(lh.error(t))},function(t){return n(t)})}))},bindResult:function(n){return RD(i.map(function(t){return t.bind(n)}))},mapResult:function(n){return RD(i.map(function(t){return t.map(n)}))},mapError:function(n){return RD(i.map(function(t){return t.mapError(n)}))},foldResult:function(n,e){return i.map(function(t){return t.fold(n,e)})},withTimeout:function(t,r){return RD(mT(function(n){var e=!1,o=w.setTimeout(function(){e=!0,n(lh.error(r()))},t);i.get(function(t){e||(w.clearTimeout(o),n(t))})}))}})},VD=id,HD={type:"separator"},ND=Qn("aria-invalid"),PD={bar:md(function(t,n){return e=t,o=n.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:y(e.items,o.interpreter)};var e,o}),collection:md(function(t,n){return dd(t,n.shared.providers)}),alertbanner:md(function(t,n){return e=t,o=n.shared.providers,HO.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+e.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Rk.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:na(e.icon,o.icons),attributes:{title:o.translate(e.iconTooltip)}},action:function(t){on(t,qO,{name:"alert-banner",value:e.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(e.text)}}]});var e,o}),input:md(function(t,n){return e=t,o=n.shared.providers,td({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:e.disabled,classname:"tox-textfield",validation:ch.none(),maximized:e.maximized},o);var e,o}),textarea:md(function(t,n){return e=t,o=n.shared.providers,td({name:e.name,multiline:!0,label:e.label,inputMode:ch.none(),placeholder:e.placeholder,flex:!0,disabled:e.disabled,classname:"tox-textarea",validation:ch.none(),maximized:e.maximized},o);var e,o}),label:md(function(t,n){return e=t,o=n.shared,r={dom:{tag:"label",innerHtml:o.providers.translate(e.label),classes:["tox-label"]}},i=y(e.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:Po([VE(),uk.config({}),WE(ch.none()),rk.config({mode:"acyclic"})])};var e,o,r,i}),iframe:(BT=function(t,n){return Rf(t,n.shared.providers)},function(t,n,e){var o=Fh(n,{source:"dynamic"});return md(BT)(t,o,e)}),button:md(function(t,n){return Pl(t,n.shared.providers)}),checkbox:md(function(t,n){return function(n,e){function t(t){return t.element().dom().click(),ch.some(!0)}function o(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:na("checked"===t?"selected":"unselected",e.icons)}}}var r=Ew.config({store:{mode:"manual",getValue:function(t){return t.element().dom().checked},setValue:function(t,n){t.element().dom().checked=n}}}),i=eT.parts().field({factory:{sketch:l},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Po([VE(),_C.config({disabled:n.disabled}),xT.config({}),sk.config({}),r,rk.config({mode:"special",onEnter:t,onSpace:t,stopSpaceKeyup:!0}),_u("checkbox-events",[bn(Cb(),function(t){on(t,GO,{name:n.name})})])])}),u=eT.parts().label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:e.translate(n.label)},behaviours:Po([HT.config({})])}),a=Zu({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[o("checked"),o("unchecked")]});return eT.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[i,a.asSpec(),u],fieldBehaviours:Po([_C.config({disabled:n.disabled,disableClass:"tox-checkbox--disabled",onDisabled:function(t){eT.getField(t).each(_C.disable)},onEnabled:function(t){eT.getField(t).each(_C.enable)}})])})}(t,n.shared.providers)}),colorinput:md(function(t,n){return ws(t,n.shared,n.colorinput)}),colorpicker:md(function(){function t(t){return"tox-"+t}var r=Zu(RE(Bf,t).sketch({dom:{tag:"div",classes:[t("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(t){on(t,qO,{name:"hex-valid",value:!0})},onInvalidHex:function(t){on(t,qO,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:Po([Ew.config({store:{mode:"manual",getValue:function(t){var n=r.get(t);return uS.getCurrent(n).bind(function(t){return Ew.getValue(t).hex}).map(function(t){return"#"+t}).getOr("")},setValue:function(t,n){var e=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(n),o=r.get(t);uS.getCurrent(o).fold(function(){w.console.log("Can not find form")},function(t){Ew.setValue(t,{hex:ch.from(e[1]).getOr("")}),DE.getField(t,"hex").each(function(t){en(t,kb())})})}}}),VE()])}}),dropzone:md(function(t,n){return Mf(t,n.shared.providers)}),grid:md(function(t,n){return e=t,o=n.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+e.columns+"col"]},components:y(e.items,o.interpreter)};var e,o}),selectbox:md(function(t,n){return e=t,o=n.shared.providers,r=y(e.items,function(t){return{text:o.translate(t.text),value:t.value}}),i=e.label.map(function(t){return ls(t,o)}),u={dom:{tag:"div",classes:["tox-selectfield"]},components:R([[eT.parts().field({dom:{},selectAttributes:{size:e.size},options:r,factory:TD,selectBehaviours:Po([_C.config({disabled:e.disabled}),xT.config({}),_u("selectbox-change",[bn(Cb(),function(t){on(t,GO,{name:e.name})})])])})],(1<e.size?ch.none():ch.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:na("chevron-down",o.icons)}})).toArray()])},eT.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:R([i.toArray(),[u]]),fieldBehaviours:Po([_C.config({disabled:e.disabled,onDisabled:function(t){eT.getField(t).each(_C.disable)},onEnabled:function(t){eT.getField(t).each(_C.enable)}})])});var e,o,r,i,u}),sizeinput:md(function(t,n){return Gl(t,n.shared.providers)}),urlinput:md(function(t,n){return ld(t,n,n.urlinput)}),customeditor:md(function(e){var o=Rv(ch.none()),n=Zu({dom:{tag:e.tag}}),r=Rv(ch.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Po([_u("editor-foo-events",[ly(function(t){n.getOpt(t).each(function(n){var t;(t=e,Object.prototype.hasOwnProperty.call(t,"init")?e.init(n.element().dom()):zE.load(e.scriptId,e.scriptUrl).then(function(t){return t(n.element().dom(),e.settings)})).then(function(n){r.get().each(function(t){n.setValue(t)}),r.set(ch.none()),o.set(ch.some(n))})})})]),Ew.config({store:{mode:"manual",getValue:function(){return o.get().fold(function(){return r.get().getOr("")},function(t){return t.getValue()})},setValue:function(t,n){o.get().fold(function(){r.set(ch.some(n))},function(t){return t.setValue(n)})}}}),VE()]),components:[n.asSpec()]}}),htmlpanel:md(function(t){return"presentation"===t.presets?HO.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):HO.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Po([xT.config({}),sk.config({})])})}),imagetools:md(function(t,n){return Zl(t,n.shared.providers)}),table:md(function(t,n){return function(t,n){function e(t){return{dom:{tag:"th",innerHtml:n.translate(t)}}}function o(t){return{dom:{tag:"td",innerHtml:n.translate(t)}}}function r(t){return{dom:{tag:"tr"},components:y(t,o)}}var i,u;return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(u=t.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:y(u,e)}]}),(i=t.cells,{dom:{tag:"tbody"},components:y(i,r)})],behaviours:Po([xT.config({}),sk.config({})])}}(t,n.shared.providers)}),panel:md(function(t,n){return o=n,{dom:{tag:"div",classes:(e=t).classes},components:y(e.items,o.shared.interpreter)};var e,o})},zD={field:function(t,n){return n}},LD=function(n,e,o){return Lh(PD,e.type).fold(function(){return w.console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e},function(t){return t(n,e,o)})},jD=nh(function(t,n){var e,o;e=t,o=Math.floor(n),Oe(e,"max-width",Uy.max(e,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"])+"px")}),UD={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},WD=function(t,n,e){function o(){return Hv.fromDom(t.getBody())}var r,i,u,a,c,s,f,l,d=Qc(t);return{toolbar:(f=o,l=n,d?function(){return{anchor:"node",root:f(),node:ch.from(f()),bubble:Xo(-12,-12,UD),layouts:{onRtl:function(){return[$u]},onLtr:function(){return[Qu]}},overrides:{maxHeightFunction:nw()}}}:function(){return{anchor:"hotspot",hotspot:l(),bubble:Xo(-12,12,UD),layouts:{onRtl:function(){return[Eo]},onLtr:function(){return[Do]}},overrides:{maxHeightFunction:nw()}}}),toolbarOverflow:(s=e,function(){return{anchor:"hotspot",hotspot:s(),overrides:{maxWidthFunction:jD()},layouts:{onRtl:function(){return[Eo,Do]},onLtr:function(){return[Do,Eo]}}}}),banner:(a=o,c=n,d?function(){return{anchor:"node",root:a(),node:ch.from(a()),layouts:{onRtl:function(){return[Fk]},onLtr:function(){return[Fk]}}}}:function(){return{anchor:"hotspot",hotspot:c(),layouts:{onRtl:function(){return[vx]},onLtr:function(){return[vx]}}}}),cursor:(i=t,u=o,function(){return{anchor:"selection",root:u(),getSelection:function(){var t=i.selection.getRng();return ch.some(Px.range(Hv.fromDom(t.startContainer),t.startOffset,Hv.fromDom(t.endContainer),t.endOffset))}}}),node:(r=o,function(t){return{anchor:"node",root:r(),node:t}})}},GD=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],XD=function(t){return S(t,function(t,n){if(Ah(n,"items")){var e=XD(n.items);return{customFormats:t.customFormats.concat(e.customFormats),formats:t.formats.concat([{title:n.title,items:e.formats}])}}if(Ah(n,"inline")||Ah(n,"block")||Ah(n,"selector")){var o="custom-"+n.title.toLowerCase();return{customFormats:t.customFormats.concat([{name:o,format:n}]),formats:t.formats.concat([{title:n.title,format:o,icon:n.icon}])}}return ih(ih({},t),{formats:t.formats.concat(n)})},{customFormats:[],formats:[]})},YD=SD.trim,qD=yd("true"),KD=yd("false"),JD=function(t){return function(t){for(;t=t.parentNode;){var n=t.contentEditable;if(n&&"inherit"!==n)return qD(t)}return!1}(t)&&!KD(t)},$D=function(t){var n=Ed(t);return x(y(x(n,Cd),Od).concat(y(x(n,Sd),Td)),Dd)},QD="tinymce-url-history",ZD=Object.prototype.hasOwnProperty,tB="contexttoolbar-hide",nB=nh([vt("dom"),_t("shell",!0),ei("toolbarBehaviours",[uk])]),eB=nh([Jw({name:"groups",overrides:function(){return{behaviours:Po([uk.config({})])}}})]),oB=Di({name:"Toolbar",configFields:nB(),partFields:eB(),factory:function(n,t){var e=function(t){return n.shell?ch.some(t):vi(t,n,"groups")},o=n.shell?{behaviours:[uk.config({})],components:[]}:{behaviours:[],components:t};return{uid:n.uid,dom:n.dom,components:o.components,behaviours:ri(n.toolbarBehaviours,o.behaviours),apis:{setGroups:function(t,n){e(t).fold(function(){throw w.console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(t){uk.set(t,n)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)}}}),rB=On("within","extra","withinWidth"),iB=nh([vt("items"),mo(["itemSelector"]),ei(
"tgroupBehaviours",[rk])]),uB=nh([$w({name:"items",unit:"item"})]),aB=Di({name:"ToolbarGroup",configFields:iB(),partFields:uB(),factory:function(t,n){return{uid:t.uid,dom:t.dom,components:n,behaviours:ri(t.tgroupBehaviours,[rk.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),cB=nh([ei("splitToolbarBehaviours",[CT]),Pt("builtGroups",function(){return Rv([])})]),sB=nh([mo(["overflowToggledClass"]),vt("getAnchor"),Bt("getOverflowBounds"),vt("lazySink")].concat(cB())),fB=nh([qw({factory:oB,schema:nB(),name:"primary"}),Kw({factory:oB,schema:nB(),name:"overflow",overrides:function(n){return{toolbarBehaviours:Po([rk.config({mode:"cyclic",onEscape:function(t){return vi(t,n,"overflow-button").each(sk.focus),ch.none()}})])}}}),Kw({name:"overflow-button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Po([gk.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),Kw({name:"overflow-group"})]),lB=Di({name:"SplitFloatingToolbar",configFields:sB(),partFields:fB(),factory:function(n,t,e,r){return Xd(n,t,0,r,{coupling:{sandbox:function(t){return o=t,e=n,{dom:{tag:"div",attributes:{id:(r=io()).id()}},behaviours:Po([rk.config({mode:"special",onEscape:function(t){return hw.close(t),ch.some(!0)}}),hw.config({onOpen:function(t,n){Kd(o,e),vi(o,e,"overflow-button").each(function(t){gk.on(t),r.link(t.element())}),rk.focusIn(n)},onClose:function(){vi(o,e,"overflow-button").each(function(t){gk.off(t),sk.focus(t),r.unlink(t.element())})},isPartOf:function(t,n,e){return qy(n,e)||qy(o,e)},getAttachPoint:function(){return e.lazySink(o).getOrDie()}}),kx.config({channels:ih({},Jr({isExtraPart:nh(!1),doReposition:function(){return Jd(o,e)}}))})])};var o,e,r}},apis:{refresh:function(t){return Kd(t,n)},toggle:function(t){return n=t,e=r,o=CT.getCoupled(n,"sandbox"),void(hw.isOpen(o)?hw.close(o):hw.open(o,e.overflow()));var n,e,o},getOverflow:function(t){return hw.getState(CT.getCoupled(t,"sandbox"))},reposition:function(t){return Jd(t,n)}}})},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},reposition:function(t,n){t.reposition(n)},getMoreButton:function(t,n){return t.getMoreButton(n)},getOverflow:function(t,n){return t.getOverflow(n)},toggle:function(t,n){t.toggle(n)}}}),dB=Object.freeze({refresh:function(t,n,e){if(e.isExpanded()){Ae(t.element(),Qd(n));var o=Zd(n,t.element());Oe(t.element(),Qd(n),o)}},grow:function(t,n,e){e.isExpanded()||um(t,n,e)},shrink:function(t,n,e){e.isExpanded()&&im(t,n,e)},immediateShrink:function(t,n,e){e.isExpanded()&&om(t,n,e)},hasGrown:function(t,n,e){return e.isExpanded()},hasShrunk:function(t,n,e){return e.isCollapsed()},isGrowing:am,isShrinking:cm,isTransitioning:function(t,n){return!0===am(t,n)||!0===cm(t,n)},toggleGrow:function(t,n,e){(e.isExpanded()?im:um)(t,n,e)},disableTransitions:tm}),mB=Object.freeze({exhibit:function(t,n){return ie(n.expanded?{classes:[n.openClass],styles:{}}:{classes:[n.closedClass],styles:j(n.dimension.property,"0px")})},events:function(e,o){return pn([Cn(Tb(),function(t,n){n.event().raw().propertyName===e.dimension.property&&(tm(t,e),o.isExpanded()&&Ae(t.element(),e.dimension.property),(o.isExpanded()?e.onGrown:e.onShrunk)(t))})])}}),gB=zo({fields:[vt("closedClass"),vt("openClass"),vt("shrinkingClass"),vt("growingClass"),Ot("getAnimationRoot"),po("onShrunk"),po("onStartShrink"),po("onGrown"),po("onStartGrow"),_t("expanded",!1),bt("dimension",gt("property",{width:[yo("property","width"),yo("getDimension",function(t){return Xe(t)+"px"})],height:[yo("property","height"),yo("getDimension",function(t){return je(t)+"px"})]}))],name:"sliding",active:mB,apis:dB,state:Object.freeze({init:function(t){var n=Rv(t.expanded);return _y({isExpanded:function(){return!0===n.get()},isCollapsed:function(){return!1===n.get()},setCollapsed:m(n.set,!1),setExpanded:m(n.set,!0),readState:function(){return"expanded: "+n.get()}})}})}),pB=nh([mo(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),po("onOpened"),po("onClosed")].concat(cB())),hB=nh([qw({factory:oB,schema:nB(),name:"primary"}),qw({factory:oB,schema:nB(),name:"overflow",overrides:function(n){return{toolbarBehaviours:Po([gB.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:function(t){vi(t,n,"overflow-button").each(function(t){gk.off(t),sk.focus(t)}),n.onClosed(t)},onGrown:function(t){rk.focusIn(t),n.onOpened(t)},onStartGrow:function(t){vi(t,n,"overflow-button").each(gk.on)}}),rk.config({mode:"acyclic",onEscape:function(t){return vi(t,n,"overflow-button").each(sk.focus),ch.some(!0)}})])}}}),Kw({name:"overflow-button",overrides:function(t){return{buttonBehaviours:Po([gk.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),Kw({name:"overflow-group"})]),vB=function(t,n){var e=vi(t,n,"overflow");Gd(t,n,e,sm),e.each(gB.refresh)},bB=Di({name:"SplitSlidingToolbar",configFields:pB(),partFields:hB(),factory:function(o,t,n,e){return Xd(o,t,0,e,{coupling:{},apis:{refresh:function(t){return vB(t,o)},toggle:function(t){var n,e;vi(n=t,e=o,"overflow").each(function(t){vB(n,e),gB.toggleGrow(t)})},getOverflow:function(t){return vi(t,o,"overflow")}}})},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},getMoreButton:function(t,n){return t.getMoreButton(n)},getOverflow:function(t,n){return t.getOverflow(n)},toggle:function(t,n){t.toggle(n)}}}),yB=nh(Qn("toolbar-height-change")),xB="silver.readonly",wB=xv([(AT="readonly",bt(AT,_v))]),SB=[Vt("disabled",!1),Dt("tooltip"),Dt("icon"),Dt("text"),Ht("onSetup",function(){return Q})],kB=xv([yt("type"),wt("onAction")].concat(SB)),CB=[Dt("text"),Dt("tooltip"),Dt("icon"),wt("fetch"),Ht("onSetup",function(){return Q})],OB=xv(b([yt("type")],CB)),TB=xv([yt("type"),Dt("tooltip"),Dt("icon"),Dt("text"),Bt("select"),wt("fetch"),Ht("onSetup",function(){return Q}),Rt("presets","normal",["normal","color","listpreview"]),_t("columns",1),wt("onAction"),wt("onItemAction")]),EB=[Vt("active",!1)].concat(SB),DB=xv(EB.concat([yt("type"),wt("onAction")])),BB=[Ht("predicate",function(){return!1}),Rt("scope","node",["node","editor"]),Rt("position","selection",["node","selection","line"])],AB=SB.concat([_t("type","contextformbutton"),_t("primary",!1),wt("onAction"),Pt("original",l)]),_B=EB.concat([_t("type","contextformbutton"),_t("primary",!1),wt("onAction"),Pt("original",l)]),MB=SB.concat([_t("type","contextformbutton")]),FB=EB.concat([_t("type","contextformtogglebutton")]),IB=gt("type",{contextformbutton:AB,contextformtogglebutton:_B}),RB=xv([_t("type","contextform"),Ht("initValue",function(){return""}),Dt("label"),Ct("commands",IB),Tt("launch",gt("type",{contextformbutton:MB,contextformtogglebutton:FB}))].concat(BB)),VB=xv([_t("type","contexttoolbar"),yt("items")].concat(BB)),HB=Object.freeze({getState:function(t,n,e){return e}}),NB=Object.freeze({events:function(r,i){function o(e,o){r.updateState.each(function(t){var n=t(e,o);i.set(n)}),r.renderComponents.each(function(t){var n=y(t(o,i.get()),e.getSystem().build);Nr(e,n)})}return pn([bn(Mb(),function(t,n){var e=r.channel;wh(n.channels(),e)&&o(t,n.data())}),ly(function(n){r.initialData.each(function(t){o(n,t)})})])}}),PB=Object.freeze({init:function(){var n=Rv(ch.none());return{readState:function(){return n.get().fold(function(){return"none"},function(t){return t})},get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(ch.none())}}}}),zB=zo({fields:[vt("channel"),Ot("renderComponents"),Ot("updateState"),Ot("initialData")],name:"reflecting",active:NB,apis:HB,state:PB}),LB=nh([vt("toggleClass"),vt("fetch"),vo("onExecute"),_t("getHotspot",ch.some),_t("getAnchorOverrides",nh({})),_t("layouts",ch.none()),vo("onItemExecute"),Ot("lazySink"),vt("dom"),po("onOpen"),ei("splitDropdownBehaviours",[CT,rk,sk]),_t("matchWidth",!1),_t("useMinWidth",!1),_t("eventOrder",{}),Ot("role")].concat(xs())),jB=qw({factory:Rk,schema:[vt("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Po([sk.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(n.uid).each(rn)},buttonBehaviours:Po([gk.config({toggleOnExecute:!1,toggleClass:n.toggleClass})])}}}),UB=qw({factory:Rk,schema:[vt("dom")],name:"button",defaults:function(){return{buttonBehaviours:Po([sk.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(n){n.getSystem().getByUid(e.uid).each(function(t){e.onExecute(t,n)})}}}}),WB=nh([jB,UB,Jw({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[vt("text")],name:"aria-descriptor"}),Kw({schema:[lo()],name:"menu",defaults:function(o){return{onExecute:function(n,e){n.getSystem().getByUid(o.uid).each(function(t){o.onItemExecute(t,n,e)})}}}}),TT()]),GB=Di({name:"SplitDropdown",configFields:LB(),partFields:WB(),factory:function(o,t,n,e){function r(t){uS.getCurrent(t).each(function(t){mS.highlightFirst(t),rk.focusIn(t)})}function i(t){ps(o,function(t){return t},t,e,r,aT.HighlightFirst).get(Q)}function u(t){return rn(bi(t,o,"button")),ch.some(!0)}var a=Ih(pn([ly(function(e){vi(e,o,"aria-descriptor").each(function(t){var n=Qn("aria");Gn(t.element(),"id",n),Gn(e.element(),"aria-describedby",n)})})]),zu(ch.some(i))),c={repositionMenus:function(t){gk.isOn(t)&&ys(t)}};return{uid:o.uid,dom:o.dom,components:t,apis:c,eventOrder:ih(ih({},o.eventOrder),{"alloy.execute":["disabling","toggling","alloy.base.behaviour"]}),events:a,behaviours:ri(o.splitDropdownBehaviours,[CT.config({others:{sandbox:function(t){var n=bi(t,o,"arrow");return bs(o,t,{onOpen:function(){gk.on(n),gk.on(t)},onClose:function(){gk.off(n),gk.off(t)}})}}}),rk.config({mode:"special",onSpace:u,onEnter:u,onDown:function(t){return i(t),ch.some(!0)}}),sk.config({}),gk.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:o.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,n){return t.repositionMenus(n)}}}),XB=Qn("focus-button"),YB=["checklist","ordered-list"],qB=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],KB=function(t,n,e){return Em(t,{toolbarButtonBehaviours:[].concat(0<e.length?[_u("toolbarButtonWith",e)]:[]),getApi:km,onSetup:t.onSetup},n)},JB=function(t,n,e){return Fh(Em(t,{toolbarButtonBehaviours:[uk.config({}),gk.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<e.length?[_u("toolbarToggleButtonWith",e)]:[]),getApi:Cm,onSetup:t.onSetup},n))},$B=function(t,n,e){var o,r,i,u,a=n.label.fold(function(){return{}},function(t){return{"aria-label":t}}),c=Zu(rT.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:n.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:Po([rk.config({mode:"special",onEnter:function(t){return s.findPrimary(t).map(function(t){return rn(t),!0})},onLeft:function(t,n){return n.cut(),ch.none()},onRight:function(t,n){return n.cut(),ch.none()}})])})),s=(o=c,r=n.commands,i=e.shared.providers,u=y(r,function(t){return Zu(Am(o,t,i))}),{asSpecs:function(){return y(u,function(t){return t.asSpec()})},findPrimary:function(e){return co(r,function(t,n){return t.primary?ch.from(u[n]).bind(function(t){return t.getOpt(e)}).filter(v(_C.isDisabled)):ch.none()})}});return ym({type:t,uid:Qn("context-toolbar"),initGroups:[{title:ch.none(),items:[c.asSpec()]},{title:ch.none(),items:s.asSpecs()}],onEscape:ch.none,cyclicKeying:!0,backstage:e,getSink:function(){return lh.error("")}})},QB=function(n,e){function t(t){return t.dom()===e.getBody()}var a=Hv.fromDom(e.selection.getNode());return Fm(a,n.inNodeScope).orThunk(function(){return Fm(a,n.inEditorScope).orThunk(function(){return function(t,n,e){for(var o=a.dom(),r=hh(e)?e:nh(!1);o.parentNode;){o=o.parentNode;var i=Hv.fromDom(o),u=n(i);if(u.isSome())return u;if(r(i))break}return ch.none()}(0,function(t){return Fm(t,n.inNodeScope)},t)})})},ZB=function(e,r){function o(n,e){var o=lt(ft("ContextForm",RB,e));(t[n]=o).launch.map(function(t){c["form:"+n]=ih(ih({},e.launch),{type:"contextformtogglebutton"===t.type?"togglebutton":"button",onAction:function(){r(o)}})}),"editor"===o.scope?a.push(o):u.push(o),s[n]=o}function i(n,e){ft("ContextToolbar",VB,e).each(function(t){"editor"===e.scope?a.push(t):u.push(t),s[n]=t})}var t={},u=[],a=[],c={},s={},n=Oh(e);return Sh(n,function(t){var n=e[t];"contextform"===n.type?o(t,n):"contexttoolbar"===n.type&&i(t,n)}),{forms:t,inNodeScope:u,inEditorScope:a,lookupTable:s,formNavigators:c}},tA=Qn("forward-slide"),nA=Qn("backward-slide"),eA=Qn("change-slide-event"),oA="tox-pop--resizing";(MT=_T=_T||{})[MT.SemiColon=0]="SemiColon",MT[MT.Space=1]="Space";var rA,iA,uA,aA,cA,sA=[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}],fA=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],lA={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},dA=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],mA={button:qm(xm,function(t,n){return e=t,o=n.backstage.shared.providers,KB(e,o,[]);var e,o}),togglebutton:qm(Sm,function(t,n){return e=t,o=n.backstage.shared.providers,JB(e,o,[]);var e,o}),menubutton:qm(wm,function(t,n){return Al(t,"tox-tbtn",n.backstage,ch.none())}),splitbutton:qm(function(t){return ft("SplitButton",TB,t)},function(t,n){return Dm(t,n.backstage.shared)}),styleSelectButton:function(t,n){return e=t,o=n.backstage,Hm(e,o,Ym(e,ih({type:"advanced"},o.styleselect)));var e,o},fontsizeSelectButton:function(t,n){return Hm(e=t,n.backstage,Um(e));var e},fontSelectButton:function(t,n){return Hm(e=t,n.backstage,Lm(e));var e},formatButton:function(t,n){return Hm(e=t,n.backstage,Xm(e));var e},alignMenuButton:function(t,n){return Hm(e=t,n.backstage,Pm(e));var e}},gA={styleselect:mA.styleSelectButton,fontsizeselect:mA.fontsizeSelectButton,fontselect:mA.fontSelectButton,formatselect:mA.formatButton,align:mA.alignMenuButton},pA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},hA={maxHeightFunction:nw(),maxWidthFunction:jD()},vA={onLtr:function(){return[hx,vx,Bo,Eo,Ao,Do,Fk,Ik,$u,Ku,Qu,Ju]},onRtl:function(){return[hx,vx,Ao,Do,Bo,Eo,Fk,Ik,Qu,Ju,$u,Ku]}},bA={onLtr:function(){return[vx,Eo,Do,Bo,Ao,hx,Fk,Ik,$u,Ku,Qu,Ju]},onRtl:function(){return[vx,Do,Eo,Ao,Bo,hx,Fk,Ik,Qu,Ju,$u,Ku]}},yA=function(c,t,e,s){function f(){return Mm(c)}function u(){if(g()&&s.backstage.isContextMenuOpen())return!0;var t,n,e,o,r,i,u=(t=v.get().map(function(t){return t.getBoundingClientRect()}).getOrThunk(function(){return c.selection.getRng().getBoundingClientRect()}),n=c.inline?qe().top():to(Hv.fromDom(c.getBody())).y(),{y:t.top+n,bottom:t.bottom+n}),a=f();return e=u.y,o=u.bottom,r=a.y(),i=a.bottom(),!(Math.max(e,r)<=Math.min(o,i))}function n(){Mk.hide(p)}function o(){h.get().each(function(t){var n=p.element();Ae(n,"display"),u()?Oe(n,"display","none"):aw.positionWithinBounds(e,t,p,ch.some(f()))})}function a(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Po([rk.config({mode:"acyclic"}),_u("pop-dialog-wrap-events",[ly(function(t){c.shortcuts.add("ctrl+F9","focus statusbar",function(){return rk.focusIn(t)})}),dy(function(){c.shortcuts.remove("ctrl+F9")})])])}}function l(t,n){var e,o,r="node"===t?s.backstage.shared.anchors.node(n):s.backstage.shared.anchors.cursor();return Fh(r,(e=t,o=g(),"line"===e?{bubble:Xo(12,0,pA),layouts:{onLtr:function(){return[_o]},onRtl:function(){return[Mo]}},overrides:hA}:{bubble:Xo(0,12,pA),layouts:o?bA:vA,overrides:hA}))}function r(){var t=y();QB(t,c).fold(function(){h.set(ch.none()),Mk.hide(p)},function(t){w(t.toolbarApi,ch.some(t.elem.dom()))})}function i(t){S(),b.set(t)}var d,m,g=Yt().deviceType.isTouch,p=Hy((d={sink:e,onEscape:function(){return c.focus(),ch.some(!0)}},m=Rv([]),Mk.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){m.set([]),Mk.getContent(t).each(function(t){Ae(t.element(),"visibility")}),be(t.element(),oA),Ae(t.element(),"width")},inlineBehaviours:Po([_u("context-toolbar-events",[Cn(Tb(),function(t){Mk.getContent(t).each(function(){}),be(t.element(),oA),Ae(t.element(),"width")}),bn(eA,function(n,e){Ae(n.element(),"width");var t=Xe(n.element());Mk.setContent(n,e.event().contents()),he(n.element(),oA);var o=Xe(n.element());Oe(n.element(),"width",t+"px"),Mk.getContent(n).each(function(t){e.event().focus().bind(function(t){return jo(t),Wo(n.element())}).orThunk(function(){return rk.focusIn(t),Uo()})}),Nk.setTimeout(function(){Oe(n.element(),"width",o+"px")},0)}),bn(tA,function(t,n){Mk.getContent(t).each(function(t){m.set(m.get().concat([{bar:t,focus:Uo()}]))}),on(t,eA,{contents:n.event().forwardContents(),focus:ch.none()})}),bn(nA,function(n){B(m.get()).each(function(t){m.set(m.get().slice(0,m.get().length-1)),on(n,eA,{contents:Ny(t.bar),focus:t.focus})})})]),rk.config({mode:"special",onEscape:function(t){return B(m.get()).fold(function(){return d.onEscape()},function(){return en(t,nA),ch.some(!0)})}})]),lazySink:function(){return lh.value(d.sink)}}))),h=Rv(ch.none()),v=Rv(ch.none()),b=Rv(null),y=F(function(){return ZB(t,function(t){var n=x(t);on(p,tA,{forwardContents:a(n)})})}),x=function(t){var n,e,o=c.ui.registry.getAll().buttons,r=Jc(c)===CO.scrolling?CO.scrolling:CO["default"],i=y();return"contexttoolbar"===t.type?(n=Ih(o,i.formNavigators),e=$m(c,{buttons:n,toolbar:t.items},s,ch.some(["form:"])),ym({type:r,uid:Qn("context-toolbar"),initGroups:e,onEscape:ch.none,cyclicKeying:!0,backstage:s.backstage,getSink:function(){return lh.error("")}})):$B(r,t,s.backstage)};c.on("contexttoolbar-show",function(n){var t=y();Lh(t.lookupTable,n.toolbarKey).each(function(t){w(t,n.target===c?ch.none():ch.some(n)),Mk.getContent(p).each(rk.focusIn)})});var w=function(t,n){if(S(),!g()||!s.backstage.isContextMenuOpen()){var e=x(t),o=n.map(Hv.fromDom),r=l(t.position,o);h.set(ch.some(r)),v.set(n);var i=p.element();Ae(i,"display"),Mk.showWithinBounds(p,r,a(e),function(){return ch.some(f())}),u()&&Oe(i,"display","none")}},S=function(){var t=b.get();null!==t&&(Nk.clearTimeout(t),b.set(null))};c.on("init",function(){c.on(tB,n),c.on("ScrollContent ScrollWindow longpress",o),c.on("click keyup SetContent ObjectResized ResizeEditor",function(){i(Nk.setEditorTimeout(c,r,0))}),c.on("focusout",function(){Nk.setEditorTimeout(c,function(){Wo(e.element()).isNone()&&Wo(p.element()).isNone()&&(h.set(ch.none()),Mk.hide(p))},0)}),c.on("SwitchMode",function(){c.readonly&&(h.set(ch.none()),Mk.hide(p))}),c.on("NodeChange",function(){Wo(p.element()).fold(function(){i(Nk.setEditorTimeout(c,r,0))},function(){})})})},xA=function(t,o,r){function n(n,e){Sh([o,r],function(t){t.broadcastEvent(n,e)})}function e(n,e){Sh([o,r],function(t){t.broadcastOn([n],e)})}function i(t){return e(vw(),{target:t.target()})}function u(t){return e(vw(),{target:Hv.fromDom(t.target)})}function a(t){0===t.button&&e(yw(),{target:Hv.fromDom(t.target)})}function c(t){return n(jb(),BO(t))}function s(t){e(bw(),{}),n(Ub(),BO(t))}function f(){return e(bw(),{})}var l=Dc(Hv.fromDom(w.document),"touchstart",i),d=Dc(Hv.fromDom(w.document),"touchmove",function(t){return n(zb(),t)}),m=Dc(Hv.fromDom(w.document),"touchend",function(t){return n(Lb(),t)}),g=Dc(Hv.fromDom(w.document),"mousedown",i),p=Dc(Hv.fromDom(w.document),"mouseup",function(t){0===t.raw().button&&e(yw(),{target:t.target()})});t.on("PostRender",function(){t.on("click",u),t.on("tap",u),t.on("mouseup",a),t.on("ScrollWindow",c),t.on("ResizeWindow",s),t.on("ResizeEditor",f)}),t.on("remove",function(){t.off("click",u),t.off("tap",u),t.off("mouseup",a),t.off("ScrollWindow",c),t.off("ResizeWindow",s),t.off("ResizeEditor",f),g.unbind(),l.unbind(),d.unbind(),m.unbind(),p.unbind()}),t.on("detach",function(){Wr(o),Wr(r),o.destroy(),r.destroy()})},wA=nS,SA=Zw,kA=nh([_t("shell",!1),vt("makeItem"),_t("setupItem",Q),Dw("listBehaviours",[uk])]),CA=Jw({name:"items",overrides:function(){return{behaviours:Po([uk.config({})])}}}),OA=nh([CA]),TA=Di({name:nh("CustomList")(),configFields:kA(),partFields:OA(),factory:function(s,t){var n=s.shell?{behaviours:[uk.config({})],components:[]}:{behaviours:[],components:t},e=function(t){return s.shell?ch.some(t):vi(t,s,"items")};return{uid:s.uid,dom:s.dom,components:n.components,behaviours:ri(s.listBehaviours,n.behaviours),apis:{setItems:function(a,c){e(a).fold(function(){throw w.console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(n){var t=uk.contents(n),e=c.length,o=e-t.length,r=0<o?function(t,n){for(var e=[],o=0;o<t;o++)e.push(n(o));return e}(o,function(){return s.makeItem()}):[],i=t.slice(e);Sh(i,function(t){return uk.remove(n,t)}),Sh(r,function(t){return uk.append(n,t)});var u=uk.contents(n);Sh(u,function(t,n){s.setupItem(a,t,c[n],n)})})}}}},apis:{setItems:function(t,n,e){t.setItems(n,e)}}}),EA=_h([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),DA=EA.offset,BA=EA.absolute,AA=EA.fixed,_A=_h([{"static":[]},{absolute:["x","y"]},{fixed:["x","y"]}]),MA=function(t,n,e){var o,r,i,u,a,c,s,f;t.getSystem().isConnected()&&(o=t,i=e,u=(r=n).lazyViewport(o),a=o.element(),c=qe(Bn(a)),s=F(function(){return Qm(a)}),(f=i.isDocked())&&vg(o,r,i,u),gg(o,r,u,c,s).each(function(t){i.setDocked(!f),t.fold(function(){return pg(o,r)},function(t,n){return hg(o,r,0,s(),BA(t,n))},function(t,n){vg(o,r,i,u,!0),hg(o,r,0,s(),AA(t,n))})}))},FA=Object.freeze({refresh:MA,reset:yg,isDocked:function(t,n,e){return e.isDocked()}}),IA=Object.freeze({events:function(o,r){return pn([Cn(Tb(),function(n,e){o.contextual.each(function(t){ye(n.element(),t.transitionClass)&&(we(n.element(),[t.transitionClass,t.fadeInClass]),(r.isVisible()?t.onShown:t.onHidden)(n)),e.stop()})}),bn(jb(),function(t){MA(t,o,r)}),bn(Ub(),function(t){yg(t,o,r)})])}}),RA=zo({fields:[At("contextual",[yt("fadeInClass"),yt("fadeOutClass"),yt("transitionClass"),wt("lazyContext"),po("onShow"),po("onShown"),po("onHide"),po("onHidden")]),Ht("lazyViewport",no),yt("leftAttr"),yt("topAttr"),yt("positionAttr"),(rA="modes",iA=["top","bottom"],uA=Av,Mt(rA,iA,rt(uA))),po("onDocked"),po("onUndocked")],name:"docking",active:IA,apis:FA,state:Object.freeze({init:function(){var n=Rv(!1),e=Rv(!0);return _y({isDocked:function(){return n.get()},setDocked:function(t){return n.set(t)},isVisible:function(){return e.get()},setVisible:function(t){return e.set(t)},readState:function(){return"docked:  "+n.get()+", visible: "+e.get()}})}})}),VA={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},HA="tox-tinymce--toolbar-sticky-on",NA="tox-tinymce--toolbar-sticky-off",PA=Object.freeze({setup:function(t,n){t.inline||(t.on("ResizeWindow ResizeEditor ResizeContent",function(){n().each(xg)}),t.on("SkinLoaded",function(){n().each(RA.reset)}),t.on("FullscreenStateChanged",function(){n().each(RA.refresh)})),t.on("PostRender",function(){Sg(t,!1)})},isDocked:function(t){return t().map(RA.isDocked).getOr(!1)},getBehaviours:kg}),zA=Q,LA=eh,jA=nh([]),UA=Object.freeze({setup:zA,isDocked:LA,getBehaviours:jA}),WA=Ei({factory:function(n,o){var t={focus:rk.focusIn,setMenus:function(t,n){var e=y(n,function(n){return Al(wm({type:"menubutton",text:n.text,fetch:function(t){t(n.getItems())}}).mapError(function(t){return Ev(t)}).getOrDie(),"tox-mbtn",o.backstage,ch.some("menuitem"))});uk.set(t,e)}};return{uid:n.uid,dom:n.dom,components:[],behaviours:Po([uk.config({}),_u("menubar-events",[ly(function(t){n.onSetup(t)}),bn(bb(),function(e,t){oo(e.element(),".tox-mbtn--active").each(function(n){ro(t.event().target(),".tox-mbtn").each(function(t){$t(n,t)||e.getSystem().getByDom(n).each(function(n){e.getSystem().getByDom(t).each(function(t){VT.expand(t),VT.close(n),sk.focus(t)})})})})}),bn(qb(),function(e,t){t.event().prevFocus().bind(function(t){return e.getSystem().getByDom(t).toOption()}).each(function(n){t.event().newFocus().bind(function(t){return e.getSystem().getByDom(t).toOption()}).each(function(t){VT.isOpen(n)&&(VT.expand(t),VT.close(n))})})})]),rk.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return n.onEscape(t),ch.some(!0)}}),xT.config({})]),apis:t,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[vt("dom"),vt("uid"),vt("onEscape"),vt("backstage"),_t("onSetup",Q)],apis:{focus:function(t,n){t.focus(n)},setMenus:function(t,n,e){t.setMenus(n,e)}}}),GA="container",XA=[ei("slotBehaviours",[])],YA=function(r,t){function n(){return wi(r)}function e(e,o){return void 0===o&&(o=undefined),function(t,n){return vi(t,r,n).map(function(t){return e(t,n)}).getOr(o)}}function o(t){return"true"!==Xn(t.element(),"aria-hidden")}var i,u=e(o,!1),a=e(function(t,n){if(o(t)){var e=t.element();Oe(e,"display","none"),Gn(e,"aria-hidden","true"),on(t,Kb(),{name:n,visible:!1})}}),c=(i=a,function(n,t){Sh(t,function(t){return i(n,t)})}),s={getSlotNames:n,getSlot:function(t,n){return vi(t,r,n)},isShowing:u,hideSlot:a,hideAllSlots:function(t){return c(t,n())},showSlot:e(function(t,n){if(!o(t)){var e=t.element();Ae(e,"display"),qn(e,"aria-hidden"),on(t,Kb(),{name:n,visible:!0})}})};return{uid:r.uid,dom:r.dom,components:t,behaviours:oi(r.slotBehaviours),apis:s}},qA=V({getSlotNames:function(t,n){return t.getSlotNames(n)},getSlot:function(t,n,e){return t.getSlot(n,e)},isShowing:function(t,n,e){return t.isShowing(n,e)},hideSlot:function(t,n,e){return t.hideSlot(n,e)},hideAllSlots:function(t,n){return t.hideAllSlots(n)},showSlot:function(t,n,e){return t.showSlot(n,e)}},oe),KA=ih(ih({},qA),{sketch:function(t){var e,n=(e=[],{slot:function(t,n){return e.push(t),di(GA,Cg(t),n)},record:function(){return e}}),o=t(n),r=y(n.record(),function(t){return qw({name:t,pname:Cg(t)})});return Ti(GA,XA,r,YA,o)}}),JA=xv([Dt("icon"),Dt("tooltip"),Ht("onShow",Q),Ht("onHide",Q),Ht("onSetup",function(){return Q})]),$A=Qn("FixSizeEvent"),QA=Qn("AutoSizeEvent"),ZA=SA.optional({factory:WA,name:"menubar",schema:[vt("backstage")]}),t_=SA.optional({factory:{sketch:function(t){return TA.sketch({uid:t.uid,dom:t.dom,listBehaviours:Po([rk.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return ym({type:t.split,uid:Qn("multiple-toolbar-item"),backstage:t.backstage,cyclicKeying:!1,getSink:t.getSink,initGroups:[],onEscape:function(){return ch.none()}})},setupItem:function(t,n,e){oB.setGroups(n,e)},shell:!0})}},name:"multiple-toolbar",schema:[vt("dom"),vt("onEscape")]}),n_=SA.optional({factory:{sketch:function(t){return((n=t).split===CO.sliding?bm:n.split===CO.floating?vm:ym)({type:t.split,uid:t.uid,onEscape:function(){return t.onEscape(),ch.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,backstage:t.backstage,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader}});var n}},name:"toolbar",schema:[vt("dom"),vt("onEscape"),vt("getSink")]}),e_=SA.optional({factory:{sketch:function(t){var n=t.editor,e=t.sticky?kg:jA;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Po(e(n,t.getSink))}}},name:"header",schema:[vt("dom")]}),o_=SA.optional({name:"socket",schema:[vt("dom")]}),r_=SA.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Po([xT.config({}),sk.config({}),gB.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){uS.getCurrent(t).each(KA.hideAllSlots),en(t,QA)},onGrown:function(t){en(t,QA)},onStartGrow:function(t){on(t,$A,{width:De(t.element(),"width").getOr("")})},onStartShrink:function(t){on(t,$A,{width:Xe(t.element())+"px"})}}),uk.config({}),uS.config({find:function(t){var n=uk.contents(t);return kh(n)}})])}],behaviours:Po([NE(0),_u("sidebar-sliding-events",[bn($A,function(t,n){Oe(t.element(),"width",n.event().width())}),bn(QA,function(t){Ae(t.element(),"width")})])])}}},name:"sidebar",schema:[vt("dom")]}),i_=SA.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Po([uk.config({})]),components:[]}}},name:"throbber",schema:[vt("dom")]}),u_=Di({name:"OuterContainer",factory:function(e,t){var n={getSocket:function(t){return wA.getPart(t,e,"socket")},setSidebar:function(t,n){wA.getPart(t,e,"sidebar").each(function(t){return Eg(t,n)})},toggleSidebar:function(t,o){wA.getPart(t,e,"sidebar").each(function(t){return n=t,e=o,void uS.getCurrent(n).each(function(n){uS.getCurrent(n).each(function(t){gB.hasGrown(n)?KA.isShowing(t,e)?gB.shrink(n):(KA.hideAllSlots(t),KA.showSlot(t,e)):(KA.hideAllSlots(t),KA.showSlot(t,e),gB.grow(n))})});var n,e})},whichSidebar:function(t){return wA.getPart(t,e,"sidebar").bind(Dg).getOrNull()},getHeader:function(t){return wA.getPart(t,e,"header")},getToolbar:function(t){return wA.getPart(t,e,"toolbar")},setToolbar:function(t,n){wA.getPart(t,e,"toolbar").each(function(t){t.getApis().setGroups(t,n)})},setToolbars:function(t,n){wA.getPart(t,e,"multiple-toolbar").each(function(t){TA.setItems(t,n)})},refreshToolbar:function(t){wA.getPart(t,e,"toolbar").each(function(t){return t.getApis().refresh(t)})},getMoreButton:function(t){return wA.getPart(t,e,"toolbar").bind(function(t){return t.getApis().getMoreButton(t)})},getThrobber:function(t){return wA.getPart(t,e,"throbber")},focusToolbar:function(t){wA.getPart(t,e,"toolbar").orThunk(function(){return wA.getPart(t,e,"multiple-toolbar")}).each(function(t){rk.focusIn(t)})},setMenubar:function(t,n){wA.getPart(t,e,"menubar").each(function(t){WA.setMenus(t,n)})},focusMenubar:function(t){wA.getPart(t,e,"menubar").each(function(t){WA.focus(t)})}};return{uid:e.uid,dom:e.dom,components:t,apis:n,behaviours:e.behaviours}},configFields:[vt("dom"),vt("behaviours")],partFields:[e_,ZA,n_,t_,o_,r_,i_],apis:{getSocket:function(t,n){return t.getSocket(n)},setSidebar:function(t,n,e){t.setSidebar(n,e)},toggleSidebar:function(t,n,e){t.toggleSidebar(n,e)},whichSidebar:function(t,n){return t.whichSidebar(n)},getHeader:function(t,n){return t.getHeader(n)},getToolbar:function(t,n){return t.getToolbar(n)},setToolbar:function(t,n,e){var o=y(e,function(t){return gm(t)});t.setToolbar(n,o)},setToolbars:function(t,n,e){var o=y(e,function(t){return y(t,gm)});t.setToolbars(n,o)},getMoreButton:function(t,n){return t.getMoreButton(n)},refreshToolbar:function(t,n){return t.refreshToolbar(n)},getThrobber:function(t,n){return t.getThrobber(n)},setMenubar:function(t,n,e){t.setMenubar(n,e)},focusMenubar:function(t,n){t.focusMenubar(n)},focusToolbar:function(t,n){t.focusToolbar(n)}}}),a_={file:{title:"File",items:"newdocument restoredraft | preview | print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},c_=function(t){function n(){t._skinLoaded=!0,cO(t)}return function(){t.initialized?n():t.on("init",n)}},s_=m(Mg,!1),f_=m(Mg,!0),l_=zC.DOM,d_=Yt(),m_=d_.os.isiOS()&&d_.os.version.major<=12,g_={
render:function(e,o,t,n,r){var i,u,a=Rv(0);s_(e),i=Hv.fromDom(r.targetNode),u=o.mothership,lw(i,u,Hn),Ur(cy(),o.uiMothership),e.on("PostRender",function(){Fg(e,o,t,n),a.set(e.getWin().innerWidth),u_.setMenubar(o.outerContainer,_g(e,t)),u_.setSidebar(o.outerContainer,t.sidebar),function(r){function t(t){var n=r.getDoc().documentElement,e=u.get(),o=a.get();e.left()!==i.innerWidth||e.top()!==i.innerHeight?(u.set(Ly(i.innerWidth,i.innerHeight)),lO(r,t)):o.left()===n.offsetWidth&&o.top()===n.offsetHeight||(a.set(Ly(n.offsetWidth,n.offsetHeight)),lO(r,t))}function n(t){return fO(r,t)}var i=r.getWin(),e=r.getDoc().documentElement,u=Rv(Ly(i.innerWidth,i.innerHeight)),a=Rv(Ly(e.offsetWidth,e.offsetHeight));l_.bind(i,"resize",t),l_.bind(i,"scroll",n);var o=Bc(Hv.fromDom(r.getBody()),"load",t);r.on("remove",function(){o.unbind(),l_.unbind(i,"resize",t),l_.unbind(i,"scroll",n)})}(e)});var c,s,f,l=u_.getSocket(o.outerContainer).getOrDie("Could not find expected socket element");if(!0===m_){Te(l.element(),{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var d=(c=function(){e.fire("ScrollContent")},s=20,f=null,{cancel:function(){null!==f&&(w.clearTimeout(f),f=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===f&&(f=w.setTimeout(function(){c.apply(null,t),f=null},s))}});Dc(l.element(),"scroll",d.throttle)}lm(e,o),e.addCommand("ToggleSidebar",function(t,n){u_.toggleSidebar(o.outerContainer,n),e.fire("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",function(){return u_.whichSidebar(o.outerContainer)});var m=Jc(e);return m!==CO.sliding&&m!==CO.floating||e.on("ResizeWindow ResizeEditor ResizeContent",function(){var t=e.getWin().innerWidth;t!==a.get()&&(u_.refreshToolbar(o.outerContainer),a.set(t))}),{iframeContainer:l.element().dom(),editorContainer:o.outerContainer.element().dom()}}},p_=function(n,t,e){var o=t.filter(function(t){return n<t}),r=e.filter(function(t){return t<n});return o.or(r).getOr(n)},h_=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?ch.some(parseInt(""+t,10)):ch.none()},v_=function(t){return vh(t)?t+"px":t},b_={render:function(n,i,e,o,t){function r(t){void 0===t&&(t=!1),h&&u_.refreshToolbar(i.outerContainer),l||function(t){var n=h?t.fold(function(){return 0},function(t){return 1<t.components().length?je(t.components()[1].element()):0}):0,e=Ge(m),o=e.top()-je(s.element())+n;Te(i.outerContainer.element(),{position:"absolute",top:Math.round(o)+"px",left:Math.round(e.left())+"px"});var r=g.getOrThunk(function(){var t=h_(Ee(cy(),"margin-left")).getOr(0);return Xe(cy())-e.left()+t});Oe(s.element(),"max-width",r+"px")}(u_.getToolbar(i.outerContainer)),d&&(t?RA.reset(s):RA.refresh(s))}function u(){Oe(i.outerContainer.element(),"display","flex"),f.addClass(n.getBody(),"mce-edit-focus"),Ae(i.uiMothership.element(),"display"),r()}function a(){i.outerContainer&&(Oe(i.outerContainer.element(),"display","none"),f.removeClass(n.getBody(),"mce-edit-focus")),Oe(i.uiMothership.element(),"display","none")}function c(){if(s)u();else{s=u_.getHeader(i.outerContainer).getOrDie();var t=$c(n).getOr(cy());Ur(t,i.mothership),Ur(t,i.uiMothership),Fg(n,i,e,o),u_.setMenubar(i.outerContainer,_g(n,e)),u(),n.on("activate",u),n.on("deactivate",a),n.on("NodeChange SkinLoaded ResizeWindow",function(){n.hidden||r(!0)}),n.nodeChanged()}}var s,f=zC.DOM,l=Qc(n),d=ts(n),m=Hv.fromDom(t.targetNode),g=Gc(n).or(Rg(n)),p=Jc(n),h=p===CO.sliding||p===CO.floating;return f_(n),n.on("focus",c),n.on("blur hide",a),n.on("init",function(){n.hasFocus()&&c()}),lm(n,i),{editorContainer:i.outerContainer.element().dom()}}},y_=function(n){SD.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,onAction:function(){return n.execCommand(t.cmd)},icon:t.icon,onSetup:Im(n,t.name)})});var t="alignnone",e="No alignment",o="JustifyNone",r="align-none";n.ui.registry.addButton(t,{tooltip:e,onAction:function(){return n.execCommand(o)},icon:r})},x_=function(t){var n;Hg(t),n=t,SD.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(t){n.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return n.execCommand(t.action)}})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:Vg(n,"code")})},w_=function(t){var n,e;(e=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return Ng(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return Ng(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return Ng(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return Ng(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},S_=function(t){var n,e;(e=t).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return e.execCommand("mceToggleVisualAid")}}),(n=t).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(n,t){function e(t){n.setActive(t.hasVisual)}return n.setActive(t.hasVisual),t.on("VisualAid",e),function(){return t.off("VisualAid",e)}}(t,n)},onAction:function(){n.execCommand("mceToggleVisualAid")}})},k_=function(t){var n;(n=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(t,n){function e(){t.setDisabled(!n.queryCommandState("outdent"))}return t.setDisabled(!n.queryCommandState("outdent")),n.on("NodeChange",e),function(){return n.off("NodeChange",e)}}(t,n)},onAction:function(){return n.execCommand("outdent")}}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return n.execCommand("indent")}})},C_=function(t,n){var e,o,r,i,u,a,c,s,f,l,d,m;m=Vm(0,d=n,Pm(l=t)),l.ui.registry.addNestedMenuItem("align",{text:d.shared.providers.translate("Align"),getSubmenuItems:function(){return m.items.validateItems(m.getStyleItems())}}),f=Vm(0,s=n,Lm(c=t)),c.ui.registry.addNestedMenuItem("fontformats",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:function(){return f.items.validateItems(f.getStyleItems())}}),a=Vm(0,n,Ym(u=t,ih({type:"advanced"},n.styleselect))),u.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return a.items.validateItems(a.getStyleItems())}}),i=Vm(0,n,Xm(r=t)),r.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}}),o=Vm(0,n,Um(e=t)),e.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},O_=function(t,n){y_(t),x_(t),C_(t,n),w_(t),gO.register(t),S_(t),k_(t)},T_=function(t){return{anchor:"selection",root:Hv.fromDom(t.selection.getNode())}},E_={onLtr:function(){return[vx,Eo,Do,Bo,Ao,hx,Fk,Ik,$u,Ku,Qu,Ju]},onRtl:function(){return[vx,Do,Eo,Ao,Bo,hx,Fk,Ik,Qu,Ju,$u,Ku]}},D_={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},B_=function(t){return t.settings.contextmenu_never_use_native||!1},A_=function(t){return e="contextmenu",o="link linkchecker image imagetools table spellchecker configurepermanentpen",r=(n=t).ui.registry.getAll().contextMenus,M(n.settings,e).map(Yg).getOrThunk(function(){return x(Yg(o),function(t){return Ah(r,t)})});var n,e,o,r},__=function(t){return!1===t.getParam("contextmenu")},M_={type:"separator"},F_=function(n){if(dh(n))return n;switch(n.type){case"separator":return M_;case"submenu":return{type:"nestedmenuitem",text:n.text,icon:n.icon,getSubmenuItems:function(){var t=n.getSubmenuItems();return dh(t)?t:y(t,F_)}};default:return{type:"menuitem",text:n.text,icon:n.icon,onAction:(t=n.onAction,function(){return t()})}}var t},I_="data-initial-z-index",R_=function(t,n,d,m,g){var e=n.getSnapPoints(t);return op(e,d,m,g).orThunk(function(){return S(e,function(n,e){var t,o,r,i,u,a,c,s,f=e.sensor(),l=(t=d,o=f,e.range().left(),e.range().top(),u=og(t,r=m,i=g),a=og(o,r,i),c=Math.abs(u.left()-a.left()),s=Math.abs(u.top()-a.top()),Ly(c,s));return n.deltas.fold(function(){return{deltas:ch.some(l),snap:ch.some(e)}},function(t){return(l.left()+l.top())/2<=(t.left()+t.top())/2?{deltas:ch.some(l),snap:ch.some(e)}:n})},{deltas:ch.none(),snap:ch.none()}).snap.map(function(t){return{output:nh(ug(t.output(),d,m,g)),extra:t.extra}})})},V_=function(t,n,e,o,r){return op(n.getSnapPoints(t),e,o,r)},H_=At("snaps",[vt("getSnapPoints"),po("onSensor"),vt("leftAttr"),vt("topAttr"),_t("lazyViewport",no),_t("mustSnap",!1)]),N_=Object.freeze({getData:function(t){return ch.from(Ly(t.x(),t.y()))},getDelta:function(t,n){return Ly(n.left()-t.left(),n.top()-t.top())}}),P_=[_t("useFixed",eh),vt("blockerClass"),_t("getTarget",l),_t("onDrag",Q),_t("repositionTarget",!0),po("onDrop"),Ht("getBounds",no),H_,yo("dragger",{handlers:function(a,c){function s(t){c.setStartData(up(a,t))}return pn([bn(jb(),function(t){c.getStartData().each(function(){return s(t)})}),bn(gb(),function(n,t){if(0===t.event().raw().button){t.stop();var e=function(){return cp(n,ch.some(i),a,c)},o=_c(e,200),r={drop:e,delayDrop:o.schedule,forceDrop:e,move:function(t){o.cancel(),ap(n,a,c,N_,t)}},i=Zg(n,a.blockerClass,(u=r,pn([bn(gb(),u.forceDrop),bn(vb(),u.drop),bn(pb(),function(t,n){u.move(n.event())}),bn(hb(),u.delayDrop)])));s(n),$g(n,i)}var u})])}})],z_=Object.freeze({getData:function(t){var n,e=t.raw().touches;return 1===e.length?(n=e[0],ch.some(Ly(n.clientX,n.clientY))):ch.none()},getDelta:function(t,n){return Ly(n.left()-t.left(),n.top()-t.top())}}),L_=P_,j_=[_t("useFixed",eh),vt("blockerClass"),_t("getTarget",l),_t("onDrag",Q),_t("repositionTarget",!0),_t("onDrop",Q),Ht("getBounds",no),H_,yo("dragger",{handlers:function(u,a){function c(t){a.setStartData(up(u,t))}var s=Rv(ch.none());return pn([bn(jb(),function(t){a.getStartData().each(function(){return c(t)})}),bn(fb(),function(n,t){function e(){cp(n,s.get(),u,a),s.set(ch.none())}t.stop();var o,r={drop:e,delayDrop:function(){},forceDrop:e,move:function(t){ap(n,u,a,z_,t)}},i=Zg(n,u.blockerClass,(o=r,pn([bn(fb(),o.forceDrop),bn(db(),o.drop),bn(mb(),o.drop),bn(lb(),function(t,n){o.move(n.event())})])));s.set(ch.some(i)),c(n),$g(n,i)}),bn(lb(),function(t,n){n.stop(),ap(t,u,a,z_,n.event())}),bn(db(),function(t){cp(t,s.get(),u,a),s.set(ch.none())}),bn(mb(),function(t){cp(t,s.get(),u,a),s.set(ch.none())})])}})],U_=Object.freeze({mouse:L_,touch:j_}),W_=Object.freeze({init:function(){var i=ch.none(),n=ch.none(),t=nh({});return _y({readState:t,reset:function(){i=ch.none(),n=ch.none()},update:function(r,t){return r.getData(t).bind(function(t){return n=r,e=t,o=i.map(function(t){return n.getDelta(t,e)}),i=ch.some(e),o;var n,e,o})},getStartData:function(){return n},setStartData:function(t){n=ch.some(t)}})}}),G_=Object.freeze({snapTo:function(t,n,e,o){var r,i,u,a=n.getTarget(t.element());if(n.repositionTarget){var c=qe(Bn(t.element())),s=Qm(a);Te(a,ig((i=c,u=s,{coord:ug((r=o).output(),r.output(),i,u),extra:r.extra()}).coord,0,s))}}}),X_=Lo({branchKey:"mode",branches:U_,name:"dragging",active:{events:function(t,n){return t.dragger.handlers(t,n)}},extra:{snap:Dn(["sensor","range","output"],["extra"])},state:W_,apis:G_}),Y_=Yt(),q_=function(s,e){function n(t){var n=to(t);return sp(g.getOpt(e),t,n.x(),n.y(),n.width(),n.height())}function o(t){var n=to(t);return sp(p.getOpt(e),t,n.right(),n.bottom(),n.width(),n.height())}function r(t,c,n,e){var o=n(c);X_.snapTo(t,o),function(t,n,e,o){var r=c.dom().getBoundingClientRect();Ae(t.element(),"display");var i=_n(Hv.fromDom(s.getBody())).dom().innerHeight,u=e(r),a=o(r,i);(u||a)&&Oe(t.element(),"display","none")}(t,0,function(t){return t[e]<0},function(t,n){return t[e]>n})}function i(t){return r(h,t,n,"top")}function u(t){return r(v,t,o,"bottom")}var a=Rv([]),c=Rv([]),t=Rv(!1),f=Rv(ch.none()),l=Rv(ch.none()),d=fp(function(){return y(a.get(),function(t){return n(t)})},f,function(n){l.get().each(function(t){s.fire("TableSelectorChange",{start:n,finish:t})})}),m=fp(function(){return y(c.get(),function(t){return o(t)})},l,function(n){f.get().each(function(t){s.fire("TableSelectorChange",{start:t,finish:n})})}),g=lp(d),p=lp(m),h=Hy(g.asSpec()),v=Hy(p.asSpec());Y_.deviceType.isTouch()&&(s.on("TableSelectionChange",function(n){t.get()||(Pr(e,h),Pr(e,v),t.set(!0)),f.set(ch.some(n.start)),l.set(ch.some(n.finish)),n.otherCells.each(function(t){a.set(t.upOrLeftCells),c.set(t.downOrRightCells),i(n.start),u(n.finish)})}),s.on("resize ScrollContent",function(){f.get().each(i),l.get().each(u)}),s.on("TableSelectionClear",function(){t.get()&&(Lr(h),Lr(v),t.set(!1)),f.set(ch.none()),l.set(ch.none())}))};(cA=aA=aA||{})[cA.None=0]="None",cA[cA.Both=1]="Both",cA[cA.Vertical=2]="Vertical";var K_,J_,$_,Q_,Z_,tM=function(i,u){return u.delimiter||(u.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Po([rk.config({mode:"flow",selector:"div[role=button]"}),xT.config({}),uk.config({}),_u("elementPathEvents",[ly(function(r){i.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return rk.focusIn(r)}),i.on("NodeChange",function(t){var n,o,e=function(t){for(var n=[],e=t.length;0<e--;){var o=t[e];if(1===o.nodeType&&!mp(o)){var r=i.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(r.isDefaultPrevented()||n.push({name:r.name,element:o}),r.isPropagationStopped())break}}return n}(t.parents);0<e.length&&uk.set(r,(n=y(e||[],function(t,n){return Rk.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":n,"tab-index":-1,"aria-level":n+1},innerHtml:t.name},action:function(){i.focus(),i.selection.select(t.element),i.nodeChanged()}})}),o={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+u.delimiter+" "}},S(n.slice(1),function(t,n){var e=t;return e.push(o),e.push(n),e},[n[0]])))})})])]),components:[]}},nM=function(m){function g(){return e.bind(u_.getHeader)}function p(){return lh.value(x)}function t(){return e.bind(function(t){return u_.getMoreButton(t)}).getOrDie("Could not find more button element")}function h(){return e.bind(function(t){return u_.getThrobber(t)}).getOrDie("Could not find throbber element")}function v(){var t,n=v_(Ig(m)),e=v_(Rg(t=m).getOr(jc(t)));return m.inline||(Be("div","width",e)&&Oe(M.element(),"width",e),Be("div","height",n)?Oe(M.element(),"height",n):Oe(M.element(),"height","200px")),n}var n=m.inline,b=n?b_:g_,y=ts(m)?PA:UA,e=ch.none(),o=Yt(),r=o.browser.isIE()?["tox-platform-ie"]:[],i=o.deviceType.isTouch()?["tox-platform-touch"]:[],u=mC.isRtl()?{attributes:{dir:"rtl"}}:{},x=Hy({dom:ih({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(r).concat(i)},u),behaviours:Po([aw.config({useFixed:function(){return y.isDocked(g)}})])}),a=Zu({dom:{tag:"div",classes:["tox-anchorbar"]}}),w=zd(x,m,function(){return e.bind(function(t){return a.getOpt(t)}).getOrDie("Could not find a anchor bar element")},t),c=u_.parts().menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:w,onEscape:function(){m.focus()}}),s=Jc(m),f=u_.parts().toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:p,backstage:w,onEscape:function(){m.focus()},split:s,lazyToolbar:function(){return e.bind(function(t){return u_.getToolbar(t)}).getOrDie("Could not find more toolbar element")},lazyMoreButton:t,lazyHeader:function(){return g().getOrDie("Could not find header element")}}),l=u_.parts()["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},onEscape:function(){},split:s}),d=u_.parts().socket({dom:{tag:"div",classes:["tox-edit-area"]}}),S=u_.parts().sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),k=u_.parts().throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:w}),C=m.getParam("statusbar",!0,"boolean")&&!n?ch.some(gp(m,w.shared.providers)):ch.none(),O={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[d,S]},T=PO(m),E=qc(m),D=Yc(m),B=R([[{dom:{tag:"div",classes:["tox-editor-container"]},components:R([[u_.parts().header({dom:{tag:"div",classes:["tox-editor-header"]},components:R([D?[c]:[],T?[l]:E?[f]:[],Qc(m)?[]:[a.asSpec()]]),sticky:ts(m),editor:m,getSink:p})],n?[]:[O]])}],n?[]:C.toArray(),[k]]),A=Zc(m),_=ih(ih({role:"application"},mC.isRtl()?{dir:"rtl"}:{}),A?{"aria-hidden":"true"}:{}),M=Hy(u_.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(i).concat(r),styles:ih({visibility:"hidden"},A?{opacity:"0",border:"0"}:{}),attributes:_},components:B,behaviours:Po([rk.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));e=ch.some(M),m.shortcuts.add("alt+F9","focus menubar",function(){u_.focusMenubar(M)}),m.shortcuts.add("alt+F10","focus toolbar",function(){u_.focusToolbar(M)});var F=zc(M),I=zc(x);return xA(m,F,I),WO(m),{mothership:F,uiMothership:I,backstage:w,renderUI:function(){var o,r;y.setup(m,g),O_(m,w),Jg(m,p,w),r=(o=m).ui.registry.getAll().sidebars,Sh(Oh(r),function(n){function e(){return ch.from(o.queryCommandValue("ToggleSidebar")).is(n)}var t=r[n];o.ui.registry.addToggleButton(n,{icon:t.icon,tooltip:t.tooltip,onAction:function(t){o.execCommand("ToggleSidebar",!1,n),t.setActive(e())},onSetup:function(t){function n(){return t.setActive(e())}return o.on("ToggleSidebar",n),function(){o.off("ToggleSidebar",n)}}})}),function(e,n,o){function r(t){t!==i.get()&&(Bg(n(),t,o.providers),i.set(t))}var i=Rv(!1),u=Rv(ch.none());e.on("ProgressState",function(t){if(u.get().each(Nk.clearTimeout),vh(t.time)){var n=Nk.setEditorTimeout(e,function(){return r(t.state)},t.time);u.set(ch.some(n))}else r(t.state),u.set(ch.none())})}(m,h,w.shared);var t=m.ui.registry.getAll(),n=t.buttons,e=t.menuItems,i=t.contextToolbars,u=t.sidebars,a=Kc(m),c={menuItems:e,menus:m.settings.menu?V(m.settings.menu,function(t){return Ih(t,{items:t.items})}):{},menubar:m.settings.menubar,toolbar:a.getOrThunk(function(){return m.getParam("toolbar",!0)}),buttons:n,sidebar:u};yA(m,i,x,{backstage:w}),q_(m,x);var s=m.getElement(),f=v(),l={mothership:F,uiMothership:I,outerContainer:M},d={targetNode:s,height:f};return b.render(m,l,c,w,d)},getUi:function(){return{channels:{broadcastAll:I.broadcast,broadcastOn:I.broadcastOn,register:function(){}}}}}},eM=function(t,n){Gn(t,"aria-labelledby",ch.from(Xn(t,"id")).fold(function(){var t=Qn("dialog-label");return Gn(n,"id",t),t},l))},oM=nh([vt("lazySink"),Ot("dragBlockClass"),Ht("getBounds",no),_t("useTabstopAt",nh(!0)),_t("eventOrder",{}),ei("modalBehaviours",[rk]),ho("onExecute"),bo("onEscape")]),rM={sketch:l},iM=nh([Jw({name:"draghandle",overrides:function(t,n){return{behaviours:Po([X_.config({mode:"mouse",getTarget:function(t){return eo(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(n,null,2)).message),getBounds:t.getDragBounds})])}}}),qw({schema:[vt("dom")],name:"title"}),qw({factory:rM,schema:[vt("dom")],name:"close"}),qw({factory:rM,schema:[vt("dom")],name:"body"}),Jw({factory:rM,schema:[vt("dom")],name:"footer"}),Kw({factory:{sketch:function(t,n){return ih(ih({},t),{dom:n.dom,components:n.components})}},schema:[_t("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),_t("components",[])],name:"blocker"})]),uM=Di({name:"ModalDialog",configFields:oM(),partFields:iM(),factory:function(o,t,n,e){var r=Qn("alloy.dialog.busy"),a=Qn("alloy.dialog.idle"),c=Po([rk.config({mode:"special",onTab:function(){return ch.some(!0)},onShiftTab:function(){return ch.some(!0)}}),sk.config({})]),i=Qn("modal-events"),u=ih(ih({},o.eventOrder),{"alloy.system.attached":[i].concat(o.eventOrder["alloy.system.attached"]||[])});return{uid:o.uid,dom:o.dom,components:t,apis:{show:function(i){var t=o.lazySink(i).getOrDie(),u=Rv(ch.none()),n=e.blocker();Pr(t,t.getSystem().build(ih(ih({},n),{components:n.components.concat([Ny(i)]),behaviours:Po([sk.config({}),_u("dialog-blocker-events",[Cn(yb(),function(){rk.focusIn(i)}),bn(a,function(){Yn(i.element(),"aria-busy")&&(qn(i.element(),"aria-busy"),u.get().each(function(t){return uk.remove(i,t)}))}),bn(r,function(t,n){Gn(i.element(),"aria-busy","true");var e=n.event().getBusySpec();u.get().each(function(t){uk.remove(i,t)});var o=e(i,c),r=t.getSystem().build(o);u.set(ch.some(r)),uk.append(i,Ny(r)),r.hasConfigured(rk)&&rk.focusIn(r)})])])}))),rk.focusIn(i)},hide:function(n){Mn(n.element()).each(function(t){n.getSystem().getByDom(t).each(function(t){Lr(t)})})},getBody:function(t){return bi(t,o,"body")},getFooter:function(t){return bi(t,o,"footer")},setIdle:function(t){en(t,a)},setBusy:function(t,n){on(t,r,{getBusySpec:n})}},eventOrder:u,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ri(o.modalBehaviours,[uk.config({}),rk.config({mode:"cyclic",onEnter:o.onExecute,onEscape:o.onEscape,useTabstopAt:o.useTabstopAt}),_u(i,[ly(function(t){var n,e;eM(t.element(),bi(t,o,"title").element()),n=t.element(),e=bi(t,o,"body").element(),Gn(n,"aria-describedby",ch.from(Xn(n,"id")).fold(function(){var t=Qn("dialog-describe");return Gn(e,"id",t),t},l))})])])}},apis:{show:function(t,n){t.show(n)},hide:function(t,n){t.hide(n)},getBody:function(t,n){return t.getBody(n)},getFooter:function(t,n){return t.getFooter(n)},setBusy:function(t,n,e){t.setBusy(n,e)},setIdle:function(t,n){t.setIdle(n)}}}),aM=[yt("type"),yt("text"),xt("level",["info","warn","error","success"]),yt("icon"),_t("url","")],cM=xv(aM),sM=[yt("type"),yt("text"),Vt("disabled",!1),Vt("primary",!1),Cv("name","name",Nh(function(){return Qn("button-name")}),Av),Dt("icon"),Vt("borderless",!1)],fM=xv(sM),lM=[yt("type"),yt("name"),yt("label"),Vt("disabled",!1)],dM=xv(lM),mM=_v,gM=[yt("type"),yt("name")],pM=gM.concat([Dt("label")]),hM=xv(pM),vM=Av,bM=xv(pM),yM=Av,xM=xv(pM),wM=rt(Ov),SM=pM.concat([Vt("sandboxed",!0)]),kM=xv(SM),CM=Av,OM=pM.concat([Dt("inputMode"),Dt("placeholder"),Vt("maximized",!1),Vt("disabled",!1)]),TM=xv(OM),EM=Av,DM=pM.concat([kt("items",[yt("text"),yt("value")]),Ft("size",1),Vt("disabled",!1)]),BM=xv(DM),AM=Av,_M=pM.concat([Vt("constrain",!0),Vt("disabled",!1)]),MM=xv(_M),FM=xv([yt("width"),yt("height")]),IM=pM.concat([Dt("placeholder"),Vt("maximized",!1),Vt("disabled",!1)]),RM=xv(IM),VM=Av,HM=pM.concat([Rt("filetype","file",["image","media","file"]),_t("disabled",!1)]),NM=xv(HM),PM=xv([yt("value"),_t("meta",{})]),zM=gM.concat([It("tag","textarea"),yt("scriptId"),yt("scriptUrl"),(K_="settings",J_=undefined,Mt(K_,J_,Iv))]),LM=gM.concat([It("tag","textarea"),wt("init")]),jM=ct(function(t){return ft("customeditor.old",ot(LM),t).orThunk(function(){return ft("customeditor.new",ot(zM),t)})}),UM=Av,WM=[yt("type"),yt("html"),Rt("presets","presentation",["presentation","document"])],GM=xv(WM),XM=pM.concat([bt("currentState",xv([vt("blob"),yt("url")]))]),YM=xv(XM),qM=pM.concat([_t("columns","auto")]),KM=xv(qM),JM=($_=[yt("value"),yt("text"),yt("icon")],Sv($_)),$M=[yt("type"),Ct("header",Av),Ct("cells",rt(Av))],QM=xv($M),ZM=Tv(function(){return mt("type",{alertbanner:cM,bar:xv((n=hp("bar"),[yt("type"),n])),button:fM,checkbox:dM,colorinput:hM,colorpicker:bM,dropzone:xM,grid:xv(pp(hp("grid"))),iframe:kM,input:TM,selectbox:BM,sizeinput:MM,textarea:RM,urlinput:NM,customeditor:jM,htmlpanel:GM,imagetools:YM,collection:KM,label:xv((t=hp("label"),[yt("type"),yt("label"),t])),table:QM,panel:nF});var t,n}),tF=[yt("type"),_t("classes",[]),Ct("items",ZM)],nF=xv(tF),eF=[Cv("name","name",Nh(function(){return Qn("tab-name")}),Av),yt("title"),Ct("items",ZM)],oF=[yt("type"),kt("tabs",eF)],rF=xv(oF),iF=xv([yt("type"),yt("name"),Vt("active",!1)].concat(Zk)),uF=_v,aF=[Cv("name","name",Nh(function(){return Qn("button-name")}),Av),Dt("icon"),Rt("align","end",["start","end"]),Vt("primary",!1),Vt("disabled",!1)],cF=b(aF,[yt("text")]),sF=b([xt("type",["submit","cancel","custom"])],cF),fF=cF,lF=gt("type",{submit:sF,cancel:sF,custom:sF,menu:b([xt("type",["menu"]),Dt("text"),Dt("tooltip"),Dt("icon"),Ct("items",iF),Ht("onSetup",function(){return Q})],aF)}),dF=xv([yt("title"),bt("body",mt("type",{panel:nF,tabpanel:rF})),It("size","normal"),Ct("buttons",lF),_t("initialData",{}),Ht("onAction",Q),Ht("onChange",Q),Ht("onSubmit",Q),Ht("onClose",Q),Ht("onCancel",Q),_t("onTabChange",Q)]),mF=function(t){return mh(t)?[t].concat(O(_(t),mF)):gh(t)?O(t,mF):[]},gF={checkbox:mM,colorinput:vM,colorpicker:yM,dropzone:wM,input:EM,iframe:CM,sizeinput:FM,selectbox:AM,size:FM,textarea:VM,urlinput:PM,customeditor:UM,collection:JM,togglemenuitem:uF},pF=xv(b([xt("type",["cancel","custom"])],fF)),hF=xv([yt("title"),yt("url"),Et("height"),Et("width"),(Q_="buttons",Z_=pF,Tt(Q_,rt(Z_))),Ht("onAction",Q),Ht("onCancel",Q),Ht("onClose",Q),Ht("onMessage",Q)]),vF={open:function(t,n){var e=yp(n);return t(e.internalDialog,e.initialData,e.dataValidator)},openUrl:function(t,n){return t(lt(ft("dialog",hF,n)))},redial:function(t){return yp(t)}},bF=Ei({name:"TabButton",configFields:[_t("uid",undefined),vt("value"),Cv("dom","dom",Ph(function(){return{attributes:{role:"tab",id:Qn("aria"),"aria-selected":"false"}}}),Dv()),Ot("action"),_t("domModification",{}),ei("tabButtonBehaviours",[sk,rk,Ew]),vt("view")],factory:function(t){return{uid:t.uid,dom:t.dom,components:t.components,events:zu(t.action),behaviours:ri(t.tabButtonBehaviours,[sk.config({}),rk.config({mode:"execution",useSpace:!0,useEnter:!0}),Ew.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),yF=nh([vt("tabs"),vt("dom"),_t("clickToDismiss",!1),ei("tabbarBehaviours",[mS,rk]),mo(["tabClass","selectedClass"])]),xF=$w({factory:bF,name:"tabs",unit:"tab",overrides:function(o){function r(t,n){mS.dehighlight(t,n),on(t,$b(),{tabbar:t,button:n})}function i(t,n){mS.highlight(t,n),on(t,Jb(),{tabbar:t,button:n})}return{action:function(t){var n=t.getSystem().getByUid(o.uid).getOrDie(),e=mS.isHighlighted(n,t);(e&&o.clickToDismiss?r:e?Q:i)(n,t)},domModification:{classes:[o.markers.tabClass]}}}}),wF=nh([xF]),SF=Di({name:"Tabbar",configFields:yF(),partFields:wF(),factory:function(t,n){return{uid:t.uid,dom:t.dom,components:n,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ri(t.tabbarBehaviours,[mS.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,n){Gn(n.element(),"aria-selected","true")},onDehighlight:function(t,n){Gn(n.element(),"aria-selected","false")}}),rk.config({mode:"flow",getInitial:function(t){return mS.getHighlighted(t).map(function(t){return t.element()})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),kF=Ei({name:"Tabview",configFields:[ei("tabviewBehaviours",[uk])],factory:function(t){return{uid:t.uid,dom:t.dom,behaviours:ri(t.tabviewBehaviours,[uk.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),CF=nh([_t("selectFirst",!0),po("onChangeTab"),po("onDismissTab"),_t("tabs",[]),ei("tabSectionBehaviours",[])]),OF=qw({factory:SF,schema:[vt("dom"),St("markers",[vt("tabClass"),vt("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),TF=qw({factory:kF,name:"tabview"}),EF=nh([OF,TF]),DF=Di({name:"TabSection",configFields:CF(),partFields:EF(),factory:function(i,t){function n(t,n){vi(t,i,"tabbar").each(function(t){n(t).each(rn)})}return{uid:i.uid,dom:i.dom,components:t,behaviours:oi(i.tabSectionBehaviours),events:pn(R([i.selectFirst?[ly(function(t){n(t,mS.getFirst)})]:[],[bn(Jb(),function(t,n){var o,r;o=n.event().button(),r=Ew.getValue(o),vi(o,i,"tabview").each(function(e){k(i.tabs,function(t){return t.value===r}).each(function(t){var n=t.view();Gn(e.element(),"aria-labelledby",Xn(o.element(),"id")),uk.set(e,n),i.onChangeTab(e,o,n)})})}),bn($b(),function(t,n){var e=n.event().button();i.onDismissTab(t,e)})]])),apis:{getViewItems:function(t){return vi(t,i,"tabview").map(function(t){return uk.contents(t)}).getOr([])},showTab:function(t,e){n(t,function(n){return k(mS.getCandidates(n),function(t){return Ew.getValue(t)===e}).filter(function(t){return!mS.isHighlighted(n,t)})})}}}},apis:{getViewItems:function(t,n){return t.getViewItems(n)},showTab:function(t,n,e){t.showTab(n,e)}}}),BF="send-data-to-section",AF="send-data-to-view",_F=Qn("update-dialog"),MF=Qn("update-title"),FF=Qn("update-body"),IF=Qn("update-footer"),RF=Qn("body-send-message"),VF=function(r,t){function n(t,o){return bn(t,function(n,e){i(n,function(t){o(r(),t,e.event(),n)})})}var i=function(n,e){zB.getState(n).get().each(function(t){e(t,n)})};return b(Ep(n,t),[n(qO,function(t,n,e){n.onAction(t,{name:e.name()})})])},HF=function(r,t){function n(t,o){return bn(t,function(n,e){i(n,function(t){o(r(),t,e.event(),n)})})}var i=function(n,e){zB.getState(n).get().each(function(t){e(t.internalDialog,n)})};return b(Ep(n,t),[n(KO,function(t,n){return n.onSubmit(t)}),n(GO,function(t,n,e){n.onChange(t,{name:e.name()})}),n(qO,function(t,n,e,o){function r(){return rk.focusIn(o)}var i=Uo();n.onAction(t,{name:e.name(),value:e.value()}),Uo().fold(function(){r()},function(t){!sb(o.element(),t)||Yn(t,"disabled")?r():sb(t,i.getOrNull())&&Yn(i.getOrDie(),"disabled")&&r()})}),n(QO,function(t,n,e){n.onTabChange(t,{newTabName:e.name(),oldTabName:e.oldName()})}),dy(function(t){var n=r();Ew.setValue(t,n.getData())})])},NF=kC.deviceType.isTouch(),PF=tinymce.util.Tools.resolve("tinymce.util.URI"),zF=["insertContent","setContent","execCommand","close","block","unblock"],LF=function(t){var s,f,c,l,m=t.backstage,g=t.editor,p=ts(g),e=(l=(c=t).backstage.shared,{open:function(t,n){function e(){uM.hide(u),n()}var o=Zu(Nl({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:ch.none()},"cancel",c.backstage)),r=Rp(),i=Ip(e,l.providers),u=Hy(Pp({lazySink:function(){return l.getSink()},header:Fp(r,i),body:Vp(t,l.providers),footer:ch.some(Hp(Np([],[o.asSpec()]))),onEscape:e,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[bn(YO,e)],eventOrder:{}}));uM.show(u);var a=o.get(u);sk.focus(a)}}),o=(f=(s=t).backstage.shared,{open:function(t,n){function e(t){uM.hide(a),n(t)}var o=Zu(Nl({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:ch.none()},"submit",s.backstage)),r=Nl({name:"no",text:"No",primary:!0,align:"end",disabled:!1,icon:ch.none()},"cancel",s.backstage),i=Rp(),u=Ip(function(){return e(!1)},f.providers),a=Hy(Pp({lazySink:function(){return f.getSink()},header:Fp(i,u),body:Vp(t,f.providers),footer:ch.some(Hp(Np([],[r,o.asSpec()]))),onEscape:function(){return e(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[bn(YO,function(){return e(!1)}),bn(KO,function(){return e(!0)})],eventOrder:{}}));uM.show(a);var c=o.get(a);sk.focus(c)}}),r=function(t,e){return vF.openUrl(function(t){var n=$p(t,{closeWindow:function(){uM.hide(n.dialog),e(n.instanceApi)}},g,m);return uM.show(n.dialog),n.instanceApi},t)},i=function(t,i){return vF.open(function(t,n,e){var o=n,r=qp({dataValidator:e,initialData:o,internalDialog:t},{redial:vF.redial,closeWindow:function(){uM.hide(r.dialog),i(r.instanceApi)}},m);return uM.show(r.dialog),r.instanceApi.setData(o),r.instanceApi},t)},u=function(t,f,l,d){return vF.open(function(t
,n,e){function o(){return a.on(function(t){RA.refresh(t)})}var r,i,u=lt(ft("data",e,n)),a=(i=Rv(ch.none()),{clear:function(){i.set(ch.none())},set:function(t){i.set(ch.some(t))},isSet:function(){return i.get().isSome()},on:function(t){i.get().each(t)}}),c=Kp({dataValidator:e,initialData:u,internalDialog:t},{redial:vF.redial,closeWindow:function(){a.on(Mk.hide),g.off("ResizeEditor",o),a.clear(),l(c.instanceApi)}},m,d),s=Hy(Mk.sketch({lazySink:m.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},inlineBehaviours:Po(b([_u("window-manager-inline-events",[bn(Xb(),function(){en(c.dialog,YO)})])],(r=g,p?[]:[RA.config({contextual:{lazyContext:function(){return ch.some(Ze(Hv.fromDom(r.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},leftAttr:"data-dock-left",topAttr:"data-dock-top",positionAttr:"data-dock-pos",modes:["top"]})])))}));return a.set(s),Mk.showWithin(s,f,Ny(c.dialog),ch.some(cy())),p||(RA.refresh(s),g.on("ResizeEditor",o)),c.instanceApi.setData(u),rk.focusIn(c.dialog),c.instanceApi},t)};return{open:function(t,n,e){return n!==undefined&&"toolbar"===n.inline?u(t,m.shared.anchors.toolbar(),e,n.ariaAttrs):n!==undefined&&"cursor"===n.inline?u(t,m.shared.anchors.cursor(),e,n.ariaAttrs):i(t,e)},openUrl:function(t,n){return r(t,n)},alert:function(t,n){e.open(t,function(){n()})},close:function(t){t.close()},confirm:function(t,n){o.open(t,function(t){n(t)})}}};!function $F(){rh.add("silver",function(t){var n=nM(t),e=n.uiMothership,o=n.backstage,r=n.renderUI,i=n.getUi;TO(t,o.shared);var u=LF({editor:t,backstage:o});return{renderUI:r,getWindowManagerImpl:nh(u),getNotificationManagerImpl:function(){return ea(0,{backstage:o},e)},ui:i()}})}()}(window);
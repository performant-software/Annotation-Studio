<%= content_for :body_id, 'documents' %>
<%= content_for :body_class, 'index' %>
<%= content_for :page_title, 'Documents' %>
<%= stylesheet_link_tag "documents" %>
<!-- <div class="row"> -->
<!--   <form class="form&#45;inline"> -->
<!--     <select class="form&#45;control form&#45;control&#45;sm ml&#45;3 w&#45;75" searchable="Search here.."> -->
<!--       <option value="1" disabled selected>Search For</option> -->
<!--       <option value="Title" class="rounded&#45;circle">Title</option> -->
<!--       <option value="Author" class="rounded&#45;circle">Author</option> -->
<!--       <option value="Edition" class="rounded&#45;circle">Edition</option> -->
<!--     </select> -->
<!--     <input class="form&#45;control form&#45;control&#45;sm ml&#45;3 w&#45;75" type="text" placeholder="Search" aria&#45;label="Search"> -->
<!--     <a class="btn btn&#45;primary " href="/documents" > -->
<!--       Search -->
<!--     </a> -->
<!--   </form> -->
<!-- </div> -->
<div class="row">
  <div class="col-md-4">
    <%= form_tag(documents_path, :method => "get", class: 'navbar-form navbar-left') do %>
      <div class="input-group">
        <%= search_field_tag :title, params[:title], placeholder: "Title", class: "form-control" %>
        <div class="input-group-btn">
          <%= button_tag "", :class => 'btn btn-info glyphicon glyphicon-search',:name => nil%>
        </div>
      </div>
    <% end %>
  </div>
  <div class="col-md-4">
    <%= form_tag(documents_path, :method => "get", class: 'navbar-form navbar-left') do %>
      <div class="input-group">
        <%= search_field_tag :author, params[:author], placeholder: "Author", class: "form-control" %>
        <div class="input-group-btn">
          <%= button_tag "", :class => 'btn btn-info glyphicon glyphicon-search',:name => nil%>
        </div>
      </div>
    <% end %>
  </div>
  <div class="col-md-4">
    <%= form_tag(documents_path, :method => "get", class: 'navbar-form navbar-left') do %>
      <div class="input-group">
        <%= search_field_tag :edition, params[:edition], placeholder: "Edition", class: "form-control" %>
        <div class="input-group-btn">
          <%= button_tag "", :class => 'btn btn-info glyphicon glyphicon-search',:name => nil%>
        </div>
      </div>
    <% end %>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <div class="panel panel-default" id="dashboard-documents">
      <div class="panel-heading">
        <span class="panel-title">
          <%= link_to "Documents", documents_path %></span>
        <ul class="nav nav-tabs nav-tabs-xs pull-right" id="document-tabs" role="tablist">
<<<<<<< Updated upstream
          <li class="<%= @tab_state['assigned'] %>" id="assigned-tab">
            <%= link_to documents_path( docs: 'assigned' ) do %>
              <span class='badge'><%= @assigned_documents_count %></span> Shared
            <% end %>
          </li>
          <li class="<%= @tab_state['created'] %>" id="created-tab">
            <%= link_to documents_path( docs: 'created' ) do %>
=======
          <li class="<%= @tab_state['assigned'] %>">
            <%= link_to documents_path( docs: 'assigned', title: params[:title],author: params[:author], edition: params[:edition] ), params do %>
              <span class='badge'><%= @assigned_documents_count %></span> Shared
            <% end %>
          </li>
          <li class="<%= @tab_state['created'] %>">
            <%= link_to documents_path( docs: 'created', title: params[:title],author: params[:author], edition: params[:edition] ),params do %>
>>>>>>> Stashed changes
              <span class='badge'><%= @created_documents_count %></span> Mine
            <% end %>
          </li>
          <% if can? :manage, Document %>
<<<<<<< Updated upstream
            <li class="<%= @tab_state['all'] %>" id="all-tab">
              <%= link_to documents_path( docs: 'all' ) do %>
=======
            <li class="<%= @tab_state['all'] %>">
              <%= link_to documents_path( docs: 'all', title: params[:title],author: params[:author], edition: params[:edition] ), params do %>
>>>>>>> Stashed changes
                <span class='badge'><%= @all_documents_count %></span> All
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
      <!-- / .panel-heading -->
      <div class="tab-content">
        <div class="tab-pane no-padding active" id="all">
          <%= render partial: 'document_table', locals: { documents: @documents } %>
        </div>
      </div>
      <div class="panel-footer doc-set-footer">
        <% if can? :create, Document %>
          <%= link_to document_path('new'), class: 'btn btn-primary create-new-button' do %>
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Create New Document
          <% end %>
        <% end %>
        <div class='pagination-controls'>
          <%= will_paginate @documents, renderer: BootstrapPagination::Rails %>
        </div>
      </div>
    </div><!--/panel -->
  </div><!--/col-md-12 -->
</div><!--/row -->


<script type="text/javascript">
  $(document).ready(
    function(){
      var hash = window.location.hash
      if (hash.length > 0){
        setTimeout(function(){
          console.log(hash);
          $(hash + "-tab").tab('show');
        },10);
      }
    }
  );
</script>
